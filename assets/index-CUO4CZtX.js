import{GoogleGenAI as kd,Type as ss}from"@google/genai";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function dy(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jd={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function Bx(){if(x0)return Go;x0=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(a,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var f in l)f!=="key"&&(u[f]=l[f])}else u=l;return l=u.ref,{$$typeof:o,type:a,key:d,ref:l!==void 0?l:null,props:u}}return Go.Fragment=t,Go.jsx=s,Go.jsxs=s,Go}var S0;function Lx(){return S0||(S0=1,jd.exports=Bx()),jd.exports}var y=Lx(),qd={exports:{}},Bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Ux(){if(T0)return Bt;T0=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function w(A,I,rt){this.props=A,this.context=I,this.refs=C,this.updater=rt||T}w.prototype.isReactComponent={},w.prototype.setState=function(A,I){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,I,"setState")},w.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function O(){}O.prototype=w.prototype;function R(A,I,rt){this.props=A,this.context=I,this.refs=C,this.updater=rt||T}var U=R.prototype=new O;U.constructor=R,S(U,w.prototype),U.isPureReactComponent=!0;var K=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function V(A,I,rt,dt,bt,vt){return rt=vt.ref,{$$typeof:o,type:A,key:I,ref:rt!==void 0?rt:null,props:vt}}function D(A,I){return V(A.type,I,void 0,void 0,void 0,A.props)}function F(A){return typeof A=="object"&&A!==null&&A.$$typeof===o}function P(A){var I={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(rt){return I[rt]})}var Z=/\/+/g;function Q(A,I){return typeof A=="object"&&A!==null&&A.key!=null?P(""+A.key):I.toString(36)}function ft(){}function ut(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(ft,ft):(A.status="pending",A.then(function(I){A.status==="pending"&&(A.status="fulfilled",A.value=I)},function(I){A.status==="pending"&&(A.status="rejected",A.reason=I)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function _t(A,I,rt,dt,bt){var vt=typeof A;(vt==="undefined"||vt==="boolean")&&(A=null);var gt=!1;if(A===null)gt=!0;else switch(vt){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(A.$$typeof){case o:case t:gt=!0;break;case g:return gt=A._init,_t(gt(A._payload),I,rt,dt,bt)}}if(gt)return bt=bt(A),gt=dt===""?"."+Q(A,0):dt,K(bt)?(rt="",gt!=null&&(rt=gt.replace(Z,"$&/")+"/"),_t(bt,I,rt,"",function(Qt){return Qt})):bt!=null&&(F(bt)&&(bt=D(bt,rt+(bt.key==null||A&&A.key===bt.key?"":(""+bt.key).replace(Z,"$&/")+"/")+gt)),I.push(bt)),1;gt=0;var Xt=dt===""?".":dt+":";if(K(A))for(var ot=0;ot<A.length;ot++)dt=A[ot],vt=Xt+Q(dt,ot),gt+=_t(dt,I,rt,vt,bt);else if(ot=x(A),typeof ot=="function")for(A=ot.call(A),ot=0;!(dt=A.next()).done;)dt=dt.value,vt=Xt+Q(dt,ot++),gt+=_t(dt,I,rt,vt,bt);else if(vt==="object"){if(typeof A.then=="function")return _t(ut(A),I,rt,dt,bt);throw I=String(A),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return gt}function k(A,I,rt){if(A==null)return A;var dt=[],bt=0;return _t(A,dt,"","",function(vt){return I.call(rt,vt,bt++)}),dt}function W(A){if(A._status===-1){var I=A._result;I=I(),I.then(function(rt){(A._status===0||A._status===-1)&&(A._status=1,A._result=rt)},function(rt){(A._status===0||A._status===-1)&&(A._status=2,A._result=rt)}),A._status===-1&&(A._status=0,A._result=I)}if(A._status===1)return A._result.default;throw A._result}var ct=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function mt(){}return Bt.Children={map:k,forEach:function(A,I,rt){k(A,function(){I.apply(this,arguments)},rt)},count:function(A){var I=0;return k(A,function(){I++}),I},toArray:function(A){return k(A,function(I){return I})||[]},only:function(A){if(!F(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Bt.Component=w,Bt.Fragment=s,Bt.Profiler=l,Bt.PureComponent=R,Bt.StrictMode=a,Bt.Suspense=m,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return E.H.useMemoCache(A)}},Bt.cache=function(A){return function(){return A.apply(null,arguments)}},Bt.cloneElement=function(A,I,rt){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var dt=S({},A.props),bt=A.key,vt=void 0;if(I!=null)for(gt in I.ref!==void 0&&(vt=void 0),I.key!==void 0&&(bt=""+I.key),I)!j.call(I,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&I.ref===void 0||(dt[gt]=I[gt]);var gt=arguments.length-2;if(gt===1)dt.children=rt;else if(1<gt){for(var Xt=Array(gt),ot=0;ot<gt;ot++)Xt[ot]=arguments[ot+2];dt.children=Xt}return V(A.type,bt,void 0,void 0,vt,dt)},Bt.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:u,_context:A},A},Bt.createElement=function(A,I,rt){var dt,bt={},vt=null;if(I!=null)for(dt in I.key!==void 0&&(vt=""+I.key),I)j.call(I,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(bt[dt]=I[dt]);var gt=arguments.length-2;if(gt===1)bt.children=rt;else if(1<gt){for(var Xt=Array(gt),ot=0;ot<gt;ot++)Xt[ot]=arguments[ot+2];bt.children=Xt}if(A&&A.defaultProps)for(dt in gt=A.defaultProps,gt)bt[dt]===void 0&&(bt[dt]=gt[dt]);return V(A,vt,void 0,void 0,null,bt)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(A){return{$$typeof:f,render:A}},Bt.isValidElement=F,Bt.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:W}},Bt.memo=function(A,I){return{$$typeof:p,type:A,compare:I===void 0?null:I}},Bt.startTransition=function(A){var I=E.T,rt={};E.T=rt;try{var dt=A(),bt=E.S;bt!==null&&bt(rt,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(mt,ct)}catch(vt){ct(vt)}finally{E.T=I}},Bt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Bt.use=function(A){return E.H.use(A)},Bt.useActionState=function(A,I,rt){return E.H.useActionState(A,I,rt)},Bt.useCallback=function(A,I){return E.H.useCallback(A,I)},Bt.useContext=function(A){return E.H.useContext(A)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(A,I){return E.H.useDeferredValue(A,I)},Bt.useEffect=function(A,I,rt){var dt=E.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return dt.useEffect(A,I)},Bt.useId=function(){return E.H.useId()},Bt.useImperativeHandle=function(A,I,rt){return E.H.useImperativeHandle(A,I,rt)},Bt.useInsertionEffect=function(A,I){return E.H.useInsertionEffect(A,I)},Bt.useLayoutEffect=function(A,I){return E.H.useLayoutEffect(A,I)},Bt.useMemo=function(A,I){return E.H.useMemo(A,I)},Bt.useOptimistic=function(A,I){return E.H.useOptimistic(A,I)},Bt.useReducer=function(A,I,rt){return E.H.useReducer(A,I,rt)},Bt.useRef=function(A){return E.H.useRef(A)},Bt.useState=function(A){return E.H.useState(A)},Bt.useSyncExternalStore=function(A,I,rt){return E.H.useSyncExternalStore(A,I,rt)},Bt.useTransition=function(){return E.H.useTransition()},Bt.version="19.1.0",Bt}var w0;function ff(){return w0||(w0=1,qd.exports=Ux()),qd.exports}var X=ff();const lu=dy(X);var Vd={exports:{}},Ho={},zd={exports:{}},Bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function Fx(){return A0||(A0=1,function(o){function t(k,W){var ct=k.length;k.push(W);t:for(;0<ct;){var mt=ct-1>>>1,A=k[mt];if(0<l(A,W))k[mt]=W,k[ct]=A,ct=mt;else break t}}function s(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var W=k[0],ct=k.pop();if(ct!==W){k[0]=ct;t:for(var mt=0,A=k.length,I=A>>>1;mt<I;){var rt=2*(mt+1)-1,dt=k[rt],bt=rt+1,vt=k[bt];if(0>l(dt,ct))bt<A&&0>l(vt,dt)?(k[mt]=vt,k[bt]=ct,mt=bt):(k[mt]=dt,k[rt]=ct,mt=rt);else if(bt<A&&0>l(vt,ct))k[mt]=vt,k[bt]=ct,mt=bt;else break t}}return W}function l(k,W){var ct=k.sortIndex-W.sortIndex;return ct!==0?ct:k.id-W.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();o.unstable_now=function(){return d.now()-f}}var m=[],p=[],g=1,v=null,x=3,T=!1,S=!1,C=!1,w=!1,O=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function K(k){for(var W=s(p);W!==null;){if(W.callback===null)a(p);else if(W.startTime<=k)a(p),W.sortIndex=W.expirationTime,t(m,W);else break;W=s(p)}}function E(k){if(C=!1,K(k),!S)if(s(m)!==null)S=!0,j||(j=!0,Q());else{var W=s(p);W!==null&&_t(E,W.startTime-k)}}var j=!1,V=-1,D=5,F=-1;function P(){return w?!0:!(o.unstable_now()-F<D)}function Z(){if(w=!1,j){var k=o.unstable_now();F=k;var W=!0;try{t:{S=!1,C&&(C=!1,R(V),V=-1),T=!0;var ct=x;try{e:{for(K(k),v=s(m);v!==null&&!(v.expirationTime>k&&P());){var mt=v.callback;if(typeof mt=="function"){v.callback=null,x=v.priorityLevel;var A=mt(v.expirationTime<=k);if(k=o.unstable_now(),typeof A=="function"){v.callback=A,K(k),W=!0;break e}v===s(m)&&a(m),K(k)}else a(m);v=s(m)}if(v!==null)W=!0;else{var I=s(p);I!==null&&_t(E,I.startTime-k),W=!1}}break t}finally{v=null,x=ct,T=!1}W=void 0}}finally{W?Q():j=!1}}}var Q;if(typeof U=="function")Q=function(){U(Z)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,ut=ft.port2;ft.port1.onmessage=Z,Q=function(){ut.postMessage(null)}}else Q=function(){O(Z,0)};function _t(k,W){V=O(function(){k(o.unstable_now())},W)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(k){k.callback=null},o.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<k?Math.floor(1e3/k):5},o.unstable_getCurrentPriorityLevel=function(){return x},o.unstable_next=function(k){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var ct=x;x=W;try{return k()}finally{x=ct}},o.unstable_requestPaint=function(){w=!0},o.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ct=x;x=k;try{return W()}finally{x=ct}},o.unstable_scheduleCallback=function(k,W,ct){var mt=o.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?mt+ct:mt):ct=mt,k){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ct+A,k={id:g++,callback:W,priorityLevel:k,startTime:ct,expirationTime:A,sortIndex:-1},ct>mt?(k.sortIndex=ct,t(p,k),s(m)===null&&k===s(p)&&(C?(R(V),V=-1):C=!0,_t(E,ct-mt))):(k.sortIndex=A,t(m,k),S||T||(S=!0,j||(j=!0,Q()))),k},o.unstable_shouldYield=P,o.unstable_wrapCallback=function(k){var W=x;return function(){var ct=x;x=W;try{return k.apply(this,arguments)}finally{x=ct}}}}(Bd)),Bd}var C0;function Ix(){return C0||(C0=1,zd.exports=Fx()),zd.exports}var Ld={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function Gx(){if(N0)return dn;N0=1;var o=ff();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(m,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:m,containerInfo:p,implementation:g}}var d=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,dn.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(m,p,null,g)},dn.flushSync=function(m){var p=d.T,g=a.p;try{if(d.T=null,a.p=2,m)return m()}finally{d.T=p,a.p=g,a.d.f()}},dn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(m,p))},dn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},dn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?a.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):g==="script"&&a.d.X(m,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);a.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(m)},dn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin);a.d.L(m,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=f(p.as,p.crossOrigin);a.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(m)},dn.requestFormReset=function(m){a.d.r(m)},dn.unstable_batchedUpdates=function(m,p){return m(p)},dn.useFormState=function(m,p,g){return d.H.useFormState(m,p,g)},dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var E0;function Hx(){if(E0)return Ld.exports;E0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Ld.exports=Gx(),Ld.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function Px(){if(D0)return Ho;D0=1;var o=Ix(),t=ff(),s=Hx();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(a(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(a(188));return n!==e?null:e}for(var i=e,r=n;;){var c=i.return;if(c===null)break;var h=c.alternate;if(h===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===i)return f(c),e;if(h===r)return f(c),n;h=h.sibling}throw Error(a(188))}if(i.return!==r.return)i=c,r=h;else{for(var _=!1,b=c.child;b;){if(b===i){_=!0,i=c,r=h;break}if(b===r){_=!0,r=c,i=h;break}b=b.sibling}if(!_){for(b=h.child;b;){if(b===i){_=!0,i=h,r=c;break}if(b===r){_=!0,r=h,i=c;break}b=b.sibling}if(!_)throw Error(a(189))}}if(i.alternate!==r)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),U=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case E:return"Suspense";case j:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case U:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case K:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return n=e.displayName||null,n!==null?n:ut(e.type)||"Memo";case D:n=e._payload,e=e._init;try{return ut(e(n))}catch{}}return null}var _t=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},mt=[],A=-1;function I(e){return{current:e}}function rt(e){0>A||(e.current=mt[A],mt[A]=null,A--)}function dt(e,n){A++,mt[A]=e.current,e.current=n}var bt=I(null),vt=I(null),gt=I(null),Xt=I(null);function ot(e,n){switch(dt(gt,n),dt(vt,e),dt(bt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Z_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Z_(n),e=W_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(bt),dt(bt,e)}function Qt(){rt(bt),rt(vt),rt(gt)}function pe(e){e.memoizedState!==null&&dt(Xt,e);var n=bt.current,i=W_(n,e.type);n!==i&&(dt(vt,e),dt(bt,i))}function je(e){vt.current===e&&(rt(bt),rt(vt)),Xt.current===e&&(rt(Xt),Bo._currentValue=ct)}var qe=Object.prototype.hasOwnProperty,Yn=o.unstable_scheduleCallback,Tn=o.unstable_cancelCallback,et=o.unstable_shouldYield,xt=o.unstable_requestPaint,Ht=o.unstable_now,te=o.unstable_getCurrentPriorityLevel,Vt=o.unstable_ImmediatePriority,Zt=o.unstable_UserBlockingPriority,_e=o.unstable_NormalPriority,pn=o.unstable_LowPriority,Je=o.unstable_IdlePriority,On=o.log,Ts=o.unstable_setDisableYieldValue,cs=null,$e=null;function Xn(e){if(typeof On=="function"&&Ts(e),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(cs,e)}catch{}}var tn=Math.clz32?Math.clz32:Qr,Yr=Math.log,Xr=Math.LN2;function Qr(e){return e>>>=0,e===0?32:31-(Yr(e)/Xr|0)|0}var ui=256,hi=4194304;function us(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function di(e,n,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,h=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~h,r!==0?c=us(r):(_&=b,_!==0?c=us(_):i||(i=b&~e,i!==0&&(c=us(i))))):(b=r&~h,b!==0?c=us(b):_!==0?c=us(_):i||(i=r&~e,i!==0&&(c=us(i)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,i=n&-n,h>=i||h===32&&(i&4194048)!==0)?n:c}function hs(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Wi(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oa(){var e=ui;return ui<<=1,(ui&4194048)===0&&(ui=256),e}function Ki(){var e=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),e}function Ji(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function zs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function $i(e,n,i,r,c,h){var _=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var b=e.entanglements,N=e.expirationTimes,L=e.hiddenUpdates;for(i=_&~i;0<i;){var J=31-tn(i),st=1<<J;b[J]=0,N[J]=-1;var H=L[J];if(H!==null)for(L[J]=null,J=0;J<H.length;J++){var Y=H[J];Y!==null&&(Y.lane&=-536870913)}i&=~st}r!==0&&at(e,r,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(_&~n))}function at(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var r=31-tn(n);e.entangledLanes|=n,e.entanglements[r]=e.entanglements[r]|1073741824|i&4194090}function Dt(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var r=31-tn(i),c=1<<r;c&n|e[r]&n&&(e[r]|=n),i&=~c}}function yt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function G(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function B(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:m0(e.type))}function nt(e,n){var i=W.p;try{return W.p=e,n()}finally{W.p=i}}var ht=Math.random().toString(36).slice(2),it="__reactFiber$"+ht,At="__reactProps$"+ht,Rt="__reactContainer$"+ht,ee="__reactEvents$"+ht,Ee="__reactListeners$"+ht,De="__reactHandles$"+ht,ws="__reactResources$"+ht,fi="__reactMarker$"+ht;function Cu(e){delete e[it],delete e[At],delete e[ee],delete e[Ee],delete e[De]}function Ma(e){var n=e[it];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Rt]||i[it]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=t0(e);e!==null;){if(i=e[it])return i;e=t0(e)}return n}e=i,i=e.parentNode}return null}function Ra(e){if(e=e[it]||e[Rt]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Zr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function ka(e){var n=e[ws];return n||(n=e[ws]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function He(e){e[fi]=!0}var Bp=new Set,Lp={};function ta(e,n){ja(e,n),ja(e+"Capture",n)}function ja(e,n){for(Lp[e]=n,e=0;e<n.length;e++)Bp.add(n[e])}var Ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Up={},Fp={};function Mv(e){return qe.call(Fp,e)?!0:qe.call(Up,e)?!1:Ov.test(e)?Fp[e]=!0:(Up[e]=!0,!1)}function Ol(e,n,i){if(Mv(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Ml(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Bs(e,n,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+r)}}var Nu,Ip;function qa(e){if(Nu===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Nu=n&&n[1]||"",Ip=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nu+e+Ip}var Eu=!1;function Du(e,n){if(!e||Eu)return"";Eu=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Y){var H=Y}Reflect.construct(e,[],st)}else{try{st.call()}catch(Y){H=Y}e.call(st.prototype)}}else{try{throw Error()}catch(Y){H=Y}(st=e())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=r.DetermineComponentFrameRoot(),_=h[0],b=h[1];if(_&&b){var N=_.split(`
`),L=b.split(`
`);for(c=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(r===N.length||c===L.length)for(r=N.length-1,c=L.length-1;1<=r&&0<=c&&N[r]!==L[c];)c--;for(;1<=r&&0<=c;r--,c--)if(N[r]!==L[c]){if(r!==1||c!==1)do if(r--,c--,0>c||N[r]!==L[c]){var J=`
`+N[r].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=r&&0<=c);break}}}finally{Eu=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?qa(i):""}function Rv(e){switch(e.tag){case 26:case 27:case 5:return qa(e.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 15:return Du(e.type,!1);case 11:return Du(e.type.render,!1);case 1:return Du(e.type,!0);case 31:return qa("Activity");default:return""}}function Gp(e){try{var n="";do n+=Rv(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hp(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function kv(e){var n=Hp(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){r=""+_,h.call(this,_)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Rl(e){e._valueTracker||(e._valueTracker=kv(e))}function Pp(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),r="";return e&&(r=Hp(e)?e.checked?"true":"false":e.value),e=r,e!==i?(n.setValue(e),!0):!1}function kl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jv=/[\n"\\]/g;function Zn(e){return e.replace(jv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ou(e,n,i,r,c,h,_,b){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Qn(n)):e.value!==""+Qn(n)&&(e.value=""+Qn(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?Mu(e,_,Qn(n)):i!=null?Mu(e,_,Qn(i)):r!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Qn(b):e.removeAttribute("name")}function Yp(e,n,i,r,c,h,_,b){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;i=i!=null?""+Qn(i):"",n=n!=null?""+Qn(n):i,b||n===e.value||(e.value=n),e.defaultValue=n}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function Mu(e,n,i){n==="number"&&kl(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Va(e,n,i,r){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Qn(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Xp(e,n,i){if(n!=null&&(n=""+Qn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Qn(i):""}function Qp(e,n,i,r){if(n==null){if(r!=null){if(i!=null)throw Error(a(92));if(_t(r)){if(1<r.length)throw Error(a(93));r=r[0]}i=r}i==null&&(i=""),n=i}i=Qn(n),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r)}function za(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var qv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zp(e,n,i){var r=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":r?e.setProperty(n,i):typeof i!="number"||i===0||qv.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Wp(e,n,i){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in n)r=n[c],n.hasOwnProperty(c)&&i[c]!==r&&Zp(e,c,r)}else for(var h in n)n.hasOwnProperty(h)&&Zp(e,h,n[h])}function Ru(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(e){return zv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ku=null;function ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,La=null;function Kp(e){var n=Ra(e);if(n&&(e=n.stateNode)){var i=e[At]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ou(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Zn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var r=i[n];if(r!==e&&r.form===e.form){var c=r[At]||null;if(!c)throw Error(a(90));Ou(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<i.length;n++)r=i[n],r.form===e.form&&Pp(r)}break t;case"textarea":Xp(e,i.value,i.defaultValue);break t;case"select":n=i.value,n!=null&&Va(e,!!i.multiple,n,!1)}}}var qu=!1;function Jp(e,n,i){if(qu)return e(n,i);qu=!0;try{var r=e(n);return r}finally{if(qu=!1,(Ba!==null||La!==null)&&(vc(),Ba&&(n=Ba,e=La,La=Ba=null,Kp(n),e)))for(n=0;n<e.length;n++)Kp(e[n])}}function Wr(e,n){var i=e.stateNode;if(i===null)return null;var r=i[At]||null;if(r===null)return null;i=r[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,n,typeof i));return i}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=!1;if(Ls)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Vu=!1}var pi=null,zu=null,ql=null;function $p(){if(ql)return ql;var e,n=zu,i=n.length,r,c="value"in pi?pi.value:pi.textContent,h=c.length;for(e=0;e<i&&n[e]===c[e];e++);var _=i-e;for(r=1;r<=_&&n[i-r]===c[h-r];r++);return ql=c.slice(e,1<r?1-r:void 0)}function Vl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function zl(){return!0}function tm(){return!1}function wn(e){function n(i,r,c,h,_){this._reactName=i,this._targetInst=c,this.type=r,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?zl:tm,this.isPropagationStopped=tm,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),n}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bl=wn(ea),Jr=g({},ea,{view:0,detail:0}),Bv=wn(Jr),Bu,Lu,$r,Ll=g({},Jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$r&&($r&&e.type==="mousemove"?(Bu=e.screenX-$r.screenX,Lu=e.screenY-$r.screenY):Lu=Bu=0,$r=e),Bu)},movementY:function(e){return"movementY"in e?e.movementY:Lu}}),em=wn(Ll),Lv=g({},Ll,{dataTransfer:0}),Uv=wn(Lv),Fv=g({},Jr,{relatedTarget:0}),Uu=wn(Fv),Iv=g({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Gv=wn(Iv),Hv=g({},ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=wn(Hv),Yv=g({},ea,{data:0}),nm=wn(Yv),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zv[e])?!!n[e]:!1}function Fu(){return Wv}var Kv=g({},Jr,{key:function(e){if(e.key){var n=Xv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Vl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(e){return e.type==="keypress"?Vl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jv=wn(Kv),$v=g({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sm=wn($v),tb=g({},Jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),eb=wn(tb),nb=g({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),sb=wn(nb),ib=g({},Ll,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ab=wn(ib),rb=g({},ea,{newState:0,oldState:0}),ob=wn(rb),lb=[9,13,27,32],Iu=Ls&&"CompositionEvent"in window,to=null;Ls&&"documentMode"in document&&(to=document.documentMode);var cb=Ls&&"TextEvent"in window&&!to,im=Ls&&(!Iu||to&&8<to&&11>=to),am=" ",rm=!1;function om(e,n){switch(e){case"keyup":return lb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ua=!1;function ub(e,n){switch(e){case"compositionend":return lm(n);case"keypress":return n.which!==32?null:(rm=!0,am);case"textInput":return e=n.data,e===am&&rm?null:e;default:return null}}function hb(e,n){if(Ua)return e==="compositionend"||!Iu&&om(e,n)?(e=$p(),ql=zu=pi=null,Ua=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return im&&n.locale!=="ko"?null:n.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!db[e.type]:n==="textarea"}function um(e,n,i,r){Ba?La?La.push(r):La=[r]:Ba=r,n=Ac(n,"onChange"),0<n.length&&(i=new Bl("onChange","change",null,i,r),e.push({event:i,listeners:n}))}var eo=null,no=null;function fb(e){H_(e,0)}function Ul(e){var n=Zr(e);if(Pp(n))return e}function hm(e,n){if(e==="change")return n}var dm=!1;if(Ls){var Gu;if(Ls){var Hu="oninput"in document;if(!Hu){var fm=document.createElement("div");fm.setAttribute("oninput","return;"),Hu=typeof fm.oninput=="function"}Gu=Hu}else Gu=!1;dm=Gu&&(!document.documentMode||9<document.documentMode)}function pm(){eo&&(eo.detachEvent("onpropertychange",mm),no=eo=null)}function mm(e){if(e.propertyName==="value"&&Ul(no)){var n=[];um(n,no,e,ju(e)),Jp(fb,n)}}function pb(e,n,i){e==="focusin"?(pm(),eo=n,no=i,eo.attachEvent("onpropertychange",mm)):e==="focusout"&&pm()}function mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ul(no)}function gb(e,n){if(e==="click")return Ul(n)}function _b(e,n){if(e==="input"||e==="change")return Ul(n)}function yb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Mn=typeof Object.is=="function"?Object.is:yb;function so(e,n){if(Mn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),r=Object.keys(n);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!qe.call(n,c)||!Mn(e[c],n[c]))return!1}return!0}function gm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _m(e,n){var i=gm(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=n&&r>=n)return{node:i,offset:n-e};e=r}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=gm(i)}}function ym(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ym(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function vm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=kl(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=kl(e.document)}return n}function Pu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var vb=Ls&&"documentMode"in document&&11>=document.documentMode,Fa=null,Yu=null,io=null,Xu=!1;function bm(e,n,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Xu||Fa==null||Fa!==kl(r)||(r=Fa,"selectionStart"in r&&Pu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),io&&so(io,r)||(io=r,r=Ac(Yu,"onSelect"),0<r.length&&(n=new Bl("onSelect","select",null,n,i),e.push({event:n,listeners:r}),n.target=Fa)))}function na(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Ia={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Qu={},xm={};Ls&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function sa(e){if(Qu[e])return Qu[e];if(!Ia[e])return e;var n=Ia[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in xm)return Qu[e]=n[i];return e}var Sm=sa("animationend"),Tm=sa("animationiteration"),wm=sa("animationstart"),bb=sa("transitionrun"),xb=sa("transitionstart"),Sb=sa("transitioncancel"),Am=sa("transitionend"),Cm=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function ds(e,n){Cm.set(e,n),ta(n,[e])}var Nm=new WeakMap;function Wn(e,n){if(typeof e=="object"&&e!==null){var i=Nm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Gp(n)},Nm.set(e,n),n)}return{value:e,source:n,stack:Gp(n)}}var Kn=[],Ga=0,Wu=0;function Fl(){for(var e=Ga,n=Wu=Ga=0;n<e;){var i=Kn[n];Kn[n++]=null;var r=Kn[n];Kn[n++]=null;var c=Kn[n];Kn[n++]=null;var h=Kn[n];if(Kn[n++]=null,r!==null&&c!==null){var _=r.pending;_===null?c.next=c:(c.next=_.next,_.next=c),r.pending=c}h!==0&&Em(i,c,h)}}function Il(e,n,i,r){Kn[Ga++]=e,Kn[Ga++]=n,Kn[Ga++]=i,Kn[Ga++]=r,Wu|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Ku(e,n,i,r){return Il(e,n,i,r),Gl(e)}function Ha(e,n){return Il(e,null,null,n),Gl(e)}function Em(e,n,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,h=e.return;h!==null;)h.childLanes|=i,r=h.alternate,r!==null&&(r.childLanes|=i),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&n!==null&&(c=31-tn(i),e=h.hiddenUpdates,r=e[c],r===null?e[c]=[n]:r.push(n),n.lane=i|536870912),h):null}function Gl(e){if(50<Oo)throw Oo=0,sd=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Pa={};function Tb(e,n,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(e,n,i,r){return new Tb(e,n,i,r)}function Ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Us(e,n){var i=e.alternate;return i===null?(i=Rn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Dm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Hl(e,n,i,r,c,h){var _=0;if(r=e,typeof e=="function")Ju(e)&&(_=1);else if(typeof e=="string")_=Ax(e,i,bt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case F:return e=Rn(31,i,n,c),e.elementType=F,e.lanes=h,e;case S:return ia(i.children,c,h,n);case C:_=8,c|=24;break;case w:return e=Rn(12,i,n,c|2),e.elementType=w,e.lanes=h,e;case E:return e=Rn(13,i,n,c),e.elementType=E,e.lanes=h,e;case j:return e=Rn(19,i,n,c),e.elementType=j,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case U:_=10;break t;case R:_=9;break t;case K:_=11;break t;case V:_=14;break t;case D:_=16,r=null;break t}_=29,i=Error(a(130,e===null?"null":typeof e,"")),r=null}return n=Rn(_,i,n,c),n.elementType=e,n.type=r,n.lanes=h,n}function ia(e,n,i,r){return e=Rn(7,e,r,n),e.lanes=i,e}function $u(e,n,i){return e=Rn(6,e,null,n),e.lanes=i,e}function th(e,n,i){return n=Rn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ya=[],Xa=0,Pl=null,Yl=0,Jn=[],$n=0,aa=null,Fs=1,Is="";function ra(e,n){Ya[Xa++]=Yl,Ya[Xa++]=Pl,Pl=e,Yl=n}function Om(e,n,i){Jn[$n++]=Fs,Jn[$n++]=Is,Jn[$n++]=aa,aa=e;var r=Fs;e=Is;var c=32-tn(r)-1;r&=~(1<<c),i+=1;var h=32-tn(n)+c;if(30<h){var _=c-c%5;h=(r&(1<<_)-1).toString(32),r>>=_,c-=_,Fs=1<<32-tn(n)+c|i<<c|r,Is=h+e}else Fs=1<<h|i<<c|r,Is=e}function eh(e){e.return!==null&&(ra(e,1),Om(e,1,0))}function nh(e){for(;e===Pl;)Pl=Ya[--Xa],Ya[Xa]=null,Yl=Ya[--Xa],Ya[Xa]=null;for(;e===aa;)aa=Jn[--$n],Jn[$n]=null,Is=Jn[--$n],Jn[$n]=null,Fs=Jn[--$n],Jn[$n]=null}var mn=null,we=null,$t=!1,oa=null,As=!1,sh=Error(a(519));function la(e){var n=Error(a(418,""));throw oo(Wn(n,e)),sh}function Mm(e){var n=e.stateNode,i=e.type,r=e.memoizedProps;switch(n[it]=e,n[At]=r,i){case"dialog":Yt("cancel",n),Yt("close",n);break;case"iframe":case"object":case"embed":Yt("load",n);break;case"video":case"audio":for(i=0;i<Ro.length;i++)Yt(Ro[i],n);break;case"source":Yt("error",n);break;case"img":case"image":case"link":Yt("error",n),Yt("load",n);break;case"details":Yt("toggle",n);break;case"input":Yt("invalid",n),Yp(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),Rl(n);break;case"select":Yt("invalid",n);break;case"textarea":Yt("invalid",n),Qp(n,r.value,r.defaultValue,r.children),Rl(n)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||r.suppressHydrationWarning===!0||Q_(n.textContent,i)?(r.popover!=null&&(Yt("beforetoggle",n),Yt("toggle",n)),r.onScroll!=null&&Yt("scroll",n),r.onScrollEnd!=null&&Yt("scrollend",n),r.onClick!=null&&(n.onclick=Cc),n=!0):n=!1,n||la(e)}function Rm(e){for(mn=e.return;mn;)switch(mn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:mn=mn.return}}function ao(e){if(e!==mn)return!1;if(!$t)return Rm(e),$t=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||vd(e.type,e.memoizedProps)),i=!i),i&&we&&la(e),Rm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){we=ps(e.nextSibling);break t}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}we=null}}else n===27?(n=we,Oi(e.type)?(e=Td,Td=null,we=e):we=n):we=mn?ps(e.stateNode.nextSibling):null;return!0}function ro(){we=mn=null,$t=!1}function km(){var e=oa;return e!==null&&(Nn===null?Nn=e:Nn.push.apply(Nn,e),oa=null),e}function oo(e){oa===null?oa=[e]:oa.push(e)}var ih=I(null),ca=null,Gs=null;function mi(e,n,i){dt(ih,n._currentValue),n._currentValue=i}function Hs(e){e._currentValue=ih.current,rt(ih)}function ah(e,n,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===i)break;e=e.return}}function rh(e,n,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var _=c.child;h=h.firstContext;t:for(;h!==null;){var b=h;h=c;for(var N=0;N<n.length;N++)if(b.context===n[N]){h.lanes|=i,b=h.alternate,b!==null&&(b.lanes|=i),ah(h.return,i,e),r||(_=null);break t}h=b.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(a(341));_.lanes|=i,h=_.alternate,h!==null&&(h.lanes|=i),ah(_,i,e),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===e){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function lo(e,n,i,r){e=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var b=c.type;Mn(c.pendingProps.value,_.value)||(e!==null?e.push(b):e=[b])}}else if(c===Xt.current){if(_=c.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Bo):e=[Bo])}c=c.return}e!==null&&rh(n,e,i,r),n.flags|=262144}function Xl(e){for(e=e.firstContext;e!==null;){if(!Mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ua(e){ca=e,Gs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function hn(e){return jm(ca,e)}function Ql(e,n){return ca===null&&ua(e),jm(e,n)}function jm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Gs===null){if(e===null)throw Error(a(308));Gs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Gs=Gs.next=n;return i}var wb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ab=o.unstable_scheduleCallback,Cb=o.unstable_NormalPriority,Le={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oh(){return{controller:new wb,data:new Map,refCount:0}}function co(e){e.refCount--,e.refCount===0&&Ab(Cb,function(){e.controller.abort()})}var uo=null,lh=0,Qa=0,Za=null;function Nb(e,n){if(uo===null){var i=uo=[];lh=0,Qa=ud(),Za={status:"pending",value:void 0,then:function(r){i.push(r)}}}return lh++,n.then(qm,qm),n}function qm(){if(--lh===0&&uo!==null){Za!==null&&(Za.status="fulfilled");var e=uo;uo=null,Qa=0,Za=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Eb(e,n){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=n;for(var c=0;c<i.length;c++)(0,i[c])(n)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}var Vm=k.S;k.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Nb(e,n),Vm!==null&&Vm(e,n)};var ha=I(null);function ch(){var e=ha.current;return e!==null?e:de.pooledCache}function Zl(e,n){n===null?dt(ha,ha.current):dt(ha,n.pool)}function zm(){var e=ch();return e===null?null:{parent:Le._currentValue,pool:e}}var ho=Error(a(460)),Bm=Error(a(474)),Wl=Error(a(542)),uh={then:function(){}};function Lm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kl(){}function Um(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Kl,Kl),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Im(e),e;default:if(typeof n.status=="string")n.then(Kl,Kl);else{if(e=de,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(r){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=r}},function(r){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Im(e),e}throw fo=n,ho}}var fo=null;function Fm(){if(fo===null)throw Error(a(459));var e=fo;return fo=null,e}function Im(e){if(e===ho||e===Wl)throw Error(a(483))}var gi=!1;function hh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _i(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yi(e,n,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ne&2)!==0){var c=r.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),r.pending=n,n=Gl(e),Em(e,null,i),n}return Il(e,r,n,i),Gl(e)}function po(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var r=n.lanes;r&=e.pendingLanes,i|=r,n.lanes=i,Dt(e,i)}}function fh(e,n){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?c=h=_:h=h.next=_,i=i.next}while(i!==null);h===null?c=h=n:h=h.next=n}else c=h=n;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var ph=!1;function mo(){if(ph){var e=Za;if(e!==null)throw e}}function go(e,n,i,r){ph=!1;var c=e.updateQueue;gi=!1;var h=c.firstBaseUpdate,_=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var N=b,L=N.next;N.next=null,_===null?h=L:_.next=L,_=N;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==_&&(b===null?J.firstBaseUpdate=L:b.next=L,J.lastBaseUpdate=N))}if(h!==null){var st=c.baseState;_=0,J=L=N=null,b=h;do{var H=b.lane&-536870913,Y=H!==b.lane;if(Y?(Wt&H)===H:(r&H)===H){H!==0&&H===Qa&&(ph=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var kt=e,Ot=b;H=n;var re=i;switch(Ot.tag){case 1:if(kt=Ot.payload,typeof kt=="function"){st=kt.call(re,st,H);break t}st=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Ot.payload,H=typeof kt=="function"?kt.call(re,st,H):kt,H==null)break t;st=g({},st,H);break t;case 2:gi=!0}}H=b.callback,H!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=c.callbacks,Y===null?c.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(L=J=Y,N=st):J=J.next=Y,_|=H;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,c.lastBaseUpdate=Y,c.shared.pending=null}}while(!0);J===null&&(N=st),c.baseState=N,c.firstBaseUpdate=L,c.lastBaseUpdate=J,h===null&&(c.shared.lanes=0),Ci|=_,e.lanes=_,e.memoizedState=st}}function Gm(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Hm(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Gm(i[e],n)}var Wa=I(null),Jl=I(0);function Pm(e,n){e=Ks,dt(Jl,e),dt(Wa,n),Ks=e|n.baseLanes}function mh(){dt(Jl,Ks),dt(Wa,Wa.current)}function gh(){Ks=Jl.current,rt(Wa),rt(Jl)}var vi=0,Ut=null,ie=null,Ve=null,$l=!1,Ka=!1,da=!1,tc=0,_o=0,Ja=null,Db=0;function Oe(){throw Error(a(321))}function _h(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!Mn(e[i],n[i]))return!1;return!0}function yh(e,n,i,r,c,h){return vi=h,Ut=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Eg:Dg,da=!1,h=i(r,c),da=!1,Ka&&(h=Xm(n,i,r,c)),Ym(e),h}function Ym(e){k.H=rc;var n=ie!==null&&ie.next!==null;if(vi=0,Ve=ie=Ut=null,$l=!1,_o=0,Ja=null,n)throw Error(a(300));e===null||Pe||(e=e.dependencies,e!==null&&Xl(e)&&(Pe=!0))}function Xm(e,n,i,r){Ut=e;var c=0;do{if(Ka&&(Ja=null),_o=0,Ka=!1,25<=c)throw Error(a(301));if(c+=1,Ve=ie=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}k.H=Vb,h=n(i,r)}while(Ka);return h}function Ob(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?yo(n):n,e=e.useState()[0],(ie!==null?ie.memoizedState:null)!==e&&(Ut.flags|=1024),n}function vh(){var e=tc!==0;return tc=0,e}function bh(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function xh(e){if($l){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}$l=!1}vi=0,Ve=ie=Ut=null,Ka=!1,_o=tc=0,Ja=null}function An(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Ut.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function ze(){if(ie===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=ie.next;var n=Ve===null?Ut.memoizedState:Ve.next;if(n!==null)Ve=n,ie=e;else{if(e===null)throw Ut.alternate===null?Error(a(467)):Error(a(310));ie=e,e={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Ve===null?Ut.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(e){var n=_o;return _o+=1,Ja===null&&(Ja=[]),e=Um(Ja,e,n),n=Ut,(Ve===null?n.memoizedState:Ve.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Eg:Dg),e}function ec(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return yo(e);if(e.$$typeof===U)return hn(e)}throw Error(a(438,String(e)))}function Th(e){var n=null,i=Ut.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var r=Ut.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Sh(),Ut.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),r=0;r<e;r++)i[r]=P;return n.index++,i}function Ps(e,n){return typeof n=="function"?n(e):n}function nc(e){var n=ze();return wh(n,ie,e)}function wh(e,n,i){var r=e.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var c=e.baseQueue,h=r.pending;if(h!==null){if(c!==null){var _=c.next;c.next=h.next,h.next=_}n.baseQueue=c=h,r.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{n=c.next;var b=_=null,N=null,L=n,J=!1;do{var st=L.lane&-536870913;if(st!==L.lane?(Wt&st)===st:(vi&st)===st){var H=L.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),st===Qa&&(J=!0);else if((vi&H)===H){L=L.next,H===Qa&&(J=!0);continue}else st={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(b=N=st,_=h):N=N.next=st,Ut.lanes|=H,Ci|=H;st=L.action,da&&i(h,st),h=L.hasEagerState?L.eagerState:i(h,st)}else H={lane:st,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(b=N=H,_=h):N=N.next=H,Ut.lanes|=st,Ci|=st;L=L.next}while(L!==null&&L!==n);if(N===null?_=h:N.next=b,!Mn(h,e.memoizedState)&&(Pe=!0,J&&(i=Za,i!==null)))throw i;e.memoizedState=h,e.baseState=_,e.baseQueue=N,r.lastRenderedState=h}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ah(e){var n=ze(),i=n.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,h=n.memoizedState;if(c!==null){i.pending=null;var _=c=c.next;do h=e(h,_.action),_=_.next;while(_!==c);Mn(h,n.memoizedState)||(Pe=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),i.lastRenderedState=h}return[h,r]}function Qm(e,n,i){var r=Ut,c=ze(),h=$t;if(h){if(i===void 0)throw Error(a(407));i=i()}else i=n();var _=!Mn((ie||c).memoizedState,i);_&&(c.memoizedState=i,Pe=!0),c=c.queue;var b=Km.bind(null,r,c,e);if(vo(2048,8,b,[e]),c.getSnapshot!==n||_||Ve!==null&&Ve.memoizedState.tag&1){if(r.flags|=2048,$a(9,sc(),Wm.bind(null,r,c,i,n),null),de===null)throw Error(a(349));h||(vi&124)!==0||Zm(r,n,i)}return i}function Zm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Ut.updateQueue,n===null?(n=Sh(),Ut.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Wm(e,n,i,r){n.value=i,n.getSnapshot=r,Jm(n)&&$m(e)}function Km(e,n,i){return i(function(){Jm(n)&&$m(e)})}function Jm(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!Mn(e,i)}catch{return!0}}function $m(e){var n=Ha(e,2);n!==null&&zn(n,e,2)}function Ch(e){var n=An();if(typeof e=="function"){var i=e;if(e=i(),da){Xn(!0);try{i()}finally{Xn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},n}function tg(e,n,i,r){return e.baseState=i,wh(e,ie,typeof r=="function"?r:Ps)}function Mb(e,n,i,r,c){if(ac(e))throw Error(a(485));if(e=n.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};k.T!==null?i(!0):h.isTransition=!1,r(h),i=n.pending,i===null?(h.next=n.pending=h,eg(n,h)):(h.next=i.next,n.pending=i.next=h)}}function eg(e,n){var i=n.action,r=n.payload,c=e.state;if(n.isTransition){var h=k.T,_={};k.T=_;try{var b=i(c,r),N=k.S;N!==null&&N(_,b),ng(e,n,b)}catch(L){Nh(e,n,L)}finally{k.T=h}}else try{h=i(c,r),ng(e,n,h)}catch(L){Nh(e,n,L)}}function ng(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){sg(e,n,r)},function(r){return Nh(e,n,r)}):sg(e,n,i)}function sg(e,n,i){n.status="fulfilled",n.value=i,ig(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,eg(e,i)))}function Nh(e,n,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=i,ig(n),n=n.next;while(n!==r)}e.action=null}function ig(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function ag(e,n){return n}function rg(e,n){if($t){var i=de.formState;if(i!==null){t:{var r=Ut;if($t){if(we){e:{for(var c=we,h=As;c.nodeType!==8;){if(!h){c=null;break e}if(c=ps(c.nextSibling),c===null){c=null;break e}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){we=ps(c.nextSibling),r=c.data==="F!";break t}}la(r)}r=!1}r&&(n=i[0])}}return i=An(),i.memoizedState=i.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ag,lastRenderedState:n},i.queue=r,i=Ag.bind(null,Ut,r),r.dispatch=i,r=Ch(!1),h=Rh.bind(null,Ut,!1,r.queue),r=An(),c={state:n,dispatch:null,action:e,pending:null},r.queue=c,i=Mb.bind(null,Ut,c,h,i),c.dispatch=i,r.memoizedState=e,[n,i,!1]}function og(e){var n=ze();return lg(n,ie,e)}function lg(e,n,i){if(n=wh(e,n,ag)[0],e=nc(Ps)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=yo(n)}catch(_){throw _===ho?Wl:_}else r=n;n=ze();var c=n.queue,h=c.dispatch;return i!==n.memoizedState&&(Ut.flags|=2048,$a(9,sc(),Rb.bind(null,c,i),null)),[r,h,e]}function Rb(e,n){e.action=n}function cg(e){var n=ze(),i=ie;if(i!==null)return lg(n,i,e);ze(),n=n.memoizedState,i=ze();var r=i.queue.dispatch;return i.memoizedState=e,[n,r,!1]}function $a(e,n,i,r){return e={tag:e,create:i,deps:r,inst:n,next:null},n=Ut.updateQueue,n===null&&(n=Sh(),Ut.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,n.lastEffect=e),e}function sc(){return{destroy:void 0,resource:void 0}}function ug(){return ze().memoizedState}function ic(e,n,i,r){var c=An();r=r===void 0?null:r,Ut.flags|=e,c.memoizedState=$a(1|n,sc(),i,r)}function vo(e,n,i,r){var c=ze();r=r===void 0?null:r;var h=c.memoizedState.inst;ie!==null&&r!==null&&_h(r,ie.memoizedState.deps)?c.memoizedState=$a(n,h,i,r):(Ut.flags|=e,c.memoizedState=$a(1|n,h,i,r))}function hg(e,n){ic(8390656,8,e,n)}function dg(e,n){vo(2048,8,e,n)}function fg(e,n){return vo(4,2,e,n)}function pg(e,n){return vo(4,4,e,n)}function mg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function gg(e,n,i){i=i!=null?i.concat([e]):null,vo(4,4,mg.bind(null,n,e),i)}function Eh(){}function _g(e,n){var i=ze();n=n===void 0?null:n;var r=i.memoizedState;return n!==null&&_h(n,r[1])?r[0]:(i.memoizedState=[e,n],e)}function yg(e,n){var i=ze();n=n===void 0?null:n;var r=i.memoizedState;if(n!==null&&_h(n,r[1]))return r[0];if(r=e(),da){Xn(!0);try{e()}finally{Xn(!1)}}return i.memoizedState=[r,n],r}function Dh(e,n,i){return i===void 0||(vi&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=x_(),Ut.lanes|=e,Ci|=e,i)}function vg(e,n,i,r){return Mn(i,n)?i:Wa.current!==null?(e=Dh(e,i,r),Mn(e,n)||(Pe=!0),e):(vi&42)===0?(Pe=!0,e.memoizedState=i):(e=x_(),Ut.lanes|=e,Ci|=e,n)}function bg(e,n,i,r,c){var h=W.p;W.p=h!==0&&8>h?h:8;var _=k.T,b={};k.T=b,Rh(e,!1,n,i);try{var N=c(),L=k.S;if(L!==null&&L(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=Eb(N,r);bo(e,n,J,Vn(e))}else bo(e,n,r,Vn(e))}catch(st){bo(e,n,{then:function(){},status:"rejected",reason:st},Vn())}finally{W.p=h,k.T=_}}function kb(){}function Oh(e,n,i,r){if(e.tag!==5)throw Error(a(476));var c=xg(e).queue;bg(e,c,n,ct,i===null?kb:function(){return Sg(e),i(r)})}function xg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:ct},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Sg(e){var n=xg(e).next.queue;bo(e,n,{},Vn())}function Mh(){return hn(Bo)}function Tg(){return ze().memoizedState}function wg(){return ze().memoizedState}function jb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Vn();e=_i(i);var r=yi(n,e,i);r!==null&&(zn(r,n,i),po(r,n,i)),n={cache:oh()},e.payload=n;return}n=n.return}}function qb(e,n,i){var r=Vn();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},ac(e)?Cg(n,i):(i=Ku(e,n,i,r),i!==null&&(zn(i,e,r),Ng(i,n,r)))}function Ag(e,n,i){var r=Vn();bo(e,n,i,r)}function bo(e,n,i,r){var c={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(ac(e))Cg(n,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,b=h(_,i);if(c.hasEagerState=!0,c.eagerState=b,Mn(b,_))return Il(e,n,c,0),de===null&&Fl(),!1}catch{}finally{}if(i=Ku(e,n,c,r),i!==null)return zn(i,e,r),Ng(i,n,r),!0}return!1}function Rh(e,n,i,r){if(r={lane:2,revertLane:ud(),action:r,hasEagerState:!1,eagerState:null,next:null},ac(e)){if(n)throw Error(a(479))}else n=Ku(e,i,r,2),n!==null&&zn(n,e,2)}function ac(e){var n=e.alternate;return e===Ut||n!==null&&n===Ut}function Cg(e,n){Ka=$l=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Ng(e,n,i){if((i&4194048)!==0){var r=n.lanes;r&=e.pendingLanes,i|=r,n.lanes=i,Dt(e,i)}}var rc={readContext:hn,use:ec,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useLayoutEffect:Oe,useInsertionEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useSyncExternalStore:Oe,useId:Oe,useHostTransitionStatus:Oe,useFormState:Oe,useActionState:Oe,useOptimistic:Oe,useMemoCache:Oe,useCacheRefresh:Oe},Eg={readContext:hn,use:ec,useCallback:function(e,n){return An().memoizedState=[e,n===void 0?null:n],e},useContext:hn,useEffect:hg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,ic(4194308,4,mg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return ic(4194308,4,e,n)},useInsertionEffect:function(e,n){ic(4,2,e,n)},useMemo:function(e,n){var i=An();n=n===void 0?null:n;var r=e();if(da){Xn(!0);try{e()}finally{Xn(!1)}}return i.memoizedState=[r,n],r},useReducer:function(e,n,i){var r=An();if(i!==void 0){var c=i(n);if(da){Xn(!0);try{i(n)}finally{Xn(!1)}}}else c=n;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=qb.bind(null,Ut,e),[r.memoizedState,e]},useRef:function(e){var n=An();return e={current:e},n.memoizedState=e},useState:function(e){e=Ch(e);var n=e.queue,i=Ag.bind(null,Ut,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Eh,useDeferredValue:function(e,n){var i=An();return Dh(i,e,n)},useTransition:function(){var e=Ch(!1);return e=bg.bind(null,Ut,e.queue,!0,!1),An().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var r=Ut,c=An();if($t){if(i===void 0)throw Error(a(407));i=i()}else{if(i=n(),de===null)throw Error(a(349));(Wt&124)!==0||Zm(r,n,i)}c.memoizedState=i;var h={value:i,getSnapshot:n};return c.queue=h,hg(Km.bind(null,r,h,e),[e]),r.flags|=2048,$a(9,sc(),Wm.bind(null,r,h,i,n),null),i},useId:function(){var e=An(),n=de.identifierPrefix;if($t){var i=Is,r=Fs;i=(r&~(1<<32-tn(r)-1)).toString(32)+i,n="«"+n+"R"+i,i=tc++,0<i&&(n+="H"+i.toString(32)),n+="»"}else i=Db++,n="«"+n+"r"+i.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:Mh,useFormState:rg,useActionState:rg,useOptimistic:function(e){var n=An();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Rh.bind(null,Ut,!0,i),i.dispatch=n,[e,n]},useMemoCache:Th,useCacheRefresh:function(){return An().memoizedState=jb.bind(null,Ut)}},Dg={readContext:hn,use:ec,useCallback:_g,useContext:hn,useEffect:dg,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:yg,useReducer:nc,useRef:ug,useState:function(){return nc(Ps)},useDebugValue:Eh,useDeferredValue:function(e,n){var i=ze();return vg(i,ie.memoizedState,e,n)},useTransition:function(){var e=nc(Ps)[0],n=ze().memoizedState;return[typeof e=="boolean"?e:yo(e),n]},useSyncExternalStore:Qm,useId:Tg,useHostTransitionStatus:Mh,useFormState:og,useActionState:og,useOptimistic:function(e,n){var i=ze();return tg(i,ie,e,n)},useMemoCache:Th,useCacheRefresh:wg},Vb={readContext:hn,use:ec,useCallback:_g,useContext:hn,useEffect:dg,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:pg,useMemo:yg,useReducer:Ah,useRef:ug,useState:function(){return Ah(Ps)},useDebugValue:Eh,useDeferredValue:function(e,n){var i=ze();return ie===null?Dh(i,e,n):vg(i,ie.memoizedState,e,n)},useTransition:function(){var e=Ah(Ps)[0],n=ze().memoizedState;return[typeof e=="boolean"?e:yo(e),n]},useSyncExternalStore:Qm,useId:Tg,useHostTransitionStatus:Mh,useFormState:cg,useActionState:cg,useOptimistic:function(e,n){var i=ze();return ie!==null?tg(i,ie,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Th,useCacheRefresh:wg},tr=null,xo=0;function oc(e){var n=xo;return xo+=1,tr===null&&(tr=[]),Um(tr,e,n)}function So(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function lc(e,n){throw n.$$typeof===v?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Og(e){var n=e._init;return n(e._payload)}function Mg(e){function n(q,M){if(e){var z=q.deletions;z===null?(q.deletions=[M],q.flags|=16):z.push(M)}}function i(q,M){if(!e)return null;for(;M!==null;)n(q,M),M=M.sibling;return null}function r(q){for(var M=new Map;q!==null;)q.key!==null?M.set(q.key,q):M.set(q.index,q),q=q.sibling;return M}function c(q,M){return q=Us(q,M),q.index=0,q.sibling=null,q}function h(q,M,z){return q.index=z,e?(z=q.alternate,z!==null?(z=z.index,z<M?(q.flags|=67108866,M):z):(q.flags|=67108866,M)):(q.flags|=1048576,M)}function _(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function b(q,M,z,tt){return M===null||M.tag!==6?(M=$u(z,q.mode,tt),M.return=q,M):(M=c(M,z),M.return=q,M)}function N(q,M,z,tt){var St=z.type;return St===S?J(q,M,z.props.children,tt,z.key):M!==null&&(M.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===D&&Og(St)===M.type)?(M=c(M,z.props),So(M,z),M.return=q,M):(M=Hl(z.type,z.key,z.props,null,q.mode,tt),So(M,z),M.return=q,M)}function L(q,M,z,tt){return M===null||M.tag!==4||M.stateNode.containerInfo!==z.containerInfo||M.stateNode.implementation!==z.implementation?(M=th(z,q.mode,tt),M.return=q,M):(M=c(M,z.children||[]),M.return=q,M)}function J(q,M,z,tt,St){return M===null||M.tag!==7?(M=ia(z,q.mode,tt,St),M.return=q,M):(M=c(M,z),M.return=q,M)}function st(q,M,z){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=$u(""+M,q.mode,z),M.return=q,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return z=Hl(M.type,M.key,M.props,null,q.mode,z),So(z,M),z.return=q,z;case T:return M=th(M,q.mode,z),M.return=q,M;case D:var tt=M._init;return M=tt(M._payload),st(q,M,z)}if(_t(M)||Q(M))return M=ia(M,q.mode,z,null),M.return=q,M;if(typeof M.then=="function")return st(q,oc(M),z);if(M.$$typeof===U)return st(q,Ql(q,M),z);lc(q,M)}return null}function H(q,M,z,tt){var St=M!==null?M.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return St!==null?null:b(q,M,""+z,tt);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return z.key===St?N(q,M,z,tt):null;case T:return z.key===St?L(q,M,z,tt):null;case D:return St=z._init,z=St(z._payload),H(q,M,z,tt)}if(_t(z)||Q(z))return St!==null?null:J(q,M,z,tt,null);if(typeof z.then=="function")return H(q,M,oc(z),tt);if(z.$$typeof===U)return H(q,M,Ql(q,z),tt);lc(q,z)}return null}function Y(q,M,z,tt,St){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return q=q.get(z)||null,b(M,q,""+tt,St);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case x:return q=q.get(tt.key===null?z:tt.key)||null,N(M,q,tt,St);case T:return q=q.get(tt.key===null?z:tt.key)||null,L(M,q,tt,St);case D:var It=tt._init;return tt=It(tt._payload),Y(q,M,z,tt,St)}if(_t(tt)||Q(tt))return q=q.get(z)||null,J(M,q,tt,St,null);if(typeof tt.then=="function")return Y(q,M,z,oc(tt),St);if(tt.$$typeof===U)return Y(q,M,z,Ql(M,tt),St);lc(M,tt)}return null}function kt(q,M,z,tt){for(var St=null,It=null,Ct=M,Mt=M=0,Xe=null;Ct!==null&&Mt<z.length;Mt++){Ct.index>Mt?(Xe=Ct,Ct=null):Xe=Ct.sibling;var Jt=H(q,Ct,z[Mt],tt);if(Jt===null){Ct===null&&(Ct=Xe);break}e&&Ct&&Jt.alternate===null&&n(q,Ct),M=h(Jt,M,Mt),It===null?St=Jt:It.sibling=Jt,It=Jt,Ct=Xe}if(Mt===z.length)return i(q,Ct),$t&&ra(q,Mt),St;if(Ct===null){for(;Mt<z.length;Mt++)Ct=st(q,z[Mt],tt),Ct!==null&&(M=h(Ct,M,Mt),It===null?St=Ct:It.sibling=Ct,It=Ct);return $t&&ra(q,Mt),St}for(Ct=r(Ct);Mt<z.length;Mt++)Xe=Y(Ct,q,Mt,z[Mt],tt),Xe!==null&&(e&&Xe.alternate!==null&&Ct.delete(Xe.key===null?Mt:Xe.key),M=h(Xe,M,Mt),It===null?St=Xe:It.sibling=Xe,It=Xe);return e&&Ct.forEach(function(qi){return n(q,qi)}),$t&&ra(q,Mt),St}function Ot(q,M,z,tt){if(z==null)throw Error(a(151));for(var St=null,It=null,Ct=M,Mt=M=0,Xe=null,Jt=z.next();Ct!==null&&!Jt.done;Mt++,Jt=z.next()){Ct.index>Mt?(Xe=Ct,Ct=null):Xe=Ct.sibling;var qi=H(q,Ct,Jt.value,tt);if(qi===null){Ct===null&&(Ct=Xe);break}e&&Ct&&qi.alternate===null&&n(q,Ct),M=h(qi,M,Mt),It===null?St=qi:It.sibling=qi,It=qi,Ct=Xe}if(Jt.done)return i(q,Ct),$t&&ra(q,Mt),St;if(Ct===null){for(;!Jt.done;Mt++,Jt=z.next())Jt=st(q,Jt.value,tt),Jt!==null&&(M=h(Jt,M,Mt),It===null?St=Jt:It.sibling=Jt,It=Jt);return $t&&ra(q,Mt),St}for(Ct=r(Ct);!Jt.done;Mt++,Jt=z.next())Jt=Y(Ct,q,Mt,Jt.value,tt),Jt!==null&&(e&&Jt.alternate!==null&&Ct.delete(Jt.key===null?Mt:Jt.key),M=h(Jt,M,Mt),It===null?St=Jt:It.sibling=Jt,It=Jt);return e&&Ct.forEach(function(zx){return n(q,zx)}),$t&&ra(q,Mt),St}function re(q,M,z,tt){if(typeof z=="object"&&z!==null&&z.type===S&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case x:t:{for(var St=z.key;M!==null;){if(M.key===St){if(St=z.type,St===S){if(M.tag===7){i(q,M.sibling),tt=c(M,z.props.children),tt.return=q,q=tt;break t}}else if(M.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===D&&Og(St)===M.type){i(q,M.sibling),tt=c(M,z.props),So(tt,z),tt.return=q,q=tt;break t}i(q,M);break}else n(q,M);M=M.sibling}z.type===S?(tt=ia(z.props.children,q.mode,tt,z.key),tt.return=q,q=tt):(tt=Hl(z.type,z.key,z.props,null,q.mode,tt),So(tt,z),tt.return=q,q=tt)}return _(q);case T:t:{for(St=z.key;M!==null;){if(M.key===St)if(M.tag===4&&M.stateNode.containerInfo===z.containerInfo&&M.stateNode.implementation===z.implementation){i(q,M.sibling),tt=c(M,z.children||[]),tt.return=q,q=tt;break t}else{i(q,M);break}else n(q,M);M=M.sibling}tt=th(z,q.mode,tt),tt.return=q,q=tt}return _(q);case D:return St=z._init,z=St(z._payload),re(q,M,z,tt)}if(_t(z))return kt(q,M,z,tt);if(Q(z)){if(St=Q(z),typeof St!="function")throw Error(a(150));return z=St.call(z),Ot(q,M,z,tt)}if(typeof z.then=="function")return re(q,M,oc(z),tt);if(z.$$typeof===U)return re(q,M,Ql(q,z),tt);lc(q,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,M!==null&&M.tag===6?(i(q,M.sibling),tt=c(M,z),tt.return=q,q=tt):(i(q,M),tt=$u(z,q.mode,tt),tt.return=q,q=tt),_(q)):i(q,M)}return function(q,M,z,tt){try{xo=0;var St=re(q,M,z,tt);return tr=null,St}catch(Ct){if(Ct===ho||Ct===Wl)throw Ct;var It=Rn(29,Ct,null,q.mode);return It.lanes=tt,It.return=q,It}finally{}}}var er=Mg(!0),Rg=Mg(!1),ts=I(null),Cs=null;function bi(e){var n=e.alternate;dt(Ue,Ue.current&1),dt(ts,e),Cs===null&&(n===null||Wa.current!==null||n.memoizedState!==null)&&(Cs=e)}function kg(e){if(e.tag===22){if(dt(Ue,Ue.current),dt(ts,e),Cs===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Cs=e)}}else xi()}function xi(){dt(Ue,Ue.current),dt(ts,ts.current)}function Ys(e){rt(ts),Cs===e&&(Cs=null),rt(Ue)}var Ue=I(0);function cc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Sd(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function kh(e,n,i,r){n=e.memoizedState,i=i(r,n),i=i==null?n:g({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var jh={enqueueSetState:function(e,n,i){e=e._reactInternals;var r=Vn(),c=_i(r);c.payload=n,i!=null&&(c.callback=i),n=yi(e,c,r),n!==null&&(zn(n,e,r),po(n,e,r))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var r=Vn(),c=_i(r);c.tag=1,c.payload=n,i!=null&&(c.callback=i),n=yi(e,c,r),n!==null&&(zn(n,e,r),po(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Vn(),r=_i(i);r.tag=2,n!=null&&(r.callback=n),n=yi(e,r,i),n!==null&&(zn(n,e,i),po(n,e,i))}};function jg(e,n,i,r,c,h,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,_):n.prototype&&n.prototype.isPureReactComponent?!so(i,r)||!so(c,h):!0}function qg(e,n,i,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,r),n.state!==e&&jh.enqueueReplaceState(n,n.state,null)}function fa(e,n){var i=n;if("ref"in n){i={};for(var r in n)r!=="ref"&&(i[r]=n[r])}if(e=e.defaultProps){i===n&&(i=g({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}var uc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Vg(e){uc(e)}function zg(e){console.error(e)}function Bg(e){uc(e)}function hc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function Lg(e,n,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function qh(e,n,i){return i=_i(i),i.tag=3,i.payload={element:null},i.callback=function(){hc(e,n)},i}function Ug(e){return e=_i(e),e.tag=3,e}function Fg(e,n,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;e.payload=function(){return c(h)},e.callback=function(){Lg(n,i,r)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Lg(n,i,r),typeof c!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function zb(e,n,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=i.alternate,n!==null&&lo(n,i,c,!0),i=ts.current,i!==null){switch(i.tag){case 13:return Cs===null?ad():i.alternate===null&&Ae===0&&(Ae=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===uh?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([r]):n.add(r),od(e,r,c)),!1;case 22:return i.flags|=65536,r===uh?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([r]):i.add(r)),od(e,r,c)),!1}throw Error(a(435,i.tag))}return od(e,r,c),ad(),!1}if($t)return n=ts.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,r!==sh&&(e=Error(a(422),{cause:r}),oo(Wn(e,i)))):(r!==sh&&(n=Error(a(423),{cause:r}),oo(Wn(n,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=Wn(r,i),c=qh(e.stateNode,r,c),fh(e,c),Ae!==4&&(Ae=2)),!1;var h=Error(a(520),{cause:r});if(h=Wn(h,i),Do===null?Do=[h]:Do.push(h),Ae!==4&&(Ae=2),n===null)return!0;r=Wn(r,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=qh(i.stateNode,r,e),fh(i,e),!1;case 1:if(n=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ni===null||!Ni.has(h))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Ug(c),Fg(c,e,i,r),fh(i,c),!1}i=i.return}while(i!==null);return!1}var Ig=Error(a(461)),Pe=!1;function en(e,n,i,r){n.child=e===null?Rg(n,null,i,r):er(n,e.child,i,r)}function Gg(e,n,i,r,c){i=i.render;var h=n.ref;if("ref"in r){var _={};for(var b in r)b!=="ref"&&(_[b]=r[b])}else _=r;return ua(n),r=yh(e,n,i,_,h,c),b=vh(),e!==null&&!Pe?(bh(e,n,c),Xs(e,n,c)):($t&&b&&eh(n),n.flags|=1,en(e,n,r,c),n.child)}function Hg(e,n,i,r,c){if(e===null){var h=i.type;return typeof h=="function"&&!Ju(h)&&h.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=h,Pg(e,n,h,r,c)):(e=Hl(i.type,null,r,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Gh(e,c)){var _=h.memoizedProps;if(i=i.compare,i=i!==null?i:so,i(_,r)&&e.ref===n.ref)return Xs(e,n,c)}return n.flags|=1,e=Us(h,r),e.ref=n.ref,e.return=n,n.child=e}function Pg(e,n,i,r,c){if(e!==null){var h=e.memoizedProps;if(so(h,r)&&e.ref===n.ref)if(Pe=!1,n.pendingProps=r=h,Gh(e,c))(e.flags&131072)!==0&&(Pe=!0);else return n.lanes=e.lanes,Xs(e,n,c)}return Vh(e,n,i,r,c)}function Yg(e,n,i){var r=n.pendingProps,c=r.children,h=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((n.flags&128)!==0){if(r=h!==null?h.baseLanes|i:i,e!==null){for(c=n.child=e.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;n.childLanes=h&~r}else n.childLanes=0,n.child=null;return Xg(e,n,r,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Zl(n,h!==null?h.cachePool:null),h!==null?Pm(n,h):mh(),kg(n);else return n.lanes=n.childLanes=536870912,Xg(e,n,h!==null?h.baseLanes|i:i,i)}else h!==null?(Zl(n,h.cachePool),Pm(n,h),xi(),n.memoizedState=null):(e!==null&&Zl(n,null),mh(),xi());return en(e,n,c,i),n.child}function Xg(e,n,i,r){var c=ch();return c=c===null?null:{parent:Le._currentValue,pool:c},n.memoizedState={baseLanes:i,cachePool:c},e!==null&&Zl(n,null),mh(),kg(n),e!==null&&lo(e,n,r,!0),null}function dc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Vh(e,n,i,r,c){return ua(n),i=yh(e,n,i,r,void 0,c),r=vh(),e!==null&&!Pe?(bh(e,n,c),Xs(e,n,c)):($t&&r&&eh(n),n.flags|=1,en(e,n,i,c),n.child)}function Qg(e,n,i,r,c,h){return ua(n),n.updateQueue=null,i=Xm(n,r,i,c),Ym(e),r=vh(),e!==null&&!Pe?(bh(e,n,h),Xs(e,n,h)):($t&&r&&eh(n),n.flags|=1,en(e,n,i,h),n.child)}function Zg(e,n,i,r,c){if(ua(n),n.stateNode===null){var h=Pa,_=i.contextType;typeof _=="object"&&_!==null&&(h=hn(_)),h=new i(r,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=jh,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=r,h.state=n.memoizedState,h.refs={},hh(n),_=i.contextType,h.context=typeof _=="object"&&_!==null?hn(_):Pa,h.state=n.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(kh(n,i,_,r),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&jh.enqueueReplaceState(h,h.state,null),go(n,r,h,c),mo(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(e===null){h=n.stateNode;var b=n.memoizedProps,N=fa(i,b);h.props=N;var L=h.context,J=i.contextType;_=Pa,typeof J=="object"&&J!==null&&(_=hn(J));var st=i.getDerivedStateFromProps;J=typeof st=="function"||typeof h.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,J||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b||L!==_)&&qg(n,h,r,_),gi=!1;var H=n.memoizedState;h.state=H,go(n,r,h,c),mo(),L=n.memoizedState,b||H!==L||gi?(typeof st=="function"&&(kh(n,i,st,r),L=n.memoizedState),(N=gi||jg(n,i,N,r,H,L,_))?(J||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=L),h.props=r,h.state=L,h.context=_,r=N):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{h=n.stateNode,dh(e,n),_=n.memoizedProps,J=fa(i,_),h.props=J,st=n.pendingProps,H=h.context,L=i.contextType,N=Pa,typeof L=="object"&&L!==null&&(N=hn(L)),b=i.getDerivedStateFromProps,(L=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==st||H!==N)&&qg(n,h,r,N),gi=!1,H=n.memoizedState,h.state=H,go(n,r,h,c),mo();var Y=n.memoizedState;_!==st||H!==Y||gi||e!==null&&e.dependencies!==null&&Xl(e.dependencies)?(typeof b=="function"&&(kh(n,i,b,r),Y=n.memoizedState),(J=gi||jg(n,i,J,r,H,Y,N)||e!==null&&e.dependencies!==null&&Xl(e.dependencies))?(L||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,Y,N),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,Y,N)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=Y),h.props=r,h.state=Y,h.context=N,r=J):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),r=!1)}return h=r,dc(e,n),r=(n.flags&128)!==0,h||r?(h=n.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&r?(n.child=er(n,e.child,null,c),n.child=er(n,null,i,c)):en(e,n,i,c),n.memoizedState=h.state,e=n.child):e=Xs(e,n,c),e}function Wg(e,n,i,r){return ro(),n.flags|=256,en(e,n,i,r),n.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bh(e){return{baseLanes:e,cachePool:zm()}}function Lh(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=es),e}function Kg(e,n,i){var r=n.pendingProps,c=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=e!==null&&e.memoizedState===null?!1:(Ue.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if($t){if(c?bi(n):xi(),$t){var b=we,N;if(N=b){t:{for(N=b,b=As;N.nodeType!==8;){if(!b){b=null;break t}if(N=ps(N.nextSibling),N===null){b=null;break t}}b=N}b!==null?(n.memoizedState={dehydrated:b,treeContext:aa!==null?{id:Fs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},N=Rn(18,null,null,0),N.stateNode=b,N.return=n,n.child=N,mn=n,we=null,N=!0):N=!1}N||la(n)}if(b=n.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Sd(b)?n.lanes=32:n.lanes=536870912,null;Ys(n)}return b=r.children,r=r.fallback,c?(xi(),c=n.mode,b=fc({mode:"hidden",children:b},c),r=ia(r,c,i,null),b.return=n,r.return=n,b.sibling=r,n.child=b,c=n.child,c.memoizedState=Bh(i),c.childLanes=Lh(e,_,i),n.memoizedState=zh,r):(bi(n),Uh(n,b))}if(N=e.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(h)n.flags&256?(bi(n),n.flags&=-257,n=Fh(e,n,i)):n.memoizedState!==null?(xi(),n.child=e.child,n.flags|=128,n=null):(xi(),c=r.fallback,b=n.mode,r=fc({mode:"visible",children:r.children},b),c=ia(c,b,i,null),c.flags|=2,r.return=n,c.return=n,r.sibling=c,n.child=r,er(n,e.child,null,i),r=n.child,r.memoizedState=Bh(i),r.childLanes=Lh(e,_,i),n.memoizedState=zh,n=c);else if(bi(n),Sd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var L=_.dgst;_=L,r=Error(a(419)),r.stack="",r.digest=_,oo({value:r,source:null,stack:null}),n=Fh(e,n,i)}else if(Pe||lo(e,n,i,!1),_=(i&e.childLanes)!==0,Pe||_){if(_=de,_!==null&&(r=i&-i,r=(r&42)!==0?1:yt(r),r=(r&(_.suspendedLanes|i))!==0?0:r,r!==0&&r!==N.retryLane))throw N.retryLane=r,Ha(e,r),zn(_,e,r),Ig;b.data==="$?"||ad(),n=Fh(e,n,i)}else b.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=N.treeContext,we=ps(b.nextSibling),mn=n,$t=!0,oa=null,As=!1,e!==null&&(Jn[$n++]=Fs,Jn[$n++]=Is,Jn[$n++]=aa,Fs=e.id,Is=e.overflow,aa=n),n=Uh(n,r.children),n.flags|=4096);return n}return c?(xi(),c=r.fallback,b=n.mode,N=e.child,L=N.sibling,r=Us(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,L!==null?c=Us(L,c):(c=ia(c,b,i,null),c.flags|=2),c.return=n,r.return=n,r.sibling=c,n.child=r,r=c,c=n.child,b=e.child.memoizedState,b===null?b=Bh(i):(N=b.cachePool,N!==null?(L=Le._currentValue,N=N.parent!==L?{parent:L,pool:L}:N):N=zm(),b={baseLanes:b.baseLanes|i,cachePool:N}),c.memoizedState=b,c.childLanes=Lh(e,_,i),n.memoizedState=zh,r):(bi(n),i=e.child,e=i.sibling,i=Us(i,{mode:"visible",children:r.children}),i.return=n,i.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=i,n.memoizedState=null,i)}function Uh(e,n){return n=fc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function fc(e,n){return e=Rn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Fh(e,n,i){return er(n,e.child,null,i),e=Uh(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Jg(e,n,i){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),ah(e.return,n,i)}function Ih(e,n,i,r,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=i,h.tailMode=c)}function $g(e,n,i){var r=n.pendingProps,c=r.revealOrder,h=r.tail;if(en(e,n,r.children,i),r=Ue.current,(r&2)!==0)r=r&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jg(e,i,n);else if(e.tag===19)Jg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(dt(Ue,r),c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&cc(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Ih(n,!1,c,i,h);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&cc(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ih(n,!0,i,null,h);break;case"together":Ih(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Xs(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ci|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(lo(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,i=Us(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Us(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Gh(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Xl(e)))}function Bb(e,n,i){switch(n.tag){case 3:ot(n,n.stateNode.containerInfo),mi(n,Le,e.memoizedState.cache),ro();break;case 27:case 5:pe(n);break;case 4:ot(n,n.stateNode.containerInfo);break;case 10:mi(n,n.type,n.memoizedProps.value);break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(bi(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Kg(e,n,i):(bi(n),e=Xs(e,n,i),e!==null?e.sibling:null);bi(n);break;case 19:var c=(e.flags&128)!==0;if(r=(i&n.childLanes)!==0,r||(lo(e,n,i,!1),r=(i&n.childLanes)!==0),c){if(r)return $g(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),dt(Ue,Ue.current),r)break;return null;case 22:case 23:return n.lanes=0,Yg(e,n,i);case 24:mi(n,Le,e.memoizedState.cache)}return Xs(e,n,i)}function t_(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Pe=!0;else{if(!Gh(e,i)&&(n.flags&128)===0)return Pe=!1,Bb(e,n,i);Pe=(e.flags&131072)!==0}else Pe=!1,$t&&(n.flags&1048576)!==0&&Om(n,Yl,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var r=n.elementType,c=r._init;if(r=c(r._payload),n.type=r,typeof r=="function")Ju(r)?(e=fa(r,e),n.tag=1,n=Zg(null,n,r,e,i)):(n.tag=0,n=Vh(null,n,r,e,i));else{if(r!=null){if(c=r.$$typeof,c===K){n.tag=11,n=Gg(null,n,r,e,i);break t}else if(c===V){n.tag=14,n=Hg(null,n,r,e,i);break t}}throw n=ut(r)||r,Error(a(306,n,""))}}return n;case 0:return Vh(e,n,n.type,n.pendingProps,i);case 1:return r=n.type,c=fa(r,n.pendingProps),Zg(e,n,r,c,i);case 3:t:{if(ot(n,n.stateNode.containerInfo),e===null)throw Error(a(387));r=n.pendingProps;var h=n.memoizedState;c=h.element,dh(e,n),go(n,r,null,i);var _=n.memoizedState;if(r=_.cache,mi(n,Le,r),r!==h.cache&&rh(n,[Le],i,!0),mo(),r=_.element,h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Wg(e,n,r,i);break t}else if(r!==c){c=Wn(Error(a(424)),n),oo(c),n=Wg(e,n,r,i);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(we=ps(e.firstChild),mn=n,$t=!0,oa=null,As=!0,i=Rg(n,null,r,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ro(),r===c){n=Xs(e,n,i);break t}en(e,n,r,i)}n=n.child}return n;case 26:return dc(e,n),e===null?(i=i0(n.type,null,n.pendingProps,null))?n.memoizedState=i:$t||(i=n.type,e=n.pendingProps,r=Nc(gt.current).createElement(i),r[it]=n,r[At]=e,sn(r,i,e),He(r),n.stateNode=r):n.memoizedState=i0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return pe(n),e===null&&$t&&(r=n.stateNode=e0(n.type,n.pendingProps,gt.current),mn=n,As=!0,c=we,Oi(n.type)?(Td=c,we=ps(r.firstChild)):we=c),en(e,n,n.pendingProps.children,i),dc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&$t&&((c=r=we)&&(r=dx(r,n.type,n.pendingProps,As),r!==null?(n.stateNode=r,mn=n,we=ps(r.firstChild),As=!1,c=!0):c=!1),c||la(n)),pe(n),c=n.type,h=n.pendingProps,_=e!==null?e.memoizedProps:null,r=h.children,vd(c,h)?r=null:_!==null&&vd(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=yh(e,n,Ob,null,null,i),Bo._currentValue=c),dc(e,n),en(e,n,r,i),n.child;case 6:return e===null&&$t&&((e=i=we)&&(i=fx(i,n.pendingProps,As),i!==null?(n.stateNode=i,mn=n,we=null,e=!0):e=!1),e||la(n)),null;case 13:return Kg(e,n,i);case 4:return ot(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=er(n,null,r,i):en(e,n,r,i),n.child;case 11:return Gg(e,n,n.type,n.pendingProps,i);case 7:return en(e,n,n.pendingProps,i),n.child;case 8:return en(e,n,n.pendingProps.children,i),n.child;case 12:return en(e,n,n.pendingProps.children,i),n.child;case 10:return r=n.pendingProps,mi(n,n.type,r.value),en(e,n,r.children,i),n.child;case 9:return c=n.type._context,r=n.pendingProps.children,ua(n),c=hn(c),r=r(c),n.flags|=1,en(e,n,r,i),n.child;case 14:return Hg(e,n,n.type,n.pendingProps,i);case 15:return Pg(e,n,n.type,n.pendingProps,i);case 19:return $g(e,n,i);case 31:return r=n.pendingProps,i=n.mode,r={mode:r.mode,children:r.children},e===null?(i=fc(r,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=Us(e.child,r),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Yg(e,n,i);case 24:return ua(n),r=hn(Le),e===null?(c=ch(),c===null&&(c=de,h=oh(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=i),c=h),n.memoizedState={parent:r,cache:c},hh(n),mi(n,Le,c)):((e.lanes&i)!==0&&(dh(e,n),go(n,null,null,i),mo()),c=e.memoizedState,h=n.memoizedState,c.parent!==r?(c={parent:r,cache:r},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),mi(n,Le,r)):(r=h.cache,mi(n,Le,r),r!==c.cache&&rh(n,[Le],i,!0))),en(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Qs(e){e.flags|=4}function e_(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!c0(n)){if(n=ts.current,n!==null&&((Wt&4194048)===Wt?Cs!==null:(Wt&62914560)!==Wt&&(Wt&536870912)===0||n!==Cs))throw fo=uh,Bm;e.flags|=8192}}function pc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ki():536870912,e.lanes|=n,ar|=n)}function To(e,n){if(!$t)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Te(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,n}function Lb(e,n,i){var r=n.pendingProps;switch(nh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(n),null;case 1:return Te(n),null;case 3:return i=n.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Hs(Le),Qt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ao(n)?Qs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,km())),Te(n),null;case 26:return i=n.memoizedState,e===null?(Qs(n),i!==null?(Te(n),e_(n,i)):(Te(n),n.flags&=-16777217)):i?i!==e.memoizedState?(Qs(n),Te(n),e_(n,i)):(Te(n),n.flags&=-16777217):(e.memoizedProps!==r&&Qs(n),Te(n),n.flags&=-16777217),null;case 27:je(n),i=gt.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(!r){if(n.stateNode===null)throw Error(a(166));return Te(n),null}e=bt.current,ao(n)?Mm(n):(e=e0(c,r,i),n.stateNode=e,Qs(n))}return Te(n),null;case 5:if(je(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(!r){if(n.stateNode===null)throw Error(a(166));return Te(n),null}if(e=bt.current,ao(n))Mm(n);else{switch(c=Nc(gt.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?c.createElement("select",{is:r.is}):c.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?c.createElement(i,{is:r.is}):c.createElement(i)}}e[it]=n,e[At]=r;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(sn(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qs(n)}}return Te(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(a(166));if(e=gt.current,ao(n)){if(e=n.stateNode,i=n.memoizedProps,r=null,c=mn,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[it]=n,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||Q_(e.nodeValue,i)),e||la(n)}else e=Nc(e).createTextNode(r),e[it]=n,n.stateNode=e}return Te(n),null;case 13:if(r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ao(n),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[it]=n}else ro(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Te(n),c=!1}else c=km(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Ys(n),n):(Ys(n),null)}if(Ys(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=r!==null,e=e!==null&&e.memoizedState!==null,i){r=n.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var h=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),pc(n,n.updateQueue),Te(n),null;case 4:return Qt(),e===null&&pd(n.stateNode.containerInfo),Te(n),null;case 10:return Hs(n.type),Te(n),null;case 19:if(rt(Ue),c=n.memoizedState,c===null)return Te(n),null;if(r=(n.flags&128)!==0,h=c.rendering,h===null)if(r)To(c,!1);else{if(Ae!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=cc(e),h!==null){for(n.flags|=128,To(c,!1),e=h.updateQueue,n.updateQueue=e,pc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Dm(i,e),i=i.sibling;return dt(Ue,Ue.current&1|2),n.child}e=e.sibling}c.tail!==null&&Ht()>_c&&(n.flags|=128,r=!0,To(c,!1),n.lanes=4194304)}else{if(!r)if(e=cc(h),e!==null){if(n.flags|=128,r=!0,e=e.updateQueue,n.updateQueue=e,pc(n,e),To(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!$t)return Te(n),null}else 2*Ht()-c.renderingStartTime>_c&&i!==536870912&&(n.flags|=128,r=!0,To(c,!1),n.lanes=4194304);c.isBackwards?(h.sibling=n.child,n.child=h):(e=c.last,e!==null?e.sibling=h:n.child=h,c.last=h)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ht(),n.sibling=null,e=Ue.current,dt(Ue,r?e&1|2:e&1),n):(Te(n),null);case 22:case 23:return Ys(n),gh(),r=n.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(i&536870912)!==0&&(n.flags&128)===0&&(Te(n),n.subtreeFlags&6&&(n.flags|=8192)):Te(n),i=n.updateQueue,i!==null&&pc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048),e!==null&&rt(ha),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Hs(Le),Te(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function Ub(e,n){switch(nh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hs(Le),Qt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return je(n),null;case 13:if(Ys(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));ro()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return rt(Ue),null;case 4:return Qt(),null;case 10:return Hs(n.type),null;case 22:case 23:return Ys(n),gh(),e!==null&&rt(ha),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hs(Le),null;case 25:return null;default:return null}}function n_(e,n){switch(nh(n),n.tag){case 3:Hs(Le),Qt();break;case 26:case 27:case 5:je(n);break;case 4:Qt();break;case 13:Ys(n);break;case 19:rt(Ue);break;case 10:Hs(n.type);break;case 22:case 23:Ys(n),gh(),e!==null&&rt(ha);break;case 24:Hs(Le)}}function wo(e,n){try{var i=n.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var h=i.create,_=i.inst;r=h(),_.destroy=r}i=i.next}while(i!==c)}}catch(b){le(n,n.return,b)}}function Si(e,n,i){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var h=c.next;r=h;do{if((r.tag&e)===e){var _=r.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,c=n;var N=i,L=b;try{L()}catch(J){le(c,N,J)}}}r=r.next}while(r!==h)}}catch(J){le(n,n.return,J)}}function s_(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Hm(n,i)}catch(r){le(e,e.return,r)}}}function i_(e,n,i){i.props=fa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){le(e,n,r)}}function Ao(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){le(e,n,c)}}function Ns(e,n){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){le(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){le(e,n,c)}else i.current=null}function a_(e){var n=e.type,i=e.memoizedProps,r=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break t;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(c){le(e,e.return,c)}}function Hh(e,n,i){try{var r=e.stateNode;ox(r,e.type,i,n),r[At]=n}catch(c){le(e,e.return,c)}}function r_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Oi(e.type)||e.tag===4}function Ph(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||r_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Oi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yh(e,n,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Cc));else if(r!==4&&(r===27&&Oi(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Yh(e,n,i),e=e.sibling;e!==null;)Yh(e,n,i),e=e.sibling}function mc(e,n,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(r!==4&&(r===27&&Oi(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(mc(e,n,i),e=e.sibling;e!==null;)mc(e,n,i),e=e.sibling}function o_(e){var n=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);sn(n,r,i),n[it]=e,n[At]=i}catch(h){le(e,e.return,h)}}var Zs=!1,Me=!1,Xh=!1,l_=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Fb(e,n){if(e=e.containerInfo,_d=kc,e=vm(e),Pu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var c=r.anchorOffset,h=r.focusNode;r=r.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break t}var _=0,b=-1,N=-1,L=0,J=0,st=e,H=null;e:for(;;){for(var Y;st!==i||c!==0&&st.nodeType!==3||(b=_+c),st!==h||r!==0&&st.nodeType!==3||(N=_+r),st.nodeType===3&&(_+=st.nodeValue.length),(Y=st.firstChild)!==null;)H=st,st=Y;for(;;){if(st===e)break e;if(H===i&&++L===c&&(b=_),H===h&&++J===r&&(N=_),(Y=st.nextSibling)!==null)break;st=H,H=st.parentNode}st=Y}i=b===-1||N===-1?null:{start:b,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(yd={focusedElem:e,selectionRange:i},kc=!1,Ye=n;Ye!==null;)if(n=Ye,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Ye=e;else for(;Ye!==null;){switch(n=Ye,h=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,i=n,c=h.memoizedProps,h=h.memoizedState,r=i.stateNode;try{var kt=fa(i.type,c,i.elementType===i.type);e=r.getSnapshotBeforeUpdate(kt,h),r.__reactInternalSnapshotBeforeUpdate=e}catch(Ot){le(i,i.return,Ot)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)xd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Ye=e;break}Ye=n.return}}function c_(e,n,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(e,i),r&4&&wo(5,i);break;case 1:if(Ti(e,i),r&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(_){le(i,i.return,_)}else{var c=fa(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){le(i,i.return,_)}}r&64&&s_(i),r&512&&Ao(i,i.return);break;case 3:if(Ti(e,i),r&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Hm(e,n)}catch(_){le(i,i.return,_)}}break;case 27:n===null&&r&4&&o_(i);case 26:case 5:Ti(e,i),n===null&&r&4&&a_(i),r&512&&Ao(i,i.return);break;case 12:Ti(e,i);break;case 13:Ti(e,i),r&4&&d_(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Wb.bind(null,i),px(e,i))));break;case 22:if(r=i.memoizedState!==null||Zs,!r){n=n!==null&&n.memoizedState!==null||Me,c=Zs;var h=Me;Zs=r,(Me=n)&&!h?wi(e,i,(i.subtreeFlags&8772)!==0):Ti(e,i),Zs=c,Me=h}break;case 30:break;default:Ti(e,i)}}function u_(e){var n=e.alternate;n!==null&&(e.alternate=null,u_(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Cu(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ye=null,Cn=!1;function Ws(e,n,i){for(i=i.child;i!==null;)h_(e,n,i),i=i.sibling}function h_(e,n,i){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(cs,i)}catch{}switch(i.tag){case 26:Me||Ns(i,n),Ws(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Me||Ns(i,n);var r=ye,c=Cn;Oi(i.type)&&(ye=i.stateNode,Cn=!1),Ws(e,n,i),jo(i.stateNode),ye=r,Cn=c;break;case 5:Me||Ns(i,n);case 6:if(r=ye,c=Cn,ye=null,Ws(e,n,i),ye=r,Cn=c,ye!==null)if(Cn)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(i.stateNode)}catch(h){le(i,n,h)}else try{ye.removeChild(i.stateNode)}catch(h){le(i,n,h)}break;case 18:ye!==null&&(Cn?(e=ye,$_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Io(e)):$_(ye,i.stateNode));break;case 4:r=ye,c=Cn,ye=i.stateNode.containerInfo,Cn=!0,Ws(e,n,i),ye=r,Cn=c;break;case 0:case 11:case 14:case 15:Me||Si(2,i,n),Me||Si(4,i,n),Ws(e,n,i);break;case 1:Me||(Ns(i,n),r=i.stateNode,typeof r.componentWillUnmount=="function"&&i_(i,n,r)),Ws(e,n,i);break;case 21:Ws(e,n,i);break;case 22:Me=(r=Me)||i.memoizedState!==null,Ws(e,n,i),Me=r;break;default:Ws(e,n,i)}}function d_(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Io(e)}catch(i){le(n,n.return,i)}}function Ib(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new l_),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new l_),n;default:throw Error(a(435,e.tag))}}function Qh(e,n){var i=Ib(e);n.forEach(function(r){var c=Kb.bind(null,e,r);i.has(r)||(i.add(r),r.then(c,c))})}function kn(e,n){var i=n.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],h=e,_=n,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Oi(b.type)){ye=b.stateNode,Cn=!1;break t}break;case 5:ye=b.stateNode,Cn=!1;break t;case 3:case 4:ye=b.stateNode.containerInfo,Cn=!0;break t}b=b.return}if(ye===null)throw Error(a(160));h_(h,_,c),ye=null,Cn=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)f_(n,e),n=n.sibling}var fs=null;function f_(e,n){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kn(n,e),jn(e),r&4&&(Si(3,e,e.return),wo(3,e),Si(5,e,e.return));break;case 1:kn(n,e),jn(e),r&512&&(Me||i===null||Ns(i,i.return)),r&64&&Zs&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var c=fs;if(kn(n,e),jn(e),r&512&&(Me||i===null||Ns(i,i.return)),r&4){var h=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){t:{r=e.type,i=e.memoizedProps,c=c.ownerDocument||c;e:switch(r){case"title":h=c.getElementsByTagName("title")[0],(!h||h[fi]||h[it]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(r),c.head.insertBefore(h,c.querySelector("head > title"))),sn(h,r,i),h[it]=e,He(h),r=h;break t;case"link":var _=o0("link","href",c).get(r+(i.href||""));if(_){for(var b=0;b<_.length;b++)if(h=_[b],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(b,1);break e}}h=c.createElement(r),sn(h,r,i),c.head.appendChild(h);break;case"meta":if(_=o0("meta","content",c).get(r+(i.content||""))){for(b=0;b<_.length;b++)if(h=_[b],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(b,1);break e}}h=c.createElement(r),sn(h,r,i),c.head.appendChild(h);break;default:throw Error(a(468,r))}h[it]=e,He(h),r=h}e.stateNode=r}else l0(c,e.type,e.stateNode);else e.stateNode=r0(c,r,e.memoizedProps);else h!==r?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,r===null?l0(c,e.type,e.stateNode):r0(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Hh(e,e.memoizedProps,i.memoizedProps)}break;case 27:kn(n,e),jn(e),r&512&&(Me||i===null||Ns(i,i.return)),i!==null&&r&4&&Hh(e,e.memoizedProps,i.memoizedProps);break;case 5:if(kn(n,e),jn(e),r&512&&(Me||i===null||Ns(i,i.return)),e.flags&32){c=e.stateNode;try{za(c,"")}catch(Y){le(e,e.return,Y)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Hh(e,c,i!==null?i.memoizedProps:c)),r&1024&&(Xh=!0);break;case 6:if(kn(n,e),jn(e),r&4){if(e.stateNode===null)throw Error(a(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(Y){le(e,e.return,Y)}}break;case 3:if(Oc=null,c=fs,fs=Ec(n.containerInfo),kn(n,e),fs=c,jn(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Io(n.containerInfo)}catch(Y){le(e,e.return,Y)}Xh&&(Xh=!1,p_(e));break;case 4:r=fs,fs=Ec(e.stateNode.containerInfo),kn(n,e),jn(e),fs=r;break;case 12:kn(n,e),jn(e);break;case 13:kn(n,e),jn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(td=Ht()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Qh(e,r)));break;case 22:c=e.memoizedState!==null;var N=i!==null&&i.memoizedState!==null,L=Zs,J=Me;if(Zs=L||c,Me=J||N,kn(n,e),Me=J,Zs=L,jn(e),r&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(i===null||N||Zs||Me||pa(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){N=i=n;try{if(h=N.stateNode,c)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var st=N.memoizedProps.style,H=st!=null&&st.hasOwnProperty("display")?st.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Y){le(N,N.return,Y)}}}else if(n.tag===6){if(i===null){N=n;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(Y){le(N,N.return,Y)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,Qh(e,i))));break;case 19:kn(n,e),jn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Qh(e,r)));break;case 30:break;case 21:break;default:kn(n,e),jn(e)}}function jn(e){var n=e.flags;if(n&2){try{for(var i,r=e.return;r!==null;){if(r_(r)){i=r;break}r=r.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var c=i.stateNode,h=Ph(e);mc(e,h,c);break;case 5:var _=i.stateNode;i.flags&32&&(za(_,""),i.flags&=-33);var b=Ph(e);mc(e,b,_);break;case 3:case 4:var N=i.stateNode.containerInfo,L=Ph(e);Yh(e,L,N);break;default:throw Error(a(161))}}catch(J){le(e,e.return,J)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function p_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;p_(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ti(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)c_(e,n.alternate,n),n=n.sibling}function pa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Si(4,n,n.return),pa(n);break;case 1:Ns(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&i_(n,n.return,i),pa(n);break;case 27:jo(n.stateNode);case 26:case 5:Ns(n,n.return),pa(n);break;case 22:n.memoizedState===null&&pa(n);break;case 30:pa(n);break;default:pa(n)}e=e.sibling}}function wi(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,c=e,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:wi(c,h,i),wo(4,h);break;case 1:if(wi(c,h,i),r=h,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){le(r,r.return,L)}if(r=h,c=r.updateQueue,c!==null){var b=r.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)Gm(N[c],b)}catch(L){le(r,r.return,L)}}i&&_&64&&s_(h),Ao(h,h.return);break;case 27:o_(h);case 26:case 5:wi(c,h,i),i&&r===null&&_&4&&a_(h),Ao(h,h.return);break;case 12:wi(c,h,i);break;case 13:wi(c,h,i),i&&_&4&&d_(c,h);break;case 22:h.memoizedState===null&&wi(c,h,i),Ao(h,h.return);break;case 30:break;default:wi(c,h,i)}n=n.sibling}}function Zh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&co(i))}function Wh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&co(e))}function Es(e,n,i,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)m_(e,n,i,r),n=n.sibling}function m_(e,n,i,r){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Es(e,n,i,r),c&2048&&wo(9,n);break;case 1:Es(e,n,i,r);break;case 3:Es(e,n,i,r),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&co(e)));break;case 12:if(c&2048){Es(e,n,i,r),e=n.stateNode;try{var h=n.memoizedProps,_=h.id,b=h.onPostCommit;typeof b=="function"&&b(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){le(n,n.return,N)}}else Es(e,n,i,r);break;case 13:Es(e,n,i,r);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?Es(e,n,i,r):Co(e,n):h._visibility&2?Es(e,n,i,r):(h._visibility|=2,nr(e,n,i,r,(n.subtreeFlags&10256)!==0)),c&2048&&Zh(_,n);break;case 24:Es(e,n,i,r),c&2048&&Wh(n.alternate,n);break;default:Es(e,n,i,r)}}function nr(e,n,i,r,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=e,_=n,b=i,N=r,L=_.flags;switch(_.tag){case 0:case 11:case 15:nr(h,_,b,N,c),wo(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?nr(h,_,b,N,c):Co(h,_):(J._visibility|=2,nr(h,_,b,N,c)),c&&L&2048&&Zh(_.alternate,_);break;case 24:nr(h,_,b,N,c),c&&L&2048&&Wh(_.alternate,_);break;default:nr(h,_,b,N,c)}n=n.sibling}}function Co(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,r=n,c=r.flags;switch(r.tag){case 22:Co(i,r),c&2048&&Zh(r.alternate,r);break;case 24:Co(i,r),c&2048&&Wh(r.alternate,r);break;default:Co(i,r)}n=n.sibling}}var No=8192;function sr(e){if(e.subtreeFlags&No)for(e=e.child;e!==null;)g_(e),e=e.sibling}function g_(e){switch(e.tag){case 26:sr(e),e.flags&No&&e.memoizedState!==null&&Nx(fs,e.memoizedState,e.memoizedProps);break;case 5:sr(e);break;case 3:case 4:var n=fs;fs=Ec(e.stateNode.containerInfo),sr(e),fs=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=No,No=16777216,sr(e),No=n):sr(e));break;default:sr(e)}}function __(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Eo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];Ye=r,v_(r,e)}__(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)y_(e),e=e.sibling}function y_(e){switch(e.tag){case 0:case 11:case 15:Eo(e),e.flags&2048&&Si(9,e,e.return);break;case 3:Eo(e);break;case 12:Eo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,gc(e)):Eo(e);break;default:Eo(e)}}function gc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];Ye=r,v_(r,e)}__(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Si(8,n,n.return),gc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,gc(n));break;default:gc(n)}e=e.sibling}}function v_(e,n){for(;Ye!==null;){var i=Ye;switch(i.tag){case 0:case 11:case 15:Si(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:co(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Ye=r;else t:for(i=e;Ye!==null;){r=Ye;var c=r.sibling,h=r.return;if(u_(r),r===i){Ye=null;break t}if(c!==null){c.return=h,Ye=c;break t}Ye=h}}}var Gb={getCacheForType:function(e){var n=hn(Le),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},Hb=typeof WeakMap=="function"?WeakMap:Map,ne=0,de=null,Pt=null,Wt=0,se=0,qn=null,Ai=!1,ir=!1,Kh=!1,Ks=0,Ae=0,Ci=0,ma=0,Jh=0,es=0,ar=0,Do=null,Nn=null,$h=!1,td=0,_c=1/0,yc=null,Ni=null,nn=0,Ei=null,rr=null,or=0,ed=0,nd=null,b_=null,Oo=0,sd=null;function Vn(){if((ne&2)!==0&&Wt!==0)return Wt&-Wt;if(k.T!==null){var e=Qa;return e!==0?e:ud()}return B()}function x_(){es===0&&(es=(Wt&536870912)===0||$t?Oa():536870912);var e=ts.current;return e!==null&&(e.flags|=32),es}function zn(e,n,i){(e===de&&(se===2||se===9)||e.cancelPendingCommit!==null)&&(lr(e,0),Di(e,Wt,es,!1)),zs(e,i),((ne&2)===0||e!==de)&&(e===de&&((ne&2)===0&&(ma|=i),Ae===4&&Di(e,Wt,es,!1)),Ds(e))}function S_(e,n,i){if((ne&6)!==0)throw Error(a(327));var r=!i&&(n&124)===0&&(n&e.expiredLanes)===0||hs(e,n),c=r?Xb(e,n):rd(e,n,!0),h=r;do{if(c===0){ir&&!r&&Di(e,n,0,!1);break}else{if(i=e.current.alternate,h&&!Pb(i)){c=rd(e,n,!1),h=!1;continue}if(c===2){if(h=n,e.errorRecoveryDisabledLanes&h)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var b=e;c=Do;var N=b.current.memoizedState.isDehydrated;if(N&&(lr(b,_).flags|=256),_=rd(b,_,!1),_!==2){if(Kh&&!N){b.errorRecoveryDisabledLanes|=h,ma|=h,c=4;break t}h=Nn,Nn=c,h!==null&&(Nn===null?Nn=h:Nn.push.apply(Nn,h))}c=_}if(h=!1,c!==2)continue}}if(c===1){lr(e,0),Di(e,n,0,!0);break}t:{switch(r=e,h=c,h){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Di(r,n,es,!Ai);break t;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=td+300-Ht(),10<c)){if(Di(r,n,es,!Ai),di(r,0,!0)!==0)break t;r.timeoutHandle=K_(T_.bind(null,r,i,Nn,yc,$h,n,es,ma,ar,Ai,h,2,-0,0),c);break t}T_(r,i,Nn,yc,$h,n,es,ma,ar,Ai,h,0,-0,0)}}break}while(!0);Ds(e)}function T_(e,n,i,r,c,h,_,b,N,L,J,st,H,Y){if(e.timeoutHandle=-1,st=n.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(zo={stylesheets:null,count:0,unsuspend:Cx},g_(n),st=Ex(),st!==null)){e.cancelPendingCommit=st(O_.bind(null,e,n,h,i,r,c,_,b,N,J,1,H,Y)),Di(e,h,_,!L);return}O_(e,n,h,i,r,c,_,b,N)}function Pb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],h=c.getSnapshot;c=c.value;try{if(!Mn(h(),c))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Di(e,n,i,r){n&=~Jh,n&=~ma,e.suspendedLanes|=n,e.pingedLanes&=~n,r&&(e.warmLanes|=n),r=e.expirationTimes;for(var c=n;0<c;){var h=31-tn(c),_=1<<h;r[h]=-1,c&=~_}i!==0&&at(e,i,n)}function vc(){return(ne&6)===0?(Mo(0),!1):!0}function id(){if(Pt!==null){if(se===0)var e=Pt.return;else e=Pt,Gs=ca=null,xh(e),tr=null,xo=0,e=Pt;for(;e!==null;)n_(e.alternate,e),e=e.return;Pt=null}}function lr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,cx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),id(),de=e,Pt=i=Us(e.current,null),Wt=n,se=0,qn=null,Ai=!1,ir=hs(e,n),Kh=!1,ar=es=Jh=ma=Ci=Ae=0,Nn=Do=null,$h=!1,(n&8)!==0&&(n|=n&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=n;0<r;){var c=31-tn(r),h=1<<c;n|=e[c],r&=~h}return Ks=n,Fl(),i}function w_(e,n){Ut=null,k.H=rc,n===ho||n===Wl?(n=Fm(),se=3):n===Bm?(n=Fm(),se=4):se=n===Ig?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,qn=n,Pt===null&&(Ae=1,hc(e,Wn(n,e.current)))}function A_(){var e=k.H;return k.H=rc,e===null?rc:e}function C_(){var e=k.A;return k.A=Gb,e}function ad(){Ae=4,Ai||(Wt&4194048)!==Wt&&ts.current!==null||(ir=!0),(Ci&134217727)===0&&(ma&134217727)===0||de===null||Di(de,Wt,es,!1)}function rd(e,n,i){var r=ne;ne|=2;var c=A_(),h=C_();(de!==e||Wt!==n)&&(yc=null,lr(e,n)),n=!1;var _=Ae;t:do try{if(se!==0&&Pt!==null){var b=Pt,N=qn;switch(se){case 8:id(),_=6;break t;case 3:case 2:case 9:case 6:ts.current===null&&(n=!0);var L=se;if(se=0,qn=null,cr(e,b,N,L),i&&ir){_=0;break t}break;default:L=se,se=0,qn=null,cr(e,b,N,L)}}Yb(),_=Ae;break}catch(J){w_(e,J)}while(!0);return n&&e.shellSuspendCounter++,Gs=ca=null,ne=r,k.H=c,k.A=h,Pt===null&&(de=null,Wt=0,Fl()),_}function Yb(){for(;Pt!==null;)N_(Pt)}function Xb(e,n){var i=ne;ne|=2;var r=A_(),c=C_();de!==e||Wt!==n?(yc=null,_c=Ht()+500,lr(e,n)):ir=hs(e,n);t:do try{if(se!==0&&Pt!==null){n=Pt;var h=qn;e:switch(se){case 1:se=0,qn=null,cr(e,n,h,1);break;case 2:case 9:if(Lm(h)){se=0,qn=null,E_(n);break}n=function(){se!==2&&se!==9||de!==e||(se=7),Ds(e)},h.then(n,n);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:Lm(h)?(se=0,qn=null,E_(n)):(se=0,qn=null,cr(e,n,h,7));break;case 5:var _=null;switch(Pt.tag){case 26:_=Pt.memoizedState;case 5:case 27:var b=Pt;if(!_||c0(_)){se=0,qn=null;var N=b.sibling;if(N!==null)Pt=N;else{var L=b.return;L!==null?(Pt=L,bc(L)):Pt=null}break e}}se=0,qn=null,cr(e,n,h,5);break;case 6:se=0,qn=null,cr(e,n,h,6);break;case 8:id(),Ae=6;break t;default:throw Error(a(462))}}Qb();break}catch(J){w_(e,J)}while(!0);return Gs=ca=null,k.H=r,k.A=c,ne=i,Pt!==null?0:(de=null,Wt=0,Fl(),Ae)}function Qb(){for(;Pt!==null&&!et();)N_(Pt)}function N_(e){var n=t_(e.alternate,e,Ks);e.memoizedProps=e.pendingProps,n===null?bc(e):Pt=n}function E_(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Qg(i,n,n.pendingProps,n.type,void 0,Wt);break;case 11:n=Qg(i,n,n.pendingProps,n.type.render,n.ref,Wt);break;case 5:xh(n);default:n_(i,n),n=Pt=Dm(n,Ks),n=t_(i,n,Ks)}e.memoizedProps=e.pendingProps,n===null?bc(e):Pt=n}function cr(e,n,i,r){Gs=ca=null,xh(n),tr=null,xo=0;var c=n.return;try{if(zb(e,c,n,i,Wt)){Ae=1,hc(e,Wn(i,e.current)),Pt=null;return}}catch(h){if(c!==null)throw Pt=c,h;Ae=1,hc(e,Wn(i,e.current)),Pt=null;return}n.flags&32768?($t||r===1?e=!0:ir||(Wt&536870912)!==0?e=!1:(Ai=e=!0,(r===2||r===9||r===3||r===6)&&(r=ts.current,r!==null&&r.tag===13&&(r.flags|=16384))),D_(n,e)):bc(n)}function bc(e){var n=e;do{if((n.flags&32768)!==0){D_(n,Ai);return}e=n.return;var i=Lb(n.alternate,n,Ks);if(i!==null){Pt=i;return}if(n=n.sibling,n!==null){Pt=n;return}Pt=n=e}while(n!==null);Ae===0&&(Ae=5)}function D_(e,n){do{var i=Ub(e.alternate,e);if(i!==null){i.flags&=32767,Pt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Pt=e;return}Pt=e=i}while(e!==null);Ae=6,Pt=null}function O_(e,n,i,r,c,h,_,b,N){e.cancelPendingCommit=null;do xc();while(nn!==0);if((ne&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(h=n.lanes|n.childLanes,h|=Wu,$i(e,i,h,_,b,N),e===de&&(Pt=de=null,Wt=0),rr=n,Ei=e,or=i,ed=h,nd=c,b_=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Jb(_e,function(){return q_(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=k.T,k.T=null,c=W.p,W.p=2,_=ne,ne|=4;try{Fb(e,n,i)}finally{ne=_,W.p=c,k.T=r}}nn=1,M_(),R_(),k_()}}function M_(){if(nn===1){nn=0;var e=Ei,n=rr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=k.T,k.T=null;var r=W.p;W.p=2;var c=ne;ne|=4;try{f_(n,e);var h=yd,_=vm(e.containerInfo),b=h.focusedElem,N=h.selectionRange;if(_!==b&&b&&b.ownerDocument&&ym(b.ownerDocument.documentElement,b)){if(N!==null&&Pu(b)){var L=N.start,J=N.end;if(J===void 0&&(J=L),"selectionStart"in b)b.selectionStart=L,b.selectionEnd=Math.min(J,b.value.length);else{var st=b.ownerDocument||document,H=st&&st.defaultView||window;if(H.getSelection){var Y=H.getSelection(),kt=b.textContent.length,Ot=Math.min(N.start,kt),re=N.end===void 0?Ot:Math.min(N.end,kt);!Y.extend&&Ot>re&&(_=re,re=Ot,Ot=_);var q=_m(b,Ot),M=_m(b,re);if(q&&M&&(Y.rangeCount!==1||Y.anchorNode!==q.node||Y.anchorOffset!==q.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var z=st.createRange();z.setStart(q.node,q.offset),Y.removeAllRanges(),Ot>re?(Y.addRange(z),Y.extend(M.node,M.offset)):(z.setEnd(M.node,M.offset),Y.addRange(z))}}}}for(st=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&st.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<st.length;b++){var tt=st[b];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}kc=!!_d,yd=_d=null}finally{ne=c,W.p=r,k.T=i}}e.current=n,nn=2}}function R_(){if(nn===2){nn=0;var e=Ei,n=rr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=k.T,k.T=null;var r=W.p;W.p=2;var c=ne;ne|=4;try{c_(e,n.alternate,n)}finally{ne=c,W.p=r,k.T=i}}nn=3}}function k_(){if(nn===4||nn===3){nn=0,xt();var e=Ei,n=rr,i=or,r=b_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?nn=5:(nn=0,rr=Ei=null,j_(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ni=null),G(i),n=n.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(cs,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=k.T,c=W.p,W.p=2,k.T=null;try{for(var h=e.onRecoverableError,_=0;_<r.length;_++){var b=r[_];h(b.value,{componentStack:b.stack})}}finally{k.T=n,W.p=c}}(or&3)!==0&&xc(),Ds(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===sd?Oo++:(Oo=0,sd=e):Oo=0,Mo(0)}}function j_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,co(n)))}function xc(e){return M_(),R_(),k_(),q_()}function q_(){if(nn!==5)return!1;var e=Ei,n=ed;ed=0;var i=G(or),r=k.T,c=W.p;try{W.p=32>i?32:i,k.T=null,i=nd,nd=null;var h=Ei,_=or;if(nn=0,rr=Ei=null,or=0,(ne&6)!==0)throw Error(a(331));var b=ne;if(ne|=4,y_(h.current),m_(h,h.current,_,i),ne=b,Mo(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(cs,h)}catch{}return!0}finally{W.p=c,k.T=r,j_(e,n)}}function V_(e,n,i){n=Wn(i,n),n=qh(e.stateNode,n,2),e=yi(e,n,2),e!==null&&(zs(e,2),Ds(e))}function le(e,n,i){if(e.tag===3)V_(e,e,i);else for(;n!==null;){if(n.tag===3){V_(n,e,i);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ni===null||!Ni.has(r))){e=Wn(i,e),i=Ug(2),r=yi(n,i,2),r!==null&&(Fg(i,r,n,e),zs(r,2),Ds(r));break}}n=n.return}}function od(e,n,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Hb;var c=new Set;r.set(n,c)}else c=r.get(n),c===void 0&&(c=new Set,r.set(n,c));c.has(i)||(Kh=!0,c.add(i),e=Zb.bind(null,e,n,i),n.then(e,e))}function Zb(e,n,i){var r=e.pingCache;r!==null&&r.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,de===e&&(Wt&i)===i&&(Ae===4||Ae===3&&(Wt&62914560)===Wt&&300>Ht()-td?(ne&2)===0&&lr(e,0):Jh|=i,ar===Wt&&(ar=0)),Ds(e)}function z_(e,n){n===0&&(n=Ki()),e=Ha(e,n),e!==null&&(zs(e,n),Ds(e))}function Wb(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),z_(e,i)}function Kb(e,n){var i=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(n),z_(e,i)}function Jb(e,n){return Yn(e,n)}var Sc=null,ur=null,ld=!1,Tc=!1,cd=!1,ga=0;function Ds(e){e!==ur&&e.next===null&&(ur===null?Sc=ur=e:ur=ur.next=e),Tc=!0,ld||(ld=!0,tx())}function Mo(e,n){if(!cd&&Tc){cd=!0;do for(var i=!1,r=Sc;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var h=0;else{var _=r.suspendedLanes,b=r.pingedLanes;h=(1<<31-tn(42|e)+1)-1,h&=c&~(_&~b),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,F_(r,h))}else h=Wt,h=di(r,r===de?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(h&3)===0||hs(r,h)||(i=!0,F_(r,h));r=r.next}while(i);cd=!1}}function $b(){B_()}function B_(){Tc=ld=!1;var e=0;ga!==0&&(lx()&&(e=ga),ga=0);for(var n=Ht(),i=null,r=Sc;r!==null;){var c=r.next,h=L_(r,n);h===0?(r.next=null,i===null?Sc=c:i.next=c,c===null&&(ur=i)):(i=r,(e!==0||(h&3)!==0)&&(Tc=!0)),r=c}Mo(e)}function L_(e,n){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var _=31-tn(h),b=1<<_,N=c[_];N===-1?((b&i)===0||(b&r)!==0)&&(c[_]=Wi(b,n)):N<=n&&(e.expiredLanes|=b),h&=~b}if(n=de,i=Wt,i=di(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===n&&(se===2||se===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Tn(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||hs(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(r!==null&&Tn(r),G(i)){case 2:case 8:i=Zt;break;case 32:i=_e;break;case 268435456:i=Je;break;default:i=_e}return r=U_.bind(null,e),i=Yn(i,r),e.callbackPriority=n,e.callbackNode=i,n}return r!==null&&r!==null&&Tn(r),e.callbackPriority=2,e.callbackNode=null,2}function U_(e,n){if(nn!==0&&nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(xc()&&e.callbackNode!==i)return null;var r=Wt;return r=di(e,e===de?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(S_(e,r,n),L_(e,Ht()),e.callbackNode!=null&&e.callbackNode===i?U_.bind(null,e):null)}function F_(e,n){if(xc())return null;S_(e,n,!0)}function tx(){ux(function(){(ne&6)!==0?Yn(Vt,$b):B_()})}function ud(){return ga===0&&(ga=Oa()),ga}function I_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:jl(""+e)}function G_(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function ex(e,n,i,r,c){if(n==="submit"&&i&&i.stateNode===c){var h=I_((c[At]||null).action),_=r.submitter;_&&(n=(n=_[At]||null)?I_(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var b=new Bl("action","action",null,r,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ga!==0){var N=_?G_(c,_):new FormData(c);Oh(i,{pending:!0,data:N,method:c.method,action:h},null,N)}}else typeof h=="function"&&(b.preventDefault(),N=_?G_(c,_):new FormData(c),Oh(i,{pending:!0,data:N,method:c.method,action:h},h,N))},currentTarget:c}]})}}for(var hd=0;hd<Zu.length;hd++){var dd=Zu[hd],nx=dd.toLowerCase(),sx=dd[0].toUpperCase()+dd.slice(1);ds(nx,"on"+sx)}ds(Sm,"onAnimationEnd"),ds(Tm,"onAnimationIteration"),ds(wm,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(bb,"onTransitionRun"),ds(xb,"onTransitionStart"),ds(Sb,"onTransitionCancel"),ds(Am,"onTransitionEnd"),ja("onMouseEnter",["mouseout","mouseover"]),ja("onMouseLeave",["mouseout","mouseover"]),ja("onPointerEnter",["pointerout","pointerover"]),ja("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function H_(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],c=r.event;r=r.listeners;t:{var h=void 0;if(n)for(var _=r.length-1;0<=_;_--){var b=r[_],N=b.instance,L=b.currentTarget;if(b=b.listener,N!==h&&c.isPropagationStopped())break t;h=b,c.currentTarget=L;try{h(c)}catch(J){uc(J)}c.currentTarget=null,h=N}else for(_=0;_<r.length;_++){if(b=r[_],N=b.instance,L=b.currentTarget,b=b.listener,N!==h&&c.isPropagationStopped())break t;h=b,c.currentTarget=L;try{h(c)}catch(J){uc(J)}c.currentTarget=null,h=N}}}}function Yt(e,n){var i=n[ee];i===void 0&&(i=n[ee]=new Set);var r=e+"__bubble";i.has(r)||(P_(n,e,2,!1),i.add(r))}function fd(e,n,i){var r=0;n&&(r|=4),P_(i,e,r,n)}var wc="_reactListening"+Math.random().toString(36).slice(2);function pd(e){if(!e[wc]){e[wc]=!0,Bp.forEach(function(i){i!=="selectionchange"&&(ix.has(i)||fd(i,!1,e),fd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[wc]||(n[wc]=!0,fd("selectionchange",!1,n))}}function P_(e,n,i,r){switch(m0(n)){case 2:var c=Mx;break;case 8:c=Rx;break;default:c=Ed}i=c.bind(null,n,i,e),c=void 0,!Vu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function md(e,n,i,r,c){var h=r;if((n&1)===0&&(n&2)===0&&r!==null)t:for(;;){if(r===null)return;var _=r.tag;if(_===3||_===4){var b=r.stateNode.containerInfo;if(b===c)break;if(_===4)for(_=r.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;b!==null;){if(_=Ma(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){r=h=_;continue t}b=b.parentNode}}r=r.return}Jp(function(){var L=h,J=ju(i),st=[];t:{var H=Cm.get(e);if(H!==void 0){var Y=Bl,kt=e;switch(e){case"keypress":if(Vl(i)===0)break t;case"keydown":case"keyup":Y=Jv;break;case"focusin":kt="focus",Y=Uu;break;case"focusout":kt="blur",Y=Uu;break;case"beforeblur":case"afterblur":Y=Uu;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Uv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=eb;break;case Sm:case Tm:case wm:Y=Gv;break;case Am:Y=sb;break;case"scroll":case"scrollend":Y=Bv;break;case"wheel":Y=ab;break;case"copy":case"cut":case"paste":Y=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=sm;break;case"toggle":case"beforetoggle":Y=ob}var Ot=(n&4)!==0,re=!Ot&&(e==="scroll"||e==="scrollend"),q=Ot?H!==null?H+"Capture":null:H;Ot=[];for(var M=L,z;M!==null;){var tt=M;if(z=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||z===null||q===null||(tt=Wr(M,q),tt!=null&&Ot.push(ko(M,tt,z))),re)break;M=M.return}0<Ot.length&&(H=new Y(H,kt,null,i,J),st.push({event:H,listeners:Ot}))}}if((n&7)===0){t:{if(H=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",H&&i!==ku&&(kt=i.relatedTarget||i.fromElement)&&(Ma(kt)||kt[Rt]))break t;if((Y||H)&&(H=J.window===J?J:(H=J.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(kt=i.relatedTarget||i.toElement,Y=L,kt=kt?Ma(kt):null,kt!==null&&(re=u(kt),Ot=kt.tag,kt!==re||Ot!==5&&Ot!==27&&Ot!==6)&&(kt=null)):(Y=null,kt=L),Y!==kt)){if(Ot=em,tt="onMouseLeave",q="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ot=sm,tt="onPointerLeave",q="onPointerEnter",M="pointer"),re=Y==null?H:Zr(Y),z=kt==null?H:Zr(kt),H=new Ot(tt,M+"leave",Y,i,J),H.target=re,H.relatedTarget=z,tt=null,Ma(J)===L&&(Ot=new Ot(q,M+"enter",kt,i,J),Ot.target=z,Ot.relatedTarget=re,tt=Ot),re=tt,Y&&kt)e:{for(Ot=Y,q=kt,M=0,z=Ot;z;z=hr(z))M++;for(z=0,tt=q;tt;tt=hr(tt))z++;for(;0<M-z;)Ot=hr(Ot),M--;for(;0<z-M;)q=hr(q),z--;for(;M--;){if(Ot===q||q!==null&&Ot===q.alternate)break e;Ot=hr(Ot),q=hr(q)}Ot=null}else Ot=null;Y!==null&&Y_(st,H,Y,Ot,!1),kt!==null&&re!==null&&Y_(st,re,kt,Ot,!0)}}t:{if(H=L?Zr(L):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var St=hm;else if(cm(H))if(dm)St=_b;else{St=mb;var It=pb}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?L&&Ru(L.elementType)&&(St=hm):St=gb;if(St&&(St=St(e,L))){um(st,St,i,J);break t}It&&It(e,H,L),e==="focusout"&&L&&H.type==="number"&&L.memoizedProps.value!=null&&Mu(H,"number",H.value)}switch(It=L?Zr(L):window,e){case"focusin":(cm(It)||It.contentEditable==="true")&&(Fa=It,Yu=L,io=null);break;case"focusout":io=Yu=Fa=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,bm(st,i,J);break;case"selectionchange":if(vb)break;case"keydown":case"keyup":bm(st,i,J)}var Ct;if(Iu)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Ua?om(e,i)&&(Mt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Mt="onCompositionStart");Mt&&(im&&i.locale!=="ko"&&(Ua||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ua&&(Ct=$p()):(pi=J,zu="value"in pi?pi.value:pi.textContent,Ua=!0)),It=Ac(L,Mt),0<It.length&&(Mt=new nm(Mt,e,null,i,J),st.push({event:Mt,listeners:It}),Ct?Mt.data=Ct:(Ct=lm(i),Ct!==null&&(Mt.data=Ct)))),(Ct=cb?ub(e,i):hb(e,i))&&(Mt=Ac(L,"onBeforeInput"),0<Mt.length&&(It=new nm("onBeforeInput","beforeinput",null,i,J),st.push({event:It,listeners:Mt}),It.data=Ct)),ex(st,e,L,i,J)}H_(st,n)})}function ko(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Ac(e,n){for(var i=n+"Capture",r=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Wr(e,i),c!=null&&r.unshift(ko(e,c,h)),c=Wr(e,n),c!=null&&r.push(ko(e,c,h))),e.tag===3)return r;e=e.return}return[]}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Y_(e,n,i,r,c){for(var h=n._reactName,_=[];i!==null&&i!==r;){var b=i,N=b.alternate,L=b.stateNode;if(b=b.tag,N!==null&&N===r)break;b!==5&&b!==26&&b!==27||L===null||(N=L,c?(L=Wr(i,h),L!=null&&_.unshift(ko(i,L,N))):c||(L=Wr(i,h),L!=null&&_.push(ko(i,L,N)))),i=i.return}_.length!==0&&e.push({event:n,listeners:_})}var ax=/\r\n?/g,rx=/\u0000|\uFFFD/g;function X_(e){return(typeof e=="string"?e:""+e).replace(ax,`
`).replace(rx,"")}function Q_(e,n){return n=X_(n),X_(e)===n}function Cc(){}function ae(e,n,i,r,c,h){switch(i){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||za(e,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&za(e,""+r);break;case"className":Ml(e,"class",r);break;case"tabIndex":Ml(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ml(e,i,r);break;case"style":Wp(e,r,h);break;case"data":if(n!=="object"){Ml(e,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=jl(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(n!=="input"&&ae(e,n,"name",c.name,c,null),ae(e,n,"formEncType",c.formEncType,c,null),ae(e,n,"formMethod",c.formMethod,c,null),ae(e,n,"formTarget",c.formTarget,c,null)):(ae(e,n,"encType",c.encType,c,null),ae(e,n,"method",c.method,c,null),ae(e,n,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=jl(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=Cc);break;case"onScroll":r!=null&&Yt("scroll",e);break;case"onScrollEnd":r!=null&&Yt("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=jl(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":Yt("beforetoggle",e),Yt("toggle",e),Ol(e,"popover",r);break;case"xlinkActuate":Bs(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Bs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Bs(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Bs(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Bs(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Bs(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Ol(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Vv.get(i)||i,Ol(e,i,r))}}function gd(e,n,i,r,c,h){switch(i){case"style":Wp(e,r,h);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof r=="string"?za(e,r):(typeof r=="number"||typeof r=="bigint")&&za(e,""+r);break;case"onScroll":r!=null&&Yt("scroll",e);break;case"onScrollEnd":r!=null&&Yt("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lp.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),n=i.slice(2,c?i.length-7:void 0),h=e[At]||null,h=h!=null?h[i]:null,typeof h=="function"&&e.removeEventListener(n,h,c),typeof r=="function")){typeof h!="function"&&h!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,r,c);break t}i in e?e[i]=r:r===!0?e.setAttribute(i,""):Ol(e,i,r)}}}function sn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",e),Yt("load",e);var r=!1,c=!1,h;for(h in i)if(i.hasOwnProperty(h)){var _=i[h];if(_!=null)switch(h){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ae(e,n,h,_,i,null)}}c&&ae(e,n,"srcSet",i.srcSet,i,null),r&&ae(e,n,"src",i.src,i,null);return;case"input":Yt("invalid",e);var b=h=_=c=null,N=null,L=null;for(r in i)if(i.hasOwnProperty(r)){var J=i[r];if(J!=null)switch(r){case"name":c=J;break;case"type":_=J;break;case"checked":N=J;break;case"defaultChecked":L=J;break;case"value":h=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,n));break;default:ae(e,n,r,J,i,null)}}Yp(e,h,b,N,L,_,c,!1),Rl(e);return;case"select":Yt("invalid",e),r=_=h=null;for(c in i)if(i.hasOwnProperty(c)&&(b=i[c],b!=null))switch(c){case"value":h=b;break;case"defaultValue":_=b;break;case"multiple":r=b;default:ae(e,n,c,b,i,null)}n=h,i=_,e.multiple=!!r,n!=null?Va(e,!!r,n,!1):i!=null&&Va(e,!!r,i,!0);return;case"textarea":Yt("invalid",e),h=c=r=null;for(_ in i)if(i.hasOwnProperty(_)&&(b=i[_],b!=null))switch(_){case"value":r=b;break;case"defaultValue":c=b;break;case"children":h=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:ae(e,n,_,b,i,null)}Qp(e,r,c,h),Rl(e);return;case"option":for(N in i)if(i.hasOwnProperty(N)&&(r=i[N],r!=null))switch(N){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ae(e,n,N,r,i,null)}return;case"dialog":Yt("beforetoggle",e),Yt("toggle",e),Yt("cancel",e),Yt("close",e);break;case"iframe":case"object":Yt("load",e);break;case"video":case"audio":for(r=0;r<Ro.length;r++)Yt(Ro[r],e);break;case"image":Yt("error",e),Yt("load",e);break;case"details":Yt("toggle",e);break;case"embed":case"source":case"link":Yt("error",e),Yt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in i)if(i.hasOwnProperty(L)&&(r=i[L],r!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:ae(e,n,L,r,i,null)}return;default:if(Ru(n)){for(J in i)i.hasOwnProperty(J)&&(r=i[J],r!==void 0&&gd(e,n,J,r,i,void 0));return}}for(b in i)i.hasOwnProperty(b)&&(r=i[b],r!=null&&ae(e,n,b,r,i,null))}function ox(e,n,i,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,_=null,b=null,N=null,L=null,J=null;for(Y in i){var st=i[Y];if(i.hasOwnProperty(Y)&&st!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":N=st;default:r.hasOwnProperty(Y)||ae(e,n,Y,null,r,st)}}for(var H in r){var Y=r[H];if(st=i[H],r.hasOwnProperty(H)&&(Y!=null||st!=null))switch(H){case"type":h=Y;break;case"name":c=Y;break;case"checked":L=Y;break;case"defaultChecked":J=Y;break;case"value":_=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,n));break;default:Y!==st&&ae(e,n,H,Y,r,st)}}Ou(e,_,b,N,L,J,h,c);return;case"select":Y=_=b=H=null;for(h in i)if(N=i[h],i.hasOwnProperty(h)&&N!=null)switch(h){case"value":break;case"multiple":Y=N;default:r.hasOwnProperty(h)||ae(e,n,h,null,r,N)}for(c in r)if(h=r[c],N=i[c],r.hasOwnProperty(c)&&(h!=null||N!=null))switch(c){case"value":H=h;break;case"defaultValue":b=h;break;case"multiple":_=h;default:h!==N&&ae(e,n,c,h,r,N)}n=b,i=_,r=Y,H!=null?Va(e,!!i,H,!1):!!r!=!!i&&(n!=null?Va(e,!!i,n,!0):Va(e,!!i,i?[]:"",!1));return;case"textarea":Y=H=null;for(b in i)if(c=i[b],i.hasOwnProperty(b)&&c!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ae(e,n,b,null,r,c)}for(_ in r)if(c=r[_],h=i[_],r.hasOwnProperty(_)&&(c!=null||h!=null))switch(_){case"value":H=c;break;case"defaultValue":Y=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==h&&ae(e,n,_,c,r,h)}Xp(e,H,Y);return;case"option":for(var kt in i)if(H=i[kt],i.hasOwnProperty(kt)&&H!=null&&!r.hasOwnProperty(kt))switch(kt){case"selected":e.selected=!1;break;default:ae(e,n,kt,null,r,H)}for(N in r)if(H=r[N],Y=i[N],r.hasOwnProperty(N)&&H!==Y&&(H!=null||Y!=null))switch(N){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ae(e,n,N,H,r,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in i)H=i[Ot],i.hasOwnProperty(Ot)&&H!=null&&!r.hasOwnProperty(Ot)&&ae(e,n,Ot,null,r,H);for(L in r)if(H=r[L],Y=i[L],r.hasOwnProperty(L)&&H!==Y&&(H!=null||Y!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:ae(e,n,L,H,r,Y)}return;default:if(Ru(n)){for(var re in i)H=i[re],i.hasOwnProperty(re)&&H!==void 0&&!r.hasOwnProperty(re)&&gd(e,n,re,void 0,r,H);for(J in r)H=r[J],Y=i[J],!r.hasOwnProperty(J)||H===Y||H===void 0&&Y===void 0||gd(e,n,J,H,r,Y);return}}for(var q in i)H=i[q],i.hasOwnProperty(q)&&H!=null&&!r.hasOwnProperty(q)&&ae(e,n,q,null,r,H);for(st in r)H=r[st],Y=i[st],!r.hasOwnProperty(st)||H===Y||H==null&&Y==null||ae(e,n,st,H,r,Y)}var _d=null,yd=null;function Nc(e){return e.nodeType===9?e:e.ownerDocument}function Z_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function W_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function vd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bd=null;function lx(){var e=window.event;return e&&e.type==="popstate"?e===bd?!1:(bd=e,!0):(bd=null,!1)}var K_=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,J_=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof J_<"u"?function(e){return J_.resolve(null).then(e).catch(hx)}:K_;function hx(e){setTimeout(function(){throw e})}function Oi(e){return e==="head"}function $_(e,n){var i=n,r=0,c=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(0<r&&8>r){i=r;var _=e.ownerDocument;if(i&1&&jo(_.documentElement),i&2&&jo(_.body),i&4)for(i=_.head,jo(i),_=i.firstChild;_;){var b=_.nextSibling,N=_.nodeName;_[fi]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||i.removeChild(_),_=b}}if(c===0){e.removeChild(h),Io(n);return}c--}else i==="$"||i==="$?"||i==="$!"?c++:r=i.charCodeAt(0)-48;else r=0;i=h}while(i);Io(n)}function xd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":xd(i),Cu(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function dx(e,n,i,r){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[fi])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=ps(e.nextSibling),e===null)break}return null}function fx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ps(e.nextSibling),e===null))return null;return e}function Sd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function px(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var r=function(){n(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ps(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Td=null;function t0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function e0(e,n,i){switch(n=Nc(i),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function jo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Cu(e)}var ns=new Map,n0=new Set;function Ec(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Js=W.d;W.d={f:mx,r:gx,D:_x,C:yx,L:vx,m:bx,X:Sx,S:xx,M:Tx};function mx(){var e=Js.f(),n=vc();return e||n}function gx(e){var n=Ra(e);n!==null&&n.tag===5&&n.type==="form"?Sg(n):Js.r(e)}var dr=typeof document>"u"?null:document;function s0(e,n,i){var r=dr;if(r&&typeof n=="string"&&n){var c=Zn(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),n0.has(c)||(n0.add(c),e={rel:e,crossOrigin:i,href:n},r.querySelector(c)===null&&(n=r.createElement("link"),sn(n,"link",e),He(n),r.head.appendChild(n)))}}function _x(e){Js.D(e),s0("dns-prefetch",e,null)}function yx(e,n){Js.C(e,n),s0("preconnect",e,n)}function vx(e,n,i){Js.L(e,n,i);var r=dr;if(r&&e&&n){var c='link[rel="preload"][as="'+Zn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+Zn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+Zn(i.imageSizes)+'"]')):c+='[href="'+Zn(e)+'"]';var h=c;switch(n){case"style":h=fr(e);break;case"script":h=pr(e)}ns.has(h)||(e=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ns.set(h,e),r.querySelector(c)!==null||n==="style"&&r.querySelector(qo(h))||n==="script"&&r.querySelector(Vo(h))||(n=r.createElement("link"),sn(n,"link",e),He(n),r.head.appendChild(n)))}}function bx(e,n){Js.m(e,n);var i=dr;if(i&&e){var r=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Zn(r)+'"][href="'+Zn(e)+'"]',h=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=pr(e)}if(!ns.has(h)&&(e=g({rel:"modulepreload",href:e},n),ns.set(h,e),i.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Vo(h)))return}r=i.createElement("link"),sn(r,"link",e),He(r),i.head.appendChild(r)}}}function xx(e,n,i){Js.S(e,n,i);var r=dr;if(r&&e){var c=ka(r).hoistableStyles,h=fr(e);n=n||"default";var _=c.get(h);if(!_){var b={loading:0,preload:null};if(_=r.querySelector(qo(h)))b.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ns.get(h))&&wd(e,i);var N=_=r.createElement("link");He(N),sn(N,"link",e),N._p=new Promise(function(L,J){N.onload=L,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Dc(_,n,r)}_={type:"stylesheet",instance:_,count:1,state:b},c.set(h,_)}}}function Sx(e,n){Js.X(e,n);var i=dr;if(i&&e){var r=ka(i).hoistableScripts,c=pr(e),h=r.get(c);h||(h=i.querySelector(Vo(c)),h||(e=g({src:e,async:!0},n),(n=ns.get(c))&&Ad(e,n),h=i.createElement("script"),He(h),sn(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function Tx(e,n){Js.M(e,n);var i=dr;if(i&&e){var r=ka(i).hoistableScripts,c=pr(e),h=r.get(c);h||(h=i.querySelector(Vo(c)),h||(e=g({src:e,async:!0,type:"module"},n),(n=ns.get(c))&&Ad(e,n),h=i.createElement("script"),He(h),sn(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function i0(e,n,i,r){var c=(c=gt.current)?Ec(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=fr(i.href),i=ka(c).hoistableStyles,r=i.get(n),r||(r={type:"style",instance:null,count:0,state:null},i.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=fr(i.href);var h=ka(c).hoistableStyles,_=h.get(e);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,_),(h=c.querySelector(qo(e)))&&!h._p&&(_.instance=h,_.state.loading=5),ns.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ns.set(e,i),h||wx(c,e,i,_.state))),n&&r===null)throw Error(a(528,""));return _}if(n&&r!==null)throw Error(a(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=pr(i),i=ka(c).hoistableScripts,r=i.get(n),r||(r={type:"script",instance:null,count:0,state:null},i.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function fr(e){return'href="'+Zn(e)+'"'}function qo(e){return'link[rel="stylesheet"]['+e+"]"}function a0(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function wx(e,n,i,r){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=e.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),sn(n,"link",i),He(n),e.head.appendChild(n))}function pr(e){return'[src="'+Zn(e)+'"]'}function Vo(e){return"script[async]"+e}function r0(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var r=e.querySelector('style[data-href~="'+Zn(i.href)+'"]');if(r)return n.instance=r,He(r),r;var c=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),He(r),sn(r,"style",c),Dc(r,i.precedence,e),n.instance=r;case"stylesheet":c=fr(i.href);var h=e.querySelector(qo(c));if(h)return n.state.loading|=4,n.instance=h,He(h),h;r=a0(i),(c=ns.get(c))&&wd(r,c),h=(e.ownerDocument||e).createElement("link"),He(h);var _=h;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),sn(h,"link",r),n.state.loading|=4,Dc(h,i.precedence,e),n.instance=h;case"script":return h=pr(i.src),(c=e.querySelector(Vo(h)))?(n.instance=c,He(c),c):(r=i,(c=ns.get(h))&&(r=g({},i),Ad(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),He(c),sn(c,"link",r),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,Dc(r,i.precedence,e));return n.instance}function Dc(e,n,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,h=c,_=0;_<r.length;_++){var b=r[_];if(b.dataset.precedence===n)h=b;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function wd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Ad(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Oc=null;function o0(e,n,i){if(Oc===null){var r=new Map,c=Oc=new Map;c.set(i,r)}else c=Oc,r=c.get(i),r||(r=new Map,c.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var h=i[c];if(!(h[fi]||h[it]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=e+_;var b=r.get(_);b?b.push(h):r.set(_,[h])}}return r}function l0(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Ax(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function c0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var zo=null;function Cx(){}function Nx(e,n,i){if(zo===null)throw Error(a(475));var r=zo;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=fr(i.href),h=e.querySelector(qo(c));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=Mc.bind(r),e.then(r,r)),n.state.loading|=4,n.instance=h,He(h);return}h=e.ownerDocument||e,i=a0(i),(c=ns.get(c))&&wd(i,c),h=h.createElement("link"),He(h);var _=h;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),sn(h,"link",i),n.instance=h}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(r.count++,n=Mc.bind(r),e.addEventListener("load",n),e.addEventListener("error",n))}}function Ex(){if(zo===null)throw Error(a(475));var e=zo;return e.stylesheets&&e.count===0&&Cd(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&Cd(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Mc(){if(this.count--,this.count===0){if(this.stylesheets)Cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Rc=null;function Cd(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Rc=new Map,n.forEach(Dx,e),Rc=null,Mc.call(e))}function Dx(e,n){if(!(n.state.loading&4)){var i=Rc.get(e);if(i)var r=i.get(null);else{i=new Map,Rc.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var _=c[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),r=_)}r&&i.set(null,r)}c=n.instance,_=c.getAttribute("data-precedence"),h=i.get(_)||r,h===r&&i.set(null,c),i.set(_,c),this.count++,r=Mc.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Bo={$$typeof:U,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function Ox(e,n,i,r,c,h,_,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function u0(e,n,i,r,c,h,_,b,N,L,J,st){return e=new Ox(e,n,i,_,b,N,L,st),n=1,h===!0&&(n|=24),h=Rn(3,null,null,n),e.current=h,h.stateNode=e,n=oh(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:r,isDehydrated:i,cache:n},hh(h),e}function h0(e){return e?(e=Pa,e):Pa}function d0(e,n,i,r,c,h){c=h0(c),r.context===null?r.context=c:r.pendingContext=c,r=_i(n),r.payload={element:i},h=h===void 0?null:h,h!==null&&(r.callback=h),i=yi(e,r,n),i!==null&&(zn(i,e,n),po(i,e,n))}function f0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Nd(e,n){f0(e,n),(e=e.alternate)&&f0(e,n)}function p0(e){if(e.tag===13){var n=Ha(e,67108864);n!==null&&zn(n,e,67108864),Nd(e,67108864)}}var kc=!0;function Mx(e,n,i,r){var c=k.T;k.T=null;var h=W.p;try{W.p=2,Ed(e,n,i,r)}finally{W.p=h,k.T=c}}function Rx(e,n,i,r){var c=k.T;k.T=null;var h=W.p;try{W.p=8,Ed(e,n,i,r)}finally{W.p=h,k.T=c}}function Ed(e,n,i,r){if(kc){var c=Dd(r);if(c===null)md(e,n,r,jc,i),g0(e,r);else if(jx(c,e,n,i,r))r.stopPropagation();else if(g0(e,r),n&4&&-1<kx.indexOf(e)){for(;c!==null;){var h=Ra(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=us(h.pendingLanes);if(_!==0){var b=h;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-tn(_);b.entanglements[1]|=N,_&=~N}Ds(h),(ne&6)===0&&(_c=Ht()+500,Mo(0))}}break;case 13:b=Ha(h,2),b!==null&&zn(b,h,2),vc(),Nd(h,2)}if(h=Dd(r),h===null&&md(e,n,r,jc,i),h===c)break;c=h}c!==null&&r.stopPropagation()}else md(e,n,r,null,i)}}function Dd(e){return e=ju(e),Od(e)}var jc=null;function Od(e){if(jc=null,e=Ma(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return jc=e,null}function m0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case Vt:return 2;case Zt:return 8;case _e:case pn:return 32;case Je:return 268435456;default:return 32}default:return 32}}var Md=!1,Mi=null,Ri=null,ki=null,Lo=new Map,Uo=new Map,ji=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(e,n){switch(e){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":Lo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(n.pointerId)}}function Fo(e,n,i,r,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:i,eventSystemFlags:r,nativeEvent:h,targetContainers:[c]},n!==null&&(n=Ra(n),n!==null&&p0(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function jx(e,n,i,r,c){switch(n){case"focusin":return Mi=Fo(Mi,e,n,i,r,c),!0;case"dragenter":return Ri=Fo(Ri,e,n,i,r,c),!0;case"mouseover":return ki=Fo(ki,e,n,i,r,c),!0;case"pointerover":var h=c.pointerId;return Lo.set(h,Fo(Lo.get(h)||null,e,n,i,r,c)),!0;case"gotpointercapture":return h=c.pointerId,Uo.set(h,Fo(Uo.get(h)||null,e,n,i,r,c)),!0}return!1}function _0(e){var n=Ma(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,nt(e.priority,function(){if(i.tag===13){var r=Vn();r=yt(r);var c=Ha(i,r);c!==null&&zn(c,i,r),Nd(i,r)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Dd(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);ku=r,i.target.dispatchEvent(r),ku=null}else return n=Ra(i),n!==null&&p0(n),e.blockedOn=i,!1;n.shift()}return!0}function y0(e,n,i){qc(e)&&i.delete(n)}function qx(){Md=!1,Mi!==null&&qc(Mi)&&(Mi=null),Ri!==null&&qc(Ri)&&(Ri=null),ki!==null&&qc(ki)&&(ki=null),Lo.forEach(y0),Uo.forEach(y0)}function Vc(e,n){e.blockedOn===n&&(e.blockedOn=null,Md||(Md=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,qx)))}var zc=null;function v0(e){zc!==e&&(zc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var n=0;n<e.length;n+=3){var i=e[n],r=e[n+1],c=e[n+2];if(typeof r!="function"){if(Od(r||i)===null)continue;break}var h=Ra(i);h!==null&&(e.splice(n,3),n-=3,Oh(h,{pending:!0,data:c,method:i.method,action:r},r,c))}}))}function Io(e){function n(N){return Vc(N,e)}Mi!==null&&Vc(Mi,e),Ri!==null&&Vc(Ri,e),ki!==null&&Vc(ki,e),Lo.forEach(n),Uo.forEach(n);for(var i=0;i<ji.length;i++){var r=ji[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ji.length&&(i=ji[0],i.blockedOn===null);)_0(i),i.blockedOn===null&&ji.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var c=i[r],h=i[r+1],_=c[At]||null;if(typeof h=="function")_||v0(i);else if(_){var b=null;if(h&&h.hasAttribute("formAction")){if(c=h,_=h[At]||null)b=_.formAction;else if(Od(c)!==null)continue}else b=_.action;typeof b=="function"?i[r+1]=b:(i.splice(r,3),r-=3),v0(i)}}}function Rd(e){this._internalRoot=e}Bc.prototype.render=Rd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var i=n.current,r=Vn();d0(i,r,e,n,null,null)},Bc.prototype.unmount=Rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;d0(e.current,2,null,e,null,null),vc(),n[Rt]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var n=B();e={blockedOn:null,target:e,priority:n};for(var i=0;i<ji.length&&n!==0&&n<ji[i].priority;i++);ji.splice(i,0,e),i===0&&_0(e)}};var b0=t.version;if(b0!=="19.1.0")throw Error(a(527,b0,"19.1.0"));W.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=m(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Vx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{cs=Lc.inject(Vx),$e=Lc}catch{}}return Ho.createRoot=function(e,n){if(!l(e))throw Error(a(299));var i=!1,r="",c=Vg,h=zg,_=Bg,b=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(b=n.unstable_transitionCallbacks)),n=u0(e,1,!1,null,null,i,r,c,h,_,b,null),e[Rt]=n.current,pd(e),new Rd(n)},Ho.hydrateRoot=function(e,n,i){if(!l(e))throw Error(a(299));var r=!1,c="",h=Vg,_=zg,b=Bg,N=null,L=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks),i.formState!==void 0&&(L=i.formState)),n=u0(e,1,!0,n,i??null,r,c,h,_,b,N,L),n.context=h0(null),i=n.current,r=Vn(),r=yt(r),c=_i(r),c.callback=null,yi(i,c,r),i=r,n.current.lanes=i,zs(n,i),Ds(n),e[Rt]=n.current,pd(e),new Bc(n)},Ho.version="19.1.0",Ho}var O0;function Yx(){if(O0)return Vd.exports;O0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Vd.exports=Px(),Vd.exports}var Xx=Yx();const Qx=dy(Xx);var zt=(o=>(o.Major="Maj",o.Minor="min",o.Dominant7th="7",o.Minor7th="m7",o.Major7th="Maj7",o.Diminished7th="dim7",o.Minor7thFlat5="m7b5",o.Suspended2="sus2",o.Suspended4="sus4",o.Major9="Maj9",o.Minor9="m9",o.Dominant9="9",o.Major6="6",o.Minor6="m6",o.Augmented="aug",o.PowerChord="5",o.Dominant7sharp9="7#9",o.Dominant7flat9="7b9",o))(zt||{}),Ze=(o=>(o.AcousticPiano="AcousticPiano",o.SynthPiano="SynthPiano",o.MellowSynth="MellowSynth",o.Synth="Synth",o.FMSynth="FM Synth",o.AMSynth="AM Synth",o.SampledGuitar="SampledGuitar",o.StringEnsemble="StringEnsemble",o))(Ze||{}),ce=(o=>(o.ClassicGrand="ClassicGrand",o.BrightUpright="BrightUpright",o.ElectricPiano="ElectricPiano",o.SimpleSynth="SimpleSynth",o.SampledGrand="SampledGrand",o.SampledGuitar="SampledGuitar",o.StringEnsemble="StringEnsemble",o))(ce||{}),is=(o=>(o.PerMeasure="PerMeasure",o.PerTwoBeats="PerTwoBeats",o.PerBeat="PerBeat",o.PerEighthNote="PerEighthNote",o.PerSixteenthNote="PerSixteenthNote",o.Custom="Custom",o))(is||{}),Gt=(o=>(o.Kick="Kick",o.Snare="Snare",o.HiHatClosed="HiHatClosed",o.Tom1="Tom1",o.CrashCymbal="CrashCymbal",o))(Gt||{}),ue=(o=>(o.Rock="Rock",o.PopFunk="PopFunk",o.JazzSwing="JazzSwing",o.Latin="Latin",o.EDM="EDM",o.Ballad="Ballad",o.SlowPop="SlowPop",o.HipHop="HipHop",o.BossaNova="BossaNova",o.Reggae="Reggae",o.Custom="Custom",o.Off="Off",o))(ue||{}),gs=(o=>(o.ElectricBass="ElectricBass",o.SynthBass="SynthBass",o.AcousticBass="AcousticBass",o.PopPulseBass="PopPulseBass",o))(gs||{}),an=(o=>(o.Off="Off",o.RootNotes="RootNotes",o.RootAndFifth="RootAndFifth",o.SimpleArpeggio="SimpleArpeggio",o.WalkingBassSimple="WalkingBassSimple",o.WalkingBassMelodic="WalkingBassMelodic",o.FunkSlap="FunkSlap",o))(an||{});const pf="15.1.22",M0=(o,t,s)=>({endTime:t,insertTime:s,type:"exponentialRampToValue",value:o}),R0=(o,t,s)=>({endTime:t,insertTime:s,type:"linearRampToValue",value:o}),Kd=(o,t)=>({startTime:t,type:"setValue",value:o}),fy=(o,t,s)=>({duration:s,startTime:t,type:"setValueCurve",values:o}),py=(o,t,{startTime:s,target:a,timeConstant:l})=>a+(t-a)*Math.exp((s-o)/l),_r=o=>o.type==="exponentialRampToValue",Xc=o=>o.type==="linearRampToValue",Bi=o=>_r(o)||Xc(o),mf=o=>o.type==="setValue",ti=o=>o.type==="setValueCurve",Qc=(o,t,s,a)=>{const l=o[t];return l===void 0?a:Bi(l)||mf(l)?l.value:ti(l)?l.values[l.values.length-1]:py(s,Qc(o,t-1,l.startTime,a),l)},k0=(o,t,s,a,l)=>s===void 0?[a.insertTime,l]:Bi(s)?[s.endTime,s.value]:mf(s)?[s.startTime,s.value]:ti(s)?[s.startTime+s.duration,s.values[s.values.length-1]]:[s.startTime,Qc(o,t-1,s.startTime,l)],Jd=o=>o.type==="cancelAndHold",$d=o=>o.type==="cancelScheduledValues",Vi=o=>Jd(o)||$d(o)?o.cancelTime:_r(o)||Xc(o)?o.endTime:o.startTime,j0=(o,t,s,{endTime:a,value:l})=>s===l?l:0<s&&0<l||s<0&&l<0?s*(l/s)**((o-t)/(a-t)):0,q0=(o,t,s,{endTime:a,value:l})=>s+(o-t)/(a-t)*(l-s),Zx=(o,t)=>{const s=Math.floor(t),a=Math.ceil(t);return s===a?o[s]:(1-(t-s))*o[s]+(1-(a-t))*o[a]},Wx=(o,{duration:t,startTime:s,values:a})=>{const l=(o-s)/t*(a.length-1);return Zx(a,l)},Uc=o=>o.type==="setTarget";class Kx{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const s=Vi(t);if(Jd(t)||$d(t)){const a=this._automationEvents.findIndex(u=>$d(t)&&ti(u)?u.startTime+u.duration>=s:Vi(u)>=s),l=this._automationEvents[a];if(a!==-1&&(this._automationEvents=this._automationEvents.slice(0,a)),Jd(t)){const u=this._automationEvents[this._automationEvents.length-1];if(l!==void 0&&Bi(l)){if(u!==void 0&&Uc(u))throw new Error("The internal list is malformed.");const d=u===void 0?l.insertTime:ti(u)?u.startTime+u.duration:Vi(u),f=u===void 0?this._defaultValue:ti(u)?u.values[u.values.length-1]:u.value,m=_r(l)?j0(s,d,f,l):q0(s,d,f,l),p=_r(l)?M0(m,s,this._currenTime):R0(m,s,this._currenTime);this._automationEvents.push(p)}if(u!==void 0&&Uc(u)&&this._automationEvents.push(Kd(this.getValue(s),s)),u!==void 0&&ti(u)&&u.startTime+u.duration>s){const d=s-u.startTime,f=(u.values.length-1)/u.duration,m=Math.max(2,1+Math.ceil(d*f)),p=d/(m-1)*f,g=u.values.slice(0,m);if(p<1)for(let v=1;v<m;v+=1){const x=p*v%1;g[v]=u.values[v-1]*(1-x)+u.values[v]*x}this._automationEvents[this._automationEvents.length-1]=fy(g,u.startTime,d)}}}else{const a=this._automationEvents.findIndex(d=>Vi(d)>s),l=a===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[a-1];if(l!==void 0&&ti(l)&&Vi(l)+l.duration>s)return!1;const u=_r(t)?M0(t.value,t.endTime,this._currenTime):Xc(t)?R0(t.value,s,this._currenTime):t;if(a===-1)this._automationEvents.push(u);else{if(ti(t)&&s+t.duration>Vi(this._automationEvents[a]))return!1;this._automationEvents.splice(a,0,u)}}return!0}flush(t){const s=this._automationEvents.findIndex(a=>Vi(a)>t);if(s>1){const a=this._automationEvents.slice(s-1),l=a[0];Uc(l)&&a.unshift(Kd(Qc(this._automationEvents,s-2,l.startTime,this._defaultValue),l.startTime)),this._automationEvents=a}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const s=this._automationEvents.findIndex(d=>Vi(d)>t),a=this._automationEvents[s],l=(s===-1?this._automationEvents.length:s)-1,u=this._automationEvents[l];if(u!==void 0&&Uc(u)&&(a===void 0||!Bi(a)||a.insertTime>t))return py(t,Qc(this._automationEvents,l-1,u.startTime,this._defaultValue),u);if(u!==void 0&&mf(u)&&(a===void 0||!Bi(a)))return u.value;if(u!==void 0&&ti(u)&&(a===void 0||!Bi(a)||u.startTime+u.duration>t))return t<u.startTime+u.duration?Wx(t,u):u.values[u.values.length-1];if(u!==void 0&&Bi(u)&&(a===void 0||!Bi(a)))return u.value;if(a!==void 0&&_r(a)){const[d,f]=k0(this._automationEvents,l,u,a,this._defaultValue);return j0(t,d,f,a)}if(a!==void 0&&Xc(a)){const[d,f]=k0(this._automationEvents,l,u,a,this._defaultValue);return q0(t,d,f,a)}return this._defaultValue}}const Jx=o=>({cancelTime:o,type:"cancelAndHold"}),$x=o=>({cancelTime:o,type:"cancelScheduledValues"}),t1=(o,t)=>({endTime:t,type:"exponentialRampToValue",value:o}),e1=(o,t)=>({endTime:t,type:"linearRampToValue",value:o}),n1=(o,t,s)=>({startTime:t,target:o,timeConstant:s,type:"setTarget"}),s1=()=>new DOMException("","AbortError"),i1=o=>(t,s,[a,l,u],d)=>{o(t[l],[s,a,u],f=>f[0]===s&&f[1]===a,d)},a1=o=>(t,s,a)=>{const l=[];for(let u=0;u<a.numberOfInputs;u+=1)l.push(new Set);o.set(t,{activeInputs:l,outputs:new Set,passiveInputs:new WeakMap,renderer:s})},r1=o=>(t,s)=>{o.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:s})},yr=new WeakSet,my=new WeakMap,gf=new WeakMap,gy=new WeakMap,_f=new WeakMap,cu=new WeakMap,_y=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,yy={construct(){return yy}},o1=o=>{try{const t=new Proxy(o,yy);new t}catch{return!1}return!0},V0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,z0=(o,t)=>{const s=[];let a=o.replace(/^[\s]+/,""),l=a.match(V0);for(;l!==null;){const u=l[1].slice(1,-1),d=l[0].replace(/([\s]+)?;?$/,"").replace(u,new URL(u,t).toString());s.push(d),a=a.slice(l[0].length).replace(/^[\s]+/,""),l=a.match(V0)}return[s.join(";"),a]},B0=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},L0=o=>{if(!o1(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},l1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>{let T=0;return(S,C,w={credentials:"omit"})=>{const O=g.get(S);if(O!==void 0&&O.has(C))return Promise.resolve();const R=p.get(S);if(R!==void 0){const E=R.get(C);if(E!==void 0)return E}const U=u(S),K=U.audioWorklet===void 0?l(C).then(([E,j])=>{const[V,D]=z0(E,j),F=`${V};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${D}
})})(window,'_AWGS')`;return s(F)}).then(()=>{const E=x._AWGS.pop();if(E===void 0)throw new SyntaxError;a(U.currentTime,U.sampleRate,()=>E(class{},void 0,(j,V)=>{if(j.trim()==="")throw t();const D=ef.get(U);if(D!==void 0){if(D.has(j))throw t();L0(V),B0(V.parameterDescriptors),D.set(j,V)}else L0(V),B0(V.parameterDescriptors),ef.set(U,new Map([[j,V]]))},U.sampleRate,void 0,void 0))}):Promise.all([l(C),Promise.resolve(o(v,v))]).then(([[E,j],V])=>{const D=T+1;T=D;const[F,P]=z0(E,j),ut=`${F};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${V?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${V?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${V?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${D}',class extends AudioWorkletProcessor{process(){return !1}})`,_t=new Blob([ut],{type:"application/javascript; charset=utf-8"}),k=URL.createObjectURL(_t);return U.audioWorklet.addModule(k,w).then(()=>{if(f(U))return U;const W=d(U);return W.audioWorklet.addModule(k,w).then(()=>W)}).then(W=>{if(m===null)throw new SyntaxError;try{new m(W,`__sac${D}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(k))});return R===void 0?p.set(S,new Map([[C,K]])):R.set(C,K),K.then(()=>{const E=g.get(S);E===void 0?g.set(S,new Set([C])):E.add(C)}).finally(()=>{const E=p.get(S);E!==void 0&&E.delete(C)}),K}},_s=(o,t)=>{const s=o.get(t);if(s===void 0)throw new Error("A value with the given key could not be found.");return s},uu=(o,t)=>{const s=Array.from(o).filter(t);if(s.length>1)throw Error("More than one element was found.");if(s.length===0)throw Error("No element was found.");const[a]=s;return o.delete(a),a},vy=(o,t,s,a)=>{const l=_s(o,t),u=uu(l,d=>d[0]===s&&d[1]===a);return l.size===0&&o.delete(t),u},al=o=>_s(_y,o),vr=o=>{if(yr.has(o))throw new Error("The AudioNode is already stored.");yr.add(o),al(o).forEach(t=>t(!0))},by=o=>"port"in o,rl=o=>{if(!yr.has(o))throw new Error("The AudioNode is not stored.");yr.delete(o),al(o).forEach(t=>t(!1))},sf=(o,t)=>{!by(o)&&t.every(s=>s.size===0)&&rl(o)},c1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>{const T=new WeakMap;return(S,C,w,O,R)=>{const{activeInputs:U,passiveInputs:K}=u(C),{outputs:E}=u(S),j=f(S),V=D=>{const F=m(C),P=m(S);if(D){const Z=vy(K,S,w,O);o(U,S,Z,!1),!R&&!v(S)&&s(P,F,w,O),x(C)&&vr(C)}else{const Z=a(U,S,w,O);t(K,O,Z,!1),!R&&!v(S)&&l(P,F,w,O);const Q=d(C);if(Q===0)g(C)&&sf(C,U);else{const ft=T.get(C);ft!==void 0&&clearTimeout(ft),T.set(C,setTimeout(()=>{g(C)&&sf(C,U)},Q*1e3))}}};return p(E,[C,w,O],D=>D[0]===C&&D[1]===w&&D[2]===O,!0)?(j.add(V),g(S)?o(U,S,[w,O,V],!0):t(K,O,[S,w,V],!0),!0):!1}},u1=o=>(t,s,[a,l,u],d)=>{const f=t.get(a);f===void 0?t.set(a,new Set([[l,s,u]])):o(f,[l,s,u],m=>m[0]===l&&m[1]===s,d)},h1=o=>(t,s)=>{const a=o(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.connect(a).connect(t.destination);const l=()=>{s.removeEventListener("ended",l),s.disconnect(a),a.disconnect()};s.addEventListener("ended",l)},d1=o=>(t,s)=>{o(t).add(s)},f1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},p1=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...f1,...m},v=a(p,g),x=u(p)?t():null;super(f,!1,v,x),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const m=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=m,s()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const m=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=m,s()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},fn=(o,t)=>o.context===t,m1=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!fn(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},Zc=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},js=()=>new DOMException("","IndexSizeError"),yf=o=>{o.getChannelData=(t=>s=>{try{return t.call(o,s)}catch(a){throw a.code===12?js():a}})(o.getChannelData)},g1={numberOfChannels:1},_1=(o,t,s,a,l,u,d,f)=>{let m=null;return class xy{constructor(g){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:x,sampleRate:T}={...g1,...g};m===null&&(m=new l(1,1,44100));const S=a!==null&&t(u,u)?new a({length:v,numberOfChannels:x,sampleRate:T}):m.createBuffer(x,v,T);if(S.numberOfChannels===0)throw s();return typeof S.copyFromChannel!="function"?(d(S),yf(S)):t(Zc,()=>Zc(S))||f(S),o.add(S),S}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===xy.prototype||o.has(g)}}},Bn=-34028234663852886e22,gn=34028234663852886e22,ni=o=>yr.has(o),y1={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},v1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...y1,...g},T=l(v,x),S=d(v),C=S?t():null;super(p,!1,T,C),this._audioBufferSourceNodeRenderer=C,this._isBufferNullified=!1,this._isBufferSet=x.buffer!==null,this._nativeAudioBufferSourceNode=T,this._onended=null,this._playbackRate=s(this,S,T.playbackRate,gn,Bn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw a();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?f(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===g?p:v}get playbackRate(){return this._playbackRate}start(p=0,g=0,v){if(this._nativeAudioBufferSourceNode.start(p,g,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[p,g]:[p,g,v]),this.context.state!=="closed"){vr(this);const x=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",x),ni(this)&&rl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",x)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},b1=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null;const m=async(p,g)=>{let v=s(p);const x=fn(v,g);if(!x){const T={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=t(g,T),d!==null&&v.start(...d),f!==null&&v.stop(f)}return u.set(g,v),x?await o(g,p.playbackRate,v.playbackRate):await a(g,p.playbackRate,v.playbackRate),await l(p,g,v),v};return{set start(p){d=p},set stop(p){f=p},render(p,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):m(p,g)}}},x1=o=>"playbackRate"in o,S1=o=>"frequency"in o&&"gain"in o,T1=o=>"offset"in o,w1=o=>!("frequency"in o)&&"gain"in o,A1=o=>"detune"in o&&"frequency"in o&&!("gain"in o),C1=o=>"pan"in o,yn=o=>_s(my,o),ol=o=>_s(gy,o),af=(o,t)=>{const{activeInputs:s}=yn(o);s.forEach(l=>l.forEach(([u])=>{t.includes(o)||af(u,[...t,o])}));const a=x1(o)?[o.playbackRate]:by(o)?Array.from(o.parameters.values()):S1(o)?[o.Q,o.detune,o.frequency,o.gain]:T1(o)?[o.offset]:w1(o)?[o.gain]:A1(o)?[o.detune,o.frequency]:C1(o)?[o.pan]:[];for(const l of a){const u=ol(l);u!==void 0&&u.activeInputs.forEach(([d])=>af(d,t))}ni(o)&&rl(o)},Sy=o=>{af(o.destination,[])},N1=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),E1=(o,t,s,a,l,u,d,f,m)=>class extends o{constructor(g={}){if(m===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new m(g)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?s():S}if(v===null)throw a();if(!N1(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&v.sampleRate!==g.sampleRate)throw s();super(v,2);const{latencyHint:x}=g,{sampleRate:T}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:x==="balanced"?512/T:x==="interactive"||x===void 0?256/T:x==="playback"?1024/T:Math.max(2,Math.min(128,Math.round(x*T/128)))*128/T,this._nativeAudioContext=v,m.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",S)};v.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Sy(this)}))}createMediaElementSource(g){return new l(this,{mediaElement:g})}createMediaStreamDestination(){return new u(this)}createMediaStreamSource(g){return new d(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new f(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,v)=>{const x=()=>{this._nativeAudioContext.removeEventListener("statechange",x),this._nativeAudioContext.state==="running"?g():this.resume().then(g,v)};this._nativeAudioContext.addEventListener("statechange",x)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?t():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?t():g})}},D1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x=d(v),T=l(v,g,x),S=x?t(f):null;super(p,!1,T,S),this._isNodeOfNativeOfflineAudioContext=x,this._nativeAudioDestinationNode=T}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw a();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw s();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw a();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},O1=o=>{const t=new WeakMap,s=async(a,l)=>{const u=l.destination;return t.set(l,u),await o(a,l,u),u};return{render(a,l){const u=t.get(l);return u!==void 0?Promise.resolve(u):s(a,l)}}},M1=(o,t,s,a,l,u,d,f)=>(m,p)=>{const g=p.listener,v=()=>{const E=new Float32Array(1),j=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),V=d(p);let D=!1,F=[0,0,-1,0,1,0],P=[0,0,0];const Z=()=>{if(D)return;D=!0;const _t=a(p,256,9,0);_t.onaudioprocess=({inputBuffer:k})=>{const W=[u(k,E,0),u(k,E,1),u(k,E,2),u(k,E,3),u(k,E,4),u(k,E,5)];W.some((mt,A)=>mt!==F[A])&&(g.setOrientation(...W),F=W);const ct=[u(k,E,6),u(k,E,7),u(k,E,8)];ct.some((mt,A)=>mt!==P[A])&&(g.setPosition(...ct),P=ct)},j.connect(_t)},Q=_t=>k=>{k!==F[_t]&&(F[_t]=k,g.setOrientation(...F))},ft=_t=>k=>{k!==P[_t]&&(P[_t]=k,g.setPosition(...P))},ut=(_t,k,W)=>{const ct=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k});ct.connect(j,0,_t),ct.start(),Object.defineProperty(ct.offset,"defaultValue",{get(){return k}});const mt=o({context:m},V,ct.offset,gn,Bn);return f(mt,"value",A=>()=>A.call(mt),A=>I=>{try{A.call(mt,I)}catch(rt){if(rt.code!==9)throw rt}Z(),V&&W(I)}),mt.cancelAndHoldAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.cancelAndHoldAtTime),mt.cancelScheduledValues=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.cancelScheduledValues),mt.exponentialRampToValueAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.exponentialRampToValueAtTime),mt.linearRampToValueAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.linearRampToValueAtTime),mt.setTargetAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.setTargetAtTime),mt.setValueAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.setValueAtTime),mt.setValueCurveAtTime=(A=>V?()=>{throw l()}:(...I)=>{const rt=A.apply(mt,I);return Z(),rt})(mt.setValueCurveAtTime),mt};return{forwardX:ut(0,0,Q(0)),forwardY:ut(1,0,Q(1)),forwardZ:ut(2,-1,Q(2)),positionX:ut(6,0,ft(0)),positionY:ut(7,0,ft(1)),positionZ:ut(8,0,ft(2)),upX:ut(3,0,Q(3)),upY:ut(4,1,Q(4)),upZ:ut(5,0,Q(5))}},{forwardX:x,forwardY:T,forwardZ:S,positionX:C,positionY:w,positionZ:O,upX:R,upY:U,upZ:K}=g.forwardX===void 0?v():g;return{get forwardX(){return x},get forwardY(){return T},get forwardZ(){return S},get positionX(){return C},get positionY(){return w},get positionZ(){return O},get upX(){return R},get upY(){return U},get upZ(){return K}}},Wc=o=>"context"in o,ll=o=>Wc(o[0]),Ta=(o,t,s,a)=>{for(const l of o)if(s(l)){if(a)return!1;throw Error("The set contains at least one similar element.")}return o.add(t),!0},U0=(o,t,[s,a],l)=>{Ta(o,[t,s,a],u=>u[0]===t&&u[1]===s,l)},F0=(o,[t,s,a],l)=>{const u=o.get(t);u===void 0?o.set(t,new Set([[s,a]])):Ta(u,[s,a],d=>d[0]===s,l)},Er=o=>"inputs"in o,Kc=(o,t,s,a)=>{if(Er(t)){const l=t.inputs[a];return o.connect(l,s,0),[l,s,0]}return o.connect(t,s,a),[t,s,a]},Ty=(o,t,s)=>{for(const a of o)if(a[0]===t&&a[1]===s)return o.delete(a),a;return null},R1=(o,t,s)=>uu(o,a=>a[0]===t&&a[1]===s),wy=(o,t)=>{if(!al(o).delete(t))throw new Error("Missing the expected event listener.")},Ay=(o,t,s)=>{const a=_s(o,t),l=uu(a,u=>u[0]===s);return a.size===0&&o.delete(t),l},Jc=(o,t,s,a)=>{Er(t)?o.disconnect(t.inputs[a],s,0):o.disconnect(t,s,a)},ge=o=>_s(gf,o),Jo=o=>_s(_f,o),xa=o=>tf.has(o),Gc=o=>!yr.has(o),I0=(o,t)=>new Promise(s=>{if(t!==null)s(!0);else{const a=o.createScriptProcessor(256,1,1),l=o.createGain(),u=o.createBuffer(1,2,44100),d=u.getChannelData(0);d[0]=1,d[1]=1;const f=o.createBufferSource();f.buffer=u,f.loop=!0,f.connect(a).connect(o.destination),f.connect(l),f.disconnect(l),a.onaudioprocess=m=>{const p=m.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?s(!0):s(!1),f.stop(),a.onaudioprocess=null,f.disconnect(a),a.disconnect(o.destination)},f.start()}}),Ud=(o,t)=>{const s=new Map;for(const a of o)for(const l of a){const u=s.get(l);s.set(l,u===void 0?1:u+1)}s.forEach((a,l)=>t(l,a))},$c=o=>"context"in o,k1=o=>{const t=new Map;o.connect=(s=>(a,l=0,u=0)=>{const d=$c(a)?s(a,l,u):s(a,l),f=t.get(a);return f===void 0?t.set(a,[{input:u,output:l}]):f.every(m=>m.input!==u||m.output!==l)&&f.push({input:u,output:l}),d})(o.connect.bind(o)),o.disconnect=(s=>(a,l,u)=>{if(s.apply(o),a===void 0)t.clear();else if(typeof a=="number")for(const[d,f]of t){const m=f.filter(p=>p.output!==a);m.length===0?t.delete(d):t.set(d,m)}else if(t.has(a))if(l===void 0)t.delete(a);else{const d=t.get(a);if(d!==void 0){const f=d.filter(m=>m.output!==l&&(m.input!==u||u===void 0));f.length===0?t.delete(a):t.set(a,f)}}for(const[d,f]of t)f.forEach(m=>{$c(d)?o.connect(d,m.output,m.input):o.connect(d,m.output)})})(o.disconnect)},j1=(o,t,s,a)=>{const{activeInputs:l,passiveInputs:u}=ol(t),{outputs:d}=yn(o),f=al(o),m=p=>{const g=ge(o),v=Jo(t);if(p){const x=Ay(u,o,s);U0(l,o,x,!1),!a&&!xa(o)&&g.connect(v,s)}else{const x=R1(l,o,s);F0(u,x,!1),!a&&!xa(o)&&g.disconnect(v,s)}};return Ta(d,[t,s],p=>p[0]===t&&p[1]===s,!0)?(f.add(m),ni(o)?U0(l,o,[s,m],!0):F0(u,[o,s,m],!0),!0):!1},q1=(o,t,s,a)=>{const{activeInputs:l,passiveInputs:u}=yn(t),d=Ty(l[a],o,s);return d===null?[vy(u,o,s,a)[2],!1]:[d[2],!0]},V1=(o,t,s)=>{const{activeInputs:a,passiveInputs:l}=ol(t),u=Ty(a,o,s);return u===null?[Ay(l,o,s)[1],!1]:[u[2],!0]},vf=(o,t,s,a,l)=>{const[u,d]=q1(o,s,a,l);if(u!==null&&(wy(o,u),d&&!t&&!xa(o)&&Jc(ge(o),ge(s),a,l)),ni(s)){const{activeInputs:f}=yn(s);sf(s,f)}},bf=(o,t,s,a)=>{const[l,u]=V1(o,s,a);l!==null&&(wy(o,l),u&&!t&&!xa(o)&&ge(o).disconnect(Jo(s),a))},z1=(o,t)=>{const s=yn(o),a=[];for(const l of s.outputs)ll(l)?vf(o,t,...l):bf(o,t,...l),a.push(l[0]);return s.outputs.clear(),a},B1=(o,t,s)=>{const a=yn(o),l=[];for(const u of a.outputs)u[1]===s&&(ll(u)?vf(o,t,...u):bf(o,t,...u),l.push(u[0]),a.outputs.delete(u));return l},L1=(o,t,s,a,l)=>{const u=yn(o);return Array.from(u.outputs).filter(d=>d[0]===s&&(a===void 0||d[1]===a)&&(l===void 0||d[2]===l)).map(d=>(ll(d)?vf(o,t,...d):bf(o,t,...d),u.outputs.delete(d),d[0]))},U1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,C)=>class extends p{constructor(O,R,U,K){super(U),this._context=O,this._nativeAudioNode=U;const E=g(O);v(E)&&s(I0,()=>I0(E,C))!==!0&&k1(U),gf.set(this,U),_y.set(this,new Set),O.state!=="closed"&&R&&vr(this),o(this,K,U)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(O){this._nativeAudioNode.channelCount=O}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(O){this._nativeAudioNode.channelCountMode=O}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(O){this._nativeAudioNode.channelInterpretation=O}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(O,R=0,U=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw l();const K=g(this._context),E=S(K);if(x(O)||T(O))throw u();if(Wc(O)){const D=ge(O);try{const P=Kc(this._nativeAudioNode,D,R,U),Z=Gc(this);(E||Z)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!Z&&Gc(O)&&vr(O)}catch(P){throw P.code===12?u():P}if(t(this,O,R,U,E)){const P=m([this],O);Ud(P,a(E))}return O}const j=Jo(O);if(j.name==="playbackRate"&&j.maxValue===1024)throw d();try{this._nativeAudioNode.connect(j,R),(E||Gc(this))&&this._nativeAudioNode.disconnect(j,R)}catch(D){throw D.code===12?u():D}if(j1(this,O,R,E)){const D=m([this],O);Ud(D,a(E))}}disconnect(O,R,U){let K;const E=g(this._context),j=S(E);if(O===void 0)K=z1(this,j);else if(typeof O=="number"){if(O<0||O>=this.numberOfOutputs)throw l();K=B1(this,j,O)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||Wc(O)&&U!==void 0&&(U<0||U>=O.numberOfInputs))throw l();if(K=L1(this,j,O,R,U),K.length===0)throw u()}for(const V of K){const D=m([this],V);Ud(D,f)}}},F1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>(T,S,C,w=null,O=null)=>{const R=C.value,U=new Kx(R),K=S?a(U):null,E={get defaultValue(){return R},get maxValue(){return w===null?C.maxValue:w},get minValue(){return O===null?C.minValue:O},get value(){return C.value},set value(j){C.value=j,E.setValueAtTime(j,T.context.currentTime)},cancelAndHoldAtTime(j){if(typeof C.cancelAndHoldAtTime=="function")K===null&&U.flush(T.context.currentTime),U.add(l(j)),C.cancelAndHoldAtTime(j);else{const V=Array.from(U).pop();K===null&&U.flush(T.context.currentTime),U.add(l(j));const D=Array.from(U).pop();C.cancelScheduledValues(j),V!==D&&D!==void 0&&(D.type==="exponentialRampToValue"?C.exponentialRampToValueAtTime(D.value,D.endTime):D.type==="linearRampToValue"?C.linearRampToValueAtTime(D.value,D.endTime):D.type==="setValue"?C.setValueAtTime(D.value,D.startTime):D.type==="setValueCurve"&&C.setValueCurveAtTime(D.values,D.startTime,D.duration))}return E},cancelScheduledValues(j){return K===null&&U.flush(T.context.currentTime),U.add(u(j)),C.cancelScheduledValues(j),E},exponentialRampToValueAtTime(j,V){if(j===0)throw new RangeError;if(!Number.isFinite(V)||V<0)throw new RangeError;const D=T.context.currentTime;return K===null&&U.flush(D),Array.from(U).length===0&&(U.add(p(R,D)),C.setValueAtTime(R,D)),U.add(d(j,V)),C.exponentialRampToValueAtTime(j,V),E},linearRampToValueAtTime(j,V){const D=T.context.currentTime;return K===null&&U.flush(D),Array.from(U).length===0&&(U.add(p(R,D)),C.setValueAtTime(R,D)),U.add(f(j,V)),C.linearRampToValueAtTime(j,V),E},setTargetAtTime(j,V,D){return K===null&&U.flush(T.context.currentTime),U.add(m(j,V,D)),C.setTargetAtTime(j,V,D),E},setValueAtTime(j,V){return K===null&&U.flush(T.context.currentTime),U.add(p(j,V)),C.setValueAtTime(j,V),E},setValueCurveAtTime(j,V,D){const F=j instanceof Float32Array?j:new Float32Array(j);if(v!==null&&v.name==="webkitAudioContext"){const P=V+D,Z=T.context.sampleRate,Q=Math.ceil(V*Z),ft=Math.floor(P*Z),ut=ft-Q,_t=new Float32Array(ut);for(let W=0;W<ut;W+=1){const ct=(F.length-1)/D*((Q+W)/Z-V),mt=Math.floor(ct),A=Math.ceil(ct);_t[W]=mt===A?F[mt]:(1-(ct-mt))*F[mt]+(1-(A-ct))*F[A]}K===null&&U.flush(T.context.currentTime),U.add(g(_t,V,D)),C.setValueCurveAtTime(_t,V,D);const k=ft/Z;k<P&&x(E,_t[_t.length-1],k),x(E,F[F.length-1],P)}else K===null&&U.flush(T.context.currentTime),U.add(g(F,V,D)),C.setValueCurveAtTime(F,V,D);return E}};return s.set(E,C),t.set(E,T),o(E,K),E},I1=o=>({replay(t){for(const s of o)if(s.type==="exponentialRampToValue"){const{endTime:a,value:l}=s;t.exponentialRampToValueAtTime(l,a)}else if(s.type==="linearRampToValue"){const{endTime:a,value:l}=s;t.linearRampToValueAtTime(l,a)}else if(s.type==="setTarget"){const{startTime:a,target:l,timeConstant:u}=s;t.setTargetAtTime(l,a,u)}else if(s.type==="setValue"){const{startTime:a,value:l}=s;t.setValueAtTime(l,a)}else if(s.type==="setValueCurve"){const{duration:a,startTime:l,values:u}=s;t.setValueCurveAtTime(u,l,a)}else throw new Error("Can't apply an unknown automation.")}});class Cy{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,s=null){return this._map.forEach((a,l)=>t.call(s,a,l,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const G1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},H1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T)=>class extends t{constructor(C,w,O){var R;const U=f(C),K=m(U),E=g({...G1,...O});x(E);const j=ef.get(U),V=j==null?void 0:j.get(w),D=K||U.state!=="closed"?U:(R=d(U))!==null&&R!==void 0?R:U,F=l(D,K?null:C.baseLatency,p,w,V,E),P=K?a(w,E,V):null;super(C,!0,F,P);const Z=[];F.parameters.forEach((ft,ut)=>{const _t=s(this,K,ft);Z.push([ut,_t])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new Cy(Z),K&&o(U,this);const{activeInputs:Q}=u(this);v(F,Q)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(C){const w=typeof C=="function"?T(this,C):null;this._nativeAudioWorkletNode.onprocessorerror=w;const O=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=O!==null&&O===w?C:O}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function tu(o,t,s,a,l){if(typeof o.copyFromChannel=="function")t[s].byteLength===0&&(t[s]=new Float32Array(128)),o.copyFromChannel(t[s],a,l);else{const u=o.getChannelData(a);if(t[s].byteLength===0)t[s]=u.slice(l,l+128);else{const d=new Float32Array(u.buffer,l*Float32Array.BYTES_PER_ELEMENT,128);t[s].set(d)}}}const Ny=(o,t,s,a,l)=>{typeof o.copyToChannel=="function"?t[s].byteLength!==0&&o.copyToChannel(t[s],a,l):t[s].byteLength!==0&&o.getChannelData(a).set(t[s],l)},eu=(o,t)=>{const s=[];for(let a=0;a<o;a+=1){const l=[],u=typeof t=="number"?t:t[a];for(let d=0;d<u;d+=1)l.push(new Float32Array(128));s.push(l)}return s},P1=(o,t)=>{const s=_s(nf,o),a=ge(t);return _s(s,a)},Y1=async(o,t,s,a,l,u,d)=>{const f=t===null?Math.ceil(o.context.length/128)*128:t.length,m=a.channelCount*a.numberOfInputs,p=l.reduce((w,O)=>w+O,0),g=p===0?null:s.createBuffer(p,f,s.sampleRate);if(u===void 0)throw new Error("Missing the processor constructor.");const v=yn(o),x=await P1(s,o),T=eu(a.numberOfInputs,a.channelCount),S=eu(a.numberOfOutputs,l),C=Array.from(o.parameters.keys()).reduce((w,O)=>({...w,[O]:new Float32Array(128)}),{});for(let w=0;w<f;w+=128){if(a.numberOfInputs>0&&t!==null)for(let O=0;O<a.numberOfInputs;O+=1)for(let R=0;R<a.channelCount;R+=1)tu(t,T[O],R,R,w);u.parameterDescriptors!==void 0&&t!==null&&u.parameterDescriptors.forEach(({name:O},R)=>{tu(t,C,O,m+R,w)});for(let O=0;O<a.numberOfInputs;O+=1)for(let R=0;R<l[O];R+=1)S[O][R].byteLength===0&&(S[O][R]=new Float32Array(128));try{const O=T.map((U,K)=>v.activeInputs[K].size===0?[]:U),R=d(w/s.sampleRate,s.sampleRate,()=>x.process(O,S,C));if(g!==null)for(let U=0,K=0;U<a.numberOfOutputs;U+=1){for(let E=0;E<l[U];E+=1)Ny(g,S[U],E,K+E,w);K+=l[U]}if(!R)break}catch(O){o.dispatchEvent(new ErrorEvent("processorerror",{colno:O.colno,filename:O.filename,lineno:O.lineno,message:O.message}));break}}return g},X1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,C)=>(w,O,R)=>{const U=new WeakMap;let K=null;const E=async(j,V)=>{let D=g(j),F=null;const P=fn(D,V),Z=Array.isArray(O.outputChannelCount)?O.outputChannelCount:Array.from(O.outputChannelCount);if(v===null){const Q=Z.reduce((k,W)=>k+W,0),ft=l(V,{channelCount:Math.max(1,Q),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Q)}),ut=[];for(let k=0;k<j.numberOfOutputs;k+=1)ut.push(a(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Z[k]}));const _t=d(V,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1});_t.connect=t.bind(null,ut),_t.disconnect=m.bind(null,ut),F=[ft,ut,_t]}else P||(D=new v(V,w));if(U.set(V,F===null?D:F[2]),F!==null){if(K===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(x===null)throw new Error("Missing the native OfflineAudioContext constructor.");const W=j.channelCount*j.numberOfInputs,ct=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,mt=W+ct;K=Y1(j,mt===0?null:await(async()=>{const I=new x(mt,Math.ceil(j.context.length/128)*128,V.sampleRate),rt=[],dt=[];for(let gt=0;gt<O.numberOfInputs;gt+=1)rt.push(d(I,{channelCount:O.channelCount,channelCountMode:O.channelCountMode,channelInterpretation:O.channelInterpretation,gain:1})),dt.push(l(I,{channelCount:O.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:O.channelCount}));const bt=await Promise.all(Array.from(j.parameters.values()).map(async gt=>{const Xt=u(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:gt.value});return await T(I,gt,Xt.offset),Xt})),vt=a(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,W+ct)});for(let gt=0;gt<O.numberOfInputs;gt+=1){rt[gt].connect(dt[gt]);for(let Xt=0;Xt<O.channelCount;Xt+=1)dt[gt].connect(vt,Xt,gt*O.channelCount+Xt)}for(const[gt,Xt]of bt.entries())Xt.connect(vt,0,W+gt),Xt.start(0);return vt.connect(I.destination),await Promise.all(rt.map(gt=>S(j,I,gt))),C(I)})(),V,O,Z,R,p)}const Q=await K,ft=s(V,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ut,_t,k]=F;Q!==null&&(ft.buffer=Q,ft.start(0)),ft.connect(ut);for(let W=0,ct=0;W<j.numberOfOutputs;W+=1){const mt=_t[W];for(let A=0;A<Z[W];A+=1)ut.connect(mt,ct+A,A);ct+=Z[W]}return k}if(P)for(const[Q,ft]of j.parameters.entries())await o(V,ft,D.parameters.get(Q));else for(const[Q,ft]of j.parameters.entries())await T(V,ft,D.parameters.get(Q));return await S(j,V,D),D};return{render(j,V){f(V,j);const D=U.get(V);return D!==void 0?Promise.resolve(D):E(j,V)}}},Q1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,C,w,O,R,U)=>class extends S{constructor(E,j){super(E,j),this._nativeContext=E,this._audioWorklet=o===void 0?void 0:{addModule:(V,D)=>o(this,V,D)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new l(this)}createBuffer(E,j,V){return new s({length:j,numberOfChannels:E,sampleRate:V})}createBufferSource(){return new a(this)}createChannelMerger(E=6){return new u(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new d(this,{numberOfOutputs:E})}createConstantSource(){return new f(this)}createConvolver(){return new m(this)}createDelay(E=1){return new g(this,{maxDelayTime:E})}createDynamicsCompressor(){return new v(this)}createGain(){return new x(this)}createIIRFilter(E,j){return new T(this,{feedback:j,feedforward:E})}createOscillator(){return new C(this)}createPanner(){return new w(this)}createPeriodicWave(E,j,V={disableNormalization:!1}){return new O(this,{...V,imag:j,real:E})}createStereoPanner(){return new R(this)}createWaveShaper(){return new U(this)}decodeAudioData(E,j,V){return p(this._nativeContext,E).then(D=>(typeof j=="function"&&j(D),D),D=>{throw typeof V=="function"&&V(D),D})}},Z1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},W1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...Z1,...g},T=l(v,x),S=d(v),C=S?s():null;super(p,!1,T,C),this._Q=t(this,S,T.Q,gn,Bn),this._detune=t(this,S,T.detune,1200*Math.log2(gn),-1200*Math.log2(gn)),this._frequency=t(this,S,T.frequency,p.sampleRate/2,0),this._gain=t(this,S,T.gain,40*Math.log10(gn),Bn),this._nativeBiquadFilterNode=T,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,v)}catch(x){throw x.code===11?a():x}if(p.length!==g.length||g.length!==v.length)throw a()}},K1=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=fn(p,m);if(!g){const v={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=t(m,v)}return u.set(m,p),g?(await o(m,f.Q,p.Q),await o(m,f.detune,p.detune),await o(m,f.frequency,p.frequency),await o(m,f.gain,p.gain)):(await a(m,f.Q,p.Q),await a(m,f.detune,p.detune),await a(m,f.frequency,p.frequency),await a(m,f.gain,p.gain)),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},J1=(o,t)=>(s,a)=>{const l=t.get(s);if(l!==void 0)return l;const u=o.get(s);if(u!==void 0)return u;try{const d=a();return d instanceof Promise?(o.set(s,d),d.catch(()=>!1).then(f=>(o.delete(s),t.set(s,f),f))):(t.set(s,d),d)}catch{return t.set(s,!1),!1}},$1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tS=(o,t,s,a,l)=>class extends o{constructor(d,f){const m=a(d),p={...$1,...f},g=s(m,p),v=l(m)?t():null;super(d,!1,g,v)}},eS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!fn(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},nS={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},sS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g=u({...nS,...m}),v=s(p,g),x=l(p)?t():null;super(f,!1,v,x)}},iS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!fn(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},aS=o=>(t,s,a)=>o(s,t,a),rS=o=>(t,s,a=0,l=0)=>{const u=t[a];if(u===void 0)throw o();return $c(s)?u.connect(s,0,l):u.connect(s,0)},oS=o=>(t,s)=>{const a=o(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t.createBuffer(1,2,44100);return a.buffer=l,a.loop=!0,a.connect(s),a.start(),()=>{a.stop(),a.disconnect(s)}},lS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},cS=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...lS,...p},x=a(g,v),T=u(g),S=T?s():null;super(m,!1,x,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=x,this._offset=t(this,T,x.offset,gn,Bn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(m){const p=typeof m=="function"?d(this,m):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?m:g}start(m=0){if(this._nativeConstantSourceNode.start(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=m),this.context.state!=="closed"){vr(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),ni(this)&&rl(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(m=0){this._nativeConstantSourceNode.stop(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=m)}},uS=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null;const m=async(p,g)=>{let v=s(p);const x=fn(v,g);if(!x){const T={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=t(g,T),d!==null&&v.start(d),f!==null&&v.stop(f)}return u.set(g,v),x?await o(g,p.offset,v.offset):await a(g,p.offset,v.offset),await l(p,g,v),v};return{set start(p){d=p},set stop(p){f=p},render(p,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):m(p,g)}}},hS=o=>t=>(o[0]=t,o[0]),dS={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g={...dS,...m},v=s(p,g),T=l(p)?t():null;super(f,!1,v,T),this._isBufferNullified=!1,this._nativeConvolverNode=v,g.buffer!==null&&u(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const m=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=m.createBuffer(1,1,m.sampleRate),this._isBufferNullified=!0,u(this,0)}else this._isBufferNullified=!1,u(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},pS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!fn(f,d)){const p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=o(d,p)}return a.set(d,f),Er(f)?await s(u,d,f.inputs[0]):await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},mS=(o,t)=>(s,a,l)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(s,a,l)}catch(u){throw u.name==="SyntaxError"?o():u}},gS=()=>new DOMException("","DataCloneError"),G0=o=>{const{port1:t,port2:s}=new MessageChannel;return new Promise(a=>{const l=()=>{s.onmessage=null,t.close(),s.close(),a()};s.onmessage=()=>l();try{t.postMessage(o,[o])}catch{}finally{l()}})},_S=(o,t,s,a,l,u,d,f,m,p,g)=>(v,x)=>{const T=d(v)?v:u(v);if(l.has(x)){const S=s();return Promise.reject(S)}try{l.add(x)}catch{}return t(m,()=>m(T))?T.decodeAudioData(x).then(S=>(G0(x).catch(()=>{}),t(f,()=>f(S))||g(S),o.add(S),S)):new Promise((S,C)=>{const w=async()=>{try{await G0(x)}catch{}},O=R=>{C(R),w()};try{T.decodeAudioData(x,R=>{typeof R.copyFromChannel!="function"&&(p(R),yf(R)),o.add(R),w().then(()=>S(R))},R=>{O(R===null?a():R)})}catch(R){O(R)}})},yS=(o,t,s,a,l,u,d,f)=>(m,p)=>{const g=t.get(m);if(g===void 0)throw new Error("Missing the expected cycle count.");const v=u(m.context),x=f(v);if(g===p){if(t.delete(m),!x&&d(m)){const T=a(m),{outputs:S}=s(m);for(const C of S)if(ll(C)){const w=a(C[0]);o(T,w,C[1],C[2])}else{const w=l(C[0]);T.connect(w,C[1])}}}else t.set(m,g-p)},vS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},bS=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...vS,...p},x=a(g,v),T=u(g),S=T?s(v.maxDelayTime):null;super(m,!1,x,S),this._delayTime=t(this,T,x.delayTime),d(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},xS=(o,t,s,a,l)=>u=>{const d=new WeakMap,f=async(m,p)=>{let g=s(m);const v=fn(g,p);if(!v){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:u};g=t(p,x)}return d.set(p,g),v?await o(p,m.delayTime,g.delayTime):await a(p,m.delayTime,g.delayTime),await l(m,p,g),g};return{render(m,p){const g=d.get(p);return g!==void 0?Promise.resolve(g):f(m,p)}}},SS=o=>(t,s,a,l)=>o(t[l],u=>u[0]===s&&u[1]===a),TS=o=>(t,s)=>{o(t).delete(s)},wS=o=>"delayTime"in o,AS=(o,t,s)=>function a(l,u){const d=Wc(u)?u:s(o,u);if(wS(d))return[];if(l[0]===d)return[l];if(l.includes(d))return[];const{outputs:f}=t(d);return Array.from(f).map(m=>a([...l,d],m[0])).reduce((m,p)=>m.concat(p),[])},Fc=(o,t,s)=>{const a=t[s];if(a===void 0)throw o();return a},CS=o=>(t,s=void 0,a=void 0,l=0)=>s===void 0?t.forEach(u=>u.disconnect()):typeof s=="number"?Fc(o,t,s).disconnect():$c(s)?a===void 0?t.forEach(u=>u.disconnect(s)):l===void 0?Fc(o,t,a).disconnect(s,0):Fc(o,t,a).disconnect(s,0,l):a===void 0?t.forEach(u=>u.disconnect(s)):Fc(o,t,a).disconnect(s,0),NS={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ES=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...NS,...g},T=a(v,x),S=d(v),C=S?s():null;super(p,!1,T,C),this._attack=t(this,S,T.attack),this._knee=t(this,S,T.knee),this._nativeDynamicsCompressorNode=T,this._ratio=t(this,S,T.ratio),this._release=t(this,S,T.release),this._threshold=t(this,S,T.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,l()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,l()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},DS=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=fn(p,m);if(!g){const v={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=t(m,v)}return u.set(m,p),g?(await o(m,f.attack,p.attack),await o(m,f.knee,p.knee),await o(m,f.ratio,p.ratio),await o(m,f.release,p.release),await o(m,f.threshold,p.threshold)):(await a(m,f.attack,p.attack),await a(m,f.knee,p.knee),await a(m,f.ratio,p.ratio),await a(m,f.release,p.release),await a(m,f.threshold,p.threshold)),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},OS=()=>new DOMException("","EncodingError"),MS=o=>t=>new Promise((s,a)=>{if(o===null){a(new SyntaxError);return}const l=o.document.head;if(l===null)a(new SyntaxError);else{const u=o.document.createElement("script"),d=new Blob([t],{type:"application/javascript"}),f=URL.createObjectURL(d),m=o.onerror,p=()=>{o.onerror=m,URL.revokeObjectURL(f)};o.onerror=(g,v,x,T,S)=>{if(v===f||v===o.location.href&&x===1&&T===1)return p(),a(S),!1;if(m!==null)return m(g,v,x,T,S)},u.onerror=()=>{p(),a(new SyntaxError)},u.onload=()=>{p(),s()},u.src=f,u.type="module",l.appendChild(u)}}),RS=o=>class{constructor(s){this._nativeEventTarget=s,this._listeners=new WeakMap}addEventListener(s,a,l){if(a!==null){let u=this._listeners.get(a);u===void 0&&(u=o(this,a),typeof a=="function"&&this._listeners.set(a,u)),this._nativeEventTarget.addEventListener(s,u,l)}}dispatchEvent(s){return this._nativeEventTarget.dispatchEvent(s)}removeEventListener(s,a,l){const u=a===null?void 0:this._listeners.get(a);this._nativeEventTarget.removeEventListener(s,u===void 0?null:u,l)}},kS=o=>(t,s,a)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(t*s)}},currentTime:{configurable:!0,get(){return t}}});try{return a()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},jS=o=>async t=>{try{const s=await fetch(t);if(s.ok)return[await s.text(),s.url]}catch{}throw o()},qS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},VS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...qS,...m},v=a(p,g),x=u(p),T=x?s():null;super(f,!1,v,T),this._gain=t(this,x,v.gain,gn,Bn)}get gain(){return this._gain}},zS=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=fn(p,m);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=t(m,v)}return u.set(m,p),g?await o(m,f.gain,p.gain):await a(m,f.gain,p.gain),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},BS=(o,t)=>s=>t(o,s),LS=o=>t=>{const s=o(t);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return s.renderer},US=o=>t=>{var s;return(s=o.get(t))!==null&&s!==void 0?s:0},FS=o=>t=>{const s=o(t);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return s.renderer},IS=o=>t=>o.get(t),We=()=>new DOMException("","InvalidStateError"),GS=o=>t=>{const s=o.get(t);if(s===void 0)throw We();return s},HS=(o,t)=>s=>{let a=o.get(s);if(a!==void 0)return a;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return a=new t(1,1,44100),o.set(s,a),a},PS=o=>t=>{const s=o.get(t);if(s===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return s},hu=()=>new DOMException("","InvalidAccessError"),YS=o=>{o.getFrequencyResponse=(t=>(s,a,l)=>{if(s.length!==a.length||a.length!==l.length)throw hu();return t.call(o,s,a,l)})(o.getFrequencyResponse)},XS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},QS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g=l(p),v={...XS,...m},x=t(p,g?null:f.baseLatency,v),T=g?s(v.feedback,v.feedforward):null;super(f,!1,x,T),YS(x),this._nativeIIRFilterNode=x,u(this,1)}getFrequencyResponse(f,m,p){return this._nativeIIRFilterNode.getFrequencyResponse(f,m,p)}},Ey=(o,t,s,a,l,u,d,f,m,p,g)=>{const v=p.length;let x=f;for(let T=0;T<v;T+=1){let S=s[0]*p[T];for(let C=1;C<l;C+=1){const w=x-C&m-1;S+=s[C]*u[w],S-=o[C]*d[w]}for(let C=l;C<a;C+=1)S+=s[C]*u[x-C&m-1];for(let C=l;C<t;C+=1)S-=o[C]*d[x-C&m-1];u[x]=p[T],d[x]=S,x=x+1&m-1,g[T]=S}return x},ZS=(o,t,s,a)=>{const l=s instanceof Float64Array?s:new Float64Array(s),u=a instanceof Float64Array?a:new Float64Array(a),d=l.length,f=u.length,m=Math.min(d,f);if(l[0]!==1){for(let S=0;S<d;S+=1)u[S]/=l[0];for(let S=1;S<f;S+=1)l[S]/=l[0]}const p=32,g=new Float32Array(p),v=new Float32Array(p),x=t.createBuffer(o.numberOfChannels,o.length,o.sampleRate),T=o.numberOfChannels;for(let S=0;S<T;S+=1){const C=o.getChannelData(S),w=x.getChannelData(S);g.fill(0),v.fill(0),Ey(l,d,u,f,m,g,v,0,p,C,w)}return x},WS=(o,t,s,a,l)=>(u,d)=>{const f=new WeakMap;let m=null;const p=async(g,v)=>{let x=null,T=t(g);const S=fn(T,v);if(v.createIIRFilter===void 0?x=o(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(T=v.createIIRFilter(d,u)),f.set(v,x===null?T:x),x!==null){if(m===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new s(g.context.destination.channelCount,g.context.length,v.sampleRate);m=(async()=>{await a(g,w,w.destination);const O=await l(w);return ZS(O,v,u,d)})()}const C=await m;return x.buffer=C,x.start(0),x}return await a(g,v,T),T};return{render(g,v){const x=f.get(v);return x!==void 0?Promise.resolve(x):p(g,v)}}},KS=(o,t,s,a,l,u)=>d=>(f,m)=>{const p=o.get(f);if(p===void 0){if(!d&&u(f)){const g=a(f),{outputs:v}=s(f);for(const x of v)if(ll(x)){const T=a(x[0]);t(g,T,x[1],x[2])}else{const T=l(x[0]);g.disconnect(T,x[1])}}o.set(f,m)}else o.set(f,p+m)},JS=(o,t)=>s=>{const a=o.get(s);return t(a)||t(s)},$S=(o,t)=>s=>o.has(s)||t(s),tT=(o,t)=>s=>o.has(s)||t(s),eT=(o,t)=>s=>{const a=o.get(s);return t(a)||t(s)},nT=o=>t=>o!==null&&t instanceof o,sT=o=>t=>o!==null&&typeof o.AudioNode=="function"&&t instanceof o.AudioNode,iT=o=>t=>o!==null&&typeof o.AudioParam=="function"&&t instanceof o.AudioParam,aT=(o,t)=>s=>o(s)||t(s),rT=o=>t=>o!==null&&t instanceof o,oT=o=>o!==null&&o.isSecureContext,lT=async(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,C)=>o(t,t)&&o(s,s)&&o(l,l)&&o(u,u)&&o(f,f)&&o(m,m)&&o(p,p)&&o(g,g)&&o(v,v)&&o(x,x)&&o(T,T)?(await Promise.all([o(a,a),o(d,d),o(S,S),o(C,C)])).every(O=>O):!1,cT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u),m=t(f,d);if(a(f))throw TypeError();super(u,!0,m,null),this._nativeMediaElementAudioSourceNode=m}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},uT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},hT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u);if(a(f))throw new TypeError;const m={...uT,...d},p=t(f,m);super(u,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},dT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u),m=t(f,d);if(a(f))throw new TypeError;super(u,!0,m,null),this._nativeMediaStreamAudioSourceNode=m}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},fT=(o,t,s)=>class extends o{constructor(l,u){const d=s(l),f=t(d,u);super(l,!0,f,null)}},pT=(o,t,s,a,l,u)=>class extends s{constructor(f,m){super(f),this._nativeContext=f,cu.set(this,f),a(f)&&l.set(f,new Set),this._destination=new o(this,m),this._listener=t(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const m=typeof f=="function"?u(this,f):null;this._nativeContext.onstatechange=m;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===m?f:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},$o=o=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const s=o.decodeAudioData(t.buffer,()=>{});return s===void 0?!1:(s.catch(()=>{}),!0)}catch{}return!1},mT=(o,t)=>(s,a,l)=>{const u=new Set;return s.connect=(d=>(f,m=0,p=0)=>{const g=u.size===0;if(t(f))return d.call(s,f,m,p),o(u,[f,m,p],v=>v[0]===f&&v[1]===m&&v[2]===p,!0),g&&a(),f;d.call(s,f,m),o(u,[f,m],v=>v[0]===f&&v[1]===m,!0),g&&a()})(s.connect),s.disconnect=(d=>(f,m,p)=>{const g=u.size>0;if(f===void 0)d.apply(s),u.clear();else if(typeof f=="number"){d.call(s,f);for(const x of u)x[1]===f&&u.delete(x)}else{t(f)?d.call(s,f,m,p):d.call(s,f,m);for(const x of u)x[0]===f&&(m===void 0||x[1]===m)&&(p===void 0||x[2]===p)&&u.delete(x)}const v=u.size===0;g&&v&&l()})(s.disconnect),s},ve=(o,t,s)=>{const a=t[s];a!==void 0&&a!==o[s]&&(o[s]=a)},Ie=(o,t)=>{ve(o,t,"channelCount"),ve(o,t,"channelCountMode"),ve(o,t,"channelInterpretation")},H0=o=>typeof o.getFloatTimeDomainData=="function",gT=o=>{o.getFloatTimeDomainData=t=>{const s=new Uint8Array(t.length);o.getByteTimeDomainData(s);const a=Math.max(s.length,o.fftSize);for(let l=0;l<a;l+=1)t[l]=(s[l]-128)*.0078125;return t}},_T=(o,t)=>(s,a)=>{const l=s.createAnalyser();if(Ie(l,a),!(a.maxDecibels>a.minDecibels))throw t();return ve(l,a,"fftSize"),ve(l,a,"maxDecibels"),ve(l,a,"minDecibels"),ve(l,a,"smoothingTimeConstant"),o(H0,()=>H0(l))||gT(l),l},yT=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,Ce=(o,t,s)=>{const a=t[s];a!==void 0&&a!==o[s].value&&(o[s].value=a)},vT=o=>{o.start=(t=>{let s=!1;return(a=0,l=0,u)=>{if(s)throw We();t.call(o,a,l,u),s=!0}})(o.start)},xf=o=>{o.start=(t=>(s=0,a=0,l)=>{if(typeof l=="number"&&l<0||a<0||s<0)throw new RangeError("The parameters can't be negative.");t.call(o,s,a,l)})(o.start)},Sf=o=>{o.stop=(t=>(s=0)=>{if(s<0)throw new RangeError("The parameter can't be negative.");t.call(o,s)})(o.stop)},bT=(o,t,s,a,l,u,d,f,m,p,g)=>(v,x)=>{const T=v.createBufferSource();return Ie(T,x),Ce(T,x,"playbackRate"),ve(T,x,"buffer"),ve(T,x,"loop"),ve(T,x,"loopEnd"),ve(T,x,"loopStart"),t(s,()=>s(v))||vT(T),t(a,()=>a(v))||m(T),t(l,()=>l(v))||p(T,v),t(u,()=>u(v))||xf(T),t(d,()=>d(v))||g(T,v),t(f,()=>f(v))||Sf(T),o(v,T),T},xT=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,ST=(o,t)=>(s,a,l)=>{const u=s.destination;if(u.channelCount!==a)try{u.channelCount=a}catch{}l&&u.channelCountMode!=="explicit"&&(u.channelCountMode="explicit"),u.maxChannelCount===0&&Object.defineProperty(u,"maxChannelCount",{value:a});const d=o(s,{channelCount:a,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:1});return t(d,"channelCount",f=>()=>f.call(d),f=>m=>{f.call(d,m);try{u.channelCount=m}catch(p){if(m>u.maxChannelCount)throw p}}),t(d,"channelCountMode",f=>()=>f.call(d),f=>m=>{f.call(d,m),u.channelCountMode=m}),t(d,"channelInterpretation",f=>()=>f.call(d),f=>m=>{f.call(d,m),u.channelInterpretation=m}),Object.defineProperty(d,"maxChannelCount",{get:()=>u.maxChannelCount}),d.connect(u),d},TT=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,wT=o=>{const{port1:t}=new MessageChannel;try{t.postMessage(o)}finally{t.close()}},AT=(o,t,s,a,l)=>(u,d,f,m,p,g)=>{if(f!==null)try{const v=new f(u,m,g),x=new Map;let T=null;if(Object.defineProperties(v,{channelCount:{get:()=>g.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>T,set:S=>{typeof T=="function"&&v.removeEventListener("processorerror",T),T=typeof S=="function"?S:null,typeof T=="function"&&v.addEventListener("processorerror",T)}}}),v.addEventListener=(S=>(...C)=>{if(C[0]==="processorerror"){const w=typeof C[1]=="function"?C[1]:typeof C[1]=="object"&&C[1]!==null&&typeof C[1].handleEvent=="function"?C[1].handleEvent:null;if(w!==null){const O=x.get(C[1]);O!==void 0?C[1]=O:(C[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),w(R)):w(new ErrorEvent(C[0],{...R}))},x.set(w,C[1]))}}return S.call(v,"error",C[1],C[2]),S.call(v,...C)})(v.addEventListener),v.removeEventListener=(S=>(...C)=>{if(C[0]==="processorerror"){const w=x.get(C[1]);w!==void 0&&(x.delete(C[1]),C[1]=w)}return S.call(v,"error",C[1],C[2]),S.call(v,C[0],C[1],C[2])})(v.removeEventListener),g.numberOfOutputs!==0){const S=s(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(S).connect(u.destination),l(v,()=>S.disconnect(),()=>S.connect(u.destination))}return v}catch(v){throw v.code===11?a():v}if(p===void 0)throw a();return wT(g),t(u,d,p,g)},Dy=(o,t)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*t))))),CT=o=>new Promise((t,s)=>{const{port1:a,port2:l}=new MessageChannel;a.onmessage=({data:u})=>{a.close(),l.close(),t(u)},a.onmessageerror=({data:u})=>{a.close(),l.close(),s(u)},l.postMessage(o)}),NT=async(o,t)=>{const s=await CT(t);return new o(s)},ET=(o,t,s,a)=>{let l=nf.get(o);l===void 0&&(l=new WeakMap,nf.set(o,l));const u=NT(s,a);return l.set(t,u),u},DT=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>(T,S,C,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw m();const O=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(O.some(et=>et<1))throw m();if(O.length!==w.numberOfOutputs)throw t();if(w.channelCountMode!=="explicit")throw m();const R=w.channelCount*w.numberOfInputs,U=O.reduce((et,xt)=>et+xt,0),K=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length;if(R+K>6||U>6)throw m();const E=new MessageChannel,j=[],V=[];for(let et=0;et<w.numberOfInputs;et+=1)j.push(d(T,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),V.push(l(T,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const D=[];if(C.parameterDescriptors!==void 0)for(const{defaultValue:et,maxValue:xt,minValue:Ht,name:te}of C.parameterDescriptors){const Vt=u(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[te]!==void 0?w.parameterData[te]:et===void 0?0:et});Object.defineProperties(Vt.offset,{defaultValue:{get:()=>et===void 0?0:et},maxValue:{get:()=>xt===void 0?gn:xt},minValue:{get:()=>Ht===void 0?Bn:Ht}}),D.push(Vt)}const F=a(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+K)}),P=Dy(S,T.sampleRate),Z=f(T,P,R+K,Math.max(1,U)),Q=l(T,{channelCount:Math.max(1,U),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,U)}),ft=[];for(let et=0;et<w.numberOfOutputs;et+=1)ft.push(a(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[et]}));for(let et=0;et<w.numberOfInputs;et+=1){j[et].connect(V[et]);for(let xt=0;xt<w.channelCount;xt+=1)V[et].connect(F,xt,et*w.channelCount+xt)}const ut=new Cy(C.parameterDescriptors===void 0?[]:C.parameterDescriptors.map(({name:et},xt)=>{const Ht=D[xt];return Ht.connect(F,0,R+xt),Ht.start(0),[et,Ht.offset]}));F.connect(Z);let _t=w.channelInterpretation,k=null;const W=w.numberOfOutputs===0?[Z]:ft,ct={get bufferSize(){return P},get channelCount(){return w.channelCount},set channelCount(et){throw s()},get channelCountMode(){return w.channelCountMode},set channelCountMode(et){throw s()},get channelInterpretation(){return _t},set channelInterpretation(et){for(const xt of j)xt.channelInterpretation=et;_t=et},get context(){return Z.context},get inputs(){return j},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(et){typeof k=="function"&&ct.removeEventListener("processorerror",k),k=typeof et=="function"?et:null,typeof k=="function"&&ct.addEventListener("processorerror",k)},get parameters(){return ut},get port(){return E.port2},addEventListener(...et){return Z.addEventListener(et[0],et[1],et[2])},connect:o.bind(null,W),disconnect:p.bind(null,W),dispatchEvent(...et){return Z.dispatchEvent(et[0])},removeEventListener(...et){return Z.removeEventListener(et[0],et[1],et[2])}},mt=new Map;E.port1.addEventListener=(et=>(...xt)=>{if(xt[0]==="message"){const Ht=typeof xt[1]=="function"?xt[1]:typeof xt[1]=="object"&&xt[1]!==null&&typeof xt[1].handleEvent=="function"?xt[1].handleEvent:null;if(Ht!==null){const te=mt.get(xt[1]);te!==void 0?xt[1]=te:(xt[1]=Vt=>{g(T.currentTime,T.sampleRate,()=>Ht(Vt))},mt.set(Ht,xt[1]))}}return et.call(E.port1,xt[0],xt[1],xt[2])})(E.port1.addEventListener),E.port1.removeEventListener=(et=>(...xt)=>{if(xt[0]==="message"){const Ht=mt.get(xt[1]);Ht!==void 0&&(mt.delete(xt[1]),xt[1]=Ht)}return et.call(E.port1,xt[0],xt[1],xt[2])})(E.port1.removeEventListener);let A=null;Object.defineProperty(E.port1,"onmessage",{get:()=>A,set:et=>{typeof A=="function"&&E.port1.removeEventListener("message",A),A=typeof et=="function"?et:null,typeof A=="function"&&(E.port1.addEventListener("message",A),E.port1.start())}}),C.prototype.port=E.port1;let I=null;ET(T,ct,C,w).then(et=>I=et);const dt=eu(w.numberOfInputs,w.channelCount),bt=eu(w.numberOfOutputs,O),vt=C.parameterDescriptors===void 0?[]:C.parameterDescriptors.reduce((et,{name:xt})=>({...et,[xt]:new Float32Array(128)}),{});let gt=!0;const Xt=()=>{w.numberOfOutputs>0&&Z.disconnect(Q);for(let et=0,xt=0;et<w.numberOfOutputs;et+=1){const Ht=ft[et];for(let te=0;te<O[et];te+=1)Q.disconnect(Ht,xt+te,te);xt+=O[et]}},ot=new Map;Z.onaudioprocess=({inputBuffer:et,outputBuffer:xt})=>{if(I!==null){const Ht=v(ct);for(let te=0;te<P;te+=128){for(let Vt=0;Vt<w.numberOfInputs;Vt+=1)for(let Zt=0;Zt<w.channelCount;Zt+=1)tu(et,dt[Vt],Zt,Zt,te);C.parameterDescriptors!==void 0&&C.parameterDescriptors.forEach(({name:Vt},Zt)=>{tu(et,vt,Vt,R+Zt,te)});for(let Vt=0;Vt<w.numberOfInputs;Vt+=1)for(let Zt=0;Zt<O[Vt];Zt+=1)bt[Vt][Zt].byteLength===0&&(bt[Vt][Zt]=new Float32Array(128));try{const Vt=dt.map((_e,pn)=>{if(Ht[pn].size>0)return ot.set(pn,P/128),_e;const On=ot.get(pn);return On===void 0?[]:(_e.every(Ts=>Ts.every(cs=>cs===0))&&(On===1?ot.delete(pn):ot.set(pn,On-1)),_e)});gt=g(T.currentTime+te/T.sampleRate,T.sampleRate,()=>I.process(Vt,bt,vt));for(let _e=0,pn=0;_e<w.numberOfOutputs;_e+=1){for(let Je=0;Je<O[_e];Je+=1)Ny(xt,bt[_e],Je,pn+Je,te);pn+=O[_e]}}catch(Vt){gt=!1,ct.dispatchEvent(new ErrorEvent("processorerror",{colno:Vt.colno,filename:Vt.filename,lineno:Vt.lineno,message:Vt.message}))}if(!gt){for(let Vt=0;Vt<w.numberOfInputs;Vt+=1){j[Vt].disconnect(V[Vt]);for(let Zt=0;Zt<w.channelCount;Zt+=1)V[te].disconnect(F,Zt,Vt*w.channelCount+Zt)}if(C.parameterDescriptors!==void 0){const Vt=C.parameterDescriptors.length;for(let Zt=0;Zt<Vt;Zt+=1){const _e=D[Zt];_e.disconnect(F,0,R+Zt),_e.stop()}}F.disconnect(Z),Z.onaudioprocess=null,Qt?Xt():qe();break}}}};let Qt=!1;const pe=d(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),je=()=>Z.connect(pe).connect(T.destination),qe=()=>{Z.disconnect(pe),pe.disconnect()},Yn=()=>{if(gt){qe(),w.numberOfOutputs>0&&Z.connect(Q);for(let et=0,xt=0;et<w.numberOfOutputs;et+=1){const Ht=ft[et];for(let te=0;te<O[et];te+=1)Q.connect(Ht,xt+te,te);xt+=O[et]}}Qt=!0},Tn=()=>{gt&&(je(),Xt()),Qt=!1};return je(),x(ct,Yn,Tn)},Oy=(o,t)=>{const s=o.createBiquadFilter();return Ie(s,t),Ce(s,t,"Q"),Ce(s,t,"detune"),Ce(s,t,"frequency"),Ce(s,t,"gain"),ve(s,t,"type"),s},OT=(o,t)=>(s,a)=>{const l=s.createChannelMerger(a.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&t(s,l),Ie(l,a),l},MT=o=>{const t=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>t,set:s=>{if(s!==t)throw We()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:s=>{if(s!=="explicit")throw We()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:s=>{if(s!=="discrete")throw We()}})},cl=(o,t)=>{const s=o.createChannelSplitter(t.numberOfOutputs);return Ie(s,t),MT(s),s},RT=(o,t,s,a,l)=>(u,d)=>{if(u.createConstantSource===void 0)return s(u,d);const f=u.createConstantSource();return Ie(f,d),Ce(f,d,"offset"),t(a,()=>a(u))||xf(f),t(l,()=>l(u))||Sf(f),o(u,f),f},Dr=(o,t)=>(o.connect=t.connect.bind(t),o.disconnect=t.disconnect.bind(t),o),kT=(o,t,s,a)=>(l,{offset:u,...d})=>{const f=l.createBuffer(1,2,44100),m=t(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=s(l,{...d,gain:u}),g=f.getChannelData(0);g[0]=1,g[1]=1,m.buffer=f,m.loop=!0;const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(S){p.channelCount=S},get channelCountMode(){return p.channelCountMode},set channelCountMode(S){p.channelCountMode=S},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(S){p.channelInterpretation=S},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return m.onended},set onended(S){m.onended=S},addEventListener(...S){return m.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return m.dispatchEvent(S[0])},removeEventListener(...S){return m.removeEventListener(S[0],S[1],S[2])},start(S=0){m.start.call(m,S)},stop(S=0){m.stop.call(m,S)}},x=()=>m.connect(p),T=()=>m.disconnect(p);return o(l,m),a(Dr(v,p),x,T)},jT=(o,t)=>(s,a)=>{const l=s.createConvolver();if(Ie(l,a),a.disableNormalization===l.normalize&&(l.normalize=!a.disableNormalization),ve(l,a,"buffer"),a.channelCount>2||(t(l,"channelCount",u=>()=>u.call(l),u=>d=>{if(d>2)throw o();return u.call(l,d)}),a.channelCountMode==="max"))throw o();return t(l,"channelCountMode",u=>()=>u.call(l),u=>d=>{if(d==="max")throw o();return u.call(l,d)}),l},My=(o,t)=>{const s=o.createDelay(t.maxDelayTime);return Ie(s,t),Ce(s,t,"delayTime"),s},qT=o=>(t,s)=>{const a=t.createDynamicsCompressor();if(Ie(a,s),s.channelCount>2||s.channelCountMode==="max")throw o();return Ce(a,s,"attack"),Ce(a,s,"knee"),Ce(a,s,"ratio"),Ce(a,s,"release"),Ce(a,s,"threshold"),a},Dn=(o,t)=>{const s=o.createGain();return Ie(s,t),Ce(s,t,"gain"),s},VT=o=>(t,s,a)=>{if(t.createIIRFilter===void 0)return o(t,s,a);const l=t.createIIRFilter(a.feedforward,a.feedback);return Ie(l,a),l};function zT(o,t){const s=t[0]*t[0]+t[1]*t[1];return[(o[0]*t[0]+o[1]*t[1])/s,(o[1]*t[0]-o[0]*t[1])/s]}function BT(o,t){return[o[0]*t[0]-o[1]*t[1],o[0]*t[1]+o[1]*t[0]]}function P0(o,t){let s=[0,0];for(let a=o.length-1;a>=0;a-=1)s=BT(s,t),s[0]+=o[a];return s}const LT=(o,t,s,a)=>(l,u,{channelCount:d,channelCountMode:f,channelInterpretation:m,feedback:p,feedforward:g})=>{const v=Dy(u,l.sampleRate),x=p instanceof Float64Array?p:new Float64Array(p),T=g instanceof Float64Array?g:new Float64Array(g),S=x.length,C=T.length,w=Math.min(S,C);if(S===0||S>20)throw a();if(x[0]===0)throw t();if(C===0||C>20)throw a();if(T[0]===0)throw t();if(x[0]!==1){for(let D=0;D<C;D+=1)T[D]/=x[0];for(let D=1;D<S;D+=1)x[D]/=x[0]}const O=s(l,v,d,d);O.channelCount=d,O.channelCountMode=f,O.channelInterpretation=m;const R=32,U=[],K=[],E=[];for(let D=0;D<d;D+=1){U.push(0);const F=new Float32Array(R),P=new Float32Array(R);F.fill(0),P.fill(0),K.push(F),E.push(P)}O.onaudioprocess=D=>{const F=D.inputBuffer,P=D.outputBuffer,Z=F.numberOfChannels;for(let Q=0;Q<Z;Q+=1){const ft=F.getChannelData(Q),ut=P.getChannelData(Q);U[Q]=Ey(x,S,T,C,w,K[Q],E[Q],U[Q],R,ft,ut)}};const j=l.sampleRate/2;return Dr({get bufferSize(){return v},get channelCount(){return O.channelCount},set channelCount(D){O.channelCount=D},get channelCountMode(){return O.channelCountMode},set channelCountMode(D){O.channelCountMode=D},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(D){O.channelInterpretation=D},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},addEventListener(...D){return O.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return O.dispatchEvent(D[0])},getFrequencyResponse(D,F,P){if(D.length!==F.length||F.length!==P.length)throw o();const Z=D.length;for(let Q=0;Q<Z;Q+=1){const ft=-Math.PI*(D[Q]/j),ut=[Math.cos(ft),Math.sin(ft)],_t=P0(T,ut),k=P0(x,ut),W=zT(_t,k);F[Q]=Math.sqrt(W[0]*W[0]+W[1]*W[1]),P[Q]=Math.atan2(W[1],W[0])}},removeEventListener(...D){return O.removeEventListener(D[0],D[1],D[2])}},O)},UT=(o,t)=>o.createMediaElementSource(t.mediaElement),FT=(o,t)=>{const s=o.createMediaStreamDestination();return Ie(s,t),s.numberOfOutputs===1&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s},IT=(o,{mediaStream:t})=>{const s=t.getAudioTracks();s.sort((u,d)=>u.id<d.id?-1:u.id>d.id?1:0);const a=s.slice(0,1),l=o.createMediaStreamSource(new MediaStream(a));return Object.defineProperty(l,"mediaStream",{value:t}),l},GT=(o,t)=>(s,{mediaStreamTrack:a})=>{if(typeof s.createMediaStreamTrackSource=="function")return s.createMediaStreamTrackSource(a);const l=new MediaStream([a]),u=s.createMediaStreamSource(l);if(a.kind!=="audio")throw o();if(t(s))throw new TypeError;return u},HT=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,PT=(o,t,s,a,l,u)=>(d,f)=>{const m=d.createOscillator();return Ie(m,f),Ce(m,f,"detune"),Ce(m,f,"frequency"),f.periodicWave!==void 0?m.setPeriodicWave(f.periodicWave):ve(m,f,"type"),t(s,()=>s(d))||xf(m),t(a,()=>a(d))||u(m,d),t(l,()=>l(d))||Sf(m),o(d,m),m},YT=o=>(t,s)=>{const a=t.createPanner();return a.orientationX===void 0?o(t,s):(Ie(a,s),Ce(a,s,"orientationX"),Ce(a,s,"orientationY"),Ce(a,s,"orientationZ"),Ce(a,s,"positionX"),Ce(a,s,"positionY"),Ce(a,s,"positionZ"),ve(a,s,"coneInnerAngle"),ve(a,s,"coneOuterAngle"),ve(a,s,"coneOuterGain"),ve(a,s,"distanceModel"),ve(a,s,"maxDistance"),ve(a,s,"panningModel"),ve(a,s,"refDistance"),ve(a,s,"rolloffFactor"),a)},XT=(o,t,s,a,l,u,d,f,m,p)=>(g,{coneInnerAngle:v,coneOuterAngle:x,coneOuterGain:T,distanceModel:S,maxDistance:C,orientationX:w,orientationY:O,orientationZ:R,panningModel:U,positionX:K,positionY:E,positionZ:j,refDistance:V,rolloffFactor:D,...F})=>{const P=g.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw d();Ie(P,F);const Z={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Q=s(g,{...Z,channelInterpretation:"speakers",numberOfInputs:6}),ft=a(g,{...F,gain:1}),ut=a(g,{...Z,gain:1}),_t=a(g,{...Z,gain:0}),k=a(g,{...Z,gain:0}),W=a(g,{...Z,gain:0}),ct=a(g,{...Z,gain:0}),mt=a(g,{...Z,gain:0}),A=l(g,256,6,1),I=u(g,{...Z,curve:new Float32Array([1,1]),oversample:"none"});let rt=[w,O,R],dt=[K,E,j];const bt=new Float32Array(1);A.onaudioprocess=({inputBuffer:ot})=>{const Qt=[m(ot,bt,0),m(ot,bt,1),m(ot,bt,2)];Qt.some((je,qe)=>je!==rt[qe])&&(P.setOrientation(...Qt),rt=Qt);const pe=[m(ot,bt,3),m(ot,bt,4),m(ot,bt,5)];pe.some((je,qe)=>je!==dt[qe])&&(P.setPosition(...pe),dt=pe)},Object.defineProperty(_t.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ct.gain,"defaultValue",{get:()=>0}),Object.defineProperty(mt.gain,"defaultValue",{get:()=>0});const vt={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(ot){if(ot>2)throw d();ft.channelCount=ot,P.channelCount=ot},get channelCountMode(){return P.channelCountMode},set channelCountMode(ot){if(ot==="max")throw d();ft.channelCountMode=ot,P.channelCountMode=ot},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(ot){ft.channelInterpretation=ot,P.channelInterpretation=ot},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(ot){P.coneInnerAngle=ot},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(ot){P.coneOuterAngle=ot},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(ot){if(ot<0||ot>1)throw t();P.coneOuterGain=ot},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(ot){P.distanceModel=ot},get inputs(){return[ft]},get maxDistance(){return P.maxDistance},set maxDistance(ot){if(ot<0)throw new RangeError;P.maxDistance=ot},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return ut.gain},get orientationY(){return _t.gain},get orientationZ(){return k.gain},get panningModel(){return P.panningModel},set panningModel(ot){P.panningModel=ot},get positionX(){return W.gain},get positionY(){return ct.gain},get positionZ(){return mt.gain},get refDistance(){return P.refDistance},set refDistance(ot){if(ot<0)throw new RangeError;P.refDistance=ot},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(ot){if(ot<0)throw new RangeError;P.rolloffFactor=ot},addEventListener(...ot){return ft.addEventListener(ot[0],ot[1],ot[2])},dispatchEvent(...ot){return ft.dispatchEvent(ot[0])},removeEventListener(...ot){return ft.removeEventListener(ot[0],ot[1],ot[2])}};v!==vt.coneInnerAngle&&(vt.coneInnerAngle=v),x!==vt.coneOuterAngle&&(vt.coneOuterAngle=x),T!==vt.coneOuterGain&&(vt.coneOuterGain=T),S!==vt.distanceModel&&(vt.distanceModel=S),C!==vt.maxDistance&&(vt.maxDistance=C),w!==vt.orientationX.value&&(vt.orientationX.value=w),O!==vt.orientationY.value&&(vt.orientationY.value=O),R!==vt.orientationZ.value&&(vt.orientationZ.value=R),U!==vt.panningModel&&(vt.panningModel=U),K!==vt.positionX.value&&(vt.positionX.value=K),E!==vt.positionY.value&&(vt.positionY.value=E),j!==vt.positionZ.value&&(vt.positionZ.value=j),V!==vt.refDistance&&(vt.refDistance=V),D!==vt.rolloffFactor&&(vt.rolloffFactor=D),(rt[0]!==1||rt[1]!==0||rt[2]!==0)&&P.setOrientation(...rt),(dt[0]!==0||dt[1]!==0||dt[2]!==0)&&P.setPosition(...dt);const gt=()=>{ft.connect(P),o(ft,I,0,0),I.connect(ut).connect(Q,0,0),I.connect(_t).connect(Q,0,1),I.connect(k).connect(Q,0,2),I.connect(W).connect(Q,0,3),I.connect(ct).connect(Q,0,4),I.connect(mt).connect(Q,0,5),Q.connect(A).connect(g.destination)},Xt=()=>{ft.disconnect(P),f(ft,I,0,0),I.disconnect(ut),ut.disconnect(Q),I.disconnect(_t),_t.disconnect(Q),I.disconnect(k),k.disconnect(Q),I.disconnect(W),W.disconnect(Q),I.disconnect(ct),ct.disconnect(Q),I.disconnect(mt),mt.disconnect(Q),Q.disconnect(A),A.disconnect(g.destination)};return p(Dr(vt,P),gt,Xt)},QT=o=>(t,{disableNormalization:s,imag:a,real:l})=>{const u=a instanceof Float32Array?a:new Float32Array(a),d=l instanceof Float32Array?l:new Float32Array(l),f=t.createPeriodicWave(d,u,{disableNormalization:s});if(Array.from(a).length<2)throw o();return f},ul=(o,t,s,a)=>o.createScriptProcessor(t,s,a),ZT=(o,t)=>(s,a)=>{const l=a.channelCountMode;if(l==="clamped-max")throw t();if(s.createStereoPanner===void 0)return o(s,a);const u=s.createStereoPanner();return Ie(u,a),Ce(u,a,"pan"),Object.defineProperty(u,"channelCountMode",{get:()=>l,set:d=>{if(d!==l)throw t()}}),u},WT=(o,t,s,a,l,u)=>{const f=new Float32Array([1,1]),m=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},v=(S,C,w,O)=>{const R=new Float32Array(16385),U=new Float32Array(16385);for(let F=0;F<16385;F+=1){const P=F/16384*m;R[F]=Math.cos(P),U[F]=Math.sin(P)}const K=s(S,{...p,gain:0}),E=a(S,{...g,curve:R}),j=a(S,{...g,curve:f}),V=s(S,{...p,gain:0}),D=a(S,{...g,curve:U});return{connectGraph(){C.connect(K),C.connect(j.inputs===void 0?j:j.inputs[0]),C.connect(V),j.connect(w),w.connect(E.inputs===void 0?E:E.inputs[0]),w.connect(D.inputs===void 0?D:D.inputs[0]),E.connect(K.gain),D.connect(V.gain),K.connect(O,0,0),V.connect(O,0,1)},disconnectGraph(){C.disconnect(K),C.disconnect(j.inputs===void 0?j:j.inputs[0]),C.disconnect(V),j.disconnect(w),w.disconnect(E.inputs===void 0?E:E.inputs[0]),w.disconnect(D.inputs===void 0?D:D.inputs[0]),E.disconnect(K.gain),D.disconnect(V.gain),K.disconnect(O,0,0),V.disconnect(O,0,1)}}},x=(S,C,w,O)=>{const R=new Float32Array(16385),U=new Float32Array(16385),K=new Float32Array(16385),E=new Float32Array(16385),j=Math.floor(16385/2);for(let W=0;W<16385;W+=1)if(W>j){const ct=(W-j)/(16384-j)*m;R[W]=Math.cos(ct),U[W]=Math.sin(ct),K[W]=0,E[W]=1}else{const ct=W/(16384-j)*m;R[W]=1,U[W]=0,K[W]=Math.cos(ct),E[W]=Math.sin(ct)}const V=t(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),D=s(S,{...p,gain:0}),F=a(S,{...g,curve:R}),P=s(S,{...p,gain:0}),Z=a(S,{...g,curve:U}),Q=a(S,{...g,curve:f}),ft=s(S,{...p,gain:0}),ut=a(S,{...g,curve:K}),_t=s(S,{...p,gain:0}),k=a(S,{...g,curve:E});return{connectGraph(){C.connect(V),C.connect(Q.inputs===void 0?Q:Q.inputs[0]),V.connect(D,0),V.connect(P,0),V.connect(ft,1),V.connect(_t,1),Q.connect(w),w.connect(F.inputs===void 0?F:F.inputs[0]),w.connect(Z.inputs===void 0?Z:Z.inputs[0]),w.connect(ut.inputs===void 0?ut:ut.inputs[0]),w.connect(k.inputs===void 0?k:k.inputs[0]),F.connect(D.gain),Z.connect(P.gain),ut.connect(ft.gain),k.connect(_t.gain),D.connect(O,0,0),ft.connect(O,0,0),P.connect(O,0,1),_t.connect(O,0,1)},disconnectGraph(){C.disconnect(V),C.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),V.disconnect(D,0),V.disconnect(P,0),V.disconnect(ft,1),V.disconnect(_t,1),Q.disconnect(w),w.disconnect(F.inputs===void 0?F:F.inputs[0]),w.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),w.disconnect(ut.inputs===void 0?ut:ut.inputs[0]),w.disconnect(k.inputs===void 0?k:k.inputs[0]),F.disconnect(D.gain),Z.disconnect(P.gain),ut.disconnect(ft.gain),k.disconnect(_t.gain),D.disconnect(O,0,0),ft.disconnect(O,0,0),P.disconnect(O,0,1),_t.disconnect(O,0,1)}}},T=(S,C,w,O,R)=>{if(C===1)return v(S,w,O,R);if(C===2)return x(S,w,O,R);throw l()};return(S,{channelCount:C,channelCountMode:w,pan:O,...R})=>{if(w==="max")throw l();const U=o(S,{...R,channelCount:1,channelCountMode:w,numberOfInputs:2}),K=s(S,{...R,channelCount:C,channelCountMode:w,gain:1}),E=s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:O});let{connectGraph:j,disconnectGraph:V}=T(S,C,K,E,U);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const D={get bufferSize(){},get channelCount(){return K.channelCount},set channelCount(Q){K.channelCount!==Q&&(F&&V(),{connectGraph:j,disconnectGraph:V}=T(S,Q,K,E,U),F&&j()),K.channelCount=Q},get channelCountMode(){return K.channelCountMode},set channelCountMode(Q){if(Q==="clamped-max"||Q==="max")throw l();K.channelCountMode=Q},get channelInterpretation(){return K.channelInterpretation},set channelInterpretation(Q){K.channelInterpretation=Q},get context(){return K.context},get inputs(){return[K]},get numberOfInputs(){return K.numberOfInputs},get numberOfOutputs(){return K.numberOfOutputs},get pan(){return E.gain},addEventListener(...Q){return K.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return K.dispatchEvent(Q[0])},removeEventListener(...Q){return K.removeEventListener(Q[0],Q[1],Q[2])}};let F=!1;const P=()=>{j(),F=!0},Z=()=>{V(),F=!1};return u(Dr(D,U),P,Z)}},KT=(o,t,s,a,l,u,d)=>(f,m)=>{const p=f.createWaveShaper();if(u!==null&&u.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return s(f,m);Ie(p,m);const g=m.curve===null||m.curve instanceof Float32Array?m.curve:new Float32Array(m.curve);if(g!==null&&g.length<2)throw t();ve(p,{curve:g},"curve"),ve(p,m,"oversample");let v=null,x=!1;return d(p,"curve",C=>()=>C.call(p),C=>w=>(C.call(p,w),x&&(a(w)&&v===null?v=o(f,p):!a(w)&&v!==null&&(v(),v=null)),w)),l(p,()=>{x=!0,a(p.curve)&&(v=o(f,p))},()=>{x=!1,v!==null&&(v(),v=null)})},JT=(o,t,s,a,l)=>(u,{curve:d,oversample:f,...m})=>{const p=u.createWaveShaper(),g=u.createWaveShaper();Ie(p,m),Ie(g,m);const v=s(u,{...m,gain:1}),x=s(u,{...m,gain:-1}),T=s(u,{...m,gain:1}),S=s(u,{...m,gain:-1});let C=null,w=!1,O=null;const R={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(E){v.channelCount=E,x.channelCount=E,p.channelCount=E,T.channelCount=E,g.channelCount=E,S.channelCount=E},get channelCountMode(){return p.channelCountMode},set channelCountMode(E){v.channelCountMode=E,x.channelCountMode=E,p.channelCountMode=E,T.channelCountMode=E,g.channelCountMode=E,S.channelCountMode=E},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(E){v.channelInterpretation=E,x.channelInterpretation=E,p.channelInterpretation=E,T.channelInterpretation=E,g.channelInterpretation=E,S.channelInterpretation=E},get context(){return p.context},get curve(){return O},set curve(E){if(E!==null&&E.length<2)throw t();if(E===null)p.curve=E,g.curve=E;else{const j=E.length,V=new Float32Array(j+2-j%2),D=new Float32Array(j+2-j%2);V[0]=E[0],D[0]=-E[j-1];const F=Math.ceil((j+1)/2),P=(j+1)/2-1;for(let Z=1;Z<F;Z+=1){const Q=Z/F*P,ft=Math.floor(Q),ut=Math.ceil(Q);V[Z]=ft===ut?E[ft]:(1-(Q-ft))*E[ft]+(1-(ut-Q))*E[ut],D[Z]=ft===ut?-E[j-1-ft]:-((1-(Q-ft))*E[j-1-ft])-(1-(ut-Q))*E[j-1-ut]}V[F]=j%2===1?E[F-1]:(E[F-2]+E[F-1])/2,p.curve=V,g.curve=D}O=E,w&&(a(O)&&C===null?C=o(u,v):C!==null&&(C(),C=null))},get inputs(){return[v]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(E){p.oversample=E,g.oversample=E},addEventListener(...E){return v.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return v.dispatchEvent(E[0])},removeEventListener(...E){return v.removeEventListener(E[0],E[1],E[2])}};d!==null&&(R.curve=d instanceof Float32Array?d:new Float32Array(d)),f!==R.oversample&&(R.oversample=f);const U=()=>{v.connect(p).connect(T),v.connect(x).connect(g).connect(S).connect(T),w=!0,a(O)&&(C=o(u,v))},K=()=>{v.disconnect(p),p.disconnect(T),v.disconnect(x),x.disconnect(g),g.disconnect(S),S.disconnect(T),w=!1,C!==null&&(C(),C=null)};return l(Dr(R,T),U,K)},Sn=()=>new DOMException("","NotSupportedError"),$T={numberOfChannels:1},tw=(o,t,s,a,l)=>class extends o{constructor(d,f,m){let p;if(typeof d=="number"&&f!==void 0&&m!==void 0)p={length:f,numberOfChannels:d,sampleRate:m};else if(typeof d=="object")p=d;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:v,sampleRate:x}={...$T,...p},T=a(v,g,x);t($o,()=>$o(T))||T.addEventListener("statechange",(()=>{let S=0;const C=w=>{this._state==="running"&&(S>0?(T.removeEventListener("statechange",C),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):S+=1)};return C})()),super(T,v),this._length=g,this._nativeOfflineAudioContext=T,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(s()):(this._state="running",l(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Sy(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=>this._waitForThePromiseToSettle(d))}},ew={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},nw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...ew,...p},x=s(g,v),T=u(g),S=T?a():null,C=m.sampleRate/2;super(m,!1,x,S),this._detune=t(this,T,x.detune,153600,-153600),this._frequency=t(this,T,x.frequency,C,-C),this._nativeOscillatorNode=x,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(m){const p=typeof m=="function"?d(this,m):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?m:g}get type(){return this._nativeOscillatorNode.type}set type(m){this._nativeOscillatorNode.type=m,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(m){this._nativeOscillatorNode.setPeriodicWave(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=m)}start(m=0){if(this._nativeOscillatorNode.start(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=m),this.context.state!=="closed"){vr(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),ni(this)&&rl(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(m=0){this._nativeOscillatorNode.stop(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=m)}},sw=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null,m=null;const p=async(g,v)=>{let x=s(g);const T=fn(x,v);if(!T){const S={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,detune:x.detune.value,frequency:x.frequency.value,periodicWave:d===null?void 0:d,type:x.type};x=t(v,S),f!==null&&x.start(f),m!==null&&x.stop(m)}return u.set(v,x),T?(await o(v,g.detune,x.detune),await o(v,g.frequency,x.frequency)):(await a(v,g.detune,x.detune),await a(v,g.frequency,x.frequency)),await l(g,v,x),x};return{set periodicWave(g){d=g},set start(g){f=g},set stop(g){m=g},render(g,v){const x=u.get(v);return x!==void 0?Promise.resolve(x):p(g,v)}}},iw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},aw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...iw,...p},x=s(g,v),T=u(g),S=T?a():null;super(m,!1,x,S),this._nativePannerNode=x,this._orientationX=t(this,T,x.orientationX,gn,Bn),this._orientationY=t(this,T,x.orientationY,gn,Bn),this._orientationZ=t(this,T,x.orientationZ,gn,Bn),this._positionX=t(this,T,x.positionX,gn,Bn),this._positionY=t(this,T,x.positionY,gn,Bn),this._positionZ=t(this,T,x.positionZ,gn,Bn),d(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(m){this._nativePannerNode.coneInnerAngle=m}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(m){this._nativePannerNode.coneOuterAngle=m}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(m){this._nativePannerNode.coneOuterGain=m}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(m){this._nativePannerNode.distanceModel=m}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(m){this._nativePannerNode.maxDistance=m}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(m){this._nativePannerNode.panningModel=m}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(m){this._nativePannerNode.refDistance=m}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(m){this._nativePannerNode.rolloffFactor=m}},rw=(o,t,s,a,l,u,d,f,m,p)=>()=>{const g=new WeakMap;let v=null;const x=async(T,S)=>{let C=null,w=u(T);const O={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},R={...O,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},U=fn(w,S);if("bufferSize"in w)C=a(S,{...O,gain:1});else if(!U){const K={...R,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=l(S,K)}if(g.set(S,C===null?w:C),C!==null){if(v===null){if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Z=new d(6,T.context.length,S.sampleRate),Q=t(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});Q.connect(Z.destination),v=(async()=>{const ft=await Promise.all([T.orientationX,T.orientationY,T.orientationZ,T.positionX,T.positionY,T.positionZ].map(async(ut,_t)=>{const k=s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_t===0?1:0});return await f(Z,ut,k.offset),k}));for(let ut=0;ut<6;ut+=1)ft[ut].connect(Q,0,ut),ft[ut].start(0);return p(Z)})()}const K=await v,E=a(S,{...O,gain:1});await m(T,S,E);const j=[];for(let Z=0;Z<K.numberOfChannels;Z+=1)j.push(K.getChannelData(Z));let V=[j[0][0],j[1][0],j[2][0]],D=[j[3][0],j[4][0],j[5][0]],F=a(S,{...O,gain:1}),P=l(S,{...R,orientationX:V[0],orientationY:V[1],orientationZ:V[2],positionX:D[0],positionY:D[1],positionZ:D[2]});E.connect(F).connect(P.inputs[0]),P.connect(C);for(let Z=128;Z<K.length;Z+=128){const Q=[j[0][Z],j[1][Z],j[2][Z]],ft=[j[3][Z],j[4][Z],j[5][Z]];if(Q.some((ut,_t)=>ut!==V[_t])||ft.some((ut,_t)=>ut!==D[_t])){V=Q,D=ft;const ut=Z/S.sampleRate;F.gain.setValueAtTime(0,ut),F=a(S,{...O,gain:0}),P=l(S,{...R,orientationX:V[0],orientationY:V[1],orientationZ:V[2],positionX:D[0],positionY:D[1],positionZ:D[2]}),F.gain.setValueAtTime(1,ut),E.connect(F).connect(P.inputs[0]),P.connect(C)}}return C}return U?(await o(S,T.orientationX,w.orientationX),await o(S,T.orientationY,w.orientationY),await o(S,T.orientationZ,w.orientationZ),await o(S,T.positionX,w.positionX),await o(S,T.positionY,w.positionY),await o(S,T.positionZ,w.positionZ)):(await f(S,T.orientationX,w.orientationX),await f(S,T.orientationY,w.orientationY),await f(S,T.orientationZ,w.orientationZ),await f(S,T.positionX,w.positionX),await f(S,T.positionY,w.positionY),await f(S,T.positionZ,w.positionZ)),Er(w)?await m(T,S,w.inputs[0]):await m(T,S,w),w};return{render(T,S){const C=g.get(S);return C!==void 0?Promise.resolve(C):x(T,S)}}},ow={disableNormalization:!1},lw=(o,t,s,a)=>class Ry{constructor(u,d){const f=t(u),m=a({...ow,...d}),p=o(f,m);return s.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===Ry.prototype||s.has(u)}},cw=(o,t)=>(s,a,l)=>(o(a).replay(l),t(a,s,l)),uw=(o,t,s)=>async(a,l,u)=>{const d=o(a);await Promise.all(d.activeInputs.map((f,m)=>Array.from(f).map(async([p,g])=>{const x=await t(p).render(p,l),T=a.context.destination;!s(p)&&(a!==T||!s(a))&&x.connect(u,g,m)})).reduce((f,m)=>[...f,...m],[]))},hw=(o,t,s)=>async(a,l,u)=>{const d=t(a);await Promise.all(Array.from(d.activeInputs).map(async([f,m])=>{const g=await o(f).render(f,l);s(f)||g.connect(u,m)}))},dw=(o,t,s,a)=>l=>o($o,()=>$o(l))?Promise.resolve(o(a,a)).then(u=>{if(!u){const d=s(l,512,0,1);l.oncomplete=()=>{d.onaudioprocess=null,d.disconnect()},d.onaudioprocess=()=>l.currentTime,d.connect(l.destination)}return l.startRendering()}):new Promise(u=>{const d=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});l.oncomplete=f=>{d.disconnect(),u(f.renderedBuffer)},d.connect(l.destination),l.startRendering()}),fw=o=>(t,s)=>{o.set(t,s)},pw=o=>(t,s)=>o.set(t,s),mw=(o,t,s,a,l,u,d,f)=>(m,p)=>s(m).render(m,p).then(()=>Promise.all(Array.from(a(p)).map(g=>s(g).render(g,p)))).then(()=>l(p)).then(g=>(typeof g.copyFromChannel!="function"?(d(g),yf(g)):t(u,()=>u(g))||f(g),o.add(g),g)),gw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},_w=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...gw,...m},v=s(p,g),x=u(p),T=x?a():null;super(f,!1,v,T),this._pan=t(this,x,v.pan)}get pan(){return this._pan}},yw=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=fn(p,m);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=t(m,v)}return u.set(m,p),g?await o(m,f.pan,p.pan):await a(m,f.pan,p.pan),Er(p)?await l(f,m,p.inputs[0]):await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},vw=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},bw=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createBuffer(1,1,44100);if(s.copyToChannel===void 0)return!0;const a=new Float32Array(2);try{s.copyFromChannel(a,0,0)}catch{return!1}return!0},xw=o=>()=>{if(o===null)return!1;if(o.prototype!==void 0&&o.prototype.close!==void 0)return!0;const t=new o,s=t.close!==void 0;try{t.close()}catch{}return s},Sw=o=>()=>{if(o===null)return Promise.resolve(!1);const t=new o(1,1,44100);return new Promise(s=>{let a=!0;const l=d=>{a&&(a=!1,t.startRendering(),s(d instanceof TypeError))};let u;try{u=t.decodeAudioData(null,()=>{},l)}catch(d){l(d)}u!==void 0&&u.catch(l)})},Tw=o=>()=>{if(o===null)return!1;let t;try{t=new o({latencyHint:"balanced"})}catch{return!1}return t.close(),!0},ww=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createGain(),a=s.connect(s)===s;return s.disconnect(s),a},Aw=(o,t)=>async()=>{if(o===null)return!0;if(t===null)return!1;const s=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new MessageChannel,l=new t(1,128,44100),u=URL.createObjectURL(s);let d=!1;try{await l.audioWorklet.addModule(u);const f=new o(l,"a",{numberOfOutputs:0}),m=l.createOscillator();await new Promise(p=>{f.port.onmessage=()=>p(),f.port.postMessage(a.port2,[a.port2])}),f.port.onmessage=()=>d=!0,m.connect(f),m.start(0),await l.startRendering(),d=await new Promise(p=>{a.port1.onmessage=({data:g})=>p(g===1),a.port1.postMessage(0)})}catch{}finally{a.port1.close(),URL.revokeObjectURL(u)}return d},Cw=(o,t)=>async()=>{if(o===null)return!0;if(t===null)return!1;const s=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new t(1,128,44100),l=URL.createObjectURL(s);let u=!1,d=!1;try{await a.audioWorklet.addModule(l);const f=new o(a,"a",{numberOfOutputs:0}),m=a.createOscillator();f.port.onmessage=()=>u=!0,f.onprocessorerror=()=>d=!0,m.connect(f),m.start(0),await a.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(l)}return u&&!d},Nw=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createChannelMerger();if(s.channelCountMode==="max")return!0;try{s.channelCount=2}catch{return!0}return!1},Ew=o=>()=>{if(o===null)return!1;const t=new o(1,1,44100);return t.createConstantSource===void 0?!0:t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},Dw=o=>()=>{if(o===null)return!1;const t=new o(1,1,44100),s=t.createConvolver();s.buffer=t.createBuffer(1,1,t.sampleRate);try{s.buffer=t.createBuffer(1,1,t.sampleRate)}catch{return!1}return!0},Ow=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createConvolver();try{s.channelCount=1}catch{return!1}return!0},Mw=o=>()=>o!==null&&o.hasOwnProperty("isSecureContext"),Rw=o=>()=>{if(o===null)return!1;const t=new o;try{return t.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{t.close()}},kw=(o,t)=>()=>{if(t===null)return Promise.resolve(!1);const s=new t(1,1,44100),a=o(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(l=>{s.oncomplete=()=>{a.disconnect(),l(s.currentTime!==0)},s.startRendering()})},jw=o=>()=>{if(o===null)return Promise.resolve(!1);const t=new o(1,1,44100);if(t.createStereoPanner===void 0||t.createConstantSource===void 0)return Promise.resolve(!0);const s=t.createConstantSource(),a=t.createStereoPanner();return s.channelCount=1,s.offset.value=1,a.channelCount=1,s.start(),s.connect(a).connect(t.destination),t.startRendering().then(l=>l.getChannelData(0)[0]!==1)},qw=()=>new DOMException("","UnknownError"),Vw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},zw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...Vw,...p},x=s(g,v),S=u(g)?a():null;super(m,!0,x,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=x,d(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(m){if(m===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(m.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=m}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(m){this._nativeWaveShaperNode.oversample=m}},Bw=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!fn(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=o(d,p)}return a.set(d,f),Er(f)?await s(u,d,f.inputs[0]):await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},Lw=()=>typeof window>"u"?null:window,Uw=(o,t)=>s=>{s.copyFromChannel=(a,l,u=0)=>{const d=o(u),f=o(l);if(f>=s.numberOfChannels)throw t();const m=s.length,p=s.getChannelData(f),g=a.length;for(let v=d<0?-d:0;v+d<m&&v<g;v+=1)a[v]=p[v+d]},s.copyToChannel=(a,l,u=0)=>{const d=o(u),f=o(l);if(f>=s.numberOfChannels)throw t();const m=s.length,p=s.getChannelData(f),g=a.length;for(let v=d<0?-d:0;v+d<m&&v<g;v+=1)p[v+d]=a[v]}},Fw=o=>t=>{t.copyFromChannel=(s=>(a,l,u=0)=>{const d=o(u),f=o(l);if(d<t.length)return s.call(t,a,f,d)})(t.copyFromChannel),t.copyToChannel=(s=>(a,l,u=0)=>{const d=o(u),f=o(l);if(d<t.length)return s.call(t,a,f,d)})(t.copyToChannel)},Iw=o=>(t,s)=>{const a=s.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=a),o(t,"buffer",l=>()=>{const u=l.call(t);return u===a?null:u},l=>u=>l.call(t,u===null?a:u))},Gw=(o,t)=>(s,a)=>{a.channelCount=1,a.channelCountMode="explicit",Object.defineProperty(a,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(a,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const l=s.createBufferSource();t(a,()=>{const f=a.numberOfInputs;for(let m=0;m<f;m+=1)l.connect(a,0,m)},()=>l.disconnect(a))},ky=(o,t,s)=>o.copyFromChannel===void 0?o.getChannelData(s)[0]:(o.copyFromChannel(t,s),t[0]),jy=o=>{if(o===null)return!1;const t=o.length;return t%2!==0?o[Math.floor(t/2)]!==0:o[t/2-1]+o[t/2]!==0},hl=(o,t,s,a)=>{let l=o;for(;!l.hasOwnProperty(t);)l=Object.getPrototypeOf(l);const{get:u,set:d}=Object.getOwnPropertyDescriptor(l,t);Object.defineProperty(o,t,{get:s(u),set:a(d)})},Hw=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),Pw=o=>({...o,channelCount:o.numberOfOutputs}),Yw=o=>{const{imag:t,real:s}=o;return t===void 0?s===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(s,()=>0),real:s}:s===void 0?{...o,imag:t,real:Array.from(t,()=>0)}:{...o,imag:t,real:s}},qy=(o,t,s)=>{try{o.setValueAtTime(t,s)}catch(a){if(a.code!==9)throw a;qy(o,t,s+1e-7)}},Xw=o=>{const t=o.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Qw=o=>{const t=o.createBufferSource(),s=o.createBuffer(1,1,44100);t.buffer=s;try{t.start(0,1)}catch{return!1}return!0},Zw=o=>{const t=o.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Tf=o=>{const t=o.createOscillator();try{t.start(-1)}catch(s){return s instanceof RangeError}return!1},Vy=o=>{const t=o.createBuffer(1,1,44100),s=o.createBufferSource();s.buffer=t,s.start(),s.stop();try{return s.stop(),!0}catch{return!1}},wf=o=>{const t=o.createOscillator();try{t.stop(-1)}catch(s){return s instanceof RangeError}return!1},Ww=o=>{const{port1:t,port2:s}=new MessageChannel;try{t.postMessage(o)}finally{t.close(),s.close()}},Kw=()=>{try{new DOMException}catch{return!1}return!0},Jw=()=>new Promise(o=>{const t=new ArrayBuffer(0),{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:l})=>o(l!==null),a.postMessage(t,[t])}),$w=o=>{o.start=(t=>(s=0,a=0,l)=>{const u=o.buffer,d=u===null?a:Math.min(u.duration,a);u!==null&&d>u.duration-.5/o.context.sampleRate?t.call(o,s,0,0):t.call(o,s,d,l)})(o.start)},zy=(o,t)=>{const s=t.createGain();o.connect(s);const a=(l=>()=>{l.call(o,s),o.removeEventListener("ended",a)})(o.disconnect);o.addEventListener("ended",a),Dr(o,s),o.stop=(l=>{let u=!1;return(d=0)=>{if(u)try{l.call(o,d)}catch{s.gain.setValueAtTime(0,d)}else l.call(o,d),u=!0}})(o.stop)},Or=(o,t)=>s=>{const a={value:o};return Object.defineProperties(s,{currentTarget:a,target:a}),typeof t=="function"?t.call(o,s):t.handleEvent.call(o,s)},tA=i1(Ta),eA=u1(Ta),nA=SS(uu),By=new WeakMap,sA=US(By),ls=J1(new Map,new WeakMap),ys=Lw(),Ly=_T(ls,js),Af=LS(yn),un=uw(yn,Af,xa),iA=m1(Ly,ge,un),fe=GS(cu),Qe=HT(ys),oe=rT(Qe),Uy=new WeakMap,Fy=RS(Or),Ui=xT(ys),Cf=nT(Ui),Nf=sT(ys),Iy=iT(ys),br=TT(ys),ke=U1(a1(my),c1(tA,eA,Kc,nA,Jc,yn,sA,al,ge,Ta,ni,xa,Gc),ls,KS(tf,Jc,yn,ge,Jo,ni),js,hu,Sn,yS(Kc,tf,yn,ge,Jo,fe,ni,oe),AS(Uy,yn,_s),Fy,fe,Cf,Nf,Iy,oe,br),aA=p1(ke,iA,js,Ly,fe,oe),Ef=new WeakSet,Y0=yT(ys),Gy=hS(new Uint32Array(1)),Df=Uw(Gy,js),Of=Fw(Gy),Hy=_1(Ef,ls,Sn,Y0,Qe,vw(Y0),Df,Of),du=h1(Dn),Py=hw(Af,ol,xa),qs=aS(Py),Mr=bT(du,ls,Xw,Qw,Zw,Tf,Vy,wf,$w,Iw(hl),zy),Vs=cw(FS(ol),Py),rA=b1(qs,Mr,ge,Vs,un),bs=F1(r1(gy),Uy,_f,I1,Jx,$x,t1,e1,n1,Kd,fy,Ui,qy),oA=v1(ke,rA,bs,We,Mr,fe,oe,Or),lA=D1(ke,O1,js,We,ST(Dn,hl),fe,oe,un),cA=K1(qs,Oy,ge,Vs,un),wa=pw(By),uA=W1(ke,bs,cA,hu,Oy,fe,oe,wa),Yi=mT(Ta,Nf),hA=Gw(We,Yi),Xi=OT(Ui,hA),dA=eS(Xi,ge,un),fA=tS(ke,dA,Xi,fe,oe),pA=iS(cl,ge,un),mA=sS(ke,pA,cl,fe,oe,Pw),gA=kT(du,Mr,Dn,Yi),Rr=RT(du,ls,gA,Tf,wf),_A=uS(qs,Rr,ge,Vs,un),yA=cS(ke,bs,_A,Rr,fe,oe,Or),Yy=jT(Sn,hl),vA=pS(Yy,ge,un),bA=fS(ke,vA,Yy,fe,oe,wa),xA=xS(qs,My,ge,Vs,un),SA=bS(ke,bs,xA,My,fe,oe,wa),Xy=qT(Sn),TA=DS(qs,Xy,ge,Vs,un),wA=ES(ke,bs,TA,Xy,Sn,fe,oe,wa),AA=zS(qs,Dn,ge,Vs,un),CA=VS(ke,bs,AA,Dn,fe,oe),NA=LT(hu,We,ul,Sn),fu=dw(ls,Dn,ul,kw(Dn,Qe)),EA=WS(Mr,ge,Qe,un,fu),DA=VT(NA),OA=QS(ke,DA,EA,fe,oe,wa),MA=M1(bs,Xi,Rr,ul,Sn,ky,oe,hl),Qy=new WeakMap,RA=pT(lA,MA,Fy,oe,Qy,Or),Zy=PT(du,ls,Tf,Vy,wf,zy),kA=sw(qs,Zy,ge,Vs,un),jA=nw(ke,bs,Zy,kA,fe,oe,Or),Wy=oS(Mr),qA=JT(Wy,We,Dn,jy,Yi),pu=KT(Wy,We,qA,jy,Yi,Ui,hl),VA=XT(Kc,We,Xi,Dn,ul,pu,Sn,Jc,ky,Yi),Ky=YT(VA),zA=rw(qs,Xi,Rr,Dn,Ky,ge,Qe,Vs,un,fu),BA=aw(ke,bs,Ky,zA,fe,oe,wa),LA=QT(js),UA=lw(LA,fe,new WeakSet,Yw),FA=WT(Xi,cl,Dn,pu,Sn,Yi),Jy=ZT(FA,Sn),IA=yw(qs,Jy,ge,Vs,un),GA=_w(ke,bs,Jy,IA,fe,oe),HA=Bw(pu,ge,un),PA=zw(ke,We,pu,HA,fe,oe,wa),$y=oT(ys),Mf=kS(ys),tv=new WeakMap,YA=HS(tv,Qe),XA=$y?l1(ls,Sn,MS(ys),Mf,jS(s1),fe,YA,oe,br,new WeakMap,new WeakMap,Cw(br,Qe),ys):void 0,QA=aT(Cf,oe),ZA=_S(Ef,ls,gS,OS,new WeakSet,fe,QA,Zc,$o,Df,Of),ev=Q1(XA,aA,Hy,oA,uA,fA,mA,yA,bA,ZA,SA,wA,CA,OA,RA,jA,BA,UA,GA,PA),WA=cT(ke,UT,fe,oe),KA=hT(ke,FT,fe,oe),JA=dT(ke,IT,fe,oe),$A=GT(We,oe),tC=fT(ke,$A,fe),eC=E1(ev,We,Sn,qw,WA,KA,JA,tC,Ui),Rf=PS(Qy),nC=d1(Rf),nv=rS(js),sC=TS(Rf),sv=CS(js),iv=new WeakMap,iC=BS(iv,_s),aC=DT(nv,js,We,Xi,cl,Rr,Dn,ul,Sn,sv,Mf,iC,Yi),rC=AT(We,aC,Dn,Sn,Yi),oC=X1(qs,nv,Mr,Xi,cl,Rr,Dn,sC,sv,Mf,ge,br,Qe,Vs,un,fu),lC=IS(tv),cC=fw(iv),X0=$y?H1(nC,ke,bs,oC,rC,yn,lC,fe,oe,br,Hw,cC,Ww,Or):void 0,uC=mS(Sn,Qe),hC=mw(Ef,ls,Af,Rf,fu,Zc,Df,Of),dC=tw(ev,ls,We,uC,hC),fC=JS(cu,Cf),pC=$S(gf,Nf),mC=tT(_f,Iy),gC=eT(cu,oe),_C=()=>lT(ls,bw(Qe),xw(Ui),Sw(Qe),Tw(Ui),ww(Qe),Aw(br,Qe),Nw(Qe),Ew(Qe),Dw(Qe),Ow(Qe),Kw,Mw(ys),Rw(Ui),jw(Qe),Jw);function En(o){return o===void 0}function qt(o){return o!==void 0}function av(o){return typeof o=="function"}function Gn(o){return typeof o=="number"}function si(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function kf(o){return typeof o=="boolean"}function ln(o){return Array.isArray(o)}function vs(o){return typeof o=="string"}function Qo(o){return vs(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function wt(o,t){if(!o)throw new Error(t)}function Fe(o,t,s=1/0){if(!(t<=o&&o<=s))throw new RangeError(`Value must be within [${t}, ${s}], got: ${o}`)}function jf(o){!o.isOffline&&o.state!=="running"&&kr('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let rv=!1,Q0=!1;function rf(o){rv=o}function ov(o){En(o)&&rv&&!Q0&&(Q0=!0,kr("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let qf=console;function yC(o){qf=o}function lv(...o){qf.log(...o)}function kr(...o){qf.warn(...o)}const vC=Object.freeze(Object.defineProperty({__proto__:null,assert:wt,assertContextRunning:jf,assertRange:Fe,assertUsedScheduleTime:ov,enterScheduledCallback:rf,log:lv,setLogger:yC,warn:kr},Symbol.toStringTag,{value:"Module"}));function bC(o){return new eC(o)}function xC(o,t,s){return new dC(o,t,s)}const _n=typeof self=="object"?self:null,SC=_n&&(_n.hasOwnProperty("AudioContext")||_n.hasOwnProperty("webkitAudioContext"));function TC(o,t,s){return wt(qt(X0),"AudioWorkletNode only works in a secure context (https or localhost)"),new(o instanceof(_n==null?void 0:_n.BaseAudioContext)?_n==null?void 0:_n.AudioWorkletNode:X0)(o,t,s)}function xs(o,t,s,a){var l=arguments.length,u=l<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,t,s,a);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(u=(l<3?d(u):l>3?d(t,s,u):d(t,s))||u);return l>3&&u&&Object.defineProperty(t,s,u),u}function he(o,t,s,a){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function f(g){try{p(a.next(g))}catch(v){d(v)}}function m(g){try{p(a.throw(g))}catch(v){d(v)}}function p(g){g.done?u(g.value):l(g.value).then(f,m)}p((a=a.apply(o,t||[])).next())})}class wC{constructor(t,s,a,l){this._callback=t,this._type=s,this._minimumUpdateInterval=Math.max(128/(l||44100),.001),this.updateInterval=a,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),s=URL.createObjectURL(t),a=new Worker(s);a.onmessage=this._callback.bind(this),this._worker=a}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var s;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((s=this._worker)===null||s===void 0||s.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Sa(o){return mC(o)}function Fi(o){return pC(o)}function Hc(o){return gC(o)}function gr(o){return fC(o)}function AC(o){return o instanceof Hy}function CC(o,t){return o==="value"||Sa(t)||Fi(t)||AC(t)}function as(o,...t){if(!t.length)return o;const s=t.shift();if(si(o)&&si(s))for(const a in s)CC(a,s[a])?o[a]=s[a]:si(s[a])?(o[a]||Object.assign(o,{[a]:{}}),as(o[a],s[a])):Object.assign(o,{[a]:s[a]});return as(o,...t)}function NC(o,t){return o.length===t.length&&o.every((s,a)=>t[a]===s)}function $(o,t,s=[],a){const l={},u=Array.from(t);if(si(u[0])&&a&&!Reflect.has(u[0],a)&&(Object.keys(u[0]).some(f=>Reflect.has(o,f))||(as(l,{[a]:u[0]}),s.splice(s.indexOf(a),1),u.shift())),u.length===1&&si(u[0]))as(l,u[0]);else for(let d=0;d<s.length;d++)qt(u[d])&&(l[s[d]]=u[d]);return as(o,l)}function EC(o){return o.constructor.getDefaults()}function rs(o,t){return En(o)?t:o}function rn(o,t){return t.forEach(s=>{Reflect.has(o,s)&&delete o[s]}),o}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */let oi=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||_n&&this.toString()===_n.TONE_DEBUG_CLASS)&&lv(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};oi.version=pf;const Vf=1e-6;function xr(o,t){return o>t+Vf}function of(o,t){return xr(o,t)||ms(o,t)}function nu(o,t){return o+Vf<t}function ms(o,t){return Math.abs(o-t)<Vf}function Aa(o,t,s){return Math.max(Math.min(o,s),t)}class Fn extends oi{constructor(){super(),this.name="Timeline",this._timeline=[];const t=$(Fn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(wt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const s=this._timeline[this.length-1];wt(of(t.time,s.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const s=this._search(t.time);this._timeline.splice(s+1,0,t)}if(this.length>this.memory){const s=this.length-this.memory;this._timeline.splice(0,s)}return this}remove(t){const s=this._timeline.indexOf(t);return s!==-1&&this._timeline.splice(s,1),this}get(t,s="time"){const a=this._search(t,s);return a!==-1?this._timeline[a]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,s="time"){const a=this._search(t,s);return a+1<this._timeline.length?this._timeline[a+1]:null}getBefore(t){const s=this._timeline.length;if(s>0&&this._timeline[s-1].time<t)return this._timeline[s-1];const a=this._search(t);return a-1>=0?this._timeline[a-1]:null}cancel(t){if(this._timeline.length>1){let s=this._search(t);if(s>=0)if(ms(this._timeline[s].time,t)){for(let a=s;a>=0&&ms(this._timeline[a].time,t);a--)s=a;this._timeline=this._timeline.slice(0,s)}else this._timeline=this._timeline.slice(0,s+1);else this._timeline=[]}else this._timeline.length===1&&of(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const s=this._search(t);return s>=0&&(this._timeline=this._timeline.slice(s+1)),this}previousEvent(t){const s=this._timeline.indexOf(t);return s>0?this._timeline[s-1]:null}_search(t,s="time"){if(this._timeline.length===0)return-1;let a=0;const l=this._timeline.length;let u=l;if(l>0&&this._timeline[l-1][s]<=t)return l-1;for(;a<u;){let d=Math.floor(a+(u-a)/2);const f=this._timeline[d],m=this._timeline[d+1];if(ms(f[s],t)){for(let p=d;p<this._timeline.length;p++){const g=this._timeline[p];if(ms(g[s],t))d=p;else break}return d}else{if(nu(f[s],t)&&xr(m[s],t))return d;xr(f[s],t)?u=d:a=d+1}}return-1}_iterate(t,s=0,a=this._timeline.length-1){this._timeline.slice(s,a+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,s){const a=this._search(t);return a!==-1&&this._iterate(s,0,a),this}forEachAfter(t,s){const a=this._search(t);return this._iterate(s,a+1),this}forEachBetween(t,s,a){let l=this._search(t),u=this._search(s);return l!==-1&&u!==-1?(this._timeline[l].time!==t&&(l+=1),this._timeline[u].time===s&&(u-=1),this._iterate(a,l,u)):l===-1&&this._iterate(a,0,u),this}forEachFrom(t,s){let a=this._search(t);for(;a>=0&&this._timeline[a].time>=t;)a--;return this._iterate(s,a+1),this}forEachAtTime(t,s){const a=this._search(t);if(a!==-1&&ms(this._timeline[a].time,t)){let l=a;for(let u=a;u>=0&&ms(this._timeline[u].time,t);u--)l=u;this._iterate(u=>{s(u)},l,a)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const cv=[];function mu(o){cv.push(o)}function DC(o){cv.forEach(t=>t(o))}const uv=[];function gu(o){uv.push(o)}function OC(o){uv.forEach(t=>t(o))}class jr extends oi{constructor(){super(...arguments),this.name="Emitter"}on(t,s){return t.split(/\W+/).forEach(l=>{En(this._events)&&(this._events={}),this._events.hasOwnProperty(l)||(this._events[l]=[]),this._events[l].push(s)}),this}once(t,s){const a=(...l)=>{s(...l),this.off(t,a)};return this.on(t,a),this}off(t,s){return t.split(/\W+/).forEach(l=>{if(En(this._events)&&(this._events={}),this._events.hasOwnProperty(l))if(En(s))this._events[l]=[];else{const u=this._events[l];for(let d=u.length-1;d>=0;d--)u[d]===s&&u.splice(d,1)}}),this}emit(t,...s){if(this._events&&this._events.hasOwnProperty(t)){const a=this._events[t].slice(0);for(let l=0,u=a.length;l<u;l++)a[l].apply(this,s)}return this}static mixin(t){["on","once","off","emit"].forEach(s=>{const a=Object.getOwnPropertyDescriptor(jr.prototype,s);Object.defineProperty(t.prototype,s,a)})}dispose(){return super.dispose(),this._events=void 0,this}}class zf extends jr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class qr extends zf{constructor(){var t,s;super(),this.name="Context",this._constants=new Map,this._timeouts=new Fn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const a=$(qr.getDefaults(),arguments,["context"]);a.context?(this._context=a.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=bC({latencyHint:a.latencyHint}),this._latencyHint=a.latencyHint),this._ticker=new wC(this.emit.bind(this,"tick"),a.clockSource,a.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((s=arguments[0])===null||s===void 0)&&s.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=a.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(DC(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,s,a){return this._context.createBuffer(t,s,a)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,s){return this._context.createIIRFilter(t,s)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,s,a){return this._context.createPeriodicWave(t,s,a)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return wt(gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return wt(gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return wt(gr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){wt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){wt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){wt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){wt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,s){return TC(this.rawContext,t,s)}addAudioWorkletModule(t){return he(this,void 0,void 0,function*(){wt(qt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return he(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return gr(this._context)?this._context.resume():Promise.resolve()}close(){return he(this,void 0,void 0,function*(){gr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&OC(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const s=this._context.createBuffer(1,128,this._context.sampleRate),a=s.getChannelData(0);for(let u=0;u<a.length;u++)a[u]=t;const l=this._context.createBufferSource();return l.channelCount=1,l.channelCountMode="explicit",l.buffer=s,l.loop=!0,l.start(0),this._constants.set(t,l),l}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,s=>{s.callback(),this._timeouts.remove(s)})}setTimeout(t,s){this._timeoutIds++;const a=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:a+s}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(s=>{s.id===t&&this._timeouts.remove(s)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,s){const a=++this._timeoutIds,l=()=>{const u=this.now();this._timeouts.add({callback:()=>{t(),l()},id:a,time:u+s})};return l(),a}}class MC extends zf{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,s,a){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,s){return{}}createPanner(){return{}}createPeriodicWave(t,s,a){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,s){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return he(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,s){return 0}clearTimeout(t){return this}setInterval(t,s){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Nt(o,t){ln(t)?t.forEach(s=>Nt(o,s)):Object.defineProperty(o,t,{enumerable:!0,writable:!1})}function dl(o,t){ln(t)?t.forEach(s=>dl(o,s)):Object.defineProperty(o,t,{writable:!0})}const Ft=()=>{};class Kt extends oi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ft;const t=$(Kt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,vs(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Ft,onload:Ft,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:me().sampleRate}set(t){return t instanceof Kt?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return he(this,void 0,void 0,function*(){const s=Kt.load(t).then(a=>{this.set(a),this.onload(this)});Kt.downloads.push(s);try{yield s}finally{const a=Kt.downloads.indexOf(s);Kt.downloads.splice(a,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const s=ln(t)&&t[0].length>0,a=s?t.length:1,l=s?t[0].length:t.length,u=me(),d=u.createBuffer(a,l,u.sampleRate),f=!s&&a===1?[t]:t;for(let m=0;m<a;m++)d.copyToChannel(f[m],m);return this._buffer=d,this}toMono(t){if(Gn(t))this.fromArray(this.toArray(t));else{let s=new Float32Array(this.length);const a=this.numberOfChannels;for(let l=0;l<a;l++){const u=this.toArray(l);for(let d=0;d<u.length;d++)s[d]+=u[d]}s=s.map(l=>l/a),this.fromArray(s)}return this}toArray(t){if(Gn(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const s=[];for(let a=0;a<this.numberOfChannels;a++)s[a]=this.getChannelData(a);return s}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,s=this.duration){wt(this.loaded,"Buffer is not loaded");const a=Math.floor(t*this.sampleRate),l=Math.floor(s*this.sampleRate);wt(a<l,"The start time must be less than the end time");const u=l-a,d=me().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)d.copyToChannel(this.getChannelData(f).subarray(a,l),f);return new Kt(d)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Kt().fromArray(t)}static fromUrl(t){return he(this,void 0,void 0,function*(){return yield new Kt().load(t)})}static load(t){return he(this,void 0,void 0,function*(){const s=Kt.baseUrl===""||Kt.baseUrl.endsWith("/")?Kt.baseUrl:Kt.baseUrl+"/",a=yield fetch(s+t);if(!a.ok)throw new Error(`could not load url: ${t}`);const l=yield a.arrayBuffer();return yield me().decodeAudioData(l)})}static supportsType(t){const s=t.split("."),a=s[s.length-1];return document.createElement("audio").canPlayType("audio/"+a)!==""}static loaded(){return he(this,void 0,void 0,function*(){for(yield Promise.resolve();Kt.downloads.length;)yield Kt.downloads[0]})}}Kt.baseUrl="";Kt.downloads=[];class Vr extends qr{constructor(){super({clockSource:"offline",context:Hc(arguments[0])?arguments[0]:xC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Hc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Hc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return he(this,void 0,void 0,function*(){let s=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,s++;const a=Math.floor(this.sampleRate/128);t&&s%a===0&&(yield new Promise(l=>setTimeout(l,1)))}})}render(){return he(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const s=yield this._context.startRendering();return new Kt(s)})}close(){return Promise.resolve()}}const hv=new MC;let ya=hv;function me(){return ya===hv&&SC&&su(new qr),ya}function su(o,t=!1){t&&ya.dispose(),gr(o)?ya=new qr(o):Hc(o)?ya=new Vr(o):ya=o}function RC(){return ya.resume()}if(_n&&!_n.TONE_SILENCE_LOGGING){const t=` * Tone.js v${pf} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function Sr(o){return Math.pow(10,o/20)}function fl(o){return 20*(Math.log(o)/Math.LN10)}function Tr(o){return Math.pow(2,o/12)}let _u=440;function kC(){return _u}function jC(o){_u=o}function Li(o){return Math.round(dv(o))}function dv(o){return 69+12*Math.log2(o/_u)}function Bf(o){return _u*Math.pow(2,(o-69)/12)}class Lf extends oi{constructor(t,s,a){super(),this.defaultUnits="s",this._val=s,this._units=a,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,s)=>{const a=parseInt(t,10),l=s==="."?1.5:1;return a===1?this._beatsToUnits(this._getTimeSignature())*l:this._beatsToUnits(4/a)*l},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const s=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(s)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,s,a)=>{let l=0;return t&&t!=="0"&&(l+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),s&&s!=="0"&&(l+=this._beatsToUnits(parseFloat(s))),a&&a!=="0"&&(l+=this._beatsToUnits(parseFloat(a)/4)),l},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Lf&&this.fromType(this._val),En(this._val))return this._noArg();if(vs(this._val)&&En(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(si(this._val)){let t=0;for(const s in this._val)if(qt(this._val[s])){const a=this._val[s],l=new this.constructor(this.context,s).valueOf()*a;t+=l}return t}if(qt(this._units)){const t=this._expressions[this._units],s=this._val.toString().trim().match(t.regexp);return s?t.method.apply(this,s.slice(1)):t.method.call(this,this._val)}else return vs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ln extends Lf{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const s=new Ln(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(s))},regexp:/^@(.+)/}})}quantize(t,s=1){const a=new this.constructor(this.context,t).valueOf(),l=this.valueOf(),f=Math.round(l/a)*a-l;return l+f*s}toNotation(){const t=this.toSeconds(),s=["1m"];for(let u=1;u<9;u++){const d=Math.pow(2,u);s.push(d+"n."),s.push(d+"n"),s.push(d+"t")}s.push("0");let a=s[0],l=new Ln(this.context,s[0]).toSeconds();return s.forEach(u=>{const d=new Ln(this.context,u).toSeconds();Math.abs(d-t)<Math.abs(l-t)&&(a=u,l=d)}),a}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let s=this.valueOf()/t;s=parseFloat(s.toFixed(4));const a=Math.floor(s/this._getTimeSignature());let l=s%1*4;s=Math.floor(s)%this._getTimeSignature();const u=l.toString();return u.length>3&&(l=parseFloat(parseFloat(u).toFixed(3))),[a,s,l].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Li(this.toFrequency())}_now(){return this.context.now()}}function qC(o,t){return new Ln(me(),o,t)}class vn extends Ln{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return kC()}static set A4(t){jC(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:vn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,s){const l=VC[t.toLowerCase()]+(parseInt(s,10)+1)*12;return this.defaultUnits==="midi"?l:vn.mtof(l)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,s,a){let l=1;return t&&t!=="0"&&(l*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),s&&s!=="0"&&(l*=this._beatsToUnits(parseFloat(s))),a&&a!=="0"&&(l*=this._beatsToUnits(parseFloat(a)/4)),l}}})}transpose(t){return new vn(this.context,this.valueOf()*Tr(t))}harmonize(t){return t.map(s=>this.transpose(s))}toMidi(){return Li(this.valueOf())}toNote(){const t=this.toFrequency(),s=Math.log2(t/vn.A4);let a=Math.round(12*s)+57;const l=Math.floor(a/12);return l<0&&(a+=-12*l),zC[a%12]+l.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),s=this.valueOf()/t;return Math.floor(s*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Bf(t)}static ftom(t){return Li(t)}}const VC={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},zC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function BC(o,t){return new vn(me(),o,t)}class Be extends Ln{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function LC(o,t){return new Be(me(),o,t)}class Ke extends oi{constructor(){super();const t=$(Ke.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:me()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return ov(t),new Ln(this.context,t).toSeconds()}toFrequency(t){return new vn(this.context,t).toFrequency()}toTicks(t){return new Be(this.context,t).toTicks()}_getPartialProperties(t){const s=this.get();return Object.keys(s).forEach(a=>{En(t[a])&&delete s[a]}),s}get(){const t=EC(this);return Object.keys(t).forEach(s=>{if(Reflect.has(this,s)){const a=this[s];qt(a)&&qt(a.value)&&qt(a.setValueAtTime)?t[s]=a.value:a instanceof Ke?t[s]=a._getPartialProperties(t[s]):ln(a)||Gn(a)||vs(a)||kf(a)?t[s]=a:delete t[s]}}),t}set(t){return Object.keys(t).forEach(s=>{Reflect.has(this,s)&&qt(this[s])&&(this[s]&&qt(this[s].value)&&qt(this[s].setValueAtTime)?this[s].value!==t[s]&&(this[s].value=t[s]):this[s]instanceof Ke?this[s].set(t[s]):this[s]=t[s])}),this}}class zr extends Fn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const s=this.get(t);return s!==null?s.state:this._initial}setStateAtTime(t,s,a){return Fe(s,0),this.add(Object.assign({},a,{state:t,time:s})),this}getLastState(t,s){const a=this._search(s);for(let l=a;l>=0;l--){const u=this._timeline[l];if(u.state===t)return u}}getNextState(t,s){const a=this._search(s);if(a!==-1)for(let l=a;l<this._timeline.length;l++){const u=this._timeline[l];if(u.state===t)return u}}}class jt extends Ke{constructor(){const t=$(jt.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,wt(qt(t.param)&&(Sa(t.param)||t.param instanceof jt),"param must be an AudioParam");!Sa(t.param);)t.param=t.param._param;this._swappable=qt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Fn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,qt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ke.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return qt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return qt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,s){return this.units===s}_assertRange(t){return qt(this.maxValue)&&qt(this.minValue)&&Fe(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Sr(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?fl(t):t}setValueAtTime(t,s){const a=this.toSeconds(s),l=this._fromType(t);return wt(isFinite(l)&&isFinite(a),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._assertRange(l),this.log(this.units,"setValueAtTime",t,a),this._events.add({time:a,type:"setValueAtTime",value:l}),this._param.setValueAtTime(l,a),this}getValueAtTime(t){const s=Math.max(this.toSeconds(t),0),a=this._events.getAfter(s),l=this._events.get(s);let u=this._initialValue;if(l===null)u=this._initialValue;else if(l.type==="setTargetAtTime"&&(a===null||a.type==="setValueAtTime")){const d=this._events.getBefore(l.time);let f;d===null?f=this._initialValue:f=d.value,l.type==="setTargetAtTime"&&(u=this._exponentialApproach(l.time,f,l.value,l.constant,s))}else if(a===null)u=l.value;else if(a.type==="linearRampToValueAtTime"||a.type==="exponentialRampToValueAtTime"){let d=l.value;if(l.type==="setTargetAtTime"){const f=this._events.getBefore(l.time);f===null?d=this._initialValue:d=f.value}a.type==="linearRampToValueAtTime"?u=this._linearInterpolate(l.time,d,a.time,a.value,s):u=this._exponentialInterpolate(l.time,d,a.time,a.value,s)}else u=l.value;return this._toType(u)}setRampPoint(t){t=this.toSeconds(t);let s=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(s)===0&&(s=this._toType(this._minOutput)),this.setValueAtTime(s,t),this}linearRampToValueAtTime(t,s){const a=this._fromType(t),l=this.toSeconds(s);return wt(isFinite(a)&&isFinite(l),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._assertRange(a),this._events.add({time:l,type:"linearRampToValueAtTime",value:a}),this.log(this.units,"linearRampToValueAtTime",t,l),this._param.linearRampToValueAtTime(a,l),this}exponentialRampToValueAtTime(t,s){let a=this._fromType(t);a=ms(a,0)?this._minOutput:a,this._assertRange(a);const l=this.toSeconds(s);return wt(isFinite(a)&&isFinite(l),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._events.add({time:l,type:"exponentialRampToValueAtTime",value:a}),this.log(this.units,"exponentialRampToValueAtTime",t,l),this._param.exponentialRampToValueAtTime(a,l),this}exponentialRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialRampToValueAtTime(t,a+this.toSeconds(s)),this}linearRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.linearRampToValueAtTime(t,a+this.toSeconds(s)),this}targetRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialApproachValueAtTime(t,a,s),this}exponentialApproachValueAtTime(t,s,a){s=this.toSeconds(s),a=this.toSeconds(a);const l=Math.log(a+1)/Math.log(200);return this.setTargetAtTime(t,s,l),this.cancelAndHoldAtTime(s+a*.9),this.linearRampToValueAtTime(t,s+a),this}setTargetAtTime(t,s,a){const l=this._fromType(t);wt(isFinite(a)&&a>0,"timeConstant must be a number greater than 0");const u=this.toSeconds(s);return this._assertRange(l),wt(isFinite(l)&&isFinite(u),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._events.add({constant:a,time:u,type:"setTargetAtTime",value:l}),this.log(this.units,"setTargetAtTime",t,u,a),this._param.setTargetAtTime(l,u,a),this}setValueCurveAtTime(t,s,a,l=1){a=this.toSeconds(a),s=this.toSeconds(s);const u=this._fromType(t[0])*l;this.setValueAtTime(this._toType(u),s);const d=a/(t.length-1);for(let f=1;f<t.length;f++){const m=this._fromType(t[f])*l;this.linearRampToValueAtTime(this._toType(m),s+f*d)}return this}cancelScheduledValues(t){const s=this.toSeconds(t);return wt(isFinite(s),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(s),this._param.cancelScheduledValues(s),this.log(this.units,"cancelScheduledValues",s),this}cancelAndHoldAtTime(t){const s=this.toSeconds(t),a=this._fromType(this.getValueAtTime(s));wt(isFinite(s),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",s,"value="+a);const l=this._events.get(s),u=this._events.getAfter(s);return l&&ms(l.time,s)?u?(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time)):(this._param.cancelAndHoldAtTime(s),this._events.cancel(s+this.sampleTime)):u&&(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time),u.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(a),s):u.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(a),s)),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}rampTo(t,s=.1,a){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,s,a):this.linearRampTo(t,s,a),this}apply(t){const s=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(s),s);const a=this._events.get(s);if(a&&a.type==="setTargetAtTime"){const l=this._events.getAfter(a.time),u=l?l.time:s+2,d=(u-s)/10;for(let f=s;f<u;f+=d)t.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,l=>{l.type==="cancelScheduledValues"?t.cancelScheduledValues(l.time):l.type==="setTargetAtTime"?t.setTargetAtTime(l.value,l.time,l.constant):t[l.type](l.value,l.time)}),this}setParam(t){wt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const s=this.input;return s.disconnect(this._param),this.apply(t),this._param=t,s.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,s,a,l,u){return a+(s-a)*Math.exp(-(u-t)/l)}_linearInterpolate(t,s,a,l,u){return s+(l-s)*((u-t)/(a-t))}_exponentialInterpolate(t,s,a,l,u){return s*Math.pow(l/s,(u-t)/(a-t))}}class lt extends Ke{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return qt(this.input)?Sa(this.input)||this.input instanceof jt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return qt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return qt(t)&&(t instanceof lt||Fi(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(a=>{a.channelCount=t.channelCount,a.channelCountMode=t.channelCountMode,a.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();wt(t.length>0,"ToneAudioNode does not have any internal nodes");const s=t[0];return{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelInterpretation:t}))}connect(t,s=0,a=0){return xn(this,t,s,a),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return kr("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,s=0,a=0){return Uf(this,t,s,a),this}chain(...t){return Hn(this,...t),this}fan(...t){return t.forEach(s=>this.connect(s)),this}dispose(){return super.dispose(),qt(this.input)&&(this.input instanceof lt?this.input.dispose():Fi(this.input)&&this.input.disconnect()),qt(this.output)&&(this.output instanceof lt?this.output.dispose():Fi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Hn(...o){const t=o.shift();o.reduce((s,a)=>(s instanceof lt?s.connect(a):Fi(s)&&xn(s,a),a),t)}function xn(o,t,s=0,a=0){for(wt(qt(o),"Cannot connect from undefined node"),wt(qt(t),"Cannot connect to undefined node"),(t instanceof lt||Fi(t))&&wt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),wt(o.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof lt||t instanceof jt;)qt(t.input)&&(t=t.input);for(;o instanceof lt;)qt(o.output)&&(o=o.output);Sa(t)?o.connect(t,s):o.connect(t,s,a)}function Uf(o,t,s=0,a=0){if(qt(t))for(;t instanceof lt;)t=t.input;for(;!Fi(o);)qt(o.output)&&(o=o.output);Sa(t)?o.disconnect(t,s):Fi(t)?o.disconnect(t,s,a):o.disconnect()}function UC(...o){const t=o.pop();qt(t)&&o.forEach(s=>xn(s,t))}class Tt extends lt{constructor(){const t=$(Tt.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new jt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Nt(this,"gain")}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class wr extends lt{constructor(t){super(t),this.onended=Ft,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Tt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(s){const a=this.toSeconds(s);return this._startTime!==-1&&a>=this._startTime&&(this._stopTime===-1||a<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(lt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ft})}_startGain(t,s=1){wt(this._startTime===-1,"Source cannot be started more than once");const a=this.toSeconds(this._fadeIn);return this._startTime=t+a,this._startTime=Math.max(this._startTime,this.context.currentTime),a>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(s,t+a):this._gainNode.gain.exponentialApproachValueAtTime(s,t,a)):this._gainNode.gain.setValueAtTime(s,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){wt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const s=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+s,this._stopTime=Math.max(this._stopTime,this.now()),s>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,s,t):this._gainNode.gain.targetRampTo(0,s,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const a=this._curve==="exponential"?s*2:0;this._stopSource(this.now()+a),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ft&&(this.onended(this),this.onended=Ft,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),wt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ft,this}}class yu extends wr{constructor(){const t=$(yu.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),xn(this._source,this._gainNode),this.offset=new jt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(wr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const s=this.toSeconds(t);return this.log("start",s),this._startGain(s),this._source.start(s),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Et extends lt{constructor(){const t=$(Et.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new yu({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,s=0,a=0){return pl(this,t,s,a),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,s){return this._param.setValueAtTime(t,s),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,s){return this._param.linearRampToValueAtTime(t,s),this}exponentialRampToValueAtTime(t,s){return this._param.exponentialRampToValueAtTime(t,s),this}exponentialRampTo(t,s,a){return this._param.exponentialRampTo(t,s,a),this}linearRampTo(t,s,a){return this._param.linearRampTo(t,s,a),this}targetRampTo(t,s,a){return this._param.targetRampTo(t,s,a),this}exponentialApproachValueAtTime(t,s,a){return this._param.exponentialApproachValueAtTime(t,s,a),this}setTargetAtTime(t,s,a){return this._param.setTargetAtTime(t,s,a),this}setValueCurveAtTime(t,s,a,l){return this._param.setValueCurveAtTime(t,s,a,l),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,s,a){return this._param.rampTo(t,s,a),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function pl(o,t,s,a){(t instanceof jt||Sa(t)||t instanceof Et&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Et&&(t.overridden=!0)),xn(o,t,s,a)}class Ff extends jt{constructor(){const t=$(Ff.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Fn(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(jt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,s,a){s=this.toSeconds(s),this.setRampPoint(s);const l=this._fromType(t),u=this._events.get(s),d=Math.round(Math.max(1/a,1));for(let f=0;f<=d;f++){const m=a*f+s,p=this._exponentialApproach(u.time,u.value,l,a,m);this.linearRampToValueAtTime(this._toType(p),m)}return this}setValueAtTime(t,s){const a=this.toSeconds(s);super.setValueAtTime(t,s);const l=this._events.get(a),u=this._events.previousEvent(l),d=this._getTicksUntilEvent(u,a);return l.ticks=Math.max(d,0),this}linearRampToValueAtTime(t,s){const a=this.toSeconds(s);super.linearRampToValueAtTime(t,s);const l=this._events.get(a),u=this._events.previousEvent(l),d=this._getTicksUntilEvent(u,a);return l.ticks=Math.max(d,0),this}exponentialRampToValueAtTime(t,s){s=this.toSeconds(s);const a=this._fromType(t),l=this._events.get(s),u=Math.round(Math.max((s-l.time)*10,1)),d=(s-l.time)/u;for(let f=0;f<=u;f++){const m=d*f+l.time,p=this._exponentialInterpolate(l.time,l.value,s,a,m);this.linearRampToValueAtTime(this._toType(p),m)}return this}_getTicksUntilEvent(t,s){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(En(t.ticks)){const d=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(d,t.time)}const a=this._fromType(this.getValueAtTime(t.time));let l=this._fromType(this.getValueAtTime(s));const u=this._events.get(s);return u&&u.time===s&&u.type==="setValueAtTime"&&(l=this._fromType(this.getValueAtTime(s-this.sampleTime))),.5*(s-t.time)*(a+l)+t.ticks}getTicksAtTime(t){const s=this.toSeconds(t),a=this._events.get(s);return Math.max(this._getTicksUntilEvent(a,s),0)}getDurationOfTicks(t,s){const a=this.toSeconds(s),l=this.getTicksAtTime(s);return this.getTimeOfTick(l+t)-a}getTimeOfTick(t){const s=this._events.get(t,"ticks"),a=this._events.getAfter(t,"ticks");if(s&&s.ticks===t)return s.time;if(s&&a&&a.type==="linearRampToValueAtTime"&&s.value!==a.value){const l=this._fromType(this.getValueAtTime(s.time)),d=(this._fromType(this.getValueAtTime(a.time))-l)/(a.time-s.time),f=Math.sqrt(Math.pow(l,2)-2*d*(s.ticks-t)),m=(-l+f)/d,p=(-l-f)/d;return(m>0?m:p)+s.time}else return s?s.value===0?1/0:s.time+(t-s.ticks)/s.value:t/this._initialValue}ticksToTime(t,s){return this.getDurationOfTicks(t,s)}timeToTicks(t,s){const a=this.toSeconds(s),l=this.toSeconds(t),u=this.getTicksAtTime(a);return this.getTicksAtTime(a+l)-u}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const s=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(s,0)}}class If extends Et{constructor(){const t=$(If.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new Ff({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Et.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,s){return this._param.ticksToTime(t,s)}timeToTicks(t,s){return this._param.timeToTicks(t,s)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,s){return this._param.getDurationOfTicks(t,s)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Gf extends Ke{constructor(){const t=$(Gf.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new zr,this._tickOffset=new Fn,this._ticksAtTime=new Fn,this._secondsAtTime=new Fn,this.frequency=new If({context:this.context,units:t.units,value:t.frequency}),Nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ke.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,s){const a=this.toSeconds(t);return this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),qt(s)&&this.setTicksAtTime(s,a),this._ticksAtTime.cancel(a),this._secondsAtTime.cancel(a)),this}stop(t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="stopped"){const a=this._state.get(s);a&&a.time>0&&(this._tickOffset.cancel(a.time),this._state.cancel(a.time))}return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this.setTicksAtTime(0,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}pause(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const s=this.toSeconds(t),a=this._state.getLastState("stopped",s),l=this._ticksAtTime.get(s),u={state:"paused",time:s};this._state.add(u);let d=l||a,f=l?l.ticks:0,m=null;return this._state.forEachBetween(d.time,s+this.sampleTime,p=>{let g=d.time;const v=this._tickOffset.get(p.time);v&&v.time>=d.time&&(f=v.ticks,g=v.time),d.state==="started"&&p.state!=="started"&&(f+=this.frequency.getTicksAtTime(p.time)-this.frequency.getTicksAtTime(g),p.time!==u.time&&(m={state:p.state,time:p.time,ticks:f})),d=p}),this._state.remove(u),m&&this._ticksAtTime.add(m),f}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const s=this.now(),a=this.frequency.timeToTicks(t,s);this.setTicksAtTime(a,s)}getSecondsAtTime(t){t=this.toSeconds(t);const s=this._state.getLastState("stopped",t),a={state:"paused",time:t};this._state.add(a);const l=this._secondsAtTime.get(t);let u=l||s,d=l?l.seconds:0,f=null;return this._state.forEachBetween(u.time,t+this.sampleTime,m=>{let p=u.time;const g=this._tickOffset.get(m.time);g&&g.time>=u.time&&(d=g.seconds,p=g.time),u.state==="started"&&m.state!=="started"&&(d+=m.time-p,m.time!==a.time&&(f={state:m.state,time:m.time,seconds:d})),u=m}),this._state.remove(a),f&&this._secondsAtTime.add(f),d}setTicksAtTime(t,s){return s=this.toSeconds(s),this._tickOffset.cancel(s),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,s),ticks:t,time:s}),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,s=this.now()){const a=this._tickOffset.get(s),l=this._state.get(s),u=Math.max(a.time,l.time),d=this.frequency.getTicksAtTime(u)+t-a.ticks;return this.frequency.getTimeOfTick(d)}forEachTickBetween(t,s,a){let l=this._state.get(t);this._state.forEachBetween(t,s,d=>{l&&l.state==="started"&&d.state!=="started"&&this.forEachTickBetween(Math.max(l.time,t),d.time-this.sampleTime,a),l=d});let u=null;if(l&&l.state==="started"){const d=Math.max(l.time,t),f=this.frequency.getTicksAtTime(d),m=this.frequency.getTicksAtTime(l.time),p=f-m;let g=Math.ceil(p)-p;g=ms(g,1)?0:g;let v=this.frequency.getTimeOfTick(f+g);for(;v<s;){try{a(v,Math.round(this.getTicksAtTime(v)))}catch(x){u=x;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(u)throw u;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Br extends Ke{constructor(){const t=$(Br.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Ft,this._lastUpdate=0,this._state=new zr("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new Gf({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Nt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ke.getDefaults(),{callback:Ft,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,s){jf(this.context);const a=this.toSeconds(t);return this.log("start",a),this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),this._tickSource.start(a,s),a<this._lastUpdate&&this.emit("start",a,s)),this}stop(t){const s=this.toSeconds(t);return this.log("stop",s),this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._tickSource.stop(s),s<this._lastUpdate&&this.emit("stop",s),this}pause(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._tickSource.pause(s),s<this._lastUpdate&&this.emit("pause",s)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,s){return this._tickSource.setTicksAtTime(t,s),this}getTimeOfTick(t,s=this.now()){return this._tickSource.getTimeOfTick(t,s)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,s){const a=this.toSeconds(s),l=this.getTicksAtTime(a);return this._tickSource.getTimeOfTick(l+t,a)}_loop(){const t=this._lastUpdate,s=this.now();this._lastUpdate=s,this.log("loop",t,s),t!==s&&(this._state.forEachBetween(t,s,a=>{switch(a.state){case"started":const l=this._tickSource.getTicksAtTime(a.time);this.emit("start",a.time,l);break;case"stopped":a.time!==0&&this.emit("stop",a.time);break;case"paused":this.emit("pause",a.time);break}}),this._tickSource.forEachTickBetween(t,s,(a,l)=>{this.callback(a,l)}))}getStateAtTime(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}jr.mixin(Br);class In extends lt{constructor(){const t=$(In.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const s=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(s,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(s),this.delayTime=new jt({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Nt(this,"delayTime")}static getDefaults(){return Object.assign(lt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class li extends lt{constructor(){const t=$(li.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Tt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Nt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Hf extends lt{constructor(){const t=$(Hf.getDefaults(),arguments);super(t),this.name="Destination",this.input=new li({context:this.context}),this.output=new Tt({context:this.context}),this.volume=this.input.volume,Hn(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Hn(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}mu(o=>{o.destination=new Hf({context:o})});gu(o=>{o.destination.dispose()});class FC extends lt{constructor(){super(...arguments),this.name="Listener",this.positionX=new jt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new jt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new jt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new jt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new jt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new jt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new jt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new jt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new jt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(lt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}mu(o=>{o.listener=new FC({context:o})});gu(o=>{o.listener.dispose()});function IC(o,t){return he(this,arguments,void 0,function*(s,a,l=2,u=me().sampleRate){const d=me(),f=new Vr(l,a,u);su(f),yield s(f);const m=f.render();su(d);const p=yield m;return new Kt(p)})}class Lr extends oi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=$(Lr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(s=>{this._loadingCount++;const a=t.urls[s];this.add(s,a,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ft,onload:Ft,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return wt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,s])=>s.loaded)}add(t,s,a=Ft,l=Ft){return vs(s)?(this.baseUrl&&s.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Kt(this.baseUrl+s,a,l))):this._buffers.set(t.toString(),new Kt(s,a,l)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Ar extends vn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Li(super._frequencyToUnits(t))}_ticksToUnits(t){return Li(super._ticksToUnits(t))}_beatsToUnits(t){return Li(super._beatsToUnits(t))}_secondsToUnits(t){return Li(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Bf(this.toMidi())}transpose(t){return new Ar(this.context,this.toMidi()+t)}}function GC(o,t){return new Ar(me(),o,t)}class be extends Be{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function HC(o,t){return new be(me(),o,t)}class PC extends Ke{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Fn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,s){return this._events.add({callback:t,time:this.toSeconds(s)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,s=>{t-s.time<=this.expiration&&s.callback(),this._events.remove(s)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}mu(o=>{o.draw=new PC({context:o})});gu(o=>{o.draw.dispose()});class fv extends oi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){wt(qt(t.time),"Events must have a time property"),wt(qt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let s=new YC(t.time,t.time+t.duration,t);for(this._root===null?this._root=s:this._root.insert(s),this._length++;s!==null;)s.updateHeight(),s.updateMax(),this._rebalance(s),s=s.parent;return this}remove(t){if(this._root!==null){const s=[];this._root.search(t.time,s);for(const a of s)if(a.event===t){this._removeNode(a),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,s=>this.remove(s)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,s){t.parent!==null?(t.isLeftChild()?t.parent.left=s:t.parent.right=s,this._rebalance(t.parent)):this._setRoot(s)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const s=t.getBalance();let a,l=null;if(s>0)if(t.left.right===null)a=t.left,a.right=t.right,l=a;else{for(a=t.left.right;a.right!==null;)a=a.right;a.parent&&(a.parent.right=a.left,l=a.parent,a.left=t.left,a.right=t.right)}else if(t.right.left===null)a=t.right,a.left=t.left,l=a;else{for(a=t.right.left;a.left!==null;)a=a.left;a.parent&&(a.parent.left=a.right,l=a.parent,a.left=t.left,a.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=a:t.parent.right=a:this._setRoot(a),l&&this._rebalance(l)}t.dispose()}_rotateLeft(t){const s=t.parent,a=t.isLeftChild(),l=t.right;l&&(t.right=l.left,l.left=t),s!==null?a?s.left=l:s.right=l:this._setRoot(l)}_rotateRight(t){const s=t.parent,a=t.isLeftChild(),l=t.left;l&&(t.left=l.right,l.right=t),s!==null?a?s.left=l:s.right=l:this._setRoot(l)}_rebalance(t){const s=t.getBalance();s>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):s<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const s=[];if(this._root.search(t,s),s.length>0){let a=s[0];for(let l=1;l<s.length;l++)s[l].low>a.low&&(a=s[l]);return a.event}}return null}forEach(t){if(this._root!==null){const s=[];this._root.traverse(a=>s.push(a)),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachAtTime(t,s){if(this._root!==null){const a=[];this._root.search(t,a),a.forEach(l=>{l.event&&s(l.event)})}return this}forEachFrom(t,s){if(this._root!==null){const a=[];this._root.searchAfter(t,a),a.forEach(l=>{l.event&&s(l.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class YC{constructor(t,s,a){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=a,this.low=t,this.high=s,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,s){t>this.max||(this.left!==null&&this.left.search(t,s),this.low<=t&&this.high>t&&s.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,s))}searchAfter(t,s){this.low>=t&&(s.push(this),this.left!==null&&this.left.searchAfter(t,s)),this.right!==null&&this.right.searchAfter(t,s)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const XC=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class QC extends oi{constructor(t){super(),this.name="TimelineValue",this._timeline=new Fn({memory:10}),this._initialValue=t}set(t,s){return this._timeline.add({value:t,time:s}),this}get(t){const s=this._timeline.get(t);return s?s.value:this._initialValue}}class Pn extends lt{constructor(){super($(Pn.getDefaults(),arguments,["context"]))}connect(t,s=0,a=0){return pl(this,t,s,a),this}}class Ss extends Pn{constructor(){const t=$(Ss.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ln(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):av(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Et.getDefaults(),{length:1024})}setMap(t,s=1024){const a=new Float32Array(s);for(let l=0,u=s;l<u;l++){const d=l/(u-1)*2-1;a[l]=t(d,l)}return this.curve=a,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const s=["none","2x","4x"].some(a=>a.includes(t));wt(s,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ur extends Pn{constructor(){const t=$(Ur.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Ss({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Pn.getDefaults(),{value:1})}_expFunc(t){return s=>Math.pow(Math.abs(s),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ii{constructor(t,s){this.id=Ii._eventId++,this._remainderTime=0;const a=Object.assign(Ii.getDefaults(),s);this.transport=t,this.callback=a.callback,this._once=a.once,this.time=Math.floor(a.time),this._remainderTime=a.time-this.time}static getDefaults(){return{callback:Ft,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const s=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*s),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ii._eventId=0;class Pf extends Ii{constructor(t,s){super(t,s),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const a=Object.assign(Pf.getDefaults(),s);this.duration=a.duration,this._interval=a.interval,this._nextTick=a.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ii.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return nu(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new be(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){nu(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new be(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const s=this.transport.getTicksAtTime(t);xr(s,this.time)&&(this._nextTick=this.floatTime+Math.ceil((s-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class vu extends Ke{constructor(){const t=$(vu.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new QC(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Fn,this._repeatedEvents=new fv,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new Br({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Nt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Ke.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,s){if(this._loop.get(t)&&s>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),s=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&s%this._ppq!==0&&s%(this._swingTicks*2)!==0){const a=s%(this._swingTicks*2)/(this._swingTicks*2),l=Math.sin(a*Math.PI)*this._swingAmount;t+=new be(this.context,this._swingTicks*2/3).toSeconds()*l}rf(!0),this._timeline.forEachAtTime(s,a=>a.invoke(t)),rf(!1)}schedule(t,s){const a=new Ii(this,{callback:t,time:new Be(this.context,s).toTicks()});return this._addEvent(a,this._timeline)}scheduleRepeat(t,s,a,l=1/0){const u=new Pf(this,{callback:t,duration:new Ln(this.context,l).toTicks(),interval:new Ln(this.context,s).toTicks(),time:new Be(this.context,a).toTicks()});return this._addEvent(u,this._repeatedEvents)}scheduleOnce(t,s){const a=new Ii(this,{callback:t,once:!0,time:new Be(this.context,s).toTicks()});return this._addEvent(a,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const s=this._scheduledEvents[t.toString()];s.timeline.remove(s.event),s.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,s){return this._scheduledEvents[t.id.toString()]={event:t,timeline:s},s.add(t),t.id}cancel(t=0){const s=this.toTicks(t);return this._timeline.forEachFrom(s,a=>this.clear(a.id)),this._repeatedEvents.forEachFrom(s,a=>this.clear(a.id)),this}_bindClockEvents(){this._clock.on("start",(t,s)=>{s=new be(this.context,s).toSeconds(),this.emit("start",t,s)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,s){this.context.resume();let a;return qt(s)&&(a=this.toTicks(s)),this._clock.start(t,a),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){ln(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Ln(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Ln(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,s){return this.loopStart=t,this.loopEnd=s,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new be(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),s=this._clock.getTicksAtTime(t);return new be(this.context,s).toBarsBeatsSixteenths()}set position(t){const s=this.toTicks(t);this.ticks=s}get seconds(){return this._clock.seconds}set seconds(t){const s=this.now(),a=this._clock.frequency.timeToTicks(t,s);this.ticks=a}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const s=this.now();if(this.state==="started"){const a=this._clock.getTicksAtTime(s),l=this._clock.frequency.getDurationOfTicks(Math.ceil(a)-a,s),u=s+l;this.emit("stop",u),this._clock.setTicksAtTime(t,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this.emit("ticks",s),this._clock.setTicksAtTime(t,s)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const s=this.now(),a=this.getTicksAtTime(s),l=t-a%t;return this._clock.nextTickTime(l,s)}}syncSignal(t,s){const a=this.now();let l=this.bpm,u=1/(60/l.getValueAtTime(a)/this.PPQ),d=[];if(t.units==="time"){const m=.015625/u,p=new Tt(m),g=new Ur(-1),v=new Tt(m);l.chain(p,g,v),l=v,u=1/u,d=[p,g,v]}s||(t.getValueAtTime(a)!==0?s=t.getValueAtTime(a)/u:s=0);const f=new Tt(s);return l.connect(f),f.connect(t._param),d.push(f),this._syncedSignals.push({initial:t.value,nodes:d,signal:t}),t.value=0,this}unsyncSignal(t){for(let s=this._syncedSignals.length-1;s>=0;s--){const a=this._syncedSignals[s];a.signal===t&&(a.nodes.forEach(l=>l.dispose()),a.signal.value=a.initial,this._syncedSignals.splice(s,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),dl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}jr.mixin(vu);mu(o=>{o.transport=new vu({context:o})});gu(o=>{o.transport.dispose()});class Ne extends lt{constructor(t){super(t),this.input=void 0,this._state=new zr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ft,this._syncedStop=Ft,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new li({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Nt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,onstop:Ft,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,s,a){let l=En(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(l=this._clampToCurrentTime(l),!this._synced&&this._state.getValueAtTime(l)==="started")wt(xr(l,this._state.get(l).time),"Start time must be strictly greater than previous start time"),this._state.cancel(l),this._state.setStateAtTime("started",l),this.log("restart",l),this.restart(l,s,a);else if(this.log("start",l),this._state.setStateAtTime("started",l),this._synced){const u=this._state.get(l);u&&(u.offset=this.toSeconds(rs(s,0)),u.duration=a?this.toSeconds(a):void 0);const d=this.context.transport.schedule(f=>{this._start(f,s,a)},l);this._scheduled.push(d),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>l&&this._syncedStart(this.now(),this.context.transport.seconds)}else jf(this.context),this._start(l,s,a);return this}stop(t){let s=En(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._state.getValueAtTime(s)==="started"||qt(this._state.getNextState("started",s))){if(this.log("stop",s),!this._synced)this._stop(s);else{const a=this.context.transport.schedule(this._stop.bind(this),s);this._scheduled.push(a)}this._state.cancel(s),this._state.setStateAtTime("stopped",s)}return this}restart(t,s,a){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,s,a)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,s)=>{if(xr(s,0)){const a=this._state.get(s);if(a&&a.state==="started"&&a.time!==s){const l=s-this.toSeconds(a.time);let u;a.duration&&(u=this.toSeconds(a.duration)-l),this._start(t,this.toSeconds(a.offset)+l,u)}}},this._syncedStop=t=>{const s=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(s)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ft,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Qi extends wr{constructor(){const t=$(Qi.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,xn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new jt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Kt(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(wr.getDefaults(),{url:new Kt,loop:!1,loopEnd:0,loopStart:0,onload:Ft,onerror:Ft,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,s,a,l=1){wt(this.buffer.loaded,"buffer is either not set or not loaded");const u=this.toSeconds(t);this._startGain(u,l),this.loop?s=rs(s,this.loopStart):s=rs(s,0);let d=Math.max(this.toSeconds(s),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,m=this.toSeconds(this.loopStart),p=f-m;of(d,f)&&(d=(d-m)%p+m),ms(d,this.buffer.duration)&&(d=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,nu(d,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,d)),qt(a)){let f=this.toSeconds(a);f=Math.max(f,0),this.stop(u+f)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Gi extends Ne{constructor(){const t=$(Gi.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ne.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(wt(t in Z0,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const s=this.now();this._stop(s),this._start(s)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const s=Z0[this._type];this._source=new Qi({url:s,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(s.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const mr=44100*5,Fd=2,$s={brown:null,pink:null,white:null},Z0={get brown(){if(!$s.brown){const o=[];for(let t=0;t<Fd;t++){const s=new Float32Array(mr);o[t]=s;let a=0;for(let l=0;l<mr;l++){const u=Math.random()*2-1;s[l]=(a+.02*u)/1.02,a=s[l],s[l]*=3.5}}$s.brown=new Kt().fromArray(o)}return $s.brown},get pink(){if(!$s.pink){const o=[];for(let t=0;t<Fd;t++){const s=new Float32Array(mr);o[t]=s;let a,l,u,d,f,m,p;a=l=u=d=f=m=p=0;for(let g=0;g<mr;g++){const v=Math.random()*2-1;a=.99886*a+v*.0555179,l=.99332*l+v*.0750759,u=.969*u+v*.153852,d=.8665*d+v*.3104856,f=.55*f+v*.5329522,m=-.7616*m-v*.016898,s[g]=a+l+u+d+f+m+p+v*.5362,s[g]*=.11,p=v*.115926}}$s.pink=new Kt().fromArray(o)}return $s.pink},get white(){if(!$s.white){const o=[];for(let t=0;t<Fd;t++){const s=new Float32Array(mr);o[t]=s;for(let a=0;a<mr;a++)s[a]=Math.random()*2-1}$s.white=new Kt().fromArray(o)}return $s.white}};class Ko extends lt{constructor(){const t=$(Ko.getDefaults(),arguments,["volume"]);super(t),this.name="UserMedia",this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Nt(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}open(t){return he(this,void 0,void 0,function*(){wt(Ko.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const s=yield Ko.enumerateDevices();Gn(t)?this._device=s[t]:(this._device=s.find(u=>u.label===t||u.deviceId===t),!this._device&&s.length>0&&(this._device=s[0]),wt(qt(this._device),`No matching device ${t}`));const a={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(a.audio.deviceId=this._device.deviceId);const l=yield navigator.mediaDevices.getUserMedia(a);if(!this._stream){this._stream=l;const u=this.context.createMediaStreamSource(l);xn(u,this.output),this._mediaStream=u}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(t=>{t.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return he(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return qt(navigator.mediaDevices)&&qt(navigator.mediaDevices.getUserMedia)}}function Ca(o,t){return he(this,void 0,void 0,function*(){const s=t/o.context.sampleRate,a=new Vr(1,s,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/s,detune:0,context:a})).toDestination().start(0),(yield a.render()).getChannelData(0)})}class ml extends wr{constructor(){const t=$(ml.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],xn(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new jt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new jt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(wr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const s=this.toSeconds(t);return this.log("start",s),this._startGain(s),this._oscillator.start(s),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class xe extends Ne{constructor(){const t=$(xe.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency}),Nt(this,"frequency"),this.detune=new Et({context:this.context,units:"cents",value:t.detune}),Nt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Ne.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const s=this.toSeconds(t),a=new ml({context:this.context,onended:()=>this.onstop(this)});this._oscillator=a,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(t){const s=this.toSeconds(t);this._oscillator&&this._oscillator.stop(s)}_restart(t){const s=this.toSeconds(t);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return xe._periodicWaveCache.find(s=>s.phase===this._phase&&NC(s.partials,this._partials));{const t=xe._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const s=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&s)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const a=this._getCachedPeriodicWave();if(qt(a)){const{partials:l,wave:u}=a;this._wave=u,this._partials=l,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[l,u]=this._getRealImaginary(t,this._phase),d=this.context.createPeriodicWave(l,u);this._wave=d,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),xe._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:l,type:this._type,wave:this._wave}),xe._periodicWaveCache.length>100&&xe._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Fe(t,0);let s=this._type;const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(a&&(s=a[1]),this._type!=="custom")t===0?this.type=s:this.type=s+t.toString();else{const l=new Float32Array(t);this._partials.forEach((u,d)=>l[d]=u),this._partials=Array.from(l),this.type=this._type}}_getRealImaginary(t,s){let l=2048;const u=new Float32Array(l),d=new Float32Array(l);let f=1;if(t==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,l=f,this._partials.length===0)return[u,d]}else{const m=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);m?(f=parseInt(m[2],10)+1,this._partialCount=parseInt(m[2],10),t=m[1],f=Math.max(f,2),l=f):this._partialCount=0,this._partials=[]}for(let m=1;m<l;++m){const p=2/(m*Math.PI);let g;switch(t){case"sine":g=m<=f?1:0,this._partials[m-1]=g;break;case"square":g=m&1?2*p:0,this._partials[m-1]=g;break;case"sawtooth":g=p*(m&1?1:-1),this._partials[m-1]=g;break;case"triangle":m&1?g=2*(p*p)*(m-1>>1&1?-1:1):g=0,this._partials[m-1]=g;break;case"custom":g=this._partials[m-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}g!==0?(u[m]=-g*Math.sin(s*m),d[m]=g*Math.cos(s*m)):(u[m]=0,d[m]=0)}return[u,d]}_inverseFFT(t,s,a){let l=0;const u=t.length;for(let d=0;d<u;d++)l+=t[d]*Math.cos(d*a)+s[d]*Math.sin(d*a);return l}getInitialValue(){const[t,s]=this._getRealImaginary(this._type,0);let a=0;const l=Math.PI*2,u=32;for(let d=0;d<u;d++)a=Math.max(this._inverseFFT(t,s,d/u*l),a);return Aa(-this._inverseFFT(t,s,this._phase)/a,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}xe._periodicWaveCache=[];class bu extends Pn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ss({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Se extends Et{constructor(){const t=$(Se.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Tt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Et.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class gl extends Ne{constructor(){const t=$(gl.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new bu({context:this.context}),this._modulationNode=new Tt({context:this.context}),this._carrier=new xe({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new xe({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Se({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Nt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xe.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Fr extends Ne{constructor(){const t=$(Fr.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Tt({context:this.context,gain:0}),this._carrier=new xe({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new xe({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new Se({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new Se({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Nt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xe.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ir extends Ne{constructor(){const t=$(Ir.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Tt({context:this.context,gain:0}),this._thresh=new Ss({context:this.context,mapping:s=>s<=0?-1:1}),this.width=new Et({context:this.context,units:"audioRange",value:t.width}),this._triangle=new xe({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Nt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ne.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class _l extends Ne{constructor(){const t=$(_l.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Et({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Nt(this,["frequency","detune"])}static getDefaults(){return Object.assign(xe.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(s=>s.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(s=>s.stop(t))}_restart(t){this._forEach(s=>s.restart(t))}_forEach(t){for(let s=0;s<this._oscillators.length;s++)t(this._oscillators[s],s)}get type(){return this._type}set type(t){this._type=t,this._forEach(s=>s.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const s=-t/2,a=t/(this._oscillators.length-1);this._forEach((l,u)=>l.detune.value=s+a*u)}}get count(){return this._oscillators.length}set count(t){if(Fe(t,1),this._oscillators.length!==t){this._forEach(s=>s.dispose()),this._oscillators=[];for(let s=0;s<t;s++){const a=new xe({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+s/t*360,partialCount:this._partialCount,onstop:s===0?()=>this.onstop(this):Ft});this.type==="custom"&&(a.partials=this._partials),this.frequency.connect(a.frequency),this.detune.connect(a.detune),a.detune.overridden=!1,a.connect(this.output),this._oscillators[s]=a}this.spread=this._spread,this.state==="started"&&this._forEach(s=>s.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((s,a)=>s.phase=this._phase+a/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(s=>s.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(s=>s.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(s=>s.partialCount=t),this._type=this._oscillators[0].type}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class yl extends Ne{constructor(){const t=$(yl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Se({context:this.context,value:2}),this._pulse=new Ir({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new xe({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Nt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ne.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const W0={am:gl,fat:_l,fm:Fr,oscillator:xe,pulse:Ir,pwm:yl};class ai extends Ne{constructor(){const t=$(ai.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Et({context:this.context,units:"cents",value:t.detune}),Nt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(xe.getDefaults(),Fr.getDefaults(),gl.getDefaults(),_l.getDefaults(),Ir.getDefaults(),yl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(s=>this._sourceType===s)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const s=W0[t],a=this.now();if(this._oscillator){const l=this._oscillator;l.stop(a),this.context.setTimeout(()=>l.dispose(),this.blockTime)}this._oscillator=new s({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(a)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let s="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(s=this._oscillator.type),t==="fm"?this.type="fm"+s:t==="am"?this.type="am"+s:t==="fat"?this.type="fat"+s:t==="oscillator"?this.type=s:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,s){return t instanceof W0[s]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Gn(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Gn(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&vs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return he(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Na extends Et{constructor(){super($(Na.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Tt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Hn(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Et.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ri extends Pn{constructor(){const t=$(ri.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new Se({context:this.context,value:t.max-t.min}),this._add=this.output=new Na({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Pn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class xu extends Pn{constructor(){super($(xu.getDefaults(),arguments)),this.name="Zero",this._gain=new Tt({context:this.context}),this.output=this._gain,this.input=void 0,xn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Uf(this.context.getConstant(0),this._gain),this}}class bn extends lt{constructor(){const t=$(bn.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=jt.prototype._fromType,this._toType=jt.prototype._toType,this._is=jt.prototype._is,this._clampValue=jt.prototype._clampValue,this._oscillator=new xe(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Tt({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Et({context:this.context,units:"audioRange",value:0}),this._zeros=new xu({context:this.context}),this._a2g=new bu({context:this.context}),this._scaler=this.output=new ri({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Nt(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(xe.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const s=this.min,a=this.max;this._units=t,this.min=s,this.max=a}get state(){return this._oscillator.state}connect(t,s,a){return(t instanceof jt||t instanceof Et)&&(this.convert=t.convert,this.units=t.units),pl(this,t,s,a),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function pv(o,t=1/0){const s=new WeakMap;return function(a,l){Reflect.defineProperty(a,l,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){Fe(u,o,t),s.set(this,u)}})}}function ci(o,t=1/0){const s=new WeakMap;return function(a,l){Reflect.defineProperty(a,l,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){Fe(this.toSeconds(u),o,t),s.set(this,u)}})}}class Gr extends Ne{constructor(){const t=$(Gr.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Kt({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ne.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ft,onerror:Ft,playbackRate:1,reverse:!1})}load(t){return he(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Ft){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,s,a){return super.start(t,s,a),this}_start(t,s,a){this._loop?s=rs(s,this._loopStart):s=rs(s,0);const l=this.toSeconds(s),u=a;a=rs(a,Math.max(this._buffer.duration-l,0));let d=this.toSeconds(a);d=d/this._playbackRate,t=this.toSeconds(t);const f=new Qi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+d),this._state.setStateAtTime("stopped",t+d,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&En(u)?f.start(t,l):f.start(t,l,d-this.toSeconds(this.fadeOut))}_stop(t){const s=this.toSeconds(t);this._activeSources.forEach(a=>a.stop(s))}restart(t,s,a){return super.restart(t,s,a),this}_restart(t,s,a){var l;(l=[...this._activeSources].pop())===null||l===void 0||l.stop(t),this._start(t,s,a)}seek(t,s){const a=this.toSeconds(s);if(this._state.getValueAtTime(a)==="started"){const l=this.toSeconds(t);this._stop(a),this._start(a,l)}return this}setLoopPoints(t,s){return this.loopStart=t,this.loopEnd=s,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Fe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Fe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(s=>{s.loop=t}),t)){const s=this._state.getNextState("stopped",this.now());s&&this._state.cancel(s.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const s=this.now(),a=this._state.getNextState("stopped",s);a&&a.implicitEnd&&(this._state.cancel(a.time),this._activeSources.forEach(l=>l.cancelStop())),this._activeSources.forEach(l=>{l.playbackRate.setValueAtTime(t,s)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}xs([ci(0)],Gr.prototype,"fadeIn",void 0);xs([ci(0)],Gr.prototype,"fadeOut",void 0);class Yf extends lt{constructor(){const t=$(Yf.getDefaults(),arguments,["urls","onload"],"urls");super(t),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Nt(this,"volume"),this._buffers=new Lr({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Ne.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Ft,onerror:Ft,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(s=>{s.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(s=>{s.fadeOut=t})}get state(){return Array.from(this._players).some(([s,a])=>a.state==="started")?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(wt(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const s=new Gr({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,s)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,s,a){return wt(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,s,a),this}stopAll(t){return this._players.forEach(s=>s.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=>t.dispose()),this._buffers.dispose(),this}}class Xf extends Ne{constructor(){const t=$(Xf.getDefaults(),arguments,["url","onload"]);super(t),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new Kt({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new Br({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Ne.getDefaults(),{onload:Ft,onerror:Ft,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,s,a){s=rs(s,0),s=this.toSeconds(s),t=this.toSeconds(t);const l=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,s/l),a&&this.stop(t+this.toSeconds(a))}restart(t,s,a){return super.restart(t,s,a),this}_restart(t,s,a){this._stop(t),this._start(t,s,a)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach(s=>{s.fadeOut=0,s.stop(t)}),this.onstop(this)}_tick(t){const s=this._clock.getTicksAtTime(t),a=s*this._grainSize;if(this.log("offset",a),!this.loop&&a>this.buffer.duration){this.stop(t);return}const l=a<this._overlap?0:this._overlap,u=new Qi({context:this.context,url:this.buffer,fadeIn:l,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Tr(this.detune/100)}).connect(this.output);u.start(t,this._grainSize*s),u.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(u),u.onended=()=>{const d=this._activeSources.indexOf(u);d!==-1&&this._activeSources.splice(d,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Fe(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Fe(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Fe(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const s=this.toSeconds(t);Fe(s,0),this._overlap=s}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(t=>t.dispose()),this}}class mv extends Pn{constructor(){super(...arguments),this.name="Abs",this._abs=new Ss({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class gv extends Pn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ss({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Qf extends Pn{constructor(){super(...arguments),this.name="Negate",this._multiply=new Se({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Ea extends Et{constructor(){super($(Ea.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new Tt({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Qf({context:this.context}),this.subtrahend=this._param,Hn(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Et.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class Su extends Pn{constructor(){super($(Su.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new Ss({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new Se({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Tu extends Et{constructor(){const t=$(Tu.getDefaults(),arguments,["value"]);super(t),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new Ea({context:this.context,value:t.value}),this._gtz=this.output=new Su({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Nt(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Et.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class wu extends ri{constructor(){const t=$(wu.getDefaults(),arguments,["min","max","exponent"]);super(t),this.name="ScaleExp",this.input=this._exp=new Ur({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(ri.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class ZC extends Et{constructor(){const t=$(Et.getDefaults(),arguments,["value","units"]);super(t),this.name="SyncedSignal",this.override=!1,this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new yu({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const s=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==s&&(this._lastVal=s,this._constantSource.offset.setValueAtTime(s,t))}_anchorValue(t){const s=super.getValueAtTime(this.context.transport.seconds);this._lastVal=s,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(s,t)}getValueAtTime(t){const s=new Be(this.context,t).toSeconds();return super.getValueAtTime(s)}setValueAtTime(t,s){const a=new Be(this.context,s).toSeconds();return super.setValueAtTime(t,a),this}linearRampToValueAtTime(t,s){const a=new Be(this.context,s).toSeconds();return super.linearRampToValueAtTime(t,a),this}exponentialRampToValueAtTime(t,s){const a=new Be(this.context,s).toSeconds();return super.exponentialRampToValueAtTime(t,a),this}setTargetAtTime(t,s,a){const l=new Be(this.context,s).toSeconds();return super.setTargetAtTime(t,l,a),this}cancelScheduledValues(t){const s=new Be(this.context,t).toSeconds();return super.cancelScheduledValues(s),this}setValueCurveAtTime(t,s,a,l){const u=new Be(this.context,s).toSeconds();return a=this.toSeconds(a),super.setValueCurveAtTime(t,u,a,l),this}cancelAndHoldAtTime(t){const s=new Be(this.context,t).toSeconds();return super.cancelAndHoldAtTime(s),this}setRampPoint(t){const s=new Be(this.context,t).toSeconds();return super.setRampPoint(s),this}exponentialRampTo(t,s,a){const l=new Be(this.context,a).toSeconds();return super.exponentialRampTo(t,s,l),this}linearRampTo(t,s,a){const l=new Be(this.context,a).toSeconds();return super.linearRampTo(t,s,l),this}targetRampTo(t,s,a){const l=new Be(this.context,a).toSeconds();return super.targetRampTo(t,s,l),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class cn extends lt{constructor(){const t=$(cn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Et({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(lt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,s){if(vs(t))return t;{let a;for(a in Ic)if(Ic[a][s]===t)return a;return t}}_setCurve(t,s,a){if(vs(a)&&Reflect.has(Ic,a)){const l=Ic[a];si(l)?t!=="_decayCurve"&&(this[t]=l[s]):this[t]=l}else if(ln(a)&&t!=="_decayCurve")this[t]=a;else throw new Error("Envelope: invalid curve: "+a)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,s=1){this.log("triggerAttack",t,s),t=this.toSeconds(t);let l=this.toSeconds(this.attack);const u=this.toSeconds(this.decay),d=this.getValueAtTime(t);if(d>0){const f=1/l;l=(1-d)/f}if(l<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(s,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(s,l,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(s,l,t);else{this._sig.cancelAndHoldAtTime(t);let f=this._attackCurve;for(let m=1;m<f.length;m++)if(f[m-1]<=d&&d<=f[m]){f=this._attackCurve.slice(m),f[0]=d;break}this._sig.setValueCurveAtTime(f,t,l,s)}if(u&&this.sustain<1){const f=s*this.sustain,m=t+l;this.log("decay",m),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,u+m):this._sig.exponentialApproachValueAtTime(f,m,u)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const s=this.getValueAtTime(t);if(s>0){const a=this.toSeconds(this.release);a<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,a,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,a,t):(wt(ln(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,a,s))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,s,a=1){return s=this.toSeconds(s),this.triggerAttack(s,a),this.triggerRelease(s+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,s=0,a=0){return pl(this,t,s,a),this}asArray(){return he(this,arguments,void 0,function*(t=1024){const s=t/this.context.sampleRate,a=new Vr(1,s,this.context.sampleRate),l=this.toSeconds(this.attack)+this.toSeconds(this.decay),u=l+this.toSeconds(this.release),d=u*.1,f=u+d,m=new this.constructor(Object.assign(this.get(),{attack:s*this.toSeconds(this.attack)/f,decay:s*this.toSeconds(this.decay)/f,release:s*this.toSeconds(this.release)/f,context:a}));return m._sig.toDestination(),m.triggerAttackRelease(s*(l+d)/f,0),(yield a.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}xs([ci(0)],cn.prototype,"attack",void 0);xs([ci(0)],cn.prototype,"decay",void 0);xs([pv(0,1)],cn.prototype,"sustain",void 0);xs([ci(0)],cn.prototype,"release",void 0);const Ic=(()=>{let t,s;const a=[];for(t=0;t<128;t++)a[t]=Math.sin(t/127*(Math.PI/2));const l=[],u=6.4;for(t=0;t<127;t++){s=t/127;const x=Math.sin(s*(Math.PI*2)*u-Math.PI/2)+1;l[t]=x/10+s*.83}l[127]=1;const d=[],f=5;for(t=0;t<128;t++)d[t]=Math.ceil(t/127*f)/f;const m=[];for(t=0;t<128;t++)s=t/127,m[t]=.5*(1-Math.cos(Math.PI*s));const p=[];for(t=0;t<128;t++){s=t/127;const x=Math.pow(s,3)*4+.2,T=Math.cos(x*Math.PI*2*s);p[t]=Math.abs(T*(1-s))}function g(x){const T=new Array(x.length);for(let S=0;S<x.length;S++)T[S]=1-x[S];return T}function v(x){return x.slice(0).reverse()}return{bounce:{In:g(p),Out:p},cosine:{In:a,Out:v(a)},exponential:"exponential",linear:"linear",ripple:{In:l,Out:g(l)},sine:{In:m,Out:g(m)},step:{In:d,Out:g(d)}}})();class os extends lt{constructor(){const t=$(os.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=s=>this._original_triggerRelease(s),this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Nt(this,"volume")}static getDefaults(){return Object.assign(lt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,s){const a=this["_original_"+t]=this[t];this[t]=(...l)=>{const u=l[s],d=this.context.transport.schedule(f=>{l[s]=f,a.apply(this,l)},u);this._scheduledEvents.push(d)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,s,a,l){const u=this.toSeconds(a),d=this.toSeconds(s);return this.triggerAttack(t,u,l),this.triggerRelease(u+d),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class on extends os{constructor(){const t=$(on.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(os.getDefaults(),{detune:0,onsilence:Ft,portamento:0})}triggerAttack(t,s,a=1){this.log("triggerAttack",t,s,a);const l=this.toSeconds(s);return this._triggerEnvelopeAttack(l,a),this.setNote(t,l),this}triggerRelease(t){this.log("triggerRelease",t);const s=this.toSeconds(t);return this._triggerEnvelopeRelease(s),this}setNote(t,s){const a=this.toSeconds(s),l=t instanceof vn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(a)>.05){const u=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(l,u,a)}else this.frequency.setValueAtTime(l,a);return this}}xs([ci(0)],on.prototype,"portamento",void 0);class Hr extends cn{constructor(){super($(Hr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Tt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Hi extends on{constructor(){const t=$(Hi.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new ai(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Hr(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Nt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(on.getDefaults(),{envelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(rn(ai.getDefaults(),[...Object.keys(Ne.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,s){if(this.envelope.triggerAttack(t,s),this.oscillator.start(t),this.envelope.sustain===0){const a=this.toSeconds(this.envelope.attack),l=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+a+l)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class tl extends on{constructor(){const t=$(tl.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new Hi({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Hi({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Et({context:this.context,units:"frequency"}),this.detune=new Et({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new Se({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new Tt({context:this.context,gain:0}),Nt(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(on.getDefaults(),{harmonicity:3,oscillator:Object.assign(rn(ai.getDefaults(),[...Object.keys(Ne.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(rn(ai.getDefaults(),[...Object.keys(Ne.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,s){this._carrier._triggerEnvelopeAttack(t,s),this._modulator._triggerEnvelopeAttack(t,s)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Zf extends tl{constructor(){super($(Zf.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new bu({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class el extends lt{constructor(){const t=$(el.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new jt({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new jt({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new jt({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new jt({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){wt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const s=new Float32Array(t);for(let d=0;d<t;d++){const m=Math.pow(d/t,2)*19980+20;s[d]=m}const a=new Float32Array(t),l=new Float32Array(t),u=this.context.createBiquadFilter();return u.type=this.type,u.Q.value=this.Q.value,u.frequency.value=this.frequency.value,u.gain.value=this.gain.value,u.getFrequencyResponse(s,a,l),a}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Un extends lt{constructor(){const t=$(Un.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._filters=[],this._filters=[],this.Q=new Et({context:this.context,units:"positive",value:t.Q}),this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Et({context:this.context,units:"cents",value:t.detune}),this.gain=new Et({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Nt(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){wt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(a=>a.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const s=Gn(t)?t:parseInt(t,10),a=[-12,-24,-48,-96];let l=a.indexOf(s);wt(l!==-1,`rolloff can only be ${a.join(", ")}`),l+=1,this._rolloff=s,this.input.disconnect(),this._filters.forEach(u=>u.disconnect()),this._filters=new Array(l);for(let u=0;u<l;u++){const d=new el({context:this.context});d.type=this._type,this.frequency.connect(d.frequency),this.detune.connect(d.detune),this.Q.connect(d.Q),this.gain.connect(d.gain),this._filters[u]=d}this._internalChannels=this._filters,Hn(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const s=new el({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),a=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{s.getFrequencyResponse(t).forEach((u,d)=>a[d]*=u)}),s.dispose(),a}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),dl(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class nl extends cn{constructor(){const t=$(nl.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new Ur({context:this.context,value:t.exponent}),this._scale=this.output=new ri({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(cn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const s=this.toFrequency(t);Fe(s,0),this._baseFrequency=s,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class va extends on{constructor(){const t=$(va.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new ai(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Un(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new nl(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Hr(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Nt(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(on.getDefaults(),{envelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(rn(Un.getDefaults(),Object.keys(lt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(rn(nl.getDefaults(),Object.keys(lt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(rn(ai.getDefaults(),Object.keys(Ne.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,s=1){if(this.envelope.triggerAttack(t,s),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const a=this.toSeconds(this.envelope.attack),l=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+a+l)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Wf extends on{constructor(){const t=$(Wf.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new va(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new va(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new Se({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new bn({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Tt({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Et({context:this.context,units:"frequency",value:440}),this.detune=new Et({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Nt(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return as(on.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:as(rn(va.getDefaults(),Object.keys(on.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:as(rn(va.getDefaults(),Object.keys(on.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,s){this.voice0._triggerEnvelopeAttack(t,s),this.voice1._triggerEnvelopeAttack(t,s)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Kf extends tl{constructor(){const t=$(Kf.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new Se({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(tl.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const K0=[1,1.483,1.932,2.546,2.63,3.897];class Jf extends on{constructor(){const t=$(Jf.getDefaults(),arguments);super(t),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Et({context:this.context,units:"cents",value:t.detune}),this.frequency=new Et({context:this.context,units:"frequency"}),this._amplitude=new Tt({context:this.context,gain:0}).connect(this.output),this._highpass=new Un({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let s=0;s<K0.length;s++){const a=new Fr({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:s===0?()=>this.onsilence(this):Ft,type:"square"});a.connect(this._highpass),this._oscillators[s]=a;const l=new Se({context:this.context,value:K0[s]});this._freqMultipliers[s]=l,this.frequency.chain(l,a.frequency),this.detune.connect(a.detune)}this._filterFreqScaler=new ri({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new cn({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return as(on.getDefaults(),{envelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,s=1){return this.envelope.triggerAttack(t,s),this._oscillators.forEach(a=>a.start(t)),this.envelope.sustain===0&&this._oscillators.forEach(a=>{a.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach(s=>s.stop(t+this.toSeconds(this.envelope.release))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach(s=>s.modulationIndex.value=t)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach(s=>s.harmonicity.value=t)}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach(t=>t.dispose()),this._freqMultipliers.forEach(t=>t.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class vl extends Hi{constructor(){const t=$(vl.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Nt(this,["oscillator","envelope"])}static getDefaults(){return as(on.getDefaults(),Hi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,s){const a=this.toSeconds(s),l=this.toFrequency(t instanceof vn?t.toFrequency():t),u=l*this.octaves;return this.oscillator.frequency.setValueAtTime(u,a),this.oscillator.frequency.exponentialRampToValueAtTime(l,a+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}xs([pv(0)],vl.prototype,"octaves",void 0);xs([ci(0)],vl.prototype,"pitchDecay",void 0);class $f extends os{constructor(){const t=$($f.getDefaults(),arguments);super(t),this.name="NoiseSynth",this.noise=new Gi(Object.assign({context:this.context},t.noise)),this.envelope=new Hr(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(os.getDefaults(),{envelope:Object.assign(rn(cn.getDefaults(),Object.keys(lt.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(rn(Gi.getDefaults(),Object.keys(Ne.getDefaults())),{type:"white"})})}triggerAttack(t,s=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,s),this.noise.start(t),this.envelope.sustain===0&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,s,a=1){return s=this.toSeconds(s),t=this.toSeconds(t),this.triggerAttack(s,a),this.triggerRelease(s+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const tp=new Set;function ep(o){tp.add(o)}function _v(o,t){const s=`registerProcessor("${o}", ${t})`;tp.add(s)}function WC(){return Array.from(tp).join(`
`)}class lf extends lt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ft;const s=URL.createObjectURL(new Blob([WC()],{type:"text/javascript"})),a=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(s).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(a,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const KC=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ep(KC);const JC=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ep(JC);const $C=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ep($C);const yv="feedback-comb-filter",t2=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;_v(yv,t2);class bl extends lf{constructor(){const t=$(bl.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.delayTime=new jt({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new jt({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Nt(this,["resonance","delayTime"])}_audioWorkletName(){return yv}static getDefaults(){return Object.assign(lt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Hn(this.input,t,this.output);const s=t.parameters.get("delayTime");this.delayTime.setParam(s);const a=t.parameters.get("feedback");this.resonance.setParam(a)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class xl extends lt{constructor(){const t=$(xl.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(lt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,s=this.toFrequency(this._frequency),a=1/(2*Math.PI*s);if(this._type==="lowpass"){const l=1/(a*this.context.sampleRate),u=l-1;this._filter=this.context.createIIRFilter([l,0],[1,u])}else{const l=1/(a*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,l])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const s=new Float32Array(t);for(let u=0;u<t;u++){const f=Math.pow(u/t,2)*19980+20;s[u]=f}const a=new Float32Array(t),l=new Float32Array(t);return this._filter.getFrequencyResponse(s,a,l),a}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Sl extends lt{constructor(){const t=$(Sl.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new bl({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new xl({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(lt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class np extends os{constructor(){const t=$(np.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new Gi({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new Sl({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return as(os.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,s){const a=this.toFrequency(t);s=this.toSeconds(s);const l=1/a;return this._lfcf.delayTime.setValueAtTime(l,s),this._noise.start(s),this._noise.stop(s+l*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(s),this._lfcf.resonance.setValueAtTime(this.resonance,s),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class sp extends os{constructor(){const t=$(sp.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=l=>this.releaseAll(l),wt(!Gn(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const s=t.voice.getDefaults();this.options=Object.assign(s,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const a=this._voices.indexOf(this._dummyVoice);this._voices.splice(a,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(os.getDefaults(),{maxPolyphony:32,options:{},voice:Hi})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const s=this._activeVoices.findIndex(a=>a.voice===t);this._activeVoices.splice(s,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return wt(t instanceof on,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}else kr("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),s=this._voices.indexOf(t);this._voices.splice(s,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,s,a){t.forEach(l=>{const u=new Ar(this.context,l).toMidi(),d=this._getNextAvailableVoice();d&&(d.triggerAttack(l,s,a),this._activeVoices.push({midi:u,voice:d,released:!1}),this.log("triggerAttack",l,s))})}_triggerRelease(t,s){t.forEach(a=>{const l=new Ar(this.context,a).toMidi(),u=this._activeVoices.find(({midi:d,released:f})=>d===l&&!f);u&&(u.voice.triggerRelease(s),u.released=!0,this.log("triggerRelease",a,s))})}_scheduleEvent(t,s,a,l){wt(!this.disposed,"Synth was already disposed"),a<=this.now()?t==="attack"?this._triggerAttack(s,a,l):this._triggerRelease(s,a):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,s,a,l)},a-this.now())}triggerAttack(t,s,a){Array.isArray(t)||(t=[t]);const l=this.toSeconds(s);return this._scheduleEvent("attack",t,l,a),this}triggerRelease(t,s){Array.isArray(t)||(t=[t]);const a=this.toSeconds(s);return this._scheduleEvent("release",t,a),this}triggerAttackRelease(t,s,a,l){const u=this.toSeconds(a);if(this.triggerAttack(t,u,l),ln(s)){wt(ln(t),"If the duration is an array, the notes must also be an array"),t=t;for(let d=0;d<t.length;d++){const f=s[Math.min(d,s.length-1)],m=this.toSeconds(f);wt(m>0,"The duration must be greater than 0"),this.triggerRelease(t[d],u+m)}}else{const d=this.toSeconds(s);wt(d>0,"The duration must be greater than 0"),this.triggerRelease(t,u+d)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const s=rn(t,["onsilence","context"]);return this.options=as(this.options,s),this._voices.forEach(a=>a.set(s)),this._dummyVoice.set(s),this}get(){return this._dummyVoice.get()}releaseAll(t){const s=this.toSeconds(t);return this._activeVoices.forEach(({voice:a})=>{a.triggerRelease(s)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Tl extends os{constructor(){const t=$(Tl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const s={};Object.keys(t.urls).forEach(a=>{const l=parseInt(a,10);if(wt(Qo(a)||Gn(l)&&isFinite(l),`url key is neither a note or midi pitch: ${a}`),Qo(a)){const u=new vn(this.context,a).toMidi();s[u]=t.urls[a]}else Gn(l)&&isFinite(l)&&(s[l]=t.urls[l])}),this._buffers=new Lr({urls:s,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(os.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ft,onerror:Ft,release:.1,urls:{}})}_findClosest(t){let a=0;for(;a<96;){if(this._buffers.has(t+a))return-a;if(this._buffers.has(t-a))return a;a++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,s,a=1){return this.log("triggerAttack",t,s,a),Array.isArray(t)||(t=[t]),t.forEach(l=>{const u=dv(new vn(this.context,l).toFrequency()),d=Math.round(u),f=u-d,m=this._findClosest(d),p=d-m,g=this._buffers.get(p),v=Tr(m+f),x=new Qi({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);x.start(s,0,g.duration/v,a),ln(this._activeSources.get(d))||this._activeSources.set(d,[]),this._activeSources.get(d).push(x),x.onended=()=>{if(this._activeSources&&this._activeSources.has(d)){const T=this._activeSources.get(d),S=T.indexOf(x);S!==-1&&T.splice(S,1)}}}),this}triggerRelease(t,s){return this.log("triggerRelease",t,s),Array.isArray(t)||(t=[t]),t.forEach(a=>{const l=new vn(this.context,a).toMidi();if(this._activeSources.has(l)&&this._activeSources.get(l).length){const u=this._activeSources.get(l);s=this.toSeconds(s),u.forEach(d=>{d.stop(s)}),this._activeSources.set(l,[])}}),this}releaseAll(t){const s=this.toSeconds(t);return this._activeSources.forEach(a=>{for(;a.length;)a.shift().stop(s)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,s,a,l=1){const u=this.toSeconds(a);return this.triggerAttack(t,u,l),ln(s)?(wt(ln(t),"notes must be an array when duration is array"),t.forEach((d,f)=>{const m=s[Math.min(f,s.length-1)];this.triggerRelease(d,u+this.toSeconds(m))})):this.triggerRelease(t,u+this.toSeconds(s)),this}add(t,s,a){if(wt(Qo(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Qo(t)){const l=new vn(this.context,t).toMidi();this._buffers.add(l,s,a)}else this._buffers.add(t,s,a);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(s=>s.dispose())}),this._activeSources.clear(),this}}xs([ci(0)],Tl.prototype,"attack",void 0);xs([ci(0)],Tl.prototype,"release",void 0);class Rs extends Ke{constructor(){const t=$(Rs.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new zr("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Ke.getDefaults(),{callback:Ft,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,s=>{let a;if(s.state==="started"){s.id!==-1&&this.context.transport.clear(s.id);const l=s.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Gn(this._loop)&&this._loop>1){a=1/0,Gn(this._loop)&&(a=this._loop*this._getLoopDuration());const u=this._state.getAfter(l);u!==null&&(a=Math.min(a,u.time-l)),a!==1/0&&(a=new be(this.context,a));const d=new be(this.context,this._getLoopDuration());s.id=this.context.transport.scheduleRepeat(this._tick.bind(this),d,new be(this.context,l),a)}else s.id=this.context.transport.schedule(this._tick.bind(this),new be(this.context,l))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const s=this.toTicks(t);return this._state.getValueAtTime(s)==="stopped"&&(this._state.add({id:-1,state:"started",time:s}),this._rescheduleEvents(s)),this}stop(t){this.cancel(t);const s=this.toTicks(t);if(this._state.getValueAtTime(s)==="started"){this._state.setStateAtTime("stopped",s,{id:-1});const a=this._state.getBefore(s);let l=s;a!==null&&(l=a.time),this._rescheduleEvents(l)}return this}cancel(t){t=rs(t,-1/0);const s=this.toTicks(t);return this._state.forEachFrom(s,a=>{this.context.transport.clear(a.id)}),this._state.cancel(s),this}_tick(t){const s=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(s)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let a=.02;kf(this.humanize)||(a=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*a}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new be(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new be(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,s=this._state.get(t);if(s!==null&&s.state==="started"){const a=this._getLoopDuration();return(t-s.time)%a/a}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class sl extends Ke{constructor(){const t=$(sl.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new Rs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(Ke.getDefaults(),{interval:"4n",callback:Ft,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}class il extends Rs{constructor(){const t=$(il.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new zr("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach(s=>{ln(s)?this.add(s[0],s[1]):this.add(s)})}static getDefaults(){return Object.assign(Rs.getDefaults(),{events:[]})}start(t,s){const a=this.toTicks(t);if(this._state.getValueAtTime(a)!=="started"){s=rs(s,this._loop?this._loopStart:0),this._loop?s=rs(s,this._loopStart):s=rs(s,0);const l=this.toTicks(s);this._state.add({id:-1,offset:l,state:"started",time:a}),this._forEach(u=>{this._startNote(u,a,l)})}return this}_startNote(t,s,a){s-=a,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<a&&(s+=this._getLoopDuration()),t.start(new be(this.context,s))):t.startOffset<this._loopStart&&t.startOffset>=a&&(t.loop=!1,t.start(new be(this.context,s))):t.startOffset>=a&&t.start(new be(this.context,s))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(s=>{s.startOffset+=this._startOffset})}stop(t){const s=this.toTicks(t);return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._forEach(a=>{a.stop(t)}),this}at(t,s){const a=new Be(this.context,t).toTicks(),l=new be(this.context,1).toSeconds(),u=this._events.values();let d=u.next();for(;!d.done;){const f=d.value;if(Math.abs(a-f.startOffset)<l)return qt(s)&&(f.value=s),f;d=u.next()}return qt(s)?(this.add(t,s),this.at(t)):null}add(t,s){t instanceof Object&&Reflect.has(t,"time")&&(s=t,t=s.time);const a=this.toTicks(t);let l;return s instanceof Rs?(l=s,l.callback=this._tick.bind(this)):l=new Rs({callback:this._tick.bind(this),context:this.context,value:s}),l.startOffset=a,l.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(l),this._restartEvent(l),this}_restartEvent(t){this._state.forEach(s=>{s.state==="started"?this._startNote(t,s.time,s.offset):t.stop(new be(this.context,s.time))})}remove(t,s){return si(t)&&t.hasOwnProperty("time")&&(s=t,t=s.time),t=this.toTicks(t),this._events.forEach(a=>{a.startOffset===t&&(En(s)||qt(s)&&a.value===s)&&(this._events.delete(a),a.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(s=>s.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(s=>{s instanceof il?s._forEach(t):t(s)}),this}_setAll(t,s){this._forEach(a=>{a[t]=s})}_tick(t,s){this.mute||this.callback(t,s)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):t.state==="stopped"&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(s=>{s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.loop=t,this._testLoopBoundries(s)})}get loopEnd(){return new be(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(s=>{s.loopEnd=t,this._testLoopBoundries(s)})}get loopStart(){return new be(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(s=>{s.loopStart=this.loopStart,this._testLoopBoundries(s)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*e2(o){let t=0;for(;t<o;)t=Aa(t,0,o-1),yield t,t++}function*n2(o){let t=o-1;for(;t>=0;)t=Aa(t,0,o-1),yield t,t--}function*Po(o,t){for(;;)yield*t(o)}function*J0(o,t){let s=t?0:o-1;for(;;)s=Aa(s,0,o-1),yield s,t?(s++,s>=o-1&&(t=!1)):(s--,s<=0&&(t=!0))}function*s2(o){let t=0,s=0;for(;t<o;)t=Aa(t,0,o-1),yield t,s++,t+=s%2?2:-1}function*i2(o){let t=o-1,s=0;for(;t>=0;)t=Aa(t,0,o-1),yield t,s++,t+=s%2?-2:1}function*a2(o){for(;;)yield Math.floor(Math.random()*o)}function*r2(o){const t=[];for(let s=0;s<o;s++)t.push(s);for(;t.length>0;){const s=t.splice(Math.floor(t.length*Math.random()),1);yield Aa(s[0],0,o-1)}}function*o2(o){let t=Math.floor(Math.random()*o);for(;;)t===0?t++:t===o-1||Math.random()<.5?t--:t++,yield t}function*$0(o,t="up",s=0){switch(wt(o>=1,"The number of values must be at least one"),t){case"up":yield*Po(o,e2);case"down":yield*Po(o,n2);case"upDown":yield*J0(o,!0);case"downUp":yield*J0(o,!1);case"alternateUp":yield*Po(o,s2);case"alternateDown":yield*Po(o,i2);case"random":yield*a2(o);case"randomOnce":yield*Po(o,r2);case"randomWalk":yield*o2(o)}}class ip extends sl{constructor(){const t=$(ip.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=$0(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(sl.getDefaults(),{pattern:"up",values:[],callback:Ft})}_tick(t){const s=this._pattern.next();this._index=s.value,this._value=this._values[s.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=$0(this._values.length,this._type)}}class ap extends Rs{constructor(){const t=$(ap.getDefaults(),arguments,["callback","events","subdivision"]);super(t),this.name="Sequence",this._part=new il({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(rn(Rs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,s){s!==null&&!this.mute&&this.callback(t,s)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,s){return this._part.start(t,s&&this._indexTime(s)),this}stop(t){return this._part.stop(t),this}get subdivision(){return new be(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(s,a)=>s[a],set:(s,a,l)=>(vs(a)&&isFinite(parseInt(a,10))&&ln(l)?s[a]=this._createSequence(l):s[a]=l,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,s,a){t.forEach((l,u)=>{const d=u*s+a;if(ln(l))this._rescheduleSequence(l,s/l.length,d);else{const f=new be(this.context,d,"i").toSeconds();this._part.add(f,l)}})}_indexTime(t){return new be(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,t===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class Pr extends lt{constructor(){const t=$(Pr.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new gv({context:this.context}),this.a=new Tt({context:this.context,gain:0}),this.b=new Tt({context:this.context,gain:0}),this.output=new Tt({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Et({context:this.context,units:"normalRange",value:t.fade}),Nt(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",xn(this._split,this.a.gain,0),xn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(lt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Ge extends lt{constructor(t){super(t),this.name="Effect",this._dryWet=new Pr({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Tt({context:this.context}),this.effectReturn=new Tt({context:this.context}),this.input=new Tt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Nt(this,"wet")}static getDefaults(){return Object.assign(lt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class iu extends Ge{constructor(t){super(t),this.name="LFOEffect",this._lfo=new bn({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Nt(this,["frequency","depth"])}static getDefaults(){return Object.assign(Ge.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class rp extends iu{constructor(){const t=$(rp.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(t),this.name="AutoFilter",this.filter=new Un(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(iu.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class wl extends lt{constructor(){const t=$(wl.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new jt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Nt(this,"pan")}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class op extends iu{constructor(){const t=$(op.getDefaults(),arguments,["frequency"]);super(t),this.name="AutoPanner",this._panner=new wl({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(iu.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Al extends lt{constructor(){const t=$(Al.getDefaults(),arguments,["smoothing"]);super(t),this.name="Follower",this._abs=this.input=new mv({context:this.context}),this._lowpass=this.output=new xl({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(lt.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class lp extends Ge{constructor(){const t=$(lp.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(t),this.name="AutoWah",this._follower=new Al({context:this.context,smoothing:t.follower}),this._sweepRange=new wu({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new Tt({context:this.context}),this._bandpass=new Un({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Un({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Nt(this,["gain","Q"])}static getDefaults(){return Object.assign(Ge.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return fl(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Sr(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const vv="bit-crusher",l2=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;_v(vv,l2);class cp extends Ge{constructor(){const t=$(cp.getDefaults(),arguments,["bits"]);super(t),this.name="BitCrusher",this._bitCrusherWorklet=new up({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Ge.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class up extends lf{constructor(){const t=$(up.getDefaults(),arguments);super(t),this.name="BitCrusherWorklet",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.bits=new jt({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(lf.getDefaults(),{bits:12})}_audioWorkletName(){return vv}onReady(t){Hn(this.input,t,this.output);const s=t.parameters.get("bits");this.bits.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class hp extends Ge{constructor(){const t=$(hp.getDefaults(),arguments,["order"]);super(t),this.name="Chebyshev",this._shaper=new Ss({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(Ge.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,s,a){return a.has(s)||(s===0?a.set(s,0):s===1?a.set(s,t):a.set(s,2*t*this._getCoefficient(t,s-1,a)-this._getCoefficient(t,s-2,a))),a.get(s)}get order(){return this._order}set order(t){wt(Number.isInteger(t),"'order' must be an integer"),this._order=t,this._shaper.setMap(s=>this._getCoefficient(s,t,new Map))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Da extends lt{constructor(){const t=$(Da.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(lt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Zi extends lt{constructor(){const t=$(Zi.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(lt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class ks extends lt{constructor(t){super(t),this.name="StereoEffect",this.input=new Tt({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Pr({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Da({context:this.context,channels:2}),this._merge=new Zi({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Nt(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),Hn(...t),xn(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),Hn(...t),xn(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(lt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class cf extends ks{constructor(t){super(t),this.feedback=new Et({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new Tt({context:this.context}),this._feedbackR=new Tt({context:this.context}),this._feedbackSplit=new Da({context:this.context,channels:2}),this._feedbackMerge=new Zi({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Nt(this,["feedback"])}static getDefaults(){return Object.assign(ks.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class dp extends cf{constructor(){const t=$(dp.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new bn({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new bn({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new In({context:this.context}),this._delayNodeR=new In({context:this.context}),this.frequency=this._lfoL.frequency,Nt(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(cf.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const s=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-s,0),this._lfoL.max=this._delayTime+s,this._lfoR.min=Math.max(this._delayTime-s,0),this._lfoR.max=this._delayTime+s}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class fp extends Ge{constructor(){const t=$(fp.getDefaults(),arguments,["distortion"]);super(t),this.name="Distortion",this._shaper=new Ss({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(Ge.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const s=t*100,a=Math.PI/180;this._shaper.setMap(l=>Math.abs(l)<.001?0:(3+s)*l*20*a/(Math.PI+s*Math.abs(l)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class au extends Ge{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new Tt({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Nt(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Ge.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class pp extends au{constructor(){const t=$(pp.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new In({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Nt(this,"delayTime")}static getDefaults(){return Object.assign(au.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class c2 extends lt{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.offset90=new Tt({context:this.context});const s=[.6923878,.9360654322959,.988229522686,.9987488452737],a=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(s),this._bank1=this._createAllPassFilterBank(a),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Hn(this.input,...this._bank0,this._oneSampleDelay,this.output),Hn(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map(a=>{const l=[[a*a,0,-1],[1,0,-(a*a)]];return this.context.createIIRFilter(l[0],l[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(t=>t.disconnect()),this._bank1.forEach(t=>t.disconnect()),this._oneSampleDelay.disconnect(),this}}class mp extends Ge{constructor(){const t=$(mp.getDefaults(),arguments,["frequency"]);super(t),this.name="FrequencyShifter",this.frequency=new Et({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ml({context:this.context,type:"sine"}),this._cosine=new xe({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Se({context:this.context}),this._cosineMultiply=new Se({context:this.context}),this._negate=new Qf({context:this.context}),this._add=new Na({context:this.context}),this._phaseShifter=new c2({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const s=this.immediate();this._sine.start(s),this._cosine.start(s)}static getDefaults(){return Object.assign(Ge.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const ty=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],ey=[225,556,441,341];class gp extends ks{constructor(){const t=$(gp.getDefaults(),arguments,["roomSize","dampening"]);super(t),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new Et({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=ey.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._allpassFiltersR=ey.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._combFilters=ty.map((s,a)=>{const l=new Sl({context:this.context,dampening:t.dampening,delayTime:s});return a<ty.length/2?this.connectEffectLeft(l,...this._allpassFiltersL):this.connectEffectRight(l,...this._allpassFiltersR),this.roomSize.connect(l.resonance),l}),Nt(this,["roomSize"])}static getDefaults(){return Object.assign(ks.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach(s=>s.dampening=t)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(t=>t.disconnect()),this._allpassFiltersR.forEach(t=>t.disconnect()),this._combFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this}}const ny=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],u2=[.773,.802,.753,.733],h2=[347,113,37];class _p extends ks{constructor(){const t=$(_p.getDefaults(),arguments,["roomSize"]);super(t),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new Et({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new ri({context:this.context,min:-.733,max:.197}),this._allpassFilters=h2.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._feedbackCombFilters=ny.map((s,a)=>{const l=new bl({context:this.context,delayTime:s});return this._scaleRoomSize.connect(l.resonance),l.resonance.value=u2[a],a<ny.length/2?this.connectEffectLeft(...this._allpassFilters,l):this.connectEffectRight(...this._allpassFilters,l),l}),this.roomSize.connect(this._scaleRoomSize),Nt(this,["roomSize"])}static getDefaults(){return Object.assign(ks.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(t=>t.disconnect()),this._feedbackCombFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class sy extends cf{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Nt(this,["feedback"])}}class yp extends sy{constructor(){const t=$(yp.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="PingPongDelay",this._leftDelay=new In({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new In({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new In({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new Et({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Nt(this,["delayTime"])}static getDefaults(){return Object.assign(sy.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class vp extends au{constructor(){const t=$(vp.getDefaults(),arguments,["pitch"]);super(t),this.name="PitchShift",this._frequency=new Et({context:this.context}),this._delayA=new In({maxDelay:1,context:this.context}),this._lfoA=new bn({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new In({maxDelay:1,context:this.context}),this._lfoB=new bn({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Pr({context:this.context}),this._crossFadeLFO=new bn({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new In({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Nt(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const s=this.now();this._lfoA.start(s),this._lfoB.start(s),this._crossFadeLFO.start(s),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(au.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let s=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,s=Tr(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,s=Tr(t)-1),this._frequency.value=s*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class bp extends ks{constructor(){const t=$(bp.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(t),this.name="Phaser",this._lfoL=new bn({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new bn({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new Et({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Nt(this,["frequency","Q"])}static getDefaults(){return Object.assign(ks.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,s){const a=[];for(let l=0;l<t;l++){const u=this.context.createBiquadFilter();u.type="allpass",this.Q.connect(u.Q),s.connect(u.frequency),a.push(u)}return a}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const s=this._baseFrequency*Math.pow(2,t);this._lfoL.max=s,this._lfoR.max=s}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(t=>t.disconnect()),this._filtersR.forEach(t=>t.disconnect()),this.frequency.dispose(),this}}class xp extends Ge{constructor(){const t=$(xp.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const s=this.toSeconds(t.decay);Fe(s,.001),this._decay=s;const a=this.toSeconds(t.preDelay);Fe(a,0),this._preDelay=a,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Ge.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),Fe(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),Fe(t,0),this._preDelay=t,this.generate()}generate(){return he(this,void 0,void 0,function*(){const t=this.ready,s=new Vr(2,this._decay+this._preDelay,this.context.sampleRate),a=new Gi({context:s}),l=new Gi({context:s}),u=new Zi({context:s});a.connect(u,0,0),l.connect(u,0,1);const d=new Tt({context:s}).toDestination();u.connect(d),a.start(0),l.start(0),d.gain.setValueAtTime(0,0),d.gain.setValueAtTime(1,this._preDelay),d.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const f=s.render();return this.ready=f.then(Ft),yield t,this._convolver.buffer=(yield f).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Cl extends lt{constructor(){super($(Cl.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Da({channels:2,context:this.context}),this._midAdd=new Na({context:this.context}),this.mid=new Se({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Ea({context:this.context}),this.side=new Se({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Nl extends lt{constructor(){super($(Nl.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Tt({context:this.context}),this.side=new Tt({context:this.context}),this._left=new Na({context:this.context}),this._leftMult=new Se({context:this.context,value:Math.SQRT1_2}),this._right=new Ea({context:this.context}),this._rightMult=new Se({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Zi({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class iy extends Ge{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Nl({context:this.context}),this._midSideSplit=new Cl({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Sp extends iy{constructor(){const t=$(Sp.getDefaults(),arguments,["width"]);super(t),this.name="StereoWidener",this.width=new Et({context:this.context,value:t.width,units:"normalRange"}),Nt(this,["width"]),this._twoTimesWidthMid=new Se({context:this.context,value:2}),this._twoTimesWidthSide=new Se({context:this.context,value:2}),this._midMult=new Se({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Ea({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),xn(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Se({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(iy.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tp extends ks{constructor(){const t=$(Tp.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Tremolo",this._lfoL=new bn({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new bn({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new Tt({context:this.context}),this._amplitudeR=new Tt({context:this.context}),this.frequency=new Et({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new Et({context:this.context,value:t.depth,units:"normalRange"}),Nt(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(ks.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class wp extends Ge{constructor(){const t=$(wp.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Vibrato",this._delayNode=new In({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new bn({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Nt(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Ge.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class El extends lt{constructor(){const t=$(El.getDefaults(),arguments,["type","size"]);super(t),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Tt({context:this.context}),this._split=new Da({context:this.context,channels:t.channels}),this.input.connect(this._split),Fe(t.channels,1);for(let s=0;s<t.channels;s++)this._analysers[s]=this.context.createAnalyser(),this._split.connect(this._analysers[s],s,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(lt.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,s)=>{const a=this._buffers[s];this._type==="fft"?t.getFloatFrequencyData(a):this._type==="waveform"&&t.getFloatTimeDomainData(a)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((s,a)=>{s.fftSize=t*2,this._buffers[a]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){wt(t==="waveform"||t==="fft",`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(s=>s.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Pi extends lt{constructor(){super($(Pi.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new El({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ap extends Pi{constructor(){const t=$(Ap.getDefaults(),arguments,["smoothing"]);super(t),this.name="Meter",this.input=this.output=this._analyser=new El({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(Pi.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return kr("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),a=(this.channels===1?[t]:t).map((l,u)=>{const d=l.reduce((m,p)=>m+p*p,0),f=Math.sqrt(d/l.length);return this._rms[u]=Math.max(f,this._rms[u]*this.smoothing),this.normalRange?this._rms[u]:fl(this._rms[u])});return this.channels===1?a[0]:a}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Cp extends Pi{constructor(){const t=$(Cp.getDefaults(),arguments,["size"]);super(t),this.name="FFT",this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(lt.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(s=>this.normalRange?Sr(s):s)}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return wt(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(this.size*2)}}class Np extends Pi{constructor(){super($(Np.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Ep extends Pi{constructor(){const t=$(Ep.getDefaults(),arguments,["size"]);super(t),this.name="Waveform",this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Pi.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class Re extends lt{constructor(){const t=$(Re.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Tt({context:this.context}),Re._allSolos.has(this.context)||Re._allSolos.set(this.context,new Set),Re._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(lt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Re._allSolos.get(this.context).forEach(s=>s._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Re._soloed.has(this.context)||Re._soloed.set(this.context,new Set),Re._soloed.get(this.context).add(this)}_removeSolo(){Re._soloed.has(this.context)&&Re._soloed.get(this.context).delete(this)}_isSoloed(){return Re._soloed.has(this.context)&&Re._soloed.get(this.context).has(this)}_noSolos(){return!Re._soloed.has(this.context)||Re._soloed.has(this.context)&&Re._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Re._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Re._allSolos=new Map;Re._soloed=new Map;class Au extends lt{constructor(){const t=$(Au.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new wl({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Nt(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ba extends lt{constructor(){const t=$(ba.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new Re({solo:t.solo,context:this.context}),this._panVol=this.output=new Au({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Nt(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ba.buses.has(t)||ba.buses.set(t,new Tt({context:this.context})),ba.buses.get(t)}send(t,s=0){const a=this._getBus(t),l=new Tt({context:this.context,units:"decibels",gain:s});return this.connect(l),l.connect(a),l}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ba.buses=new Map;class Dp extends lt{constructor(){super($(Dp.getDefaults(),arguments)),this.name="Mono",this.input=new Tt({context:this.context}),this._merge=this.output=new Zi({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class Dl extends lt{constructor(){const t=$(Dl.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(t),this.name="MultibandSplit",this.input=new Tt({context:this.context}),this.output=void 0,this.low=new Un({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Un({context:this.context,frequency:0,type:"highpass"}),this.mid=new Un({context:this.context,frequency:0,type:"lowpass"}),this.high=new Un({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Et({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new Et({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new Et({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Nt(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),dl(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Op extends lt{constructor(){const t=$(Op.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(t),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new jt({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new jt({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new jt({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new jt({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new jt({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new jt({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(lt.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,s,a){return this.positionX.value=t,this.positionY.value=s,this.positionZ.value=a,this}setOrientation(t,s,a){return this.orientationX.value=t,this.orientationY.value=s,this.orientationZ.value=a,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class ru extends lt{constructor(){const t=$(ru.getDefaults(),arguments);super(t),this.name="Recorder",this.input=new Tt({context:this.context}),wt(ru.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return lt.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return _n!==null&&Reflect.has(_n,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return he(this,void 0,void 0,function*(){wt(this.state!=="started","Recorder is already started");const t=new Promise(s=>{const a=()=>{this._recorder.removeEventListener("start",a,!1),s()};this._recorder.addEventListener("start",a,!1)});return this.state==="stopped"?this._recorder.start():this._recorder.resume(),yield t})}stop(){return he(this,void 0,void 0,function*(){wt(this.state!=="stopped","Recorder is not started");const t=new Promise(s=>{const a=l=>{this._recorder.removeEventListener("dataavailable",a,!1),s(l.data)};this._recorder.addEventListener("dataavailable",a,!1)});return this._recorder.stop(),yield t})}pause(){return wt(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class ii extends lt{constructor(){const t=$(ii.getDefaults(),arguments,["threshold","ratio"]);super(t),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new jt({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new jt({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new jt({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new jt({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new jt({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Nt(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(lt.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Mp extends lt{constructor(){const t=$(Mp.getDefaults(),arguments,["threshold","smoothing"]);super(t),this.name="Gate",this._follower=new Al({context:this.context,smoothing:t.smoothing}),this._gt=new Tu({context:this.context,value:Sr(t.threshold)}),this.input=new Tt({context:this.context}),this._gate=this.output=new Tt({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(lt.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return fl(this._gt.value)}set threshold(t){this._gt.value=Sr(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Rp extends lt{constructor(){const t=$(Rp.getDefaults(),arguments,["threshold"]);super(t),this.name="Limiter",this._compressor=this.input=this.output=new ii({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Nt(this,"threshold")}static getDefaults(){return Object.assign(lt.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class kp extends lt{constructor(){const t=$(kp.getDefaults(),arguments);super(t),this.name="MidSideCompressor",this._midSideSplit=this.input=new Cl({context:this.context}),this._midSideMerge=this.output=new Nl({context:this.context}),this.mid=new ii(Object.assign(t.mid,{context:this.context})),this.side=new ii(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Nt(this,["mid","side"])}static getDefaults(){return Object.assign(lt.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class jp extends lt{constructor(){const t=$(jp.getDefaults(),arguments);super(t),this.name="MultibandCompressor",this._splitter=this.input=new Dl({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Tt({context:this.context}),this.low=new ii(Object.assign(t.low,{context:this.context})),this.mid=new ii(Object.assign(t.mid,{context:this.context})),this.high=new ii(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Nt(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lt.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class qp extends lt{constructor(){const t=$(qp.getDefaults(),arguments,["low","mid","high"]);super(t),this.name="EQ3",this.output=new Tt({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new Dl({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new Tt({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new Tt({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new Tt({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Nt(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(lt.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),dl(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Vp extends lt{constructor(){const t=$(Vp.getDefaults(),arguments,["url","onload"]);super(t),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new Kt(t.url,s=>{this.buffer=s,t.onload()}),this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(lt.getDefaults(),{normalize:!0,onload:Ft})}load(t){return he(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(t)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const s=this._buffer.get();this._convolver.buffer=s||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function d2(){return me().now()}function f2(){return me().immediate()}const p2=me().transport;function m2(){return me().transport}const g2=me().destination,_2=me().destination;function y2(){return me().destination}const v2=me().listener;function b2(){return me().listener}const x2=me().draw;function S2(){return me().draw}const T2=me();function w2(){return Kt.loaded()}const A2=Kt,C2=Lr,N2=Qi,bv=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator:gl,AMSynth:Zf,Abs:mv,Add:Na,AmplitudeEnvelope:Hr,Analyser:El,AudioToGain:bu,AutoFilter:rp,AutoPanner:op,AutoWah:lp,BaseContext:zf,BiquadFilter:el,BitCrusher:cp,Buffer:A2,BufferSource:N2,Buffers:C2,Channel:ba,Chebyshev:hp,Chorus:dp,Clock:Br,Compressor:ii,Context:qr,Convolver:Vp,CrossFade:Pr,DCMeter:Np,Delay:In,Destination:g2,Distortion:fp,Draw:x2,DuoSynth:Wf,EQ3:qp,Emitter:jr,Envelope:cn,FFT:Cp,FMOscillator:Fr,FMSynth:Kf,FatOscillator:_l,FeedbackCombFilter:bl,FeedbackDelay:pp,Filter:Un,Follower:Al,Freeverb:gp,Frequency:BC,FrequencyClass:vn,FrequencyEnvelope:nl,FrequencyShifter:mp,Gain:Tt,GainToAudio:gv,Gate:Mp,GrainPlayer:Xf,GreaterThan:Tu,GreaterThanZero:Su,IntervalTimeline:fv,JCReverb:_p,LFO:bn,Limiter:Rp,Listener:v2,Loop:sl,LowpassCombFilter:Sl,Master:_2,MembraneSynth:vl,Merge:Zi,MetalSynth:Jf,Meter:Ap,MidSideCompressor:kp,MidSideMerge:Nl,MidSideSplit:Cl,Midi:GC,MidiClass:Ar,Mono:Dp,MonoSynth:va,MultibandCompressor:jp,MultibandSplit:Dl,Multiply:Se,Negate:Qf,Noise:Gi,NoiseSynth:$f,Offline:IC,OfflineContext:Vr,OmniOscillator:ai,OnePoleFilter:xl,Oscillator:xe,PWMOscillator:yl,PanVol:Au,Panner:wl,Panner3D:Op,Param:jt,Part:il,Pattern:ip,Phaser:bp,PingPongDelay:yp,PitchShift:vp,Player:Gr,Players:Yf,PluckSynth:np,PolySynth:sp,Pow:Ur,PulseOscillator:Ir,Recorder:ru,Reverb:xp,Sampler:Tl,Scale:ri,ScaleExp:wu,Sequence:ap,Signal:Et,Solo:Re,Split:Da,StateTimeline:zr,StereoWidener:Sp,Subtract:Ea,SyncedSignal:ZC,Synth:Hi,Ticks:HC,TicksClass:be,Time:qC,TimeClass:Ln,Timeline:Fn,ToneAudioBuffer:Kt,ToneAudioBuffers:Lr,ToneAudioNode:lt,ToneBufferSource:Qi,ToneEvent:Rs,ToneOscillatorNode:ml,Transport:p2,TransportTime:LC,TransportTimeClass:Be,Tremolo:Tp,Unit:XC,UserMedia:Ko,Vibrato:wp,Volume:li,WaveShaper:Ss,Waveform:Ep,Zero:xu,connect:xn,connectSeries:Hn,connectSignal:pl,context:T2,dbToGain:Sr,debug:vC,defaultArg:rs,disconnect:Uf,fanIn:UC,ftom:Li,gainToDb:fl,getContext:me,getDestination:y2,getDraw:S2,getListener:b2,getTransport:m2,immediate:f2,intervalToFrequencyRatio:Tr,isArray:ln,isBoolean:kf,isDefined:qt,isFunction:av,isNote:Qo,isNumber:Gn,isObject:si,isString:vs,isUndef:En,loaded:w2,mtof:Bf,now:d2,optionsFromArguments:$,setContext:su,start:RC,supported:_C,version:pf},Symbol.toStringTag,{value:"Module"})),Pc=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],E2=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Cr=Pc,xv=2,D2=4,O2=(o,t)=>{const s=[];for(let a=0;a<t;a++){const l=o+a;Cr.forEach(u=>{const d=u.includes("#")||u.includes("b");s.push({note:u,octave:l,isBlack:d,displayName:u,fullName:`${u}${l}`})})}return s},ay=O2(xv,D2),Sv={[zt.Major]:[0,4,7],[zt.Minor]:[0,3,7],[zt.Dominant7th]:[0,4,7,10],[zt.Minor7th]:[0,3,7,10],[zt.Major7th]:[0,4,7,11],[zt.Diminished7th]:[0,3,6,9],[zt.Minor7thFlat5]:[0,3,6,10],[zt.Suspended2]:[0,2,7],[zt.Suspended4]:[0,5,7],[zt.Major9]:[0,4,7,11,14],[zt.Minor9]:[0,3,7,10,14],[zt.Dominant9]:[0,4,7,10,14],[zt.Major6]:[0,4,7,9],[zt.Minor6]:[0,3,7,9],[zt.Augmented]:[0,4,8],[zt.PowerChord]:[0,7],[zt.Dominant7sharp9]:[0,4,7,10,15],[zt.Dominant7flat9]:[0,4,7,10,13]},M2=120,R2=40,k2=240,j2=-10,q2=0,zp=-40,Tv=10,V2=25,z2=-20,B2=30,zi={instrument:Ze.SynthPiano,volume:j2,rhythmPattern:is.PerMeasure},Yo=ce.ClassicGrand,Id=!1,Gd=-12,Hd=ue.Off,ou=4,Nr=4,Ms=()=>Array(ou).fill(null).map(()=>Array(Nr).fill(!1)),_a=()=>({[Gt.Kick]:Ms(),[Gt.Snare]:Ms(),[Gt.HiHatClosed]:Ms(),[Gt.Tom1]:Ms(),[Gt.CrashCymbal]:Ms()}),Pd=!1,Yd=-5,Xd=an.Off,Qd=gs.ElectricBass,L2=2,wv=[{value:is.PerMeasure,label:"每小節一次 (1 hit/bar)",hits:[{offset:"0:0:0",duration:"1n"}]},{value:is.PerTwoBeats,label:"每兩拍一次 (2 hits/bar)",hits:[{offset:"0:0:0",duration:"2n"},{offset:"0:2:0",duration:"2n"}]},{value:is.PerBeat,label:"每拍一次 (4 hits/bar)",hits:[{offset:"0:0:0",duration:"4n"},{offset:"0:1:0",duration:"4n"},{offset:"0:2:0",duration:"4n"},{offset:"0:3:0",duration:"4n"}]},{value:is.PerEighthNote,label:"每八分音符一次 (8 hits/bar)",hits:Array.from({length:8},(o,t)=>({offset:`0:${Math.floor(t/2)}:${t%2*2}`,duration:"8n"}))},{value:is.PerSixteenthNote,label:"每十六分音符一次 (16 hits/bar)",hits:Array.from({length:16},(o,t)=>({offset:`0:${Math.floor(t/4)}:${t%4}`,duration:"16n"}))},{value:is.Custom,label:"自訂 (Custom)"}],U2=[{value:Ze.AcousticPiano,label:"鋼琴 (Piano)"},{value:Ze.SynthPiano,label:"合成鋼琴 (Synth Piano)"},{value:Ze.MellowSynth,label:"圓潤合成音 (Mellow Synth)"},{value:Ze.SampledGuitar,label:"吉他 (Guitar)"},{value:Ze.StringEnsemble,label:"弦樂合奏 (String Ensemble)"},{value:Ze.Synth,label:"合成器 (Synth)"},{value:Ze.FMSynth,label:"FM 合成器 (FM Synth)"},{value:Ze.AMSynth,label:"AM 合成器 (AM Synth)"}],F2=[{value:ce.ClassicGrand,label:"古典平台鋼琴 (Classic Grand)"},{value:ce.SampledGrand,label:"真實平台鋼琴 (Sampled Grand)"},{value:ce.SampledGuitar,label:"吉他 (Guitar)"},{value:ce.StringEnsemble,label:"弦樂合奏 (String Ensemble)"},{value:ce.BrightUpright,label:"明亮直立鋼琴 (Bright Upright)"},{value:ce.ElectricPiano,label:"電鋼琴 (Electric Piano)"},{value:ce.SimpleSynth,label:"基本合成器 (Simple Synth)"}],Yc=[{value:Gt.Kick,label:"大鼓 (Kick)"},{value:Gt.Snare,label:"小鼓 (Snare)"},{value:Gt.HiHatClosed,label:"閉合銅鈸 (Hi-Hat Closed)"},{value:Gt.Tom1,label:"筒鼓 (Tom 1)"},{value:Gt.CrashCymbal,label:"碎音鈸 (Crash)"}],I2=[{value:ue.Off,label:"關閉 (Off)"},{value:ue.Ballad,label:"抒情歌 (Ballad)"},{value:ue.SlowPop,label:"慢速流行 (Slow Pop)"},{value:ue.PopFunk,label:"流行/放克 (Pop/Funk)"},{value:ue.Rock,label:"搖滾 (Rock)"},{value:ue.HipHop,label:"嘻哈 (Hip-Hop)"},{value:ue.EDM,label:"電子舞曲 (EDM)"},{value:ue.JazzSwing,label:"爵士搖擺 (Jazz Swing)"},{value:ue.Latin,label:"拉丁 (Latin)"},{value:ue.BossaNova,label:"巴薩諾瓦 (Bossa Nova)"},{value:ue.Reggae,label:"雷鬼 (Reggae)"},{value:ue.Custom,label:"自訂 (Custom)"}],G2={[Gt.Kick]:{pitchDecay:.05,octaves:10,oscillator:{type:"sine",phase:0},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential",releaseCurve:"exponential",decayCurve:"exponential"},volume:0},[Gt.Snare]:{noise:{type:"white",playbackRate:3,fadeIn:0,fadeOut:0},envelope:{attack:.001,decay:.15,sustain:0,release:.2,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"linear"},volume:-5},[Gt.HiHatClosed]:{noise:{type:"pink",playbackRate:5,fadeIn:0,fadeOut:0},envelope:{attack:.001,decay:.05,sustain:0,release:.08,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"linear"},volume:-15},[Gt.Tom1]:{pitchDecay:.08,octaves:4,oscillator:{type:"sine",phase:0},envelope:{attack:.001,decay:.2,sustain:.01,release:.1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},volume:-3},[Gt.CrashCymbal]:{harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5,envelope:{attack:.001,decay:1,sustain:0,release:1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},volume:-10}},H2=[{value:gs.ElectricBass,label:"電貝斯 (Electric Bass)"},{value:gs.SynthBass,label:"合成貝斯 (Synth Bass)"},{value:gs.AcousticBass,label:"木貝斯 (Acoustic Bass)"},{value:gs.PopPulseBass,label:"流行脈動貝斯 (Pop Pulse Bass)"}],P2=[{value:an.Off,label:"關閉 (Off)"},{value:an.RootNotes,label:"根音 (Root Notes)"},{value:an.RootAndFifth,label:"根音與五音 (Root & Fifth)"},{value:an.SimpleArpeggio,label:"簡單琶音 (Simple Arpeggio)"},{value:an.WalkingBassSimple,label:"簡易行走貝斯 (Simple Walking Bass)"},{value:an.WalkingBassMelodic,label:"旋律行走貝斯 (Melodic Walking Bass)"},{value:an.FunkSlap,label:"放克貝斯線 (Funk Slap)"}],ry={[gs.ElectricBass]:{oscillator:{type:"fatsawtooth",count:2,spread:10,phase:0},envelope:{attack:.01,decay:.3,sustain:.2,release:.5,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.01,decay:.1,sustain:.1,baseFrequency:200,octaves:2.6,release:.8,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:2,frequency:1200,rolloff:-12,detune:0,gain:0},volume:-6},[gs.SynthBass]:{oscillator:{type:"square",phase:0},envelope:{attack:.02,decay:.1,sustain:.8,release:.4,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.02,decay:.05,sustain:.2,baseFrequency:100,octaves:3,release:1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:3,frequency:800,rolloff:-12,detune:0,gain:0},volume:-8},[gs.AcousticBass]:{oscillator:{type:"sine",phase:0},envelope:{attack:.01,decay:.6,sustain:.1,release:.4,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.005,decay:.2,sustain:.05,baseFrequency:300,octaves:2,release:.5,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:1.5,frequency:1e3,rolloff:-12,detune:0,gain:0},volume:-4}},Os=(o=[],t=[],s=[],a=[],l=[])=>{const u={[Gt.Kick]:Ms(),[Gt.Snare]:Ms(),[Gt.HiHatClosed]:Ms(),[Gt.Tom1]:Ms(),[Gt.CrashCymbal]:Ms()},d=(f,m)=>{u[f]&&m.forEach(p=>{const g=Math.floor(p/Nr),v=p%Nr;u[f][g]&&(u[f][g][v]=!0)})};return d(Gt.Kick,o),d(Gt.Snare,t),d(Gt.HiHatClosed,s),d(Gt.Tom1,a),d(Gt.CrashCymbal,l),u},Y2={[ue.Rock]:Os([0,8],[4,12],[0,2,4,6,8,10,12,14]),[ue.PopFunk]:Os([0,3,6,8,11,14],[4,12],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[],[0]),[ue.JazzSwing]:Os([0,9],[4,13],[2,5,8,11,14]),[ue.Latin]:Os([0,7,8,15],[4,12],[0,2,4,5,6,8,10,12,13,14]),[ue.EDM]:Os([0,4,8,12],[4,12],[2,6,10,14]),[ue.Ballad]:Os([0],[8],[0,2,4,6,8,10,12,14]),[ue.SlowPop]:Os([0,6],[8],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),[ue.HipHop]:Os([0,7],[4,12],[0,2,4,6,8,10,12,14]),[ue.BossaNova]:Os([0,3,8,11],[4,12],[0,2,4,6,8,10,12,14]),[ue.Reggae]:Os([8],[8],[2,6,10,14])},Zd={[ce.ClassicGrand]:{oscillator:{type:"fatsine",phase:0,spread:30,count:3},envelope:{attack:.005,decay:.7,sustain:.1,release:.8,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-6},[ce.BrightUpright]:{oscillator:{type:"fatsquare",spread:15,count:2,phase:0},envelope:{attack:.008,decay:.5,sustain:.05,release:.6,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-7},[ce.ElectricPiano]:{oscillator:{type:"fmsine",harmonicity:2,modulationIndex:1.5,phase:0,modulationType:"square"},envelope:{attack:.01,decay:.8,sustain:.3,release:1.2,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-5},[ce.SimpleSynth]:{oscillator:{type:"triangle",phase:0},envelope:{attack:.01,decay:.15,sustain:.25,release:.4,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8}},oy={A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},ly="https://tonejs.github.io/audio/salamander/",X2={oscillator:{type:"fatsawtooth",count:3,spread:20,phase:0},envelope:{attack:.01,decay:1.2,sustain:.3,release:.8,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8},Q2={oscillator:{type:"fatsine",phase:0,spread:20,count:3},envelope:{attack:.005,decay:.8,sustain:.1,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-7},Z2={oscillator:{type:"sawtooth",phase:0},envelope:{attack:.02,decay:.5,sustain:.2,release:.5,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-9},W2={oscillator:{type:"triangle",phase:0},envelope:{attack:.005,decay:.2,sustain:.01,release:.4,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8},Zo=(o,t,s=0)=>{const a=Cr.indexOf(o);if(a===-1)return`${o}${t}`;const l=a+s,u=t+Math.floor(l/12);return`${Cr[(l%12+12)%12]}${u}`},Lt=xv+1,cy={z:{note:"C",octave:Lt},s:{note:"C#",octave:Lt},x:{note:"D",octave:Lt},d:{note:"D#",octave:Lt},c:{note:"E",octave:Lt},v:{note:"F",octave:Lt},g:{note:"F#",octave:Lt},b:{note:"G",octave:Lt},h:{note:"G#",octave:Lt},n:{note:"A",octave:Lt},j:{note:"A#",octave:Lt},m:{note:"B",octave:Lt},",":{note:"C",octave:Lt+1},l:{note:"C#",octave:Lt+1},".":{note:"D",octave:Lt+1},";":{note:"D#",octave:Lt+1},"/":{note:"E",octave:Lt+1},q:{note:"C",octave:Lt+1},2:{note:"C#",octave:Lt+1},w:{note:"D",octave:Lt+1},3:{note:"D#",octave:Lt+1},e:{note:"E",octave:Lt+1},r:{note:"F",octave:Lt+1},5:{note:"F#",octave:Lt+1},t:{note:"G",octave:Lt+1},6:{note:"G#",octave:Lt+1},y:{note:"A",octave:Lt+1},7:{note:"A#",octave:Lt+1},u:{note:"B",octave:Lt+1},i:{note:"C",octave:Lt+2},9:{note:"C#",octave:Lt+2},o:{note:"D",octave:Lt+2},0:{note:"D#",octave:Lt+2},p:{note:"E",octave:Lt+2},"[":{note:"F",octave:Lt+2},"=":{note:"F#",octave:Lt+2},"]":{note:"G",octave:Lt+2},backspace:{note:"G#",octave:Lt+2},"\\":{note:"A",octave:Lt+2},shift:{note:"B",octave:Lt-1},tab:{note:"B",octave:Lt}},uf="off",K2=[{value:"off",label:"關閉 (Off)",shortLabel:"X"},{value:"1n",label:"全音符 (Whole)",shortLabel:"1"},{value:"2n",label:"二分音符 (Half)",shortLabel:"2"},{value:"4n",label:"四分音符 (Quarter)",shortLabel:"4"},{value:"8n",label:"八分音符 (Eighth)",shortLabel:"8"},{value:"16n",label:"十六分音符 (Sixteenth)",shortLabel:"16"}],uy="interactivePianoStudio_savedProgressions_v4",J2=({keyData:o,onNoteAttack:t,onNoteRelease:s,isComputerKeyPressed:a,isAccompanimentActive:l})=>{const{note:u,octave:d,isBlack:f,displayName:m}=o,[p,g]=lu.useState(!1),v=a||p,x="border border-gray-700 flex flex-col items-center justify-end select-none cursor-pointer transition-all duration-75 ease-out relative group",T="bg-white text-black h-48 w-10 hover:bg-gray-200 shadow-sm",S="bg-gray-300 shadow-inner transform translate-y-px",C="bg-blue-200",w="bg-gray-800 text-white h-32 w-6 hover:bg-gray-700 absolute z-10 shadow-md border-l-2 border-r-2 border-b-4 border-gray-900",O="bg-black border-b-2 border-black transform translate-y-px",R="bg-blue-800";let U;f?(U=w,v?U+=` ${O}`:l&&(U+=` ${R}`)):(U=T,v?U+=` ${S}`:l&&(U+=` ${C}`));const E=`${x} ${U} ${f?"ml-[-0.75rem]":""}`,j=()=>{t(u,d),g(!0)},V=()=>{p&&(s(u,d),g(!1))},D=P=>{P.preventDefault(),t(u,d),g(!0)},F=P=>{P.preventDefault(),p&&(s(u,d),g(!1))};return y.jsx("button",{type:"button",className:E,onMouseDown:j,onMouseUp:V,onMouseLeave:V,onTouchStart:D,onTouchEnd:F,onTouchCancel:F,"aria-label":`${m}${d}`,"aria-pressed":v,children:y.jsxs("span",{className:`text-xs font-semibold pointer-events-none ${f?"text-gray-300 group-hover:text-white mb-1":"text-gray-600 group-hover:text-black mb-1"}`,children:[m,y.jsx("span",{className:"text-gray-500 text-[0.6rem] block",children:d})]})})},$2=({onNoteAttack:o,onNoteRelease:t,pressedKeys:s,accompanimentActiveNotes:a})=>{const d=ay.filter(f=>!f.isBlack).length*40;return y.jsxs("div",{className:"w-full bg-gradient-to-b from-gray-700 to-gray-800 rounded-lg shadow-xl my-4 p-2 sm:p-4 select-none",children:[y.jsx("div",{className:"flex items-start relative overflow-x-auto overflow-y-hidden pb-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",style:{minWidth:"100%",WebkitOverflowScrolling:"touch"},children:y.jsx("div",{className:"flex items-start relative",style:{minWidth:`${d}px`},children:ay.map(f=>y.jsx(J2,{keyData:f,onNoteAttack:o,onNoteRelease:t,isComputerKeyPressed:s.has(f.fullName),isAccompanimentActive:a.has(f.fullName)},f.fullName))})}),y.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"提示：您可以使用電腦鍵盤彈奏 (Z,S,X,D,C... 或 Q,2,W,3,E...)"})]})},tN=({currentTransposition:o,onTransposeChange:t})=>{const s=Cr.indexOf("C"),a=((s!==-1?s:0)+o%12+12)%12,l=Cr[a],u=d=>{t(o+d)};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md",children:[y.jsx("h3",{className:"text-lg font-semibold mb-3 text-center text-gray-100",children:"移調控制"}),y.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[y.jsx("button",{onClick:()=>u(-12),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400 text-sm","aria-label":"向下移八度",children:"-Oct"}),y.jsx("button",{onClick:()=>u(-1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"向下移半音",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"text-xl sm:text-2xl font-bold w-24 sm:w-28 text-center tabular-nums bg-gray-600 px-2 sm:px-3 py-1 rounded-md",children:[l,y.jsxs("span",{className:"text-xs sm:text-sm ml-1",children:["(",o>=0?"+":"",o,")"]})]}),y.jsx("button",{onClick:()=>u(1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"向上移半音",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),y.jsx("button",{onClick:()=>u(12),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400 text-sm","aria-label":"向上移八度",children:"+Oct"})]}),y.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"當彈奏琴鍵 'C' 時，實際發出的音高。"})]})},eN={[zt.Major]:"Major",[zt.Minor]:"Minor",[zt.Dominant7th]:"Dominant 7th",[zt.Minor7th]:"Minor 7th",[zt.Major7th]:"Major 7th",[zt.Diminished7th]:"Diminished 7th",[zt.Minor7thFlat5]:"Minor 7th b5 (ø)",[zt.Suspended2]:"Suspended 2nd",[zt.Suspended4]:"Suspended 4th",[zt.Major9]:"Major 9th",[zt.Minor9]:"Minor 9th",[zt.Dominant9]:"Dominant 9th",[zt.Major6]:"Major 6th",[zt.Minor6]:"Minor 6th",[zt.Augmented]:"Augmented",[zt.PowerChord]:"Power Chord (5)",[zt.Dominant7sharp9]:"Dominant 7th #9",[zt.Dominant7flat9]:"Dominant 7th b9"},nN=({onAddChord:o})=>{const[t,s]=X.useState("C"),[a,l]=X.useState(zt.Major),u=()=>{o({id:`${Date.now()}-${Math.random().toString(36).substring(2,7)}`,root:t,type:a,inversion:0})};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"新增和弦至進行"}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"rootNote",className:"block text-sm font-medium text-gray-300 mb-1",children:"根音"}),y.jsx("select",{id:"rootNote",value:t,onChange:d=>s(d.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Cr.map(d=>y.jsx("option",{value:d,children:d},d))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"chordType",className:"block text-sm font-medium text-gray-300 mb-1",children:"和弦類型"}),y.jsx("select",{id:"chordType",value:a,onChange:d=>l(d.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Object.values(zt).map(d=>y.jsxs("option",{value:d,children:[eN[d]," (",d,")"]},d))})]}),y.jsx("button",{onClick:u,className:"w-full px-4 py-2.5 bg-green-600 hover:bg-green-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-green-400",children:"新增和弦"})]})},Av=lu.memo(({chord:o,onUpdate:t})=>{var l;const a=(((l=Sv[o.type])==null?void 0:l.length)||3)-1;return y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-xs text-gray-400 mr-1",children:"轉位:"}),[0,1,2].map(u=>{const d=u>a;return y.jsx("button",{disabled:d,onClick:f=>{f.stopPropagation(),t(o.id,u)},className:`
              w-5 h-5 text-xs font-mono rounded-sm transition-colors
              flex items-center justify-center
              ${o.inversion===u?"bg-blue-500 text-white":"bg-gray-500 hover:bg-gray-400 text-gray-200"}
              ${d?"opacity-50 cursor-not-allowed":""}
            `,"aria-label":`設定為第 ${u} 轉位`,children:u},u)})]})});Av.displayName="InversionControl";const sN=({progression:o,onRemoveChord:t,onClearProgression:s,onSaveProgression:a,onReorderProgression:l,onUpdateChordInversion:u,currentlyPlayingChordIndex:d,onStyleTransfer:f,isGeneratingStyle:m,isApiKeySet:p})=>{const g=X.useRef(null),v=X.useRef(null),[x,T]=X.useState(null),[S,C]=X.useState(!1),[w,O]=X.useState(""),R=(F,P)=>{g.current=P,F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",P.toString()),F.currentTarget.classList.add("opacity-50","bg-blue-500")},U=F=>{F.currentTarget.classList.remove("opacity-50","bg-blue-500"),T(null),g.current=null,v.current=null},K=(F,P)=>{if(F.preventDefault(),g.current===null||g.current===P){T(null);return}v.current=P;const Z=F.currentTarget.getBoundingClientRect(),Q=F.clientY<Z.top+Z.height/2;T(Q?P:P+1)},E=F=>{if(F.preventDefault(),g.current===null)return;const P=g.current;let Z=v.current;x!==null&&(Z=x>P?x-1:x),Z!==null&&P!==Z&&l(P,Z),g.current=null,v.current=null,T(null),F.currentTarget.classList.remove("opacity-50","bg-blue-500")},j=F=>x===F?y.jsx("div",{className:"h-1 bg-blue-400 my-0.5 rounded-full"}):null,V=()=>{w.trim()&&(f(w.trim()),C(!1))},D=p&&o.length>0;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md h-full flex flex-col",children:[S&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>C(!1),children:y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md",onClick:F=>F.stopPropagation(),children:[y.jsx("h4",{className:"text-xl font-bold text-purple-300 mb-3",children:"AI 風格轉換"}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"輸入您想要的音樂風格，AI 將會重新詮釋您目前的和弦進行。"}),y.jsx("textarea",{rows:3,value:w,onChange:F=>O(F.target.value),className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors placeholder-gray-500",placeholder:"例如：smooth jazz trio, epic cinematic score, 8-bit video game music...","aria-label":"Style prompt"}),y.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[y.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-md transition-colors",children:"取消"}),y.jsx("button",{onClick:V,disabled:!w.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-md transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:"轉換"})]})]})}),y.jsxs("div",{className:"flex justify-between items-center mb-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"和弦進行"}),y.jsxs("div",{className:"space-x-2",children:[o.length>0&&y.jsx("button",{onClick:()=>C(!0),disabled:!D||m,className:"px-3 py-1 text-xs bg-purple-600 hover:bg-purple-700 rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",title:p?"使用 AI 轉換風格":"請先設定 API 金鑰",children:"AI 風格轉換"}),o.length>0&&y.jsx("button",{onClick:a,className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",title:"儲存目前和弦進行",children:"儲存"}),o.length>0&&y.jsx("button",{onClick:s,className:"px-3 py-1 text-xs bg-red-700 hover:bg-red-800 rounded text-white transition-colors",title:"清除所有和弦",children:"全部清除"})]})]}),m&&y.jsx("div",{className:"text-center p-4 text-purple-300",children:"風格轉換中..."}),o.length===0?y.jsx("div",{className:"flex-grow flex items-center justify-center",children:y.jsxs("p",{className:"text-gray-400 text-center",children:["尚未加入任何和弦。",y.jsx("br",{}),"請使用選擇器或 AI 新增和弦以建立伴奏。"]})}):y.jsxs("ul",{className:"space-y-0.5 max-h-60 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600",onDragLeave:()=>T(null),children:[o.map((F,P)=>y.jsxs(lu.Fragment,{children:[j(P),y.jsxs("li",{draggable:"true",onDragStart:Z=>R(Z,P),onDragEnd:U,onDragOver:Z=>K(Z,P),onDrop:Z=>E(Z),className:`flex justify-between items-center p-2 rounded-md shadow transition-colors duration-300 cursor-grab active:cursor-grabbing
                  ${P===d?"bg-blue-600":"bg-gray-600 hover:bg-gray-500"}`,children:[y.jsx("div",{className:"flex flex-col items-start",children:y.jsxs("span",{className:"font-mono text-sm text-gray-200",children:[y.jsxs("span",{className:"text-gray-400",children:[P+1,"."]})," ",F.root,F.type]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Av,{chord:F,onUpdate:u}),y.jsx("button",{onClick:()=>t(F.id),className:"p-1.5 text-xs bg-red-500 hover:bg-red-600 rounded text-white transition-colors focus:outline-none focus:ring-1 focus:ring-red-400","aria-label":`移除和弦 ${F.root}${F.type}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]},F.id)),j(o.length)]})]})},iN=({option:o,isSelected:t,onClick:s})=>y.jsx("button",{type:"button",onClick:s,className:`
        flex-1 px-1 py-1 text-[11px] font-mono font-semibold transition-colors duration-150
        border-t border-b border-gray-600
        first:border-l first:rounded-l-md
        last:border-r last:rounded-r-md
        focus:outline-none focus:ring-1 focus:ring-blue-400 focus:z-10
        ${t?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
      `,title:o.label,children:o.shortLabel}),aN=({chordProgression:o,customRhythmDataForLayer:t,onUpdateBeat:s})=>!o||o.length===0?y.jsx("div",{className:"p-3 my-2 text-sm text-center text-gray-400 bg-gray-500 rounded-md",children:"請先在「和弦進行」中加入和弦以編輯自訂節奏。"}):y.jsxs("div",{className:"p-3 my-2 bg-gray-600 rounded-md space-y-2 max-h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-2",children:"自訂節奏編輯器 (每拍音符時值)"}),o.map((a,l)=>{const u=t[a.originalIndex]||Array(4).fill(uf);return y.jsxs("div",{className:"p-2 bg-gray-500 rounded hover:bg-gray-450 transition-colors",children:[y.jsx("div",{className:"flex items-center justify-between mb-1.5",children:y.jsxs("span",{className:"text-xs font-mono text-gray-200 truncate",title:`${a.root}${a.type}`,children:[l+1,". ",a.root,a.type]})}),y.jsx("div",{className:"grid grid-cols-4 gap-2",children:u.map((d,f)=>y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("label",{htmlFor:`beat-${a.id}-${f}`,className:"text-xs text-gray-300 mb-1",children:["第 ",f+1," 拍"]}),y.jsx("div",{id:`beat-${a.id}-${f}`,className:"inline-flex w-full",role:"group",children:K2.map(m=>y.jsx(iN,{option:m,isSelected:d===m.value,onClick:()=>s(a.originalIndex,f,m.value)},m.value))})]},f))})]},a.id)})]}),rN=({chordProgression:o,customDrumData:t,onUpdateCell:s,onGenerateDrumPattern:a,drumPatternClipboard:l,onCopy:u,onPaste:d,generationState:f,isApiKeySet:m})=>{var w,O;const[p,g]=X.useState(null),[v,x]=X.useState("");if(!o||o.length===0)return y.jsx("div",{className:"p-3 my-2 text-sm text-center text-gray-400 bg-gray-500 rounded-md",children:"請先在「和弦進行」中加入和弦以編輯自訂鼓組。"});const T=()=>{v.trim()&&p!==null&&(a(v,p),g(null))},S=f.isLoading&&f.type==="drums",C=m;return y.jsxs(y.Fragment,{children:[p!==null&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-5 w-full max-w-md",onClick:R=>R.stopPropagation(),children:[y.jsx("h4",{className:"text-lg font-bold text-red-400 mb-2",children:"AI 鼓組生成"}),y.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["為 ",y.jsxs("span",{className:"font-bold text-white",children:[(w=o.find(R=>R.originalIndex===p))==null?void 0:w.root,(O=o.find(R=>R.originalIndex===p))==null?void 0:O.type]})," 和弦描述您想要的鼓點。"]}),y.jsx("textarea",{rows:3,value:v,onChange:R=>x(R.target.value),className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-red-500 focus:border-red-500 transition-colors placeholder-gray-500",placeholder:"例如：a simple rock beat, a fast complex breakbeat, a sparse hip-hop groove...","aria-label":"Drum pattern prompt"}),y.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[y.jsx("button",{onClick:()=>{g(null),x("")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-md transition-colors",children:"取消"}),y.jsx("button",{onClick:T,disabled:!v.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:"生成"})]})]})}),y.jsxs("div",{className:"p-3 my-2 bg-gray-550 rounded-md space-y-3 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-1",children:"自訂鼓組編輯器 (Custom Drum Editor)"}),o.map((R,U)=>{const K=t[R.originalIndex]||_a(),E=S&&f.drumChordIndex===R.originalIndex,j=(l==null?void 0:l.sourceIndex)===R.originalIndex,V=l!==null&&!j;return y.jsxs("div",{className:"p-2.5 bg-gray-500 rounded shadow-sm space-y-1.5 relative",children:[E&&y.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center rounded z-20",children:y.jsx("span",{className:"text-red-400 animate-pulse",children:"AI 生成中..."})}),y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("h5",{className:"text-xs font-mono text-gray-200",children:y.jsxs("span",{className:"font-semibold",children:[U+1,". ",R.root,R.type]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:()=>u(R.originalIndex),className:`px-2 py-0.5 text-xs rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed
                      ${j?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 hover:bg-gray-500"}`,title:j?"取消複製":"複製此鼓點",children:j?"已複製":"複製"}),V&&y.jsx("button",{onClick:()=>d(R.originalIndex),className:"px-2 py-0.5 text-xs bg-green-600 hover:bg-green-700 rounded text-white transition-colors",title:"貼上已複製的鼓點",children:"貼上"}),y.jsx("button",{onClick:()=>{x(""),g(R.originalIndex)},disabled:!C||S,className:"px-2 py-0.5 text-xs bg-red-600 hover:bg-red-700 rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",title:m?"使用 AI 生成此鼓點":"請先設定 API 金鑰",children:"AI"})]})]}),Yc.map(D=>{const F=K[D.value]||Array(ou).fill(null).map(()=>Array(Nr).fill(!1));return y.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[y.jsx("span",{className:"w-[60px] sm:w-[70px] text-xs text-gray-300 truncate text-right pr-1",title:D.label,children:D.label.split(" (")[0]}),y.jsx("div",{className:"flex-grow grid grid-cols-4 gap-x-0",children:[0,1,2,3].map(P=>y.jsxs("div",{className:`
                            flex flex-col items-center py-1 
                            px-1 sm:px-2
                            ${P<ou-1?"border-r border-gray-400":""}
                          `,children:[y.jsx("span",{className:"text-[0.625rem] text-gray-400 leading-tight mb-0.5",children:P+1}),y.jsx("div",{className:"flex space-x-px bg-gray-600 p-px rounded-sm shadow-inner",children:[0,1,2,3].map(Z=>{var ut;const Q=P*Nr+Z,ft=((ut=F[P])==null?void 0:ut[Z])||!1;return y.jsx("button",{type:"button",title:`${D.label} - 第 ${P+1} 拍, 第 ${Z+1} 分拍`,"aria-label":`${D.label} 第 ${P+1} 拍 第 ${Z+1} 分拍 ${ft?"啟用":"停用"}`,"aria-pressed":ft,onClick:()=>s(R.originalIndex,D.value,P,Z,!ft),className:`
                                    w-4 h-4 sm:w-5 sm:h-5 rounded-[2px] transition-colors duration-100
                                    focus:outline-none focus:ring-1 focus:ring-purple-400 focus:z-10
                                    ${ft?"bg-red-500 hover:bg-red-400 shadow-sm":"bg-slate-500 hover:bg-slate-400"}
                                  `},Q)})})]},P))})]},D.value)})]},R.id)})]})]})},Wo=X.memo(({tabName:o,currentTab:t,onClick:s,children:a})=>{const l=o===t;return y.jsx("button",{onClick:()=>s(o),className:`px-4 py-2 text-sm font-semibold rounded-t-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:z-10
        ${l?"bg-gray-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,role:"tab","aria-selected":l,children:a})});Wo.displayName="TabButton";const Cv=X.memo(({accompanimentLayers:o,onRemoveAccompanimentLayer:t,onUpdateAccompanimentLayer:s,onAddAccompanimentLayer:a,chordProgressionForCustomEditor:l,customRhythms:u,onUpdateCustomBeat:d})=>y.jsxs("div",{className:"space-y-4",children:[o.map((f,m)=>y.jsxs("div",{className:"bg-gray-500 p-3 rounded-lg space-y-3 relative border-l-2 border-blue-500",children:[y.jsx("span",{className:"absolute -top-2 -left-2.5 w-5 h-5 bg-blue-500 text-white text-xs flex items-center justify-center rounded-full font-bold",children:m+1}),o.length>1&&y.jsx("button",{onClick:()=>t(f.id),className:"absolute top-1 right-1 p-1 bg-red-600 hover:bg-red-700 rounded-full text-white transition-colors focus:outline-none focus:ring-1 focus:ring-red-400","aria-label":`移除伴奏層 ${m+1}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:`chordVolume-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",f.volume.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:`chordVolume-${f.id}`,min:zp,max:Tv,step:"1",value:f.volume,onChange:p=>s(f.id,"volume",parseFloat(p.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:`chordInstrument-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:"樂器"}),y.jsx("select",{id:`chordInstrument-${f.id}`,value:f.instrument,onChange:p=>s(f.id,"instrument",p.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500",children:U2.map(p=>y.jsx("option",{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:`chordRhythmPattern-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:"節奏型態"}),y.jsx("select",{id:`chordRhythmPattern-${f.id}`,value:f.rhythmPattern,onChange:p=>s(f.id,"rhythmPattern",p.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500",children:wv.map(p=>y.jsx("option",{value:p.value,children:p.label},p.value))})]}),f.rhythmPattern===is.Custom&&y.jsx(aN,{chordProgression:l,customRhythmDataForLayer:u[f.id]||[],onUpdateBeat:(p,g,v)=>d(f.id,p,g,v)})]},f.id)),y.jsx("button",{onClick:a,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400",children:"+ 新增伴奏層"})]}));Cv.displayName="ChordInstrumentPanel";const Nv=X.memo(({drumsEnabled:o,onDrumsEnabledChange:t,drumVolume:s,onDrumVolumeChange:a,drumPattern:l,onDrumPatternChange:u,chordProgressionForCustomEditor:d,customDrumData:f,onUpdateCustomDrumCell:m,onGenerateDrumPattern:p,drumPatternClipboard:g,onCopyDrumPattern:v,onPasteDrumPattern:x,generationState:T,isApiKeySet:S})=>y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{htmlFor:"drumsEnabled",className:"text-sm font-medium text-gray-300",children:"啟用鼓組 (Enable Drums)"}),y.jsx("button",{id:"drumsEnabled",onClick:()=>t(!o),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${o?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":o,children:o?"已啟用 (ON)":"已停用 (OFF)"})]}),o&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"drumVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",s.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"drumVolume",min:zp,max:Tv,step:"1",value:s,onChange:C=>a(parseFloat(C.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-red-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"drumPattern",className:"block text-sm font-medium text-gray-300 mb-1",children:"鼓組風格 (Pattern)"}),y.jsx("select",{id:"drumPattern",value:l,onChange:C=>u(C.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-red-500 focus:border-red-500",children:I2.map(C=>y.jsx("option",{value:C.value,children:C.label},C.value))})]}),l===ue.Custom&&y.jsx(rN,{chordProgression:d,customDrumData:f,onUpdateCell:m,onGenerateDrumPattern:p,drumPatternClipboard:g,onCopy:v,onPaste:x,generationState:T,isApiKeySet:S})]})]}));Nv.displayName="DrumKitPanel";const Ev=X.memo(({bassEnabled:o,onBassEnabledChange:t,bassVolume:s,onBassVolumeChange:a,bassInstrument:l,onBassInstrumentChange:u,bassPattern:d,onBassPatternChange:f})=>y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{htmlFor:"bassEnabled",className:"text-sm font-medium text-gray-300",children:"啟用貝斯 (Enable Bass)"}),y.jsx("button",{id:"bassEnabled",onClick:()=>t(!o),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${o?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":o,children:o?"已啟用 (ON)":"已停用 (OFF)"})]}),o&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"bassVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",s.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"bassVolume",min:zp,max:V2,step:"1",value:s,onChange:m=>a(parseFloat(m.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-yellow-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"bassInstrument",className:"block text-sm font-medium text-gray-300 mb-1",children:"貝斯音色 (Instrument)"}),y.jsx("select",{id:"bassInstrument",value:l,onChange:m=>u(m.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-yellow-500 focus:border-yellow-500",children:H2.map(m=>y.jsx("option",{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"bassPattern",className:"block text-sm font-medium text-gray-300 mb-1",children:"貝斯線風格 (Pattern)"}),y.jsx("select",{id:"bassPattern",value:d,onChange:m=>f(m.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-yellow-500 focus:border-yellow-500",children:P2.map(m=>y.jsx("option",{value:m.value,children:m.label},m.value))})]})]})]}));Ev.displayName="BassGuitarPanel";const Dv=X.memo(({reverbLevel:o,onReverbLevelChange:t,delayLevel:s,onDelayLevelChange:a,swing:l,onSwingChange:u})=>y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-gray-200",children:"全域效果與律動"}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"reverb",className:"block text-sm font-medium text-gray-300 mb-1",children:["殘響 (Reverb): ",(o*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"reverb",min:"0",max:"1",step:"0.01",value:o,onChange:d=>t(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-teal-500"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"delay",className:"block text-sm font-medium text-gray-300 mb-1",children:["延遲 (Delay): ",(s*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"delay",min:"0",max:"1",step:"0.01",value:s,onChange:d=>a(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"swing",className:"block text-sm font-medium text-gray-300 mb-1",children:["搖擺律動 (Swing): ",(l*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"swing",min:"0",max:"1",step:"0.01",value:l,onChange:d=>u(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-pink-500"})]})]}));Dv.displayName="EffectsPanel";const oN=o=>{const{bpm:t,onBpmChange:s,isBeat:a,isPlaying:l,onPlay:u,onStop:d,isAudioReady:f,chordProgressionEmpty:m,accompanimentLayers:p,onAddAccompanimentLayer:g,onRemoveAccompanimentLayer:v,onUpdateAccompanimentLayer:x,chordProgressionForCustomEditor:T,customRhythms:S,onUpdateCustomBeat:C,reverbLevel:w,onReverbLevelChange:O,delayLevel:R,onDelayLevelChange:U,swing:K,onSwingChange:E,drumsEnabled:j,onDrumsEnabledChange:V,drumVolume:D,onDrumVolumeChange:F,drumPattern:P,onDrumPatternChange:Z,customDrumData:Q,onUpdateCustomDrumCell:ft,onGenerateDrumPattern:ut,drumPatternClipboard:_t,onCopyDrumPattern:k,onPasteDrumPattern:W,generationState:ct,isApiKeySet:mt,bassEnabled:A,onBassEnabledChange:I,bassVolume:rt,onBassVolumeChange:dt,bassPattern:bt,onBassPatternChange:vt,bassInstrument:gt,onBassInstrumentChange:Xt}=o,[ot,Qt]=X.useState("chords"),pe=!f||m;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"伴奏 (Accompaniment)"}),y.jsx("div",{className:"flex space-x-3",children:l?y.jsx("button",{onClick:d,className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 focus:ring-offset-gray-700",children:"停止"}):y.jsx("button",{onClick:u,disabled:pe,className:`px-5 py-2.5 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-700 ${pe?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:ring-green-400"}`,children:"播放"})})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"bpm",className:"flex items-center text-sm font-medium text-gray-300 mb-1",children:[y.jsx("span",{className:`w-2.5 h-2.5 mr-2 rounded-full bg-purple-500 transition-all duration-75 ${a?"scale-150 opacity-100":"scale-100 opacity-50"}`,"aria-hidden":"true"}),"速度 (Tempo): ",t," BPM"]}),y.jsx("input",{type:"range",id:"bpm",min:R2,max:k2,value:t,onChange:je=>s(parseInt(je.target.value)),className:"w-full h-2.5 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-400"})]})]}),y.jsxs("div",{className:"border-b border-gray-600 flex space-x-1",role:"tablist",children:[y.jsx(Wo,{tabName:"chords",currentTab:ot,onClick:Qt,children:"和弦"}),y.jsx(Wo,{tabName:"drums",currentTab:ot,onClick:Qt,children:"鼓組"}),y.jsx(Wo,{tabName:"bass",currentTab:ot,onClick:Qt,children:"貝斯"}),y.jsx(Wo,{tabName:"effects",currentTab:ot,onClick:Qt,children:"效果"})]}),y.jsxs("div",{className:"bg-gray-600 p-3 rounded-b-md rounded-r-md min-h-[200px]",children:[ot==="chords"&&y.jsx(Cv,{accompanimentLayers:p,onAddAccompanimentLayer:g,onRemoveAccompanimentLayer:v,onUpdateAccompanimentLayer:x,chordProgressionForCustomEditor:T,customRhythms:S,onUpdateCustomBeat:C}),ot==="drums"&&y.jsx(Nv,{drumsEnabled:j,onDrumsEnabledChange:V,drumVolume:D,onDrumVolumeChange:F,drumPattern:P,onDrumPatternChange:Z,chordProgressionForCustomEditor:T,customDrumData:Q,onUpdateCustomDrumCell:ft,onGenerateDrumPattern:ut,drumPatternClipboard:_t,onCopyDrumPattern:k,onPasteDrumPattern:W,generationState:ct,isApiKeySet:mt}),ot==="bass"&&y.jsx(Ev,{bassEnabled:A,onBassEnabledChange:I,bassVolume:rt,onBassVolumeChange:dt,bassPattern:bt,onBassPatternChange:vt,bassInstrument:gt,onBassInstrumentChange:Xt}),ot==="effects"&&y.jsx(Dv,{reverbLevel:w,onReverbLevelChange:O,delayLevel:R,onDelayLevelChange:U,swing:K,onSwingChange:E})]}),!f&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-1",children:"點擊琴鍵或「播放」以初始化音訊引擎。"}),f&&m&&!l&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-1",children:"請先新增和弦至和弦進行中才能播放伴奏。"})]})},lN=({savedProgressions:o,onLoadProgression:t,onDeleteProgression:s})=>{const a=Object.keys(o);return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-3",children:"已儲存的和弦進行"}),a.length===0?y.jsx("p",{className:"text-gray-400 text-sm",children:"沒有已儲存的和弦進行。"}):y.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600 pr-1",children:a.map(l=>y.jsxs("li",{className:"flex justify-between items-center p-2.5 bg-gray-600 rounded-md hover:bg-gray-500 transition-colors",children:[y.jsx("span",{className:"text-sm text-gray-200 truncate mr-2",title:l,children:l}),y.jsxs("div",{className:"space-x-2 flex-shrink-0",children:[y.jsx("button",{onClick:()=>t(l),className:"px-2.5 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors","aria-label":`載入和弦進行 ${l}`,children:"載入"}),y.jsx("button",{onClick:()=>s(l),className:"p-1.5 text-xs bg-red-600 hover:bg-red-700 rounded text-white transition-colors","aria-label":`刪除和弦進行 ${l}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},l))})]})},cN=({isOpen:o,onClose:t})=>{if(!o)return null;const s=u=>{u.target===u.currentTarget&&t()},a=({children:u})=>y.jsx("h3",{className:"text-xl font-bold text-blue-300 mt-5 mb-2 border-b border-gray-600 pb-1",children:u}),l=({children:u})=>y.jsx("li",{className:"text-gray-300",children:u});return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center p-4 transition-opacity duration-300",onClick:s,"aria-modal":"true",role:"dialog",children:y.jsxs("div",{className:"bg-gray-700 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-600",children:[y.jsxs("h2",{className:"text-2xl font-bold text-white",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 inline-block mr-2 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"使用教學"]}),y.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-full transition-colors","aria-label":"關閉教學",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsxs("main",{className:"p-6 overflow-y-auto space-y-4 scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold text-purple-300",children:"歡迎來到互動鋼琴工作室！"}),y.jsx("p",{className:"text-gray-300 mt-1",children:"這是一個功能強大的網頁工具，讓您不只能彈奏鋼琴，還能創造出豐富的背景伴奏。"})]}),y.jsx(a,{children:"1. 彈奏虛擬鋼琴"}),y.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"滑鼠/觸控:"})," 直接點擊或觸碰螢幕上的琴鍵即可發聲。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"電腦鍵盤:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["中下排 (",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"Z, S, X, D..."}),") 對應一個八度。"]}),y.jsxs(l,{children:["中上排 (",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"Q, 2, W, 3..."}),") 對應高一個八度。"]})]})]})]}),y.jsx(a,{children:"2. 核心設定"}),y.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"移調控制:"})," 使用 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"+"})," 和 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"-"})," 按鈕來升高或降低所有琴鍵的音高。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"主鍵盤設定:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"音色:"})," 從下拉選單中選擇您喜歡的鋼琴或合成器音色。部分音色（如真實平台鋼琴）在首次選擇時需要短暫的載入時間。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"音量:"})," 調整您手動彈奏的琴鍵音量。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"顯示伴奏音符:"})," 開啟後，伴奏所彈奏的音符會在琴鍵上以藍色顯示。"]})]})]})]}),y.jsx(a,{children:"3. 建立您的和弦進行"}),y.jsx("p",{className:"text-gray-300",children:"您可以用兩種方式建立伴奏的和弦基礎："}),y.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"手動新增:"})," 在「新增和弦至進行」面板中選擇根音與和弦類型，然後點擊「新增和弦」。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"編輯和弦進行:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"刪除:"})," 點擊和弦右側的紅色 ",y.jsx("code",{className:"bg-red-500 text-white px-1 rounded",children:"X"})," 按鈕。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"轉位:"})," 點擊和弦旁的 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"0, 1, 2"})," 按鈕來切換和弦轉位。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"重新排序:"})," 按住和弦並拖曳到新的位置即可改變順序。"]})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"儲存與載入:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"儲存:"})," 點擊「儲存」按鈕，為您當前的和弦進行命名並保存。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"載入:"})," 在「已儲存的和弦進行」面板中，點擊「載入」以還原之前儲存的設定（包含所有樂器、節奏和效果）。"]})]})]})]}),y.jsx(a,{children:"4. AI 智慧創作 (Gemini API)"}),y.jsx("p",{className:"text-gray-300",children:"利用 AI 的強大功能，加速您的音樂創作流程！"}),y.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"第一步：設定 API 金鑰 (僅需一次)"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"前往「API 金鑰設定」面板。"}),y.jsx(l,{children:"將您的 Google Gemini API 金鑰貼入輸入框中並點擊「儲存」。"}),y.jsxs(l,{children:[y.jsx("strong",{children:"安全提示："}),"您的金鑰只會被安全地儲存在您自己的瀏覽器中，絕不會上傳或公開。"]})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 和弦生成:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"在「AI 智慧創作」面板中，用文字描述您想要的音樂風格或情緒（例如：「一首輕快的流行歌」、「悲傷的電影配樂」）。"}),y.jsx(l,{children:"點擊「生成和弦進行」。AI 將會**取代**您目前編輯的內容。"})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 風格轉換:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"在「和弦進行」面板中，點擊「AI 風格轉換」按鈕。"}),y.jsx(l,{children:"輸入您想要的新風格（例如：「爵士」、「8-bit 遊戲音樂」），AI 將會重新詮釋您現有的和弦進行。"})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 鼓組生成:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"在「鼓組」分頁中，將風格設為「自訂」。"}),y.jsx(l,{children:"在自訂鼓組編輯器中，點擊任一個和弦右上角的「AI」按鈕。"}),y.jsx(l,{children:"描述您想要的鼓點（例如：「一個簡單的搖滾鼓點」），AI 就會為該小節自動填上鼓點。"})]})]})]}),y.jsx(a,{children:"5. 設計您的伴奏"}),y.jsx("p",{className:"text-gray-300",children:"伴奏控制面板分為四個分頁，讓您精雕細琢您的音樂："}),y.jsxs("ul",{className:"space-y-3",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"主控制 (面板頂部):"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"播放/停止:"})," 控制伴奏的啟動與停止。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"空白鍵捷徑:"})," 您也可以隨時按下",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"空白鍵"}),"來播放或暫停伴奏。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"速度 (BPM):"})," 拖動滑桿調整伴奏的快慢。左側的紫色圓點會跟隨節拍閃爍。"]})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"和弦 (Chords) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["您可以建立",y.jsx("strong",{children:"多個伴奏層"}),"，例如一層鋼琴、一層弦樂。"]}),y.jsx(l,{children:"點擊「+ 新增伴奏層」來增加樂器。"}),y.jsxs(l,{children:["每一層都可以獨立設定",y.jsx("strong",{children:"音量"}),"、",y.jsx("strong",{children:"樂器"}),"和",y.jsx("strong",{children:"節奏型態"}),"。"]}),y.jsx(l,{children:"選擇「自訂」節奏型態後，會出現編輯器，讓您精確設定每個和弦在四拍中每一拍的音符時長。"})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"鼓組 (Drums) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"點擊「啟用鼓組」來開啟/關閉鼓。"}),y.jsxs(l,{children:["可以調整鼓的",y.jsx("strong",{children:"音量"}),"和選擇預設的",y.jsx("strong",{children:"鼓組風格"})," (如搖滾、拉丁)。"]}),y.jsx(l,{children:"選擇「自訂」風格後，會出現詳細的編輯器，讓您為每個和弦的每一拍的 4 個分拍點擊設定鼓點。"}),y.jsxs(l,{children:[y.jsx("strong",{children:"新功能！"}),"在自訂模式中，您可以使用「複製」按鈕複製一個小節的鼓點，再到另一個小節點擊「貼上」，快速應用相同節奏。"]})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"貝斯 (Bass) 分頁:"}),y.jsx("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:y.jsxs(l,{children:["啟用後，可以調整貝斯的",y.jsx("strong",{children:"音量"}),"、",y.jsx("strong",{children:"音色"}),"和",y.jsx("strong",{children:"貝斯線風格"})," (如根音、簡單琶音等)。"]})})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"效果 (Effects) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["這裡的設定會影響",y.jsx("strong",{children:"所有"}),"聲音（包含您的手動彈奏和所有伴奏樂器）。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"殘響 (Reverb):"})," 增加空間感。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"延遲 (Delay):"})," 產生回音效果。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"搖擺律動 (Swing):"})," 讓節奏帶有搖擺感，常用於爵士樂。"]})]})]})]}),y.jsxs("div",{className:"text-center pt-4 mt-4 border-t border-gray-600",children:[y.jsx("p",{className:"text-lg font-semibold text-purple-300",children:"開始探索吧！"}),y.jsx("p",{className:"text-gray-300",children:"結合不同的樂器、節奏和效果，創造出屬於您獨一無二的音樂！"})]})]}),y.jsx("footer",{className:"p-4 text-center",children:y.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-700",children:"關閉"})})]})})},uN=({onGenerate:o,isGenerating:t,generationError:s,isApiKeySet:a})=>{const[l,u]=X.useState(""),[d,f]=X.useState("auto"),m=g=>{g.preventDefault(),l.trim()&&!t&&a&&o(l.trim(),d)},p=t||!l.trim()||!a;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-100 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"AI 智慧創作"]}),y.jsxs("form",{onSubmit:m,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"ai-prompt",className:"block text-sm font-medium text-gray-300 mb-1",children:"描述您想要的音樂感覺"}),y.jsx("textarea",{id:"ai-prompt",rows:3,value:l,onChange:g=>u(g.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors placeholder-gray-400 disabled:opacity-50",placeholder:"例如：一首輕快的流行歌、悲傷的電影配樂、4個和弦的爵士樂...",disabled:t||!a,"aria-describedby":"ai-prompt-description"}),y.jsx("p",{id:"ai-prompt-description",className:"text-xs text-gray-400 mt-1",children:"AI 將會取代目前的和弦進行。"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"num-chords",className:"block text-sm font-medium text-gray-300 mb-1",children:"和弦數量 (選填)"}),y.jsxs("select",{id:"num-chords",value:d,onChange:g=>f(g.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50",disabled:t||!a,"aria-label":"選擇要生成的和弦數量",children:[y.jsx("option",{value:"auto",children:"自動 (4-8個)"}),Array.from({length:19},(g,v)=>v+2).map(g=>y.jsxs("option",{value:g,children:[g," 個和弦"]},g))]})]}),y.jsxs("button",{type:"submit",disabled:p,className:"w-full px-4 py-2.5 bg-purple-600 hover:bg-purple-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-purple-400 disabled:bg-gray-500 disabled:cursor-not-allowed flex items-center justify-center",title:a?"":"請先在上方設定 API 金鑰",children:[t&&y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t?"創作中...":"生成和弦進行"]}),s&&y.jsx("div",{className:"p-2 bg-red-800/50 border border-red-700 rounded-md text-xs text-red-300 text-center",role:"alert",children:s})]})]})},hN=({apiKey:o,onApiKeyChange:t})=>{const[s,a]=X.useState(""),[l,u]=X.useState(!!o);X.useEffect(()=>{u(!!o)},[o]);const d=()=>{if(s.trim()){const m=s.trim();localStorage.setItem("gemini_api_key",m),t(m),a(""),alert("API 金鑰已儲存至您的瀏覽器。")}},f=()=>{window.confirm("確定要清除已儲存的 API 金鑰嗎？")&&(localStorage.removeItem("gemini_api_key"),t(null),alert("API 金鑰已清除。"))};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-3",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-100 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),"API 金鑰設定"]}),y.jsx("p",{className:"text-xs text-gray-400",children:"此金鑰將僅儲存在您本機的瀏覽器中，不會上傳。這是為了讓部署到公開網站後，您能安全地使用 AI 功能。"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("input",{type:"password",value:s,onChange:m=>a(m.target.value),className:"flex-grow p-2 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-yellow-500 focus:border-yellow-500 transition-colors placeholder-gray-400",placeholder:"貼上您的 Gemini API 金鑰","aria-label":"Gemini API Key Input"}),y.jsx("button",{onClick:d,disabled:!s.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:bg-gray-500 disabled:cursor-not-allowed",children:"儲存"})]}),l?y.jsxs("div",{className:"flex items-center justify-between text-sm text-green-400",children:[y.jsx("span",{children:"狀態：API 金鑰已設定。"}),y.jsx("button",{onClick:f,className:"text-xs text-red-400 hover:text-red-300 underline",children:"清除金鑰"})]}):y.jsx("p",{className:"text-sm text-yellow-400",children:"狀態：尚未設定 API 金鑰。AI 功能將無法使用。"})]})},ei=bv,hf=(o,t,s)=>{if(!ei||!ei.Frequency)return console.error("Tone.js or Tone.Frequency is not available in getChordNotes."),[];const{root:a,type:l,inversion:u}=o,d=Sv[l];if(!d)return console.error(`No intervals found for chord type: ${l}`),[];const f=Zo(a,t,s);try{const m=ei.Frequency(f).toMidi();let p=d.map(g=>m+g);if(u>0&&p.length>1){const g=u%p.length;for(let v=0;v<g;v++)if(p.length>1){const x=p.shift();x!==void 0&&p.push(x+12)}}return p.map(g=>ei.Frequency(g,"midi").toNote())}catch(m){return console.error(`Error calculating chord notes for ${a}${l} (root: ${f}):`,m),[]}},dN=(o,t,s,a)=>{if(!ei||!ei.Frequency)return[];const l=hf(o,s,a);if(l.length===0)return[];const u=l[0],d=l[1]||u,f=l[2]||u;let m,p;try{const g=ei.Frequency(u).toMidi();m=ei.Frequency(g+12,"midi").toNote(),p=ei.Frequency(g+2,"midi").toNote()}catch{m=u,p=d}switch(t){case an.Off:return[];case an.RootNotes:return[{note:u,timeOffset:"0:0:0",duration:"1m"}];case an.RootAndFifth:return[{note:u,timeOffset:"0:0:0",duration:"2n"},{note:f,timeOffset:"0:2:0",duration:"2n"}];case an.SimpleArpeggio:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:d,timeOffset:"0:1:0",duration:"4n"},{note:f,timeOffset:"0:2:0",duration:"4n"},{note:m,timeOffset:"0:3:0",duration:"4n"}];case an.WalkingBassSimple:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:u,timeOffset:"0:1:0",duration:"4n"},{note:f,timeOffset:"0:2:0",duration:"4n"},{note:d,timeOffset:"0:3:0",duration:"4n"}];case an.WalkingBassMelodic:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:p,timeOffset:"0:1:0",duration:"4n"},{note:d,timeOffset:"0:2:0",duration:"4n"},{note:f,timeOffset:"0:3:0",duration:"4n"}];case an.FunkSlap:return[{note:u,timeOffset:"0:0:0",duration:"16n"},{note:u,timeOffset:"0:1:0",duration:"16n"},{note:m,timeOffset:"0:1:3",duration:"16n"},{note:u,timeOffset:"0:2:0",duration:"16n"},{note:f,timeOffset:"0:3:0",duration:"16n"},{note:m,timeOffset:"0:3:3",duration:"16n"}];default:return[{note:u,timeOffset:"0:0:0",duration:"1m"}]}},fN=o=>Object.values(zt).includes(o),pN=o=>{const t=o.trim(),s=t.charAt(0).toUpperCase()+t.slice(1),a=Pc.indexOf(s);if(a>-1)return Pc[a];const l=E2.indexOf(s);return l>-1?Pc[l]:(console.warn(`[normalizeNoteName] Invalid note name received: "${o}"`),null)},pt=bv,Xo="/piano/samples/",hy=3,mN=.2,Wd="16n",gN=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,C)=>{const[w,O]=X.useState(!1),R=X.useRef(null),U=X.useRef(null),K=X.useRef(new Map),E=X.useRef(null),j=X.useRef({}),V=X.useRef(null),D=X.useRef(null),F=X.useRef(null),P=X.useRef(null),Z=X.useRef(null),Q=X.useRef(null),ft=X.useRef(new Map),[ut,_t]=X.useState(0),[k,W]=X.useState(!1),[ct,mt]=X.useState(o),A=X.useRef(t),I=X.useRef(d),[rt,dt]=X.useState(M2),[bt,vt]=X.useState(v),[gt,Xt]=X.useState(Yo),[ot,Qt]=X.useState(!1),pe=X.useRef(ut),je=X.useRef(gt),qe=X.useRef(s),Yn=X.useRef(a),Tn=X.useRef(u),et=X.useRef(f),xt=X.useRef(p),Ht=X.useRef(g),te=X.useRef(C);X.useEffect(()=>{pe.current=ut},[ut]),X.useEffect(()=>{je.current=gt},[gt]),X.useEffect(()=>{qe.current=s},[s]),X.useEffect(()=>{Yn.current=a},[a]),X.useEffect(()=>{Tn.current=u},[u]),X.useEffect(()=>{et.current=f},[f]),X.useEffect(()=>{xt.current=p},[p]),X.useEffect(()=>{Ht.current=g},[g]),X.useEffect(()=>{te.current=C},[C]),X.useEffect(()=>{mt(o)},[o]),X.useEffect(()=>{A.current=t},[t]),X.useEffect(()=>{I.current=d},[d]);const Vt=X.useCallback(at=>{let Dt;switch(at){case Ze.AcousticPiano:Dt=new pt.Sampler({urls:oy,baseUrl:ly,release:1,volume:-3,onerror:yt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.AcousticPiano:",yt)});break;case Ze.SynthPiano:Dt=new pt.PolySynth({voice:pt.Synth,options:X2});break;case Ze.MellowSynth:Dt=new pt.PolySynth({voice:pt.Synth,options:Q2});break;case Ze.SampledGuitar:Dt=new pt.Sampler({urls:{A3:"guitar.wav"},baseUrl:Xo,release:1,onerror:yt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.SampledGuitar:",yt)});break;case Ze.StringEnsemble:Dt=new pt.Sampler({urls:{A4:"strings.wav"},baseUrl:Xo,release:1.5,onerror:yt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.StringEnsemble:",yt)});break;case Ze.FMSynth:Dt=new pt.PolySynth({voice:pt.FMSynth,options:{volume:-10,harmonicity:3,modulationIndex:10,oscillator:{type:"sine"},envelope:{attack:.01,decay:.2,sustain:.5,release:.8}}});break;case Ze.AMSynth:Dt=new pt.PolySynth({voice:pt.AMSynth,options:{volume:-10,harmonicity:2.5,oscillator:{type:"sawtooth"},envelope:{attack:.02,decay:.3,sustain:.4,release:.7}}});break;case Ze.Synth:Dt=new pt.PolySynth({voice:pt.Synth,options:W2});break;default:Dt=new pt.PolySynth({voice:pt.Synth,options:Z2})}return Dt},[]),Zt=X.useCallback(at=>{P.current&&at.connect(P.current),Z.current&&at.connect(Z.current)},[]);X.useEffect(()=>{if(!w)return;const at=K.current,Dt=new Set(s.map(yt=>yt.id));for(const yt of at.keys())if(!Dt.has(yt)){const G=at.get(yt);G&&(G.synth.dispose(),G.volumeNode.dispose()),at.delete(yt)}s.forEach(yt=>{const G=at.get(yt.id);if(G){if(G.volumeNode.volume.linearRampTo(yt.volume,.1),G.instrument!==yt.instrument){G.synth.dispose();const B=Vt(yt.instrument).connect(G.volumeNode);at.set(yt.id,{...G,synth:B,instrument:yt.instrument})}}else{const B=new pt.Volume(yt.volume);Zt(B),B.toDestination();const nt=Vt(yt.instrument).connect(B);at.set(yt.id,{synth:nt,volumeNode:B,instrument:yt.instrument})}})},[s,w,Vt,Zt]);const _e=X.useCallback((at,Dt)=>{R.current&&!R.current.disposed&&(R.current instanceof pt.PolySynth&&R.current.releaseAll(pt.now()),R.current.dispose(),R.current=null),ft.current.clear();let yt=null;const G=()=>{const nt=[ce.SampledGrand,ce.SampledGuitar,ce.StringEnsemble].includes(Yo)?ce.ClassicGrand:Yo;R.current=new pt.PolySynth({voice:pt.Synth,options:Zd[nt]}).connect(Dt),Xt(nt)};if(at===ce.SampledGrand){Qt(!0);const B=new pt.Sampler({urls:oy,baseUrl:ly,release:1,volume:-6,onload:()=>{R.current===yt&&Qt(!1)},onerror:nt=>{console.error("Error loading sampled grand piano:",nt),(R.current===yt||!R.current)&&(Qt(!1),yt&&!yt.disposed&&yt.dispose(),G())}}).connect(Dt);return yt=B,R.current=B,B}else if(at===ce.SampledGuitar){Qt(!0);const B=new pt.Sampler({urls:{A3:"guitar.wav"},baseUrl:Xo,release:1,onload:()=>{R.current===yt&&Qt(!1),console.log("[useAudio] User Piano Sampler (SampledGuitar) loaded successfully.")},onerror:nt=>{console.error("Error loading sampled guitar:",nt),(R.current===yt||!R.current)&&(Qt(!1),yt&&!yt.disposed&&yt.dispose(),G())}}).connect(Dt);return yt=B,R.current=B,B}else if(at===ce.StringEnsemble){Qt(!0);const B=new pt.Sampler({urls:{A4:"strings.wav"},baseUrl:Xo,release:1.5,onload:()=>{R.current===yt&&Qt(!1),console.log("[useAudio] User Piano Sampler (StringEnsemble) loaded successfully.")},onerror:nt=>{console.error("Error loading string ensemble:",nt),(R.current===yt||!R.current)&&(Qt(!1),yt&&!yt.disposed&&yt.dispose(),G())}}).connect(Dt);return yt=B,R.current=B,B}else{Qt(!1);const B=at,ht=[ce.SampledGrand,ce.SampledGuitar,ce.StringEnsemble].includes(Yo)?ce.ClassicGrand:Yo,it=Zd[B]||Zd[ht],At=new pt.PolySynth({voice:pt.Synth,options:it}).connect(Dt);return R.current=At,At}},[]),pn=X.useCallback(at=>{Object.keys(Gt).forEach(Dt=>{const yt=Gt[Dt];j.current[yt]&&!j.current[yt].disposed&&j.current[yt].dispose();const G=G2[yt];yt===Gt.Kick||yt===Gt.Tom1?j.current[yt]=new pt.MembraneSynth(G).connect(at):yt===Gt.Snare||yt===Gt.HiHatClosed?j.current[yt]=new pt.NoiseSynth(G).connect(at):yt===Gt.CrashCymbal&&(j.current[yt]=new pt.MetalSynth(G).connect(at))})},[]),Je=X.useCallback((at,Dt)=>{if(D.current&&!D.current.disposed&&(D.current.dispose(),D.current=null),at===gs.PopPulseBass)D.current=new pt.Sampler({urls:{A4:"pop-pulse-bass.wav"},baseUrl:Xo,release:.5,onload:()=>console.log("[useAudio] Bass Sampler (PopPulseBass) loaded successfully."),onerror:yt=>console.error("[useAudio] CRITICAL: Failed to load PopPulseBass sample:",yt)}).connect(Dt);else{const G=ry[at]||ry[gs.ElectricBass];D.current=new pt.MonoSynth(G).connect(Dt)}return D.current},[]);X.useEffect(()=>{w&&F.current&&!F.current.disposed&&Je(g,F.current)},[g,w,Je]);const On=X.useCallback(async()=>{if(!pt)return!1;if(w)return!0;try{return await pt.start(),(!P.current||P.current.disposed)&&(P.current=new pt.Reverb({decay:1.5,wet:0}).toDestination()),(!Z.current||Z.current.disposed)&&(Z.current=new pt.FeedbackDelay({delayTime:"8n.",feedback:.5}).toDestination(),Z.current.wet.value=0),(!U.current||U.current.disposed)&&(U.current=new pt.Volume(bt),Zt(U.current),U.current.toDestination()),(!R.current||R.current.disposed)&&_e(je.current,U.current),qe.current.forEach(at=>{if(!K.current.has(at.id)){const Dt=new pt.Volume(at.volume);Zt(Dt),Dt.toDestination();const yt=Vt(at.instrument).connect(Dt);K.current.set(at.id,{synth:yt,volumeNode:Dt,instrument:at.instrument})}}),(!V.current||V.current.disposed)&&(V.current=new pt.Volume(l),Zt(V.current),V.current.toDestination()),pn(V.current),(!F.current||F.current.disposed)&&(F.current=new pt.Volume(m),Zt(F.current),F.current.toDestination()),(!D.current||D.current.disposed)&&Je(Ht.current,F.current),Q.current||(Q.current=new pt.Loop(at=>{pt.Draw.schedule(()=>{T(!0),setTimeout(()=>T(!1),50)},at)},"4n").start(0)),pt.Transport.bpm.value=rt,pt.Transport.timeSignature=4,O(!0),!0}catch(at){return console.error("Error starting Tone.js or initializing synths:",at),O(!1),!1}},[w,rt,bt,Vt,_e,pn,l,Je,m,Zt,T]),Ts=X.useCallback((at,Dt,yt)=>{if(!te.current)return;const G=pt.Time(yt).toSeconds();pt.Draw.schedule(()=>{S(B=>new Set([...B,...at]))},Dt),pt.Draw.schedule(()=>{S(B=>{const nt=new Set(B);return at.forEach(ht=>nt.delete(ht)),nt})},Dt+G)},[S]),cs=X.useCallback(()=>{pt&&(W(!1),x(null),pt.Transport.stop(),pt.Transport.cancel(),S(new Set),K.current.forEach(at=>{at.synth.releaseAll()}),D.current&&!D.current.disposed&&(D.current instanceof pt.Sampler?D.current.releaseAll():D.current.triggerRelease()))},[x,S]),$e=X.useCallback(async()=>{!pt||!(w||await On())||ct.length===0||W(!0)},[w,On,ct.length]);X.useEffect(()=>{if(!k||!w||!pt||ct.length===0)return;const at=new pt.Sequence((Dt,yt)=>{if(pt.Draw.schedule(()=>{x(yt.originalIndex)},Dt),qe.current.forEach(G=>{const B=K.current.get(G.id);if(!B||B.synth.disposed)return;const{synth:nt}=B,ht=G.rhythmPattern;if(ht!==is.Custom){const it=hf(yt,hy,pe.current),At=wv.find(Rt=>Rt.value===ht);it.length>0&&At&&At.hits&&At.hits.forEach(Rt=>{const ee=pt.Time(Rt.offset).toSeconds(),Ee=Dt+ee;nt.triggerAttackRelease(it,Rt.duration,Ee),Ts(it,Ee,Rt.duration)})}else{const it=hf(yt,hy,pe.current),At=A.current[G.id],Rt=At?At[yt.originalIndex]:null;if(it.length>0&&Rt)for(let ee=0;ee<4;ee++){const Ee=Rt[ee];if(Ee==="off")continue;const De=Ee,ws=pt.Time(`0:${ee}:0`).toSeconds(),fi=Dt+ws;nt.triggerAttackRelease(it,De,fi),Ts(it,fi,De)}}}),Yn.current&&Tn.current!==ue.Off){let G;if(Tn.current===ue.Custom?G=I.current[yt.originalIndex]:G=Y2[Tn.current],G)for(let B=0;B<ou;B++)for(let nt=0;nt<Nr;nt++){const ht=pt.Time(`0:${B}:${nt}`).toSeconds(),it=Dt+ht;Object.keys(Gt).forEach(At=>{var ee,Ee;const Rt=Gt[At];if(G&&((Ee=(ee=G[Rt])==null?void 0:ee[B])!=null&&Ee[nt])){const De=j.current[Rt];De&&!De.disposed&&(Rt===Gt.Kick?De.triggerAttackRelease("C2",Wd,it):Rt===Gt.Tom1?De.triggerAttackRelease("G2",Wd,it):Rt===Gt.CrashCymbal?pt.Draw.schedule(()=>{De&&!De.disposed&&De.triggerAttack(it)},it):De.triggerAttackRelease(Wd,it))}})}}et.current&&D.current&&!D.current.disposed&&xt.current!==an.Off&&dN(yt,xt.current,L2,pe.current).forEach(B=>{const nt=pt.Time(B.timeOffset).toSeconds(),ht=Dt+nt;D.current.triggerAttackRelease(B.note,B.duration,ht),Ts([B.note],ht,B.duration)})},ct,"1m");return at.loop=!0,E.current=at,pt.Transport.stop(),pt.Transport.cancel(),at.start(0),pt.Transport.start(pt.now()+.1),()=>{pt.Transport.state==="started"&&(pt.Transport.stop(),pt.Transport.cancel()),at&&at.dispose(),E.current&&(E.current.dispose(),E.current=null)}},[k,ct,w,x,Ts]);const Xn=X.useCallback((at,Dt,yt=!1)=>{const G=()=>{if(R.current&&!R.current.disposed&&pt&&!ot){const B=Zo(at,Dt,pe.current);R.current.triggerAttack(B,pt.now()),yt&&ft.current.set(`${at}${Dt}`,B)}else ot||On().then(B=>{if(B&&R.current&&!R.current.disposed&&!ot){const nt=Zo(at,Dt,pe.current);R.current.triggerAttack(nt,pt.now()),yt&&ft.current.set(`${at}${Dt}`,nt)}})};w?ot||G():On().then(B=>{B&&!ot&&G()})},[w,On,ot]),tn=X.useCallback((at,Dt,yt=!1)=>{let G=null;const B=`${at}${Dt}`;yt?(G=Zo(at,Dt,pe.current),ft.current.has(B)&&ft.current.delete(B)):G=Zo(at,Dt,pe.current),G&&R.current&&!R.current.disposed&&pt&&!ot&&R.current.triggerRelease([G],pt.now()+mN)},[ot]),Yr=X.useCallback(at=>{dt(at),w&&pt&&(pt.Transport.bpm.value=at)},[w]),Xr=X.useCallback(at=>{vt(at),w&&U.current&&!U.current.disposed&&(U.current.volume.value=at)},[w]),Qr=X.useCallback(at=>{je.current===at&&!ot||(Xt(at),w&&pt&&U.current&&!U.current.disposed?_e(at,U.current):!w&&[ce.SampledGrand,ce.SampledGuitar,ce.StringEnsemble].includes(at)&&Qt(!0))},[w,_e,ot]),ui=X.useCallback(at=>{R.current&&!R.current.disposed&&pt&&!ot&&R.current instanceof pt.PolySynth&&R.current.releaseAll(pt.now()),ft.current.clear(),_t(at)},[ot]),hi=X.useCallback(at=>{w&&P.current&&P.current.wet.linearRampTo(Math.pow(at,.6),.1)},[w]),us=X.useCallback(at=>{w&&Z.current&&Z.current.wet.linearRampTo(Math.pow(at,.8),.1)},[w]),di=X.useCallback(at=>{w&&pt&&(pt.Transport.swing=at*.9)},[w]),hs=X.useCallback(at=>{Yn.current=at},[]),Wi=X.useCallback(at=>{w&&V.current&&!V.current.disposed&&(V.current.volume.value=at)},[w]),Oa=X.useCallback(at=>{Tn.current=at},[]),Ki=X.useCallback(at=>{et.current=at},[]),Ji=X.useCallback(at=>{w&&F.current&&!F.current.disposed&&(F.current.volume.value=at)},[w]),zs=X.useCallback(at=>{xt.current=at},[]),$i=X.useCallback(at=>{Ht.current=at,w&&F.current&&pt&&!F.current.disposed&&Je(at,F.current)},[w,Je]);return X.useEffect(()=>()=>{pt&&(pt.Transport.state!=="stopped"&&pt.Transport.stop(),pt.Transport.cancel()),R.current&&!R.current.disposed&&(R.current instanceof pt.PolySynth&&R.current.releaseAll(pt.now()),R.current.dispose()),U.current&&!U.current.disposed&&U.current.dispose(),K.current.forEach(at=>{at.synth&&!at.synth.disposed&&at.synth.dispose(),at.volumeNode&&!at.volumeNode.disposed&&at.volumeNode.dispose()}),K.current.clear(),P.current&&!P.current.disposed&&P.current.dispose(),Z.current&&!Z.current.disposed&&Z.current.dispose(),Q.current&&!Q.current.disposed&&Q.current.dispose(),V.current&&!V.current.disposed&&V.current.dispose(),Object.values(j.current).filter(at=>at&&!at.disposed).forEach(at=>at.dispose()),D.current&&!D.current.disposed&&D.current.dispose(),F.current&&!F.current.disposed&&F.current.dispose(),E.current&&(E.current.stop(0),E.current.clear(),E.current.dispose()),ft.current.clear()},[]),{attackPianoNote:Xn,releasePianoNote:tn,startAccompaniment:$e,stopAccompaniment:cs,setAccompanimentBPM:Yr,setUserPianoInstrument:Qr,setUserPianoVolume:Xr,setTransposition:ui,currentTransposition:ut,isAccompanimentPlaying:k,currentBPM:rt,currentUserPianoVolume:bt,currentUserPianoInstrument:gt,isAudioReady:w,isPianoLoading:ot,setReverbLevel:hi,setDelayLevel:us,setSwing:di,setDrumsEnabled:hs,setDrumVolume:Wi,setDrumPattern:Oa,setBassEnabled:Ki,setBassVolume:Ji,setBassPattern:zs,setBassInstrument:$i}},_N=()=>{const[o,t]=X.useState([]),[s,a]=X.useState(new Set),[l,u]=X.useState({}),[d,f]=X.useState([{id:`layer-${Date.now()}`,...zi}]),[m,p]=X.useState(q2),[g,v]=X.useState(Id),[x,T]=X.useState(Gd),[S,C]=X.useState(Hd),[w,O]=X.useState([]),[R,U]=X.useState(null),[K,E]=X.useState(Pd),[j,V]=X.useState(Yd),[D,F]=X.useState(Xd),[P,Z]=X.useState(Qd),[Q,ft]=X.useState(()=>localStorage.getItem("gemini_api_key")),[ut,_t]=X.useState({type:null,isLoading:!1,error:null}),[k,W]=X.useState(null),[ct,mt]=X.useState(.1),[A,I]=X.useState(.1),[rt,dt]=X.useState(0),[bt,vt]=X.useState(!1),[gt,Xt]=X.useState(!0),[ot,Qt]=X.useState(new Set),[pe,je]=X.useState(!1),[qe,Yn]=X.useState(()=>{let G={};try{const B=window.localStorage.getItem(uy);if(B){const nt=JSON.parse(B);Object.keys(nt).forEach(ht=>{const it=nt[ht];if(it&&it.progression){const At=it.progression.map(Rt=>({...Rt,inversion:Rt.inversion===void 0?0:Rt.inversion}));it.accompanimentLayers||(it.accompanimentLayers=[{id:`layer-${Date.now()}`,instrument:it.instrument||zi.instrument,volume:it.volume||zi.volume,rhythmPattern:it.rhythmPattern||zi.rhythmPattern}]),G[ht]={progression:At,accompanimentLayers:it.accompanimentLayers,customRhythms:it.customRhythms,customRhythm:it.customRhythm,drumsEnabled:it.drumsEnabled===void 0?Id:it.drumsEnabled,drumVolume:it.drumVolume===void 0?Gd:it.drumVolume,drumPattern:it.drumPattern===void 0?Hd:it.drumPattern,customDrumData:it.customDrumData||Array(it.progression.length).fill(null).map(()=>_a()),bassEnabled:it.bassEnabled===void 0?Pd:it.bassEnabled,bassVolume:it.bassVolume===void 0?Yd:it.bassVolume,bassPattern:it.bassPattern===void 0?Xd:it.bassPattern,bassInstrument:it.bassInstrument===void 0?Qd:it.bassInstrument}}})}}catch(B){console.error("[App.tsx] CRITICAL ERROR reading/parsing saved progressions from localStorage during init:",B),G={}}return G});X.useEffect(()=>{try{const G={...qe};Object.keys(G).forEach(B=>{G[B].customRhythm&&delete G[B].customRhythm}),window.localStorage.setItem(uy,JSON.stringify(G))}catch(G){console.error("[App.tsx] Error saving progressions to localStorage (in useEffect):",G)}},[qe]);const Tn=X.useMemo(()=>o.map((G,B)=>({...G,originalIndex:B})),[o]),et=gN(Tn,l,d,g,x,S,w,K,j,D,P,m,W,vt,Qt,gt),xt=X.useCallback(()=>{et.stopAccompaniment(),W(null)},[et]),Ht=X.useCallback(()=>{et.isAccompanimentPlaying?xt():et.startAccompaniment()},[et,xt]),te=G=>{p(G),et.setUserPianoVolume(G)},Vt=G=>{T(G),et.setDrumVolume(G)},Zt=G=>{V(G),et.setBassVolume(G)},_e=X.useCallback(G=>{mt(G),et.setReverbLevel(G)},[et]),pn=X.useCallback(G=>{I(G),et.setDelayLevel(G)},[et]),Je=X.useCallback(G=>{dt(G),et.setSwing(G)},[et]),On=X.useCallback(G=>{t(B=>[...B,G]),u(B=>{const nt={...B};for(const ht in nt)nt[ht]=[...nt[ht],Array(4).fill(uf)];return nt}),O(B=>[...B,_a()])},[]),Ts=X.useCallback(G=>{const B=o.findIndex(nt=>nt.id===G);B!==-1&&(t(nt=>nt.filter(ht=>ht.id!==G)),u(nt=>{const ht={...nt};for(const it in ht){const At=[...ht[it]];At.splice(B,1),ht[it]=At}return ht}),O(nt=>{const ht=[...nt];return ht.splice(B,1),ht}))},[o]),cs=X.useCallback(()=>{et.isAccompanimentPlaying&&xt(),t([]),u({}),O([]),U(null)},[et,xt]),$e=X.useCallback((G,B)=>{t(nt=>nt.map(ht=>ht.id===G?{...ht,inversion:B}:ht))},[]),Xn=X.useCallback((G,B,nt,ht)=>{u(it=>{const At={...it},Rt=At[G];if(Rt){const ee=Rt.map((Ee,De)=>{if(De===B){const ws=[...Ee];return ws[nt]=ht,ws}return Ee});At[G]=ee}return At})},[]),tn=X.useCallback((G,B,nt,ht,it)=>{O(At=>{const Rt=[...At];Rt[G]||(Rt[G]=_a());const ee={...Rt[G]};ee[B]||(ee[B]=Array(4).fill(null).map(()=>Array(4).fill(!1)));const Ee=ee[B].map(De=>[...De]);return Ee[nt][ht]=it,ee[B]=Ee,Rt[G]=ee,Rt})},[]),Yr=X.useCallback(()=>{f(G=>[...G,{id:`layer-${Date.now()}-${Math.random()}`,...zi}])},[]),Xr=X.useCallback(G=>{f(B=>B.filter(nt=>nt.id!==G)),u(B=>{if(B[G]){const nt={...B};return delete nt[G],nt}return B})},[]),Qr=X.useCallback((G,B,nt)=>{f(ht=>ht.map(it=>it.id===G?{...it,[B]:nt}:it)),B==="rhythmPattern"&&(nt===is.Custom?u(ht=>{if(!ht[G]){const it=Array(o.length).fill(null).map(()=>Array(4).fill(uf));return{...ht,[G]:it}}return ht}):u(ht=>{if(ht[G]){const it={...ht};return delete it[G],it}return ht}))},[o.length]),ui=X.useCallback(()=>{if(o.length===0){alert("和弦進行是空的，無法儲存。");return}let G=window.prompt("請輸入此和弦進行的名稱：");if(G===null)return;const B=G.trim();if(B===""){alert("名稱不能為空。");return}Yn(nt=>({...nt,[B]:{progression:o,customRhythms:l,accompanimentLayers:d,drumsEnabled:g,drumVolume:x,drumPattern:S,customDrumData:w,bassEnabled:K,bassVolume:j,bassPattern:D,bassInstrument:P}})),alert(`和弦進行 "${B}" 已儲存！`)},[o,l,d,g,x,S,w,K,j,D,P]),hi=X.useCallback(G=>{const B=qe[G];if(B){et.isAccompanimentPlaying&&xt();const nt=B.progression.map(it=>({...it,inversion:it.inversion===void 0?0:it.inversion}));if(t(nt),B.accompanimentLayers&&B.accompanimentLayers.length>0)f(B.accompanimentLayers);else{const it={id:`layer-${Date.now()}`,instrument:B.instrument||zi.instrument,volume:B.volume||zi.volume,rhythmPattern:B.rhythmPattern||zi.rhythmPattern};f([it])}const ht={};B.customRhythms?u(B.customRhythms):(B.customRhythm&&(B.accompanimentLayers||[]).forEach(At=>{At.rhythmPattern===is.Custom&&(ht[At.id]=B.customRhythm)}),u(ht)),v(B.drumsEnabled===void 0?Id:B.drumsEnabled),T(B.drumVolume===void 0?Gd:B.drumVolume),C(B.drumPattern===void 0?Hd:B.drumPattern),O(B.customDrumData||Array(B.progression.length).fill(null).map(()=>_a())),E(B.bassEnabled===void 0?Pd:B.bassEnabled),V(B.bassVolume===void 0?Yd:B.bassVolume),F(B.bassPattern===void 0?Xd:B.bassPattern),Z(B.bassInstrument===void 0?Qd:B.bassInstrument),U(null),alert(`和弦進行 "${G}" 已載入！`)}else alert(`無法載入和弦進行 "${G}"。`)},[qe,et,xt]),us=X.useCallback(G=>{window.confirm(`確定要刪除和弦進行 "${G}" 嗎？`)&&(Yn(B=>{const nt={...B};return delete nt[G],nt}),alert(`和弦進行 "${G}" 已刪除！`))},[]),di=X.useCallback((G,B)=>{t(nt=>{const ht=Array.from(nt),[it]=ht.splice(G,1);return ht.splice(B,0,it),ht}),u(nt=>{const ht={...nt};for(const it in ht){const At=Array.from(ht[it]),[Rt]=At.splice(G,1);At.splice(B,0,Rt),ht[it]=At}return ht}),O(nt=>{const ht=Array.from(nt),[it]=ht.splice(G,1);return ht.splice(B,0,it),ht})},[]),hs=X.useCallback((G,B,nt=!1)=>{et.isPianoLoading||et.attackPianoNote(G,B,nt)},[et]),Wi=X.useCallback((G,B,nt=!1)=>{et.isPianoLoading||et.releasePianoNote(G,B,nt)},[et]),Oa=G=>{ft(G)},Ki=X.useCallback(G=>{if(!Array.isArray(G))throw new Error("AI response is not a valid array.");const B=[];for(const nt of G){const ht=pN(nt.root);if(!ht)throw new Error(`AI returned an invalid chord root: ${nt.root}`);if(!fN(nt.type))throw new Error(`AI returned an invalid chord type: ${nt.type}`);B.push({id:`${Date.now()}-${Math.random().toString(36).substring(2,7)}`,root:ht,type:nt.type,inversion:0})}et.isAccompanimentPlaying&&xt(),t(B),u({}),O(Array(B.length).fill(null).map(()=>_a()))},[et,xt]),Ji=async(G,B)=>{if(!ut.isLoading){if(!Q){_t({type:"chords",isLoading:!1,error:"請先在 API 設定中輸入您的 Gemini API 金鑰。"});return}if(!(o.length>0&&!window.confirm("AI 將會取代您目前的和弦進行。確定要繼續嗎？"))){_t({type:"chords",isLoading:!0,error:null});try{const nt=new kd({apiKey:Q}),ht="You are an expert music theorist and composer. Your task is to generate a common chord progression based on the user's description. Your response MUST be in JSON format.",it=B!=="auto"?`The progression must contain exactly ${parseInt(B,10)} chords.`:"The progression should contain between 4 and 8 chords.",At=await nt.models.generateContent({model:"gemini-2.5-flash",contents:`User request: '${G}'`,config:{systemInstruction:`${ht} ${it}`,responseMimeType:"application/json",responseSchema:{type:ss.ARRAY,items:{type:ss.OBJECT,properties:{root:{type:ss.STRING,description:"The chord's root note, e.g., 'C', 'G#', 'Bb'"},type:{type:ss.STRING,description:`The chord type, must be one of: '${Object.values(zt).join("', '")}'`}},required:["root","type"]}}}});Ki(JSON.parse(At.text))}catch(nt){const ht=nt instanceof Error?nt.message:"An unknown error occurred.";console.error("Error generating chord progression:",nt),_t({type:"chords",isLoading:!1,error:`Generation failed: ${ht}`})}finally{_t({type:null,isLoading:!1,error:null})}}}},zs=async G=>{if(!(ut.isLoading||o.length===0)){if(!Q){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}_t({type:"style",isLoading:!0,error:null});try{const B=new kd({apiKey:Q}),nt=o.map(At=>`${At.root}${At.type}`).join(", "),ht=await B.models.generateContent({model:"gemini-2.5-flash",contents:`Re-harmonize the following chord progression: [${nt}] into a "${G}" style.`,config:{systemInstruction:"You are a master music arranger. Your task is to re-harmonize a given chord progression into a new style specified by the user. You can use more advanced chords (e.g., sevenths, ninths, altered chords) and substitutions, but you must maintain the general harmonic flow and the same number of chords as the original. Your response MUST be a JSON array with the exact same structure and number of elements as the original progression.",responseMimeType:"application/json",responseSchema:{type:ss.ARRAY,items:{type:ss.OBJECT,properties:{root:{type:ss.STRING,description:"The chord's root note, e.g., 'C', 'G#', 'Bb'"},type:{type:ss.STRING,description:`The chord type, must be one of: '${Object.values(zt).join("', '")}'`}},required:["root","type"]}}}}),it=JSON.parse(ht.text);if(it.length!==o.length)throw new Error(`AI returned ${it.length} chords, but expected ${o.length}.`);Ki(it)}catch(B){const nt=B instanceof Error?B.message:"An unknown error occurred.";console.error("Error transforming chord progression:",B),alert(`風格轉換失敗: ${nt}`)}finally{_t({type:null,isLoading:!1,error:null})}}},$i=X.useCallback((G,B)=>{O(nt=>{const ht=[...nt],it=_a();for(const At of Yc.map(Rt=>Rt.value))B[At]&&(it[At]=B[At]);return ht[G]=it,ht})},[]),at=X.useCallback(G=>{U(B=>{if(B&&B.sourceIndex===G)return null;const nt=w[G];return nt?{pattern:nt,sourceIndex:G}:null})},[w]),Dt=X.useCallback(G=>{R&&$i(G,R.pattern)},[R,$i]),yt=async(G,B)=>{if(!ut.isLoading){if(!Q){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}_t({type:"drums",isLoading:!0,error:null,drumChordIndex:B});try{const nt=new kd({apiKey:Q}),ht=Yc.map(Rt=>Rt.value).join(", "),it=await nt.models.generateContent({model:"gemini-2.5-flash",contents:`User's request for a one-measure drum pattern: "${G}"`,config:{systemInstruction:`You are an expert drum machine programmer. Your task is to generate a one-measure (16-step) drum pattern based on a user's text description. The response MUST be a JSON object. The keys of the object must be instrument names from the following list: [${ht}]. The value for each key must be a 4x4 array of booleans, representing 4 beats, each with 4 subdivisions (16th notes). 'true' means a hit, 'false' means a rest.`,responseMimeType:"application/json",responseSchema:{type:ss.OBJECT,properties:Yc.reduce((Rt,ee)=>(Rt[ee.value]={type:ss.ARRAY,items:{type:ss.ARRAY,items:{type:ss.BOOLEAN}}},Rt),{})}}}),At=JSON.parse(it.text);$i(B,At)}catch(nt){const ht=nt instanceof Error?nt.message:"An unknown error occurred.";console.error("Error generating drum pattern:",nt),alert(`鼓組生成失敗: ${ht}`)}finally{_t({type:null,isLoading:!1,error:null})}}};return X.useEffect(()=>{const G=nt=>{const ht=nt.target;if(ht&&(ht.tagName==="INPUT"||ht.tagName==="SELECT"||ht.tagName==="TEXTAREA"||ht.isContentEditable))return;if(nt.code==="Space"){nt.preventDefault(),Ht();return}const it=nt.key.toLowerCase(),At=cy[it];if(At&&!et.isPianoLoading){nt.preventDefault();const{note:Rt,octave:ee}=At,Ee=`${Rt}${ee}`;s.has(Ee)||(hs(Rt,ee,!0),a(De=>new Set(De).add(Ee)))}},B=nt=>{const ht=nt.key.toLowerCase(),it=nt.target;if(it&&(it.tagName==="INPUT"||it.tagName==="SELECT"||it.tagName==="TEXTAREA"||it.isContentEditable))return;const At=cy[ht];if(At&&!et.isPianoLoading){nt.preventDefault();const{note:Rt,octave:ee}=At,Ee=`${Rt}${ee}`;Wi(Rt,ee,!0),a(De=>{const ws=new Set(De);return ws.delete(Ee),ws})}};return document.addEventListener("keydown",G),document.addEventListener("keyup",B),()=>{document.removeEventListener("keydown",G),document.removeEventListener("keyup",B)}},[et,hs,Wi,s,Ht]),y.jsxs(y.Fragment,{children:[y.jsx(cN,{isOpen:pe,onClose:()=>je(!1)}),y.jsx("div",{className:"min-h-screen bg-gray-800 text-gray-100 selection:bg-purple-500 selection:text-white",children:y.jsxs("div",{className:"container mx-auto p-2 sm:p-4 flex flex-col items-center space-y-4 sm:space-y-6",children:[y.jsxs("header",{className:"text-center my-3 sm:my-5",children:[y.jsx("h1",{className:"text-3xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500",children:"互動鋼琴工作室"}),y.jsx("p",{className:"text-gray-300 mt-2 text-xs sm:text-base",children:"自由彈奏、編曲，並透過多樣樂器與效果，打造您的專屬伴奏。"}),y.jsxs("button",{onClick:()=>je(!0),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-800",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline-block mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"使用教學"]})]}),y.jsx($2,{onNoteAttack:hs,onNoteRelease:Wi,pressedKeys:s,accompanimentActiveNotes:gt?ot:new Set}),y.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[y.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[y.jsx(tN,{currentTransposition:et.currentTransposition,onTransposeChange:et.setTransposition}),y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"主鍵盤設定 (Main Keyboard)"}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"userPianoInstrument",className:"block text-sm font-medium text-gray-300 mb-1",children:"音色 (Instrument)"}),y.jsx("select",{id:"userPianoInstrument",value:et.currentUserPianoInstrument,onChange:G=>et.setUserPianoInstrument(G.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors","aria-label":"選擇您的鋼琴音色",disabled:et.isPianoLoading,children:F2.map(G=>y.jsx("option",{value:G.value,children:G.label},G.value))}),et.isPianoLoading&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-2",children:"鋼琴音色載入中..."})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"userPianoVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量 (Volume): ",m.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"userPianoVolume",min:z2,max:B2,step:"1",value:m,onChange:G=>te(parseFloat(G.target.value)),className:"w-full h-2.5 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-400","aria-label":"調整主鍵盤音量"})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("label",{htmlFor:"showAccompanimentNotes",className:"text-sm font-medium text-gray-300",children:"顯示伴奏音符"}),y.jsx("button",{id:"showAccompanimentNotes",onClick:()=>Xt(!gt),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${gt?"bg-blue-600 hover:bg-blue-700":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":gt,children:gt?"已啟用":"已停用"})]})]}),y.jsx(nN,{onAddChord:On}),y.jsx(hN,{apiKey:Q,onApiKeyChange:Oa}),y.jsx(uN,{onGenerate:Ji,isGenerating:ut.isLoading&&ut.type==="chords",generationError:ut.type==="chords"?ut.error:null,isApiKeySet:!!Q}),y.jsx(lN,{savedProgressions:qe,onLoadProgression:hi,onDeleteProgression:us})]}),y.jsxs("div",{className:"space-y-4 sm:space-y-6 flex flex-col",children:[y.jsx(sN,{progression:o,onRemoveChord:Ts,onClearProgression:cs,onSaveProgression:ui,onReorderProgression:di,onUpdateChordInversion:$e,currentlyPlayingChordIndex:k,onStyleTransfer:zs,isGeneratingStyle:ut.isLoading&&ut.type==="style",isApiKeySet:!!Q}),y.jsx(oN,{bpm:et.currentBPM,onBpmChange:et.setAccompanimentBPM,isBeat:bt,accompanimentLayers:d,onAddAccompanimentLayer:Yr,onRemoveAccompanimentLayer:Xr,onUpdateAccompanimentLayer:Qr,isPlaying:et.isAccompanimentPlaying,onPlay:et.startAccompaniment,onStop:xt,isAudioReady:et.isAudioReady,chordProgressionEmpty:o.length===0,chordProgressionForCustomEditor:Tn,customRhythms:l,onUpdateCustomBeat:Xn,reverbLevel:ct,onReverbLevelChange:_e,delayLevel:A,onDelayLevelChange:pn,swing:rt,onSwingChange:Je,drumsEnabled:g,onDrumsEnabledChange:v,drumVolume:x,onDrumVolumeChange:Vt,drumPattern:S,onDrumPatternChange:C,customDrumData:w,onUpdateCustomDrumCell:tn,onGenerateDrumPattern:yt,drumPatternClipboard:R,onCopyDrumPattern:at,onPasteDrumPattern:Dt,generationState:ut,isApiKeySet:!!Q,bassEnabled:K,onBassEnabledChange:E,bassVolume:j,onBassVolumeChange:Zt,bassPattern:D,onBassPatternChange:F,bassInstrument:P,onBassInstrumentChange:Z})]})]}),y.jsxs("footer",{className:"text-center text-gray-500 text-xs sm:text-sm mt-6 sm:mt-8 pb-4",children:[y.jsx("p",{children:"技術支持：React, Tailwind CSS, Tone.js, Gemini API"}),y.jsxs("p",{children:["© ",new Date().getFullYear()," by hsuchen"]})]})]})})]})},df=document.getElementById("root");if(!df)throw console.error("CRITICAL: Could not find root element to mount to. HTML structure issue?"),document.body.innerHTML=`
    <div style="color: #f3f4f6; background-color: #1f2937; padding: 20px; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
      <h1>應用程式啟動錯誤 (Application Startup Error)</h1>
      <p>無法找到用於掛載應用程式的根元素 (Could not find root element to mount to).</p>
      <p>請檢查 HTML 結構 (Please check the HTML structure).</p>
    </div>`,new Error("Could not find root element to mount to");try{Qx.createRoot(df).render(y.jsx(lu.StrictMode,{children:y.jsx(_N,{})}))}catch(o){console.error("CRITICAL: Error during React rendering in main.tsx:",o),df.innerHTML=`
    <div style="color: #f3f4f6; background-color: #1f2937; padding: 20px; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
      <h1 style="color: #ef4444; font-size: 1.5rem; margin-bottom: 1rem;">應用程式啟動時發生嚴重錯誤</h1>
      <h2 style="color: #f87171; font-size: 1.2rem; margin-bottom: 0.5rem;">(A critical error occurred and the application could not start)</h2>
      <p style="margin-bottom: 1rem;">請開啟瀏覽器的開發者控制台 (通常按 F12)，查看 "Console" 分頁獲取詳細錯誤資訊。</p>
      <p style="margin-bottom: 1rem;">(Please check the browser console (usually F12) for more details in the "Console" tab.)</p>
      ${o instanceof Error?`<pre style="background-color: #374151; padding: 10px; border-radius: 5px; max-width: 80%; overflow-wrap: break-word; white-space: pre-wrap; text-align: left;">${o.name}: ${o.message}
${o.stack}</pre>`:""}
    </div>
  `}
