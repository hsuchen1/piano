import{GoogleGenAI as Ho,Type as He}from"@google/genai";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function fy(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var qd={exports:{}},Po={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Bx(){if(S0)return Po;S0=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(a,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var f in l)f!=="key"&&(u[f]=l[f])}else u=l;return l=u.ref,{$$typeof:o,type:a,key:d,ref:l!==void 0?l:null,props:u}}return Po.Fragment=t,Po.jsx=s,Po.jsxs=s,Po}var T0;function Lx(){return T0||(T0=1,qd.exports=Bx()),qd.exports}var y=Lx(),Vd={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function Ux(){if(w0)return Ft;w0=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function x(w){return w===null||typeof w!="object"?null:(w=v&&w[v]||w["@@iterator"],typeof w=="function"?w:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function D(w,H,ot){this.props=w,this.context=H,this.refs=A,this.updater=ot||T}D.prototype.isReactComponent={},D.prototype.setState=function(w,H){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,H,"setState")},D.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function C(){}C.prototype=D.prototype;function F(w,H,ot){this.props=w,this.context=H,this.refs=A,this.updater=ot||T}var M=F.prototype=new C;M.constructor=F,S(M,D.prototype),M.isPureReactComponent=!0;var K=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},q=Object.prototype.hasOwnProperty;function L(w,H,ot,dt,xt,bt){return ot=bt.ref,{$$typeof:o,type:w,key:H,ref:ot!==void 0?ot:null,props:bt}}function R(w,H){return L(w.type,H,void 0,void 0,void 0,w.props)}function W(w){return typeof w=="object"&&w!==null&&w.$$typeof===o}function Z(w){var H={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(ot){return H[ot]})}var I=/\/+/g;function G(w,H){return typeof w=="object"&&w!==null&&w.key!=null?Z(""+w.key):H.toString(36)}function nt(){}function at(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(nt,nt):(w.status="pending",w.then(function(H){w.status==="pending"&&(w.status="fulfilled",w.value=H)},function(H){w.status==="pending"&&(w.status="rejected",w.reason=H)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function gt(w,H,ot,dt,xt){var bt=typeof w;(bt==="undefined"||bt==="boolean")&&(w=null);var _t=!1;if(w===null)_t=!0;else switch(bt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(w.$$typeof){case o:case t:_t=!0;break;case g:return _t=w._init,gt(_t(w._payload),H,ot,dt,xt)}}if(_t)return xt=xt(w),_t=dt===""?"."+G(w,0):dt,K(xt)?(ot="",_t!=null&&(ot=_t.replace(I,"$&/")+"/"),gt(xt,H,ot,"",function(ee){return ee})):xt!=null&&(W(xt)&&(xt=R(xt,ot+(xt.key==null||w&&w.key===xt.key?"":(""+xt.key).replace(I,"$&/")+"/")+_t)),H.push(xt)),1;_t=0;var Zt=dt===""?".":dt+":";if(K(w))for(var ft=0;ft<w.length;ft++)dt=w[ft],bt=Zt+G(dt,ft),_t+=gt(dt,H,ot,bt,xt);else if(ft=x(w),typeof ft=="function")for(w=ft.call(w),ft=0;!(dt=w.next()).done;)dt=dt.value,bt=Zt+G(dt,ft++),_t+=gt(dt,H,ot,bt,xt);else if(bt==="object"){if(typeof w.then=="function")return gt(at(w),H,ot,dt,xt);throw H=String(w),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return _t}function O(w,H,ot){if(w==null)return w;var dt=[],xt=0;return gt(w,dt,"","",function(bt){return H.call(ot,bt,xt++)}),dt}function Q(w){if(w._status===-1){var H=w._result;H=H(),H.then(function(ot){(w._status===0||w._status===-1)&&(w._status=1,w._result=ot)},function(ot){(w._status===0||w._status===-1)&&(w._status=2,w._result=ot)}),w._status===-1&&(w._status=0,w._result=H)}if(w._status===1)return w._result.default;throw w._result}var rt=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function pt(){}return Ft.Children={map:O,forEach:function(w,H,ot){O(w,function(){H.apply(this,arguments)},ot)},count:function(w){var H=0;return O(w,function(){H++}),H},toArray:function(w){return O(w,function(H){return H})||[]},only:function(w){if(!W(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},Ft.Component=D,Ft.Fragment=s,Ft.Profiler=l,Ft.PureComponent=F,Ft.StrictMode=a,Ft.Suspense=m,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(w){return E.H.useMemoCache(w)}},Ft.cache=function(w){return function(){return w.apply(null,arguments)}},Ft.cloneElement=function(w,H,ot){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var dt=S({},w.props),xt=w.key,bt=void 0;if(H!=null)for(_t in H.ref!==void 0&&(bt=void 0),H.key!==void 0&&(xt=""+H.key),H)!q.call(H,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&H.ref===void 0||(dt[_t]=H[_t]);var _t=arguments.length-2;if(_t===1)dt.children=ot;else if(1<_t){for(var Zt=Array(_t),ft=0;ft<_t;ft++)Zt[ft]=arguments[ft+2];dt.children=Zt}return L(w.type,xt,void 0,void 0,bt,dt)},Ft.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:u,_context:w},w},Ft.createElement=function(w,H,ot){var dt,xt={},bt=null;if(H!=null)for(dt in H.key!==void 0&&(bt=""+H.key),H)q.call(H,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(xt[dt]=H[dt]);var _t=arguments.length-2;if(_t===1)xt.children=ot;else if(1<_t){for(var Zt=Array(_t),ft=0;ft<_t;ft++)Zt[ft]=arguments[ft+2];xt.children=Zt}if(w&&w.defaultProps)for(dt in _t=w.defaultProps,_t)xt[dt]===void 0&&(xt[dt]=_t[dt]);return L(w,bt,void 0,void 0,null,xt)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(w){return{$$typeof:f,render:w}},Ft.isValidElement=W,Ft.lazy=function(w){return{$$typeof:g,_payload:{_status:-1,_result:w},_init:Q}},Ft.memo=function(w,H){return{$$typeof:p,type:w,compare:H===void 0?null:H}},Ft.startTransition=function(w){var H=E.T,ot={};E.T=ot;try{var dt=w(),xt=E.S;xt!==null&&xt(ot,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(pt,rt)}catch(bt){rt(bt)}finally{E.T=H}},Ft.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ft.use=function(w){return E.H.use(w)},Ft.useActionState=function(w,H,ot){return E.H.useActionState(w,H,ot)},Ft.useCallback=function(w,H){return E.H.useCallback(w,H)},Ft.useContext=function(w){return E.H.useContext(w)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(w,H){return E.H.useDeferredValue(w,H)},Ft.useEffect=function(w,H,ot){var dt=E.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return dt.useEffect(w,H)},Ft.useId=function(){return E.H.useId()},Ft.useImperativeHandle=function(w,H,ot){return E.H.useImperativeHandle(w,H,ot)},Ft.useInsertionEffect=function(w,H){return E.H.useInsertionEffect(w,H)},Ft.useLayoutEffect=function(w,H){return E.H.useLayoutEffect(w,H)},Ft.useMemo=function(w,H){return E.H.useMemo(w,H)},Ft.useOptimistic=function(w,H){return E.H.useOptimistic(w,H)},Ft.useReducer=function(w,H,ot){return E.H.useReducer(w,H,ot)},Ft.useRef=function(w){return E.H.useRef(w)},Ft.useState=function(w){return E.H.useState(w)},Ft.useSyncExternalStore=function(w,H,ot){return E.H.useSyncExternalStore(w,H,ot)},Ft.useTransition=function(){return E.H.useTransition()},Ft.version="19.1.0",Ft}var A0;function ff(){return A0||(A0=1,Vd.exports=Ux()),Vd.exports}var Y=ff();const hu=fy(Y);var zd={exports:{}},Yo={},Bd={exports:{}},Ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function Fx(){return C0||(C0=1,function(o){function t(O,Q){var rt=O.length;O.push(Q);t:for(;0<rt;){var pt=rt-1>>>1,w=O[pt];if(0<l(w,Q))O[pt]=Q,O[rt]=w,rt=pt;else break t}}function s(O){return O.length===0?null:O[0]}function a(O){if(O.length===0)return null;var Q=O[0],rt=O.pop();if(rt!==Q){O[0]=rt;t:for(var pt=0,w=O.length,H=w>>>1;pt<H;){var ot=2*(pt+1)-1,dt=O[ot],xt=ot+1,bt=O[xt];if(0>l(dt,rt))xt<w&&0>l(bt,dt)?(O[pt]=bt,O[xt]=rt,pt=xt):(O[pt]=dt,O[ot]=rt,pt=ot);else if(xt<w&&0>l(bt,rt))O[pt]=bt,O[xt]=rt,pt=xt;else break t}}return Q}function l(O,Q){var rt=O.sortIndex-Q.sortIndex;return rt!==0?rt:O.id-Q.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();o.unstable_now=function(){return d.now()-f}}var m=[],p=[],g=1,v=null,x=3,T=!1,S=!1,A=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function K(O){for(var Q=s(p);Q!==null;){if(Q.callback===null)a(p);else if(Q.startTime<=O)a(p),Q.sortIndex=Q.expirationTime,t(m,Q);else break;Q=s(p)}}function E(O){if(A=!1,K(O),!S)if(s(m)!==null)S=!0,q||(q=!0,G());else{var Q=s(p);Q!==null&&gt(E,Q.startTime-O)}}var q=!1,L=-1,R=5,W=-1;function Z(){return D?!0:!(o.unstable_now()-W<R)}function I(){if(D=!1,q){var O=o.unstable_now();W=O;var Q=!0;try{t:{S=!1,A&&(A=!1,F(L),L=-1),T=!0;var rt=x;try{e:{for(K(O),v=s(m);v!==null&&!(v.expirationTime>O&&Z());){var pt=v.callback;if(typeof pt=="function"){v.callback=null,x=v.priorityLevel;var w=pt(v.expirationTime<=O);if(O=o.unstable_now(),typeof w=="function"){v.callback=w,K(O),Q=!0;break e}v===s(m)&&a(m),K(O)}else a(m);v=s(m)}if(v!==null)Q=!0;else{var H=s(p);H!==null&&gt(E,H.startTime-O),Q=!1}}break t}finally{v=null,x=rt,T=!1}Q=void 0}}finally{Q?G():q=!1}}}var G;if(typeof M=="function")G=function(){M(I)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,at=nt.port2;nt.port1.onmessage=I,G=function(){at.postMessage(null)}}else G=function(){C(I,0)};function gt(O,Q){L=C(function(){O(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(O){O.callback=null},o.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},o.unstable_getCurrentPriorityLevel=function(){return x},o.unstable_next=function(O){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var rt=x;x=Q;try{return O()}finally{x=rt}},o.unstable_requestPaint=function(){D=!0},o.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var rt=x;x=O;try{return Q()}finally{x=rt}},o.unstable_scheduleCallback=function(O,Q,rt){var pt=o.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?pt+rt:pt):rt=pt,O){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=rt+w,O={id:g++,callback:Q,priorityLevel:O,startTime:rt,expirationTime:w,sortIndex:-1},rt>pt?(O.sortIndex=rt,t(p,O),s(m)===null&&O===s(p)&&(A?(F(L),L=-1):A=!0,gt(E,rt-pt))):(O.sortIndex=w,t(m,O),S||T||(S=!0,q||(q=!0,G()))),O},o.unstable_shouldYield=Z,o.unstable_wrapCallback=function(O){var Q=x;return function(){var rt=x;x=Q;try{return O.apply(this,arguments)}finally{x=rt}}}}(Ld)),Ld}var N0;function Ix(){return N0||(N0=1,Bd.exports=Fx()),Bd.exports}var Ud={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function Gx(){if(E0)return gn;E0=1;var o=ff();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(m,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:m,containerInfo:p,implementation:g}}var d=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,gn.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(m,p,null,g)},gn.flushSync=function(m){var p=d.T,g=a.p;try{if(d.T=null,a.p=2,m)return m()}finally{d.T=p,a.p=g,a.d.f()}},gn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(m,p))},gn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},gn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?a.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:T}):g==="script"&&a.d.X(m,{crossOrigin:v,integrity:x,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);a.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(m)},gn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin);a.d.L(m,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gn.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=f(p.as,p.crossOrigin);a.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(m)},gn.requestFormReset=function(m){a.d.r(m)},gn.unstable_batchedUpdates=function(m,p){return m(p)},gn.useFormState=function(m,p,g){return d.H.useFormState(m,p,g)},gn.useFormStatus=function(){return d.H.useHostTransitionStatus()},gn.version="19.1.0",gn}var D0;function Hx(){if(D0)return Ud.exports;D0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Ud.exports=Gx(),Ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function Px(){if(O0)return Yo;O0=1;var o=Ix(),t=ff(),s=Hx();function a(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(a(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(a(188));return n!==e?null:e}for(var i=e,r=n;;){var c=i.return;if(c===null)break;var h=c.alternate;if(h===null){if(r=c.return,r!==null){i=r;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===i)return f(c),e;if(h===r)return f(c),n;h=h.sibling}throw Error(a(188))}if(i.return!==r.return)i=c,r=h;else{for(var _=!1,b=c.child;b;){if(b===i){_=!0,i=c,r=h;break}if(b===r){_=!0,r=c,i=h;break}b=b.sibling}if(!_){for(b=h.child;b;){if(b===i){_=!0,i=h,r=c;break}if(b===r){_=!0,r=h,i=c;break}b=b.sibling}if(!_)throw Error(a(189))}}if(i.alternate!==r)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),M=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Symbol.for("react.client.reference");function at(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case D:return"Profiler";case A:return"StrictMode";case E:return"Suspense";case q:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case M:return(e.displayName||"Context")+".Provider";case F:return(e._context.displayName||"Context")+".Consumer";case K:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:at(e.type)||"Memo";case R:n=e._payload,e=e._init;try{return at(e(n))}catch{}}return null}var gt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt={pending:!1,data:null,method:null,action:null},pt=[],w=-1;function H(e){return{current:e}}function ot(e){0>w||(e.current=pt[w],pt[w]=null,w--)}function dt(e,n){w++,pt[w]=e.current,e.current=n}var xt=H(null),bt=H(null),_t=H(null),Zt=H(null);function ft(e,n){switch(dt(_t,n),dt(bt,e),dt(xt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?W_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=W_(n),e=K_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ot(xt),dt(xt,e)}function ee(){ot(xt),ot(bt),ot(_t)}function Jt(e){e.memoizedState!==null&&dt(Zt,e);var n=xt.current,i=K_(n,e.type);n!==i&&(dt(bt,e),dt(xt,i))}function re(e){bt.current===e&&(ot(xt),ot(bt)),Zt.current===e&&(ot(Zt),Lo._currentValue=rt)}var Ae=Object.prototype.hasOwnProperty,Wn=o.unstable_scheduleCallback,yn=o.unstable_cancelCallback,yt=o.unstable_shouldYield,Ct=o.unstable_requestPaint,vt=o.unstable_now,zt=o.unstable_getCurrentPriorityLevel,Ut=o.unstable_ImmediatePriority,ne=o.unstable_UserBlockingPriority,Ne=o.unstable_NormalPriority,Qe=o.unstable_LowPriority,Ze=o.unstable_IdlePriority,Kn=o.log,ui=o.unstable_setDisableYieldValue,fn=null,je=null;function En(e){if(typeof Kn=="function"&&ui(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(fn,e)}catch{}}var Ee=Math.clz32?Math.clz32:Xr,Pr=Math.log,Yr=Math.LN2;function Xr(e){return e>>>=0,e===0?32:31-(Pr(e)/Yr|0)|0}var hi=256,di=4194304;function ds(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function fi(e,n,i){var r=e.pendingLanes;if(r===0)return 0;var c=0,h=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var b=r&134217727;return b!==0?(r=b&~h,r!==0?c=ds(r):(_&=b,_!==0?c=ds(_):i||(i=b&~e,i!==0&&(c=ds(i))))):(b=r&~h,b!==0?c=ds(b):_!==0?c=ds(_):i||(i=r&~e,i!==0&&(c=ds(i)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,i=n&-n,h>=i||h===32&&(i&4194048)!==0)?n:c}function zs(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Qr(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(){var e=hi;return hi<<=1,(hi&4194048)===0&&(hi=256),e}function mi(){var e=di;return di<<=1,(di&62914560)===0&&(di=4194304),e}function Ji(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function ws(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Zr(e,n,i,r,c,h){var _=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var b=e.entanglements,N=e.expirationTimes,U=e.hiddenUpdates;for(i=_&~i;0<i;){var J=31-Ee(i),st=1<<J;b[J]=0,N[J]=-1;var P=U[J];if(P!==null)for(U[J]=null,J=0;J<P.length;J++){var X=P[J];X!==null&&(X.lane&=-536870913)}i&=~st}r!==0&&Oa(e,r,0),h!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=h&~(_&~n))}function Oa(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var r=31-Ee(n);e.entangledLanes|=n,e.entanglements[r]=e.entanglements[r]|1073741824|i&4194090}function Ma(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var r=31-Ee(i),c=1<<r;c&n|e[r]&n&&(e[r]|=n),i&=~c}}function $i(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function it(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Dt(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:g0(e.type))}function mt(e,n){var i=Q.p;try{return Q.p=e,n()}finally{Q.p=i}}var Ot=Math.random().toString(36).slice(2),j="__reactFiber$"+Ot,z="__reactProps$"+Ot,et="__reactContainer$"+Ot,ct="__reactEvents$"+Ot,ut="__reactListeners$"+Ot,At="__reactHandles$"+Ot,Bt="__reactResources$"+Ot,se="__reactMarker$"+Ot;function me(e){delete e[j],delete e[z],delete e[ct],delete e[ut],delete e[At]}function pn(e){var n=e[j];if(n)return n;for(var i=e.parentNode;i;){if(n=i[et]||i[j]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=e0(e);e!==null;){if(i=e[j])return i;e=e0(e)}return n}e=i,i=e.parentNode}return null}function vn(e){if(e=e[j]||e[et]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Wr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(a(33))}function Ra(e){var n=e[Bt];return n||(n=e[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function We(e){e[se]=!0}var Lp=new Set,Up={};function ta(e,n){ka(e,n),ka(e+"Capture",n)}function ka(e,n){for(Up[e]=n,e=0;e<n.length;e++)Lp.add(n[e])}var Ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fp={},Ip={};function Mv(e){return Ae.call(Ip,e)?!0:Ae.call(Fp,e)?!1:Ov.test(e)?Ip[e]=!0:(Fp[e]=!0,!1)}function Rl(e,n,i){if(Mv(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function kl(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Bs(e,n,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+r)}}var Du,Gp;function ja(e){if(Du===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Du=n&&n[1]||"",Gp=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Du+e+Gp}var Ou=!1;function Mu(e,n){if(!e||Ou)return"";Ou=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(X){var P=X}Reflect.construct(e,[],st)}else{try{st.call()}catch(X){P=X}e.call(st.prototype)}}else{try{throw Error()}catch(X){P=X}(st=e())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(X){if(X&&P&&typeof X.stack=="string")return[X.stack,P.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=r.DetermineComponentFrameRoot(),_=h[0],b=h[1];if(_&&b){var N=_.split(`
`),U=b.split(`
`);for(c=r=0;r<N.length&&!N[r].includes("DetermineComponentFrameRoot");)r++;for(;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;if(r===N.length||c===U.length)for(r=N.length-1,c=U.length-1;1<=r&&0<=c&&N[r]!==U[c];)c--;for(;1<=r&&0<=c;r--,c--)if(N[r]!==U[c]){if(r!==1||c!==1)do if(r--,c--,0>c||N[r]!==U[c]){var J=`
`+N[r].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=r&&0<=c);break}}}finally{Ou=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ja(i):""}function Rv(e){switch(e.tag){case 26:case 27:case 5:return ja(e.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 15:return Mu(e.type,!1);case 11:return Mu(e.type.render,!1);case 1:return Mu(e.type,!0);case 31:return ja("Activity");default:return""}}function Hp(e){try{var n="";do n+=Rv(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Jn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pp(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function kv(e){var n=Pp(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,h=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){r=""+_,h.call(this,_)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function jl(e){e._valueTracker||(e._valueTracker=kv(e))}function Yp(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),r="";return e&&(r=Pp(e)?e.checked?"true":"false":e.value),e=r,e!==i?(n.setValue(e),!0):!1}function ql(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jv=/[\n"\\]/g;function $n(e){return e.replace(jv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ru(e,n,i,r,c,h,_,b){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Jn(n)):e.value!==""+Jn(n)&&(e.value=""+Jn(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?ku(e,_,Jn(n)):i!=null?ku(e,_,Jn(i)):r!=null&&e.removeAttribute("value"),c==null&&h!=null&&(e.defaultChecked=!!h),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Jn(b):e.removeAttribute("name")}function Xp(e,n,i,r,c,h,_,b){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),n!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;i=i!=null?""+Jn(i):"",n=n!=null?""+Jn(n):i,b||n===e.value||(e.value=n),e.defaultValue=n}r=r??c,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=b?e.checked:!!r,e.defaultChecked=!!r,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function ku(e,n,i){n==="number"&&ql(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function qa(e,n,i,r){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Jn(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,r&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Qp(e,n,i){if(n!=null&&(n=""+Jn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Jn(i):""}function Zp(e,n,i,r){if(n==null){if(r!=null){if(i!=null)throw Error(a(92));if(gt(r)){if(1<r.length)throw Error(a(93));r=r[0]}i=r}i==null&&(i=""),n=i}i=Jn(n),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r)}function Va(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var qv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wp(e,n,i){var r=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":r?e.setProperty(n,i):typeof i!="number"||i===0||qv.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Kp(e,n,i){if(n!=null&&typeof n!="object")throw Error(a(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var c in n)r=n[c],n.hasOwnProperty(c)&&i[c]!==r&&Wp(e,c,r)}else for(var h in n)n.hasOwnProperty(h)&&Wp(e,h,n[h])}function ju(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(e){return zv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var qu=null;function Vu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var za=null,Ba=null;function Jp(e){var n=vn(e);if(n&&(e=n.stateNode)){var i=e[z]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ru(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+$n(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var r=i[n];if(r!==e&&r.form===e.form){var c=r[z]||null;if(!c)throw Error(a(90));Ru(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<i.length;n++)r=i[n],r.form===e.form&&Yp(r)}break t;case"textarea":Qp(e,i.value,i.defaultValue);break t;case"select":n=i.value,n!=null&&qa(e,!!i.multiple,n,!1)}}}var zu=!1;function $p(e,n,i){if(zu)return e(n,i);zu=!0;try{var r=e(n);return r}finally{if(zu=!1,(za!==null||Ba!==null)&&(xc(),za&&(n=za,e=Ba,Ba=za=null,Jp(n),e)))for(n=0;n<e.length;n++)Jp(e[n])}}function Kr(e,n){var i=e.stateNode;if(i===null)return null;var r=i[z]||null;if(r===null)return null;i=r[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,n,typeof i));return i}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bu=!1;if(Ls)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){Bu=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{Bu=!1}var gi=null,Lu=null,zl=null;function tm(){if(zl)return zl;var e,n=Lu,i=n.length,r,c="value"in gi?gi.value:gi.textContent,h=c.length;for(e=0;e<i&&n[e]===c[e];e++);var _=i-e;for(r=1;r<=_&&n[i-r]===c[h-r];r++);return zl=c.slice(e,1<r?1-r:void 0)}function Bl(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ll(){return!0}function em(){return!1}function Dn(e){function n(i,r,c,h,_){this._reactName=i,this._targetInst=c,this.type=r,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ll:em,this.isPropagationStopped=em,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),n}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Dn(ea),$r=g({},ea,{view:0,detail:0}),Bv=Dn($r),Uu,Fu,to,Fl=g({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==to&&(to&&e.type==="mousemove"?(Uu=e.screenX-to.screenX,Fu=e.screenY-to.screenY):Fu=Uu=0,to=e),Uu)},movementY:function(e){return"movementY"in e?e.movementY:Fu}}),nm=Dn(Fl),Lv=g({},Fl,{dataTransfer:0}),Uv=Dn(Lv),Fv=g({},$r,{relatedTarget:0}),Iu=Dn(Fv),Iv=g({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Gv=Dn(Iv),Hv=g({},ea,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pv=Dn(Hv),Yv=g({},ea,{data:0}),sm=Dn(Yv),Xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Zv[e])?!!n[e]:!1}function Gu(){return Wv}var Kv=g({},$r,{key:function(e){if(e.key){var n=Xv[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jv=Dn(Kv),$v=g({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=Dn($v),tb=g({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),eb=Dn(tb),nb=g({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),sb=Dn(nb),ib=g({},Fl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ab=Dn(ib),rb=g({},ea,{newState:0,oldState:0}),ob=Dn(rb),lb=[9,13,27,32],Hu=Ls&&"CompositionEvent"in window,eo=null;Ls&&"documentMode"in document&&(eo=document.documentMode);var cb=Ls&&"TextEvent"in window&&!eo,am=Ls&&(!Hu||eo&&8<eo&&11>=eo),rm=" ",om=!1;function lm(e,n){switch(e){case"keyup":return lb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function ub(e,n){switch(e){case"compositionend":return cm(n);case"keypress":return n.which!==32?null:(om=!0,rm);case"textInput":return e=n.data,e===rm&&om?null:e;default:return null}}function hb(e,n){if(La)return e==="compositionend"||!Hu&&lm(e,n)?(e=tm(),zl=Lu=gi=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return am&&n.locale!=="ko"?null:n.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!db[e.type]:n==="textarea"}function hm(e,n,i,r){za?Ba?Ba.push(r):Ba=[r]:za=r,n=Nc(n,"onChange"),0<n.length&&(i=new Ul("onChange","change",null,i,r),e.push({event:i,listeners:n}))}var no=null,so=null;function fb(e){P_(e,0)}function Il(e){var n=Wr(e);if(Yp(n))return e}function dm(e,n){if(e==="change")return n}var fm=!1;if(Ls){var Pu;if(Ls){var Yu="oninput"in document;if(!Yu){var pm=document.createElement("div");pm.setAttribute("oninput","return;"),Yu=typeof pm.oninput=="function"}Pu=Yu}else Pu=!1;fm=Pu&&(!document.documentMode||9<document.documentMode)}function mm(){no&&(no.detachEvent("onpropertychange",gm),so=no=null)}function gm(e){if(e.propertyName==="value"&&Il(so)){var n=[];hm(n,so,e,Vu(e)),$p(fb,n)}}function pb(e,n,i){e==="focusin"?(mm(),no=n,so=i,no.attachEvent("onpropertychange",gm)):e==="focusout"&&mm()}function mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Il(so)}function gb(e,n){if(e==="click")return Il(n)}function _b(e,n){if(e==="input"||e==="change")return Il(n)}function yb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var qn=typeof Object.is=="function"?Object.is:yb;function io(e,n){if(qn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),r=Object.keys(n);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var c=i[r];if(!Ae.call(n,c)||!qn(e[c],n[c]))return!1}return!0}function _m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ym(e,n){var i=_m(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=n&&r>=n)return{node:i,offset:n-e};e=r}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=_m(i)}}function vm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?vm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function bm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ql(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=ql(e.document)}return n}function Xu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var vb=Ls&&"documentMode"in document&&11>=document.documentMode,Ua=null,Qu=null,ao=null,Zu=!1;function xm(e,n,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Zu||Ua==null||Ua!==ql(r)||(r=Ua,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ao&&io(ao,r)||(ao=r,r=Nc(Qu,"onSelect"),0<r.length&&(n=new Ul("onSelect","select",null,n,i),e.push({event:n,listeners:r}),n.target=Ua)))}function na(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Fa={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Wu={},Sm={};Ls&&(Sm=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function sa(e){if(Wu[e])return Wu[e];if(!Fa[e])return e;var n=Fa[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Sm)return Wu[e]=n[i];return e}var Tm=sa("animationend"),wm=sa("animationiteration"),Am=sa("animationstart"),bb=sa("transitionrun"),xb=sa("transitionstart"),Sb=sa("transitioncancel"),Cm=sa("transitionend"),Nm=new Map,Ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ku.push("scrollEnd");function fs(e,n){Nm.set(e,n),ta(n,[e])}var Em=new WeakMap;function ts(e,n){if(typeof e=="object"&&e!==null){var i=Em.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Hp(n)},Em.set(e,n),n)}return{value:e,source:n,stack:Hp(n)}}var es=[],Ia=0,Ju=0;function Gl(){for(var e=Ia,n=Ju=Ia=0;n<e;){var i=es[n];es[n++]=null;var r=es[n];es[n++]=null;var c=es[n];es[n++]=null;var h=es[n];if(es[n++]=null,r!==null&&c!==null){var _=r.pending;_===null?c.next=c:(c.next=_.next,_.next=c),r.pending=c}h!==0&&Dm(i,c,h)}}function Hl(e,n,i,r){es[Ia++]=e,es[Ia++]=n,es[Ia++]=i,es[Ia++]=r,Ju|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function $u(e,n,i,r){return Hl(e,n,i,r),Pl(e)}function Ga(e,n){return Hl(e,null,null,n),Pl(e)}function Dm(e,n,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var c=!1,h=e.return;h!==null;)h.childLanes|=i,r=h.alternate,r!==null&&(r.childLanes|=i),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(c=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,c&&n!==null&&(c=31-Ee(i),e=h.hiddenUpdates,r=e[c],r===null?e[c]=[n]:r.push(n),n.lane=i|536870912),h):null}function Pl(e){if(50<Mo)throw Mo=0,ad=null,Error(a(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ha={};function Tb(e,n,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,n,i,r){return new Tb(e,n,i,r)}function th(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Us(e,n){var i=e.alternate;return i===null?(i=Vn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Om(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Yl(e,n,i,r,c,h){var _=0;if(r=e,typeof e=="function")th(e)&&(_=1);else if(typeof e=="string")_=Ax(e,i,xt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case W:return e=Vn(31,i,n,c),e.elementType=W,e.lanes=h,e;case S:return ia(i.children,c,h,n);case A:_=8,c|=24;break;case D:return e=Vn(12,i,n,c|2),e.elementType=D,e.lanes=h,e;case E:return e=Vn(13,i,n,c),e.elementType=E,e.lanes=h,e;case q:return e=Vn(19,i,n,c),e.elementType=q,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:case M:_=10;break t;case F:_=9;break t;case K:_=11;break t;case L:_=14;break t;case R:_=16,r=null;break t}_=29,i=Error(a(130,e===null?"null":typeof e,"")),r=null}return n=Vn(_,i,n,c),n.elementType=e,n.type=r,n.lanes=h,n}function ia(e,n,i,r){return e=Vn(7,e,r,n),e.lanes=i,e}function eh(e,n,i){return e=Vn(6,e,null,n),e.lanes=i,e}function nh(e,n,i){return n=Vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pa=[],Ya=0,Xl=null,Ql=0,ns=[],ss=0,aa=null,Fs=1,Is="";function ra(e,n){Pa[Ya++]=Ql,Pa[Ya++]=Xl,Xl=e,Ql=n}function Mm(e,n,i){ns[ss++]=Fs,ns[ss++]=Is,ns[ss++]=aa,aa=e;var r=Fs;e=Is;var c=32-Ee(r)-1;r&=~(1<<c),i+=1;var h=32-Ee(n)+c;if(30<h){var _=c-c%5;h=(r&(1<<_)-1).toString(32),r>>=_,c-=_,Fs=1<<32-Ee(n)+c|i<<c|r,Is=h+e}else Fs=1<<h|i<<c|r,Is=e}function sh(e){e.return!==null&&(ra(e,1),Mm(e,1,0))}function ih(e){for(;e===Xl;)Xl=Pa[--Ya],Pa[Ya]=null,Ql=Pa[--Ya],Pa[Ya]=null;for(;e===aa;)aa=ns[--ss],ns[ss]=null,Is=ns[--ss],ns[ss]=null,Fs=ns[--ss],ns[ss]=null}var bn=null,De=null,te=!1,oa=null,As=!1,ah=Error(a(519));function la(e){var n=Error(a(418,""));throw lo(ts(n,e)),ah}function Rm(e){var n=e.stateNode,i=e.type,r=e.memoizedProps;switch(n[j]=e,n[z]=r,i){case"dialog":Qt("cancel",n),Qt("close",n);break;case"iframe":case"object":case"embed":Qt("load",n);break;case"video":case"audio":for(i=0;i<ko.length;i++)Qt(ko[i],n);break;case"source":Qt("error",n);break;case"img":case"image":case"link":Qt("error",n),Qt("load",n);break;case"details":Qt("toggle",n);break;case"input":Qt("invalid",n),Xp(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),jl(n);break;case"select":Qt("invalid",n);break;case"textarea":Qt("invalid",n),Zp(n,r.value,r.defaultValue,r.children),jl(n)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||r.suppressHydrationWarning===!0||Z_(n.textContent,i)?(r.popover!=null&&(Qt("beforetoggle",n),Qt("toggle",n)),r.onScroll!=null&&Qt("scroll",n),r.onScrollEnd!=null&&Qt("scrollend",n),r.onClick!=null&&(n.onclick=Ec),n=!0):n=!1,n||la(e)}function km(e){for(bn=e.return;bn;)switch(bn.tag){case 5:case 13:As=!1;return;case 27:case 3:As=!0;return;default:bn=bn.return}}function ro(e){if(e!==bn)return!1;if(!te)return km(e),te=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xd(e.type,e.memoizedProps)),i=!i),i&&De&&la(e),km(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){De=ms(e.nextSibling);break t}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}De=null}}else n===27?(n=De,Ri(e.type)?(e=Ad,Ad=null,De=e):De=n):De=bn?ms(e.stateNode.nextSibling):null;return!0}function oo(){De=bn=null,te=!1}function jm(){var e=oa;return e!==null&&(Rn===null?Rn=e:Rn.push.apply(Rn,e),oa=null),e}function lo(e){oa===null?oa=[e]:oa.push(e)}var rh=H(null),ca=null,Gs=null;function _i(e,n,i){dt(rh,n._currentValue),n._currentValue=i}function Hs(e){e._currentValue=rh.current,ot(rh)}function oh(e,n,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===i)break;e=e.return}}function lh(e,n,i,r){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){var _=c.child;h=h.firstContext;t:for(;h!==null;){var b=h;h=c;for(var N=0;N<n.length;N++)if(b.context===n[N]){h.lanes|=i,b=h.alternate,b!==null&&(b.lanes|=i),oh(h.return,i,e),r||(_=null);break t}h=b.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(a(341));_.lanes|=i,h=_.alternate,h!==null&&(h.lanes|=i),oh(_,i,e),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===e){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function co(e,n,i,r){e=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var b=c.type;qn(c.pendingProps.value,_.value)||(e!==null?e.push(b):e=[b])}}else if(c===Zt.current){if(_=c.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(Lo):e=[Lo])}c=c.return}e!==null&&lh(n,e,i,r),n.flags|=262144}function Zl(e){for(e=e.firstContext;e!==null;){if(!qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ua(e){ca=e,Gs=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return qm(ca,e)}function Wl(e,n){return ca===null&&ua(e),qm(e,n)}function qm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},Gs===null){if(e===null)throw Error(a(308));Gs=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Gs=Gs.next=n;return i}var wb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Ab=o.unstable_scheduleCallback,Cb=o.unstable_NormalPriority,Ie={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ch(){return{controller:new wb,data:new Map,refCount:0}}function uo(e){e.refCount--,e.refCount===0&&Ab(Cb,function(){e.controller.abort()})}var ho=null,uh=0,Xa=0,Qa=null;function Nb(e,n){if(ho===null){var i=ho=[];uh=0,Xa=dd(),Qa={status:"pending",value:void 0,then:function(r){i.push(r)}}}return uh++,n.then(Vm,Vm),n}function Vm(){if(--uh===0&&ho!==null){Qa!==null&&(Qa.status="fulfilled");var e=ho;ho=null,Xa=0,Qa=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Eb(e,n){var i=[],r={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){r.status="fulfilled",r.value=n;for(var c=0;c<i.length;c++)(0,i[c])(n)},function(c){for(r.status="rejected",r.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),r}var zm=O.S;O.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Nb(e,n),zm!==null&&zm(e,n)};var ha=H(null);function hh(){var e=ha.current;return e!==null?e:ge.pooledCache}function Kl(e,n){n===null?dt(ha,ha.current):dt(ha,n.pool)}function Bm(){var e=hh();return e===null?null:{parent:Ie._currentValue,pool:e}}var fo=Error(a(460)),Lm=Error(a(474)),Jl=Error(a(542)),dh={then:function(){}};function Um(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $l(){}function Fm(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then($l,$l),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Gm(e),e;default:if(typeof n.status=="string")n.then($l,$l);else{if(e=ge,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=n,e.status="pending",e.then(function(r){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=r}},function(r){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Gm(e),e}throw po=n,fo}}var po=null;function Im(){if(po===null)throw Error(a(459));var e=po;return po=null,e}function Gm(e){if(e===fo||e===Jl)throw Error(a(483))}var yi=!1;function fh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bi(e,n,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ie&2)!==0){var c=r.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),r.pending=n,n=Pl(e),Dm(e,null,i),n}return Hl(e,r,n,i),Pl(e)}function mo(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var r=n.lanes;r&=e.pendingLanes,i|=r,n.lanes=i,Ma(e,i)}}function mh(e,n){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var c=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?c=h=_:h=h.next=_,i=i.next}while(i!==null);h===null?c=h=n:h=h.next=n}else c=h=n;i={baseState:r.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var gh=!1;function go(){if(gh){var e=Qa;if(e!==null)throw e}}function _o(e,n,i,r){gh=!1;var c=e.updateQueue;yi=!1;var h=c.firstBaseUpdate,_=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var N=b,U=N.next;N.next=null,_===null?h=U:_.next=U,_=N;var J=e.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==_&&(b===null?J.firstBaseUpdate=U:b.next=U,J.lastBaseUpdate=N))}if(h!==null){var st=c.baseState;_=0,J=U=N=null,b=h;do{var P=b.lane&-536870913,X=P!==b.lane;if(X?(Wt&P)===P:(r&P)===P){P!==0&&P===Xa&&(gh=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var jt=e,Rt=b;P=n;var ce=i;switch(Rt.tag){case 1:if(jt=Rt.payload,typeof jt=="function"){st=jt.call(ce,st,P);break t}st=jt;break t;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Rt.payload,P=typeof jt=="function"?jt.call(ce,st,P):jt,P==null)break t;st=g({},st,P);break t;case 2:yi=!0}}P=b.callback,P!==null&&(e.flags|=64,X&&(e.flags|=8192),X=c.callbacks,X===null?c.callbacks=[P]:X.push(P))}else X={lane:P,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(U=J=X,N=st):J=J.next=X,_|=P;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;X=b,b=X.next,X.next=null,c.lastBaseUpdate=X,c.shared.pending=null}}while(!0);J===null&&(N=st),c.baseState=N,c.firstBaseUpdate=U,c.lastBaseUpdate=J,h===null&&(c.shared.lanes=0),Ei|=_,e.lanes=_,e.memoizedState=st}}function Hm(e,n){if(typeof e!="function")throw Error(a(191,e));e.call(n)}function Pm(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Hm(i[e],n)}var Za=H(null),tc=H(0);function Ym(e,n){e=Ks,dt(tc,e),dt(Za,n),Ks=e|n.baseLanes}function _h(){dt(tc,Ks),dt(Za,Za.current)}function yh(){Ks=tc.current,ot(Za),ot(tc)}var xi=0,Gt=null,oe=null,Le=null,ec=!1,Wa=!1,da=!1,nc=0,yo=0,Ka=null,Db=0;function qe(){throw Error(a(321))}function vh(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!qn(e[i],n[i]))return!1;return!0}function bh(e,n,i,r,c,h){return xi=h,Gt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?Dg:Og,da=!1,h=i(r,c),da=!1,Wa&&(h=Qm(n,i,r,c)),Xm(e),h}function Xm(e){O.H=lc;var n=oe!==null&&oe.next!==null;if(xi=0,Le=oe=Gt=null,ec=!1,yo=0,Ka=null,n)throw Error(a(300));e===null||Ke||(e=e.dependencies,e!==null&&Zl(e)&&(Ke=!0))}function Qm(e,n,i,r){Gt=e;var c=0;do{if(Wa&&(Ka=null),yo=0,Wa=!1,25<=c)throw Error(a(301));if(c+=1,Le=oe=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}O.H=Vb,h=n(i,r)}while(Wa);return h}function Ob(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?vo(n):n,e=e.useState()[0],(oe!==null?oe.memoizedState:null)!==e&&(Gt.flags|=1024),n}function xh(){var e=nc!==0;return nc=0,e}function Sh(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Th(e){if(ec){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ec=!1}xi=0,Le=oe=Gt=null,Wa=!1,yo=nc=0,Ka=null}function On(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?Gt.memoizedState=Le=e:Le=Le.next=e,Le}function Ue(){if(oe===null){var e=Gt.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var n=Le===null?Gt.memoizedState:Le.next;if(n!==null)Le=n,oe=e;else{if(e===null)throw Gt.alternate===null?Error(a(467)):Error(a(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},Le===null?Gt.memoizedState=Le=e:Le=Le.next=e}return Le}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(e){var n=yo;return yo+=1,Ka===null&&(Ka=[]),e=Fm(Ka,e,n),n=Gt,(Le===null?n.memoizedState:Le.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?Dg:Og),e}function sc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vo(e);if(e.$$typeof===M)return mn(e)}throw Error(a(438,String(e)))}function Ah(e){var n=null,i=Gt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var r=Gt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=wh(),Gt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),r=0;r<e;r++)i[r]=Z;return n.index++,i}function Ps(e,n){return typeof n=="function"?n(e):n}function ic(e){var n=Ue();return Ch(n,oe,e)}function Ch(e,n,i){var r=e.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=i;var c=e.baseQueue,h=r.pending;if(h!==null){if(c!==null){var _=c.next;c.next=h.next,h.next=_}n.baseQueue=c=h,r.pending=null}if(h=e.baseState,c===null)e.memoizedState=h;else{n=c.next;var b=_=null,N=null,U=n,J=!1;do{var st=U.lane&-536870913;if(st!==U.lane?(Wt&st)===st:(xi&st)===st){var P=U.revertLane;if(P===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),st===Xa&&(J=!0);else if((xi&P)===P){U=U.next,P===Xa&&(J=!0);continue}else st={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=st,_=h):N=N.next=st,Gt.lanes|=P,Ei|=P;st=U.action,da&&i(h,st),h=U.hasEagerState?U.eagerState:i(h,st)}else P={lane:st,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(b=N=P,_=h):N=N.next=P,Gt.lanes|=st,Ei|=st;U=U.next}while(U!==null&&U!==n);if(N===null?_=h:N.next=b,!qn(h,e.memoizedState)&&(Ke=!0,J&&(i=Qa,i!==null)))throw i;e.memoizedState=h,e.baseState=_,e.baseQueue=N,r.lastRenderedState=h}return c===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Nh(e){var n=Ue(),i=n.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var r=i.dispatch,c=i.pending,h=n.memoizedState;if(c!==null){i.pending=null;var _=c=c.next;do h=e(h,_.action),_=_.next;while(_!==c);qn(h,n.memoizedState)||(Ke=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),i.lastRenderedState=h}return[h,r]}function Zm(e,n,i){var r=Gt,c=Ue(),h=te;if(h){if(i===void 0)throw Error(a(407));i=i()}else i=n();var _=!qn((oe||c).memoizedState,i);_&&(c.memoizedState=i,Ke=!0),c=c.queue;var b=Jm.bind(null,r,c,e);if(bo(2048,8,b,[e]),c.getSnapshot!==n||_||Le!==null&&Le.memoizedState.tag&1){if(r.flags|=2048,Ja(9,ac(),Km.bind(null,r,c,i,n),null),ge===null)throw Error(a(349));h||(xi&124)!==0||Wm(r,n,i)}return i}function Wm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Gt.updateQueue,n===null?(n=wh(),Gt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Km(e,n,i,r){n.value=i,n.getSnapshot=r,$m(n)&&tg(e)}function Jm(e,n,i){return i(function(){$m(n)&&tg(e)})}function $m(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!qn(e,i)}catch{return!0}}function tg(e){var n=Ga(e,2);n!==null&&Fn(n,e,2)}function Eh(e){var n=On();if(typeof e=="function"){var i=e;if(e=i(),da){En(!0);try{i()}finally{En(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},n}function eg(e,n,i,r){return e.baseState=i,Ch(e,oe,typeof r=="function"?r:Ps)}function Mb(e,n,i,r,c){if(oc(e))throw Error(a(485));if(e=n.action,e!==null){var h={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};O.T!==null?i(!0):h.isTransition=!1,r(h),i=n.pending,i===null?(h.next=n.pending=h,ng(n,h)):(h.next=i.next,n.pending=i.next=h)}}function ng(e,n){var i=n.action,r=n.payload,c=e.state;if(n.isTransition){var h=O.T,_={};O.T=_;try{var b=i(c,r),N=O.S;N!==null&&N(_,b),sg(e,n,b)}catch(U){Dh(e,n,U)}finally{O.T=h}}else try{h=i(c,r),sg(e,n,h)}catch(U){Dh(e,n,U)}}function sg(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){ig(e,n,r)},function(r){return Dh(e,n,r)}):ig(e,n,i)}function ig(e,n,i){n.status="fulfilled",n.value=i,ag(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,ng(e,i)))}function Dh(e,n,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=i,ag(n),n=n.next;while(n!==r)}e.action=null}function ag(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function rg(e,n){return n}function og(e,n){if(te){var i=ge.formState;if(i!==null){t:{var r=Gt;if(te){if(De){e:{for(var c=De,h=As;c.nodeType!==8;){if(!h){c=null;break e}if(c=ms(c.nextSibling),c===null){c=null;break e}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){De=ms(c.nextSibling),r=c.data==="F!";break t}}la(r)}r=!1}r&&(n=i[0])}}return i=On(),i.memoizedState=i.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rg,lastRenderedState:n},i.queue=r,i=Cg.bind(null,Gt,r),r.dispatch=i,r=Eh(!1),h=jh.bind(null,Gt,!1,r.queue),r=On(),c={state:n,dispatch:null,action:e,pending:null},r.queue=c,i=Mb.bind(null,Gt,c,h,i),c.dispatch=i,r.memoizedState=e,[n,i,!1]}function lg(e){var n=Ue();return cg(n,oe,e)}function cg(e,n,i){if(n=Ch(e,n,rg)[0],e=ic(Ps)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=vo(n)}catch(_){throw _===fo?Jl:_}else r=n;n=Ue();var c=n.queue,h=c.dispatch;return i!==n.memoizedState&&(Gt.flags|=2048,Ja(9,ac(),Rb.bind(null,c,i),null)),[r,h,e]}function Rb(e,n){e.action=n}function ug(e){var n=Ue(),i=oe;if(i!==null)return cg(n,i,e);Ue(),n=n.memoizedState,i=Ue();var r=i.queue.dispatch;return i.memoizedState=e,[n,r,!1]}function Ja(e,n,i,r){return e={tag:e,create:i,deps:r,inst:n,next:null},n=Gt.updateQueue,n===null&&(n=wh(),Gt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,n.lastEffect=e),e}function ac(){return{destroy:void 0,resource:void 0}}function hg(){return Ue().memoizedState}function rc(e,n,i,r){var c=On();r=r===void 0?null:r,Gt.flags|=e,c.memoizedState=Ja(1|n,ac(),i,r)}function bo(e,n,i,r){var c=Ue();r=r===void 0?null:r;var h=c.memoizedState.inst;oe!==null&&r!==null&&vh(r,oe.memoizedState.deps)?c.memoizedState=Ja(n,h,i,r):(Gt.flags|=e,c.memoizedState=Ja(1|n,h,i,r))}function dg(e,n){rc(8390656,8,e,n)}function fg(e,n){bo(2048,8,e,n)}function pg(e,n){return bo(4,2,e,n)}function mg(e,n){return bo(4,4,e,n)}function gg(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function _g(e,n,i){i=i!=null?i.concat([e]):null,bo(4,4,gg.bind(null,n,e),i)}function Oh(){}function yg(e,n){var i=Ue();n=n===void 0?null:n;var r=i.memoizedState;return n!==null&&vh(n,r[1])?r[0]:(i.memoizedState=[e,n],e)}function vg(e,n){var i=Ue();n=n===void 0?null:n;var r=i.memoizedState;if(n!==null&&vh(n,r[1]))return r[0];if(r=e(),da){En(!0);try{e()}finally{En(!1)}}return i.memoizedState=[r,n],r}function Mh(e,n,i){return i===void 0||(xi&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=S_(),Gt.lanes|=e,Ei|=e,i)}function bg(e,n,i,r){return qn(i,n)?i:Za.current!==null?(e=Mh(e,i,r),qn(e,n)||(Ke=!0),e):(xi&42)===0?(Ke=!0,e.memoizedState=i):(e=S_(),Gt.lanes|=e,Ei|=e,n)}function xg(e,n,i,r,c){var h=Q.p;Q.p=h!==0&&8>h?h:8;var _=O.T,b={};O.T=b,jh(e,!1,n,i);try{var N=c(),U=O.S;if(U!==null&&U(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var J=Eb(N,r);xo(e,n,J,Un(e))}else xo(e,n,r,Un(e))}catch(st){xo(e,n,{then:function(){},status:"rejected",reason:st},Un())}finally{Q.p=h,O.T=_}}function kb(){}function Rh(e,n,i,r){if(e.tag!==5)throw Error(a(476));var c=Sg(e).queue;xg(e,c,n,rt,i===null?kb:function(){return Tg(e),i(r)})}function Sg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:rt,baseState:rt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:rt},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Tg(e){var n=Sg(e).next.queue;xo(e,n,{},Un())}function kh(){return mn(Lo)}function wg(){return Ue().memoizedState}function Ag(){return Ue().memoizedState}function jb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Un();e=vi(i);var r=bi(n,e,i);r!==null&&(Fn(r,n,i),mo(r,n,i)),n={cache:ch()},e.payload=n;return}n=n.return}}function qb(e,n,i){var r=Un();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},oc(e)?Ng(n,i):(i=$u(e,n,i,r),i!==null&&(Fn(i,e,r),Eg(i,n,r)))}function Cg(e,n,i){var r=Un();xo(e,n,i,r)}function xo(e,n,i,r){var c={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(oc(e))Ng(n,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,b=h(_,i);if(c.hasEagerState=!0,c.eagerState=b,qn(b,_))return Hl(e,n,c,0),ge===null&&Gl(),!1}catch{}finally{}if(i=$u(e,n,c,r),i!==null)return Fn(i,e,r),Eg(i,n,r),!0}return!1}function jh(e,n,i,r){if(r={lane:2,revertLane:dd(),action:r,hasEagerState:!1,eagerState:null,next:null},oc(e)){if(n)throw Error(a(479))}else n=$u(e,i,r,2),n!==null&&Fn(n,e,2)}function oc(e){var n=e.alternate;return e===Gt||n!==null&&n===Gt}function Ng(e,n){Wa=ec=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Eg(e,n,i){if((i&4194048)!==0){var r=n.lanes;r&=e.pendingLanes,i|=r,n.lanes=i,Ma(e,i)}}var lc={readContext:mn,use:sc,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe},Dg={readContext:mn,use:sc,useCallback:function(e,n){return On().memoizedState=[e,n===void 0?null:n],e},useContext:mn,useEffect:dg,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,rc(4194308,4,gg.bind(null,n,e),i)},useLayoutEffect:function(e,n){return rc(4194308,4,e,n)},useInsertionEffect:function(e,n){rc(4,2,e,n)},useMemo:function(e,n){var i=On();n=n===void 0?null:n;var r=e();if(da){En(!0);try{e()}finally{En(!1)}}return i.memoizedState=[r,n],r},useReducer:function(e,n,i){var r=On();if(i!==void 0){var c=i(n);if(da){En(!0);try{i(n)}finally{En(!1)}}}else c=n;return r.memoizedState=r.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},r.queue=e,e=e.dispatch=qb.bind(null,Gt,e),[r.memoizedState,e]},useRef:function(e){var n=On();return e={current:e},n.memoizedState=e},useState:function(e){e=Eh(e);var n=e.queue,i=Cg.bind(null,Gt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Oh,useDeferredValue:function(e,n){var i=On();return Mh(i,e,n)},useTransition:function(){var e=Eh(!1);return e=xg.bind(null,Gt,e.queue,!0,!1),On().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var r=Gt,c=On();if(te){if(i===void 0)throw Error(a(407));i=i()}else{if(i=n(),ge===null)throw Error(a(349));(Wt&124)!==0||Wm(r,n,i)}c.memoizedState=i;var h={value:i,getSnapshot:n};return c.queue=h,dg(Jm.bind(null,r,h,e),[e]),r.flags|=2048,Ja(9,ac(),Km.bind(null,r,h,i,n),null),i},useId:function(){var e=On(),n=ge.identifierPrefix;if(te){var i=Is,r=Fs;i=(r&~(1<<32-Ee(r)-1)).toString(32)+i,n="«"+n+"R"+i,i=nc++,0<i&&(n+="H"+i.toString(32)),n+="»"}else i=Db++,n="«"+n+"r"+i.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:kh,useFormState:og,useActionState:og,useOptimistic:function(e){var n=On();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=jh.bind(null,Gt,!0,i),i.dispatch=n,[e,n]},useMemoCache:Ah,useCacheRefresh:function(){return On().memoizedState=jb.bind(null,Gt)}},Og={readContext:mn,use:sc,useCallback:yg,useContext:mn,useEffect:fg,useImperativeHandle:_g,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:vg,useReducer:ic,useRef:hg,useState:function(){return ic(Ps)},useDebugValue:Oh,useDeferredValue:function(e,n){var i=Ue();return bg(i,oe.memoizedState,e,n)},useTransition:function(){var e=ic(Ps)[0],n=Ue().memoizedState;return[typeof e=="boolean"?e:vo(e),n]},useSyncExternalStore:Zm,useId:wg,useHostTransitionStatus:kh,useFormState:lg,useActionState:lg,useOptimistic:function(e,n){var i=Ue();return eg(i,oe,e,n)},useMemoCache:Ah,useCacheRefresh:Ag},Vb={readContext:mn,use:sc,useCallback:yg,useContext:mn,useEffect:fg,useImperativeHandle:_g,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:vg,useReducer:Nh,useRef:hg,useState:function(){return Nh(Ps)},useDebugValue:Oh,useDeferredValue:function(e,n){var i=Ue();return oe===null?Mh(i,e,n):bg(i,oe.memoizedState,e,n)},useTransition:function(){var e=Nh(Ps)[0],n=Ue().memoizedState;return[typeof e=="boolean"?e:vo(e),n]},useSyncExternalStore:Zm,useId:wg,useHostTransitionStatus:kh,useFormState:ug,useActionState:ug,useOptimistic:function(e,n){var i=Ue();return oe!==null?eg(i,oe,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ah,useCacheRefresh:Ag},$a=null,So=0;function cc(e){var n=So;return So+=1,$a===null&&($a=[]),Fm($a,e,n)}function To(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function uc(e,n){throw n.$$typeof===v?Error(a(525)):(e=Object.prototype.toString.call(n),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Mg(e){var n=e._init;return n(e._payload)}function Rg(e){function n(V,k){if(e){var B=V.deletions;B===null?(V.deletions=[k],V.flags|=16):B.push(k)}}function i(V,k){if(!e)return null;for(;k!==null;)n(V,k),k=k.sibling;return null}function r(V){for(var k=new Map;V!==null;)V.key!==null?k.set(V.key,V):k.set(V.index,V),V=V.sibling;return k}function c(V,k){return V=Us(V,k),V.index=0,V.sibling=null,V}function h(V,k,B){return V.index=B,e?(B=V.alternate,B!==null?(B=B.index,B<k?(V.flags|=67108866,k):B):(V.flags|=67108866,k)):(V.flags|=1048576,k)}function _(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function b(V,k,B,tt){return k===null||k.tag!==6?(k=eh(B,V.mode,tt),k.return=V,k):(k=c(k,B),k.return=V,k)}function N(V,k,B,tt){var St=B.type;return St===S?J(V,k,B.props.children,tt,B.key):k!==null&&(k.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===R&&Mg(St)===k.type)?(k=c(k,B.props),To(k,B),k.return=V,k):(k=Yl(B.type,B.key,B.props,null,V.mode,tt),To(k,B),k.return=V,k)}function U(V,k,B,tt){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=nh(B,V.mode,tt),k.return=V,k):(k=c(k,B.children||[]),k.return=V,k)}function J(V,k,B,tt,St){return k===null||k.tag!==7?(k=ia(B,V.mode,tt,St),k.return=V,k):(k=c(k,B),k.return=V,k)}function st(V,k,B){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=eh(""+k,V.mode,B),k.return=V,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return B=Yl(k.type,k.key,k.props,null,V.mode,B),To(B,k),B.return=V,B;case T:return k=nh(k,V.mode,B),k.return=V,k;case R:var tt=k._init;return k=tt(k._payload),st(V,k,B)}if(gt(k)||G(k))return k=ia(k,V.mode,B,null),k.return=V,k;if(typeof k.then=="function")return st(V,cc(k),B);if(k.$$typeof===M)return st(V,Wl(V,k),B);uc(V,k)}return null}function P(V,k,B,tt){var St=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return St!==null?null:b(V,k,""+B,tt);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return B.key===St?N(V,k,B,tt):null;case T:return B.key===St?U(V,k,B,tt):null;case R:return St=B._init,B=St(B._payload),P(V,k,B,tt)}if(gt(B)||G(B))return St!==null?null:J(V,k,B,tt,null);if(typeof B.then=="function")return P(V,k,cc(B),tt);if(B.$$typeof===M)return P(V,k,Wl(V,B),tt);uc(V,B)}return null}function X(V,k,B,tt,St){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return V=V.get(B)||null,b(k,V,""+tt,St);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case x:return V=V.get(tt.key===null?B:tt.key)||null,N(k,V,tt,St);case T:return V=V.get(tt.key===null?B:tt.key)||null,U(k,V,tt,St);case R:var Pt=tt._init;return tt=Pt(tt._payload),X(V,k,B,tt,St)}if(gt(tt)||G(tt))return V=V.get(B)||null,J(k,V,tt,St,null);if(typeof tt.then=="function")return X(V,k,B,cc(tt),St);if(tt.$$typeof===M)return X(V,k,B,Wl(k,tt),St);uc(k,tt)}return null}function jt(V,k,B,tt){for(var St=null,Pt=null,Nt=k,kt=k=0,$e=null;Nt!==null&&kt<B.length;kt++){Nt.index>kt?($e=Nt,Nt=null):$e=Nt.sibling;var $t=P(V,Nt,B[kt],tt);if($t===null){Nt===null&&(Nt=$e);break}e&&Nt&&$t.alternate===null&&n(V,Nt),k=h($t,k,kt),Pt===null?St=$t:Pt.sibling=$t,Pt=$t,Nt=$e}if(kt===B.length)return i(V,Nt),te&&ra(V,kt),St;if(Nt===null){for(;kt<B.length;kt++)Nt=st(V,B[kt],tt),Nt!==null&&(k=h(Nt,k,kt),Pt===null?St=Nt:Pt.sibling=Nt,Pt=Nt);return te&&ra(V,kt),St}for(Nt=r(Nt);kt<B.length;kt++)$e=X(Nt,V,kt,B[kt],tt),$e!==null&&(e&&$e.alternate!==null&&Nt.delete($e.key===null?kt:$e.key),k=h($e,k,kt),Pt===null?St=$e:Pt.sibling=$e,Pt=$e);return e&&Nt.forEach(function(zi){return n(V,zi)}),te&&ra(V,kt),St}function Rt(V,k,B,tt){if(B==null)throw Error(a(151));for(var St=null,Pt=null,Nt=k,kt=k=0,$e=null,$t=B.next();Nt!==null&&!$t.done;kt++,$t=B.next()){Nt.index>kt?($e=Nt,Nt=null):$e=Nt.sibling;var zi=P(V,Nt,$t.value,tt);if(zi===null){Nt===null&&(Nt=$e);break}e&&Nt&&zi.alternate===null&&n(V,Nt),k=h(zi,k,kt),Pt===null?St=zi:Pt.sibling=zi,Pt=zi,Nt=$e}if($t.done)return i(V,Nt),te&&ra(V,kt),St;if(Nt===null){for(;!$t.done;kt++,$t=B.next())$t=st(V,$t.value,tt),$t!==null&&(k=h($t,k,kt),Pt===null?St=$t:Pt.sibling=$t,Pt=$t);return te&&ra(V,kt),St}for(Nt=r(Nt);!$t.done;kt++,$t=B.next())$t=X(Nt,V,kt,$t.value,tt),$t!==null&&(e&&$t.alternate!==null&&Nt.delete($t.key===null?kt:$t.key),k=h($t,k,kt),Pt===null?St=$t:Pt.sibling=$t,Pt=$t);return e&&Nt.forEach(function(zx){return n(V,zx)}),te&&ra(V,kt),St}function ce(V,k,B,tt){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case x:t:{for(var St=B.key;k!==null;){if(k.key===St){if(St=B.type,St===S){if(k.tag===7){i(V,k.sibling),tt=c(k,B.props.children),tt.return=V,V=tt;break t}}else if(k.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===R&&Mg(St)===k.type){i(V,k.sibling),tt=c(k,B.props),To(tt,B),tt.return=V,V=tt;break t}i(V,k);break}else n(V,k);k=k.sibling}B.type===S?(tt=ia(B.props.children,V.mode,tt,B.key),tt.return=V,V=tt):(tt=Yl(B.type,B.key,B.props,null,V.mode,tt),To(tt,B),tt.return=V,V=tt)}return _(V);case T:t:{for(St=B.key;k!==null;){if(k.key===St)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){i(V,k.sibling),tt=c(k,B.children||[]),tt.return=V,V=tt;break t}else{i(V,k);break}else n(V,k);k=k.sibling}tt=nh(B,V.mode,tt),tt.return=V,V=tt}return _(V);case R:return St=B._init,B=St(B._payload),ce(V,k,B,tt)}if(gt(B))return jt(V,k,B,tt);if(G(B)){if(St=G(B),typeof St!="function")throw Error(a(150));return B=St.call(B),Rt(V,k,B,tt)}if(typeof B.then=="function")return ce(V,k,cc(B),tt);if(B.$$typeof===M)return ce(V,k,Wl(V,B),tt);uc(V,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,k!==null&&k.tag===6?(i(V,k.sibling),tt=c(k,B),tt.return=V,V=tt):(i(V,k),tt=eh(B,V.mode,tt),tt.return=V,V=tt),_(V)):i(V,k)}return function(V,k,B,tt){try{So=0;var St=ce(V,k,B,tt);return $a=null,St}catch(Nt){if(Nt===fo||Nt===Jl)throw Nt;var Pt=Vn(29,Nt,null,V.mode);return Pt.lanes=tt,Pt.return=V,Pt}finally{}}}var tr=Rg(!0),kg=Rg(!1),is=H(null),Cs=null;function Si(e){var n=e.alternate;dt(Ge,Ge.current&1),dt(is,e),Cs===null&&(n===null||Za.current!==null||n.memoizedState!==null)&&(Cs=e)}function jg(e){if(e.tag===22){if(dt(Ge,Ge.current),dt(is,e),Cs===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Cs=e)}}else Ti()}function Ti(){dt(Ge,Ge.current),dt(is,is.current)}function Ys(e){ot(is),Cs===e&&(Cs=null),ot(Ge)}var Ge=H(0);function hc(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||wd(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function qh(e,n,i,r){n=e.memoizedState,i=i(r,n),i=i==null?n:g({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Vh={enqueueSetState:function(e,n,i){e=e._reactInternals;var r=Un(),c=vi(r);c.payload=n,i!=null&&(c.callback=i),n=bi(e,c,r),n!==null&&(Fn(n,e,r),mo(n,e,r))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var r=Un(),c=vi(r);c.tag=1,c.payload=n,i!=null&&(c.callback=i),n=bi(e,c,r),n!==null&&(Fn(n,e,r),mo(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Un(),r=vi(i);r.tag=2,n!=null&&(r.callback=n),n=bi(e,r,i),n!==null&&(Fn(n,e,i),mo(n,e,i))}};function qg(e,n,i,r,c,h,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,h,_):n.prototype&&n.prototype.isPureReactComponent?!io(i,r)||!io(c,h):!0}function Vg(e,n,i,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,r),n.state!==e&&Vh.enqueueReplaceState(n,n.state,null)}function fa(e,n){var i=n;if("ref"in n){i={};for(var r in n)r!=="ref"&&(i[r]=n[r])}if(e=e.defaultProps){i===n&&(i=g({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function zg(e){dc(e)}function Bg(e){console.error(e)}function Lg(e){dc(e)}function fc(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function Ug(e,n,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function zh(e,n,i){return i=vi(i),i.tag=3,i.payload={element:null},i.callback=function(){fc(e,n)},i}function Fg(e){return e=vi(e),e.tag=3,e}function Ig(e,n,i,r){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;e.payload=function(){return c(h)},e.callback=function(){Ug(n,i,r)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Ug(n,i,r),typeof c!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var b=r.stack;this.componentDidCatch(r.value,{componentStack:b!==null?b:""})})}function zb(e,n,i,r,c){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=i.alternate,n!==null&&co(n,i,c,!0),i=is.current,i!==null){switch(i.tag){case 13:return Cs===null?od():i.alternate===null&&Oe===0&&(Oe=3),i.flags&=-257,i.flags|=65536,i.lanes=c,r===dh?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([r]):n.add(r),cd(e,r,c)),!1;case 22:return i.flags|=65536,r===dh?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([r]):i.add(r)),cd(e,r,c)),!1}throw Error(a(435,i.tag))}return cd(e,r,c),od(),!1}if(te)return n=is.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,r!==ah&&(e=Error(a(422),{cause:r}),lo(ts(e,i)))):(r!==ah&&(n=Error(a(423),{cause:r}),lo(ts(n,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,r=ts(r,i),c=zh(e.stateNode,r,c),mh(e,c),Oe!==4&&(Oe=2)),!1;var h=Error(a(520),{cause:r});if(h=ts(h,i),Oo===null?Oo=[h]:Oo.push(h),Oe!==4&&(Oe=2),n===null)return!0;r=ts(r,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=zh(i.stateNode,r,e),mh(i,e),!1;case 1:if(n=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Di===null||!Di.has(h))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Fg(c),Ig(c,e,i,r),mh(i,c),!1}i=i.return}while(i!==null);return!1}var Gg=Error(a(461)),Ke=!1;function an(e,n,i,r){n.child=e===null?kg(n,null,i,r):tr(n,e.child,i,r)}function Hg(e,n,i,r,c){i=i.render;var h=n.ref;if("ref"in r){var _={};for(var b in r)b!=="ref"&&(_[b]=r[b])}else _=r;return ua(n),r=bh(e,n,i,_,h,c),b=xh(),e!==null&&!Ke?(Sh(e,n,c),Xs(e,n,c)):(te&&b&&sh(n),n.flags|=1,an(e,n,r,c),n.child)}function Pg(e,n,i,r,c){if(e===null){var h=i.type;return typeof h=="function"&&!th(h)&&h.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=h,Yg(e,n,h,r,c)):(e=Yl(i.type,null,r,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,!Ph(e,c)){var _=h.memoizedProps;if(i=i.compare,i=i!==null?i:io,i(_,r)&&e.ref===n.ref)return Xs(e,n,c)}return n.flags|=1,e=Us(h,r),e.ref=n.ref,e.return=n,n.child=e}function Yg(e,n,i,r,c){if(e!==null){var h=e.memoizedProps;if(io(h,r)&&e.ref===n.ref)if(Ke=!1,n.pendingProps=r=h,Ph(e,c))(e.flags&131072)!==0&&(Ke=!0);else return n.lanes=e.lanes,Xs(e,n,c)}return Bh(e,n,i,r,c)}function Xg(e,n,i){var r=n.pendingProps,c=r.children,h=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((n.flags&128)!==0){if(r=h!==null?h.baseLanes|i:i,e!==null){for(c=n.child=e.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;n.childLanes=h&~r}else n.childLanes=0,n.child=null;return Qg(e,n,r,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Kl(n,h!==null?h.cachePool:null),h!==null?Ym(n,h):_h(),jg(n);else return n.lanes=n.childLanes=536870912,Qg(e,n,h!==null?h.baseLanes|i:i,i)}else h!==null?(Kl(n,h.cachePool),Ym(n,h),Ti(),n.memoizedState=null):(e!==null&&Kl(n,null),_h(),Ti());return an(e,n,c,i),n.child}function Qg(e,n,i,r){var c=hh();return c=c===null?null:{parent:Ie._currentValue,pool:c},n.memoizedState={baseLanes:i,cachePool:c},e!==null&&Kl(n,null),_h(),jg(n),e!==null&&co(e,n,r,!0),null}function pc(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Bh(e,n,i,r,c){return ua(n),i=bh(e,n,i,r,void 0,c),r=xh(),e!==null&&!Ke?(Sh(e,n,c),Xs(e,n,c)):(te&&r&&sh(n),n.flags|=1,an(e,n,i,c),n.child)}function Zg(e,n,i,r,c,h){return ua(n),n.updateQueue=null,i=Qm(n,r,i,c),Xm(e),r=xh(),e!==null&&!Ke?(Sh(e,n,h),Xs(e,n,h)):(te&&r&&sh(n),n.flags|=1,an(e,n,i,h),n.child)}function Wg(e,n,i,r,c){if(ua(n),n.stateNode===null){var h=Ha,_=i.contextType;typeof _=="object"&&_!==null&&(h=mn(_)),h=new i(r,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Vh,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=r,h.state=n.memoizedState,h.refs={},fh(n),_=i.contextType,h.context=typeof _=="object"&&_!==null?mn(_):Ha,h.state=n.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(qh(n,i,_,r),h.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&Vh.enqueueReplaceState(h,h.state,null),_o(n,r,h,c),go(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(e===null){h=n.stateNode;var b=n.memoizedProps,N=fa(i,b);h.props=N;var U=h.context,J=i.contextType;_=Ha,typeof J=="object"&&J!==null&&(_=mn(J));var st=i.getDerivedStateFromProps;J=typeof st=="function"||typeof h.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,J||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b||U!==_)&&Vg(n,h,r,_),yi=!1;var P=n.memoizedState;h.state=P,_o(n,r,h,c),go(),U=n.memoizedState,b||P!==U||yi?(typeof st=="function"&&(qh(n,i,st,r),U=n.memoizedState),(N=yi||qg(n,i,N,r,P,U,_))?(J||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=U),h.props=r,h.state=U,h.context=_,r=N):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{h=n.stateNode,ph(e,n),_=n.memoizedProps,J=fa(i,_),h.props=J,st=n.pendingProps,P=h.context,U=i.contextType,N=Ha,typeof U=="object"&&U!==null&&(N=mn(U)),b=i.getDerivedStateFromProps,(U=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==st||P!==N)&&Vg(n,h,r,N),yi=!1,P=n.memoizedState,h.state=P,_o(n,r,h,c),go();var X=n.memoizedState;_!==st||P!==X||yi||e!==null&&e.dependencies!==null&&Zl(e.dependencies)?(typeof b=="function"&&(qh(n,i,b,r),X=n.memoizedState),(J=yi||qg(n,i,J,r,P,X,N)||e!==null&&e.dependencies!==null&&Zl(e.dependencies))?(U||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,X,N),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,X,N)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=X),h.props=r,h.state=X,h.context=N,r=J):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&P===e.memoizedState||(n.flags|=1024),r=!1)}return h=r,pc(e,n),r=(n.flags&128)!==0,h||r?(h=n.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,e!==null&&r?(n.child=tr(n,e.child,null,c),n.child=tr(n,null,i,c)):an(e,n,i,c),n.memoizedState=h.state,e=n.child):e=Xs(e,n,c),e}function Kg(e,n,i,r){return oo(),n.flags|=256,an(e,n,i,r),n.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uh(e){return{baseLanes:e,cachePool:Bm()}}function Fh(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=as),e}function Jg(e,n,i){var r=n.pendingProps,c=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=e!==null&&e.memoizedState===null?!1:(Ge.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(te){if(c?Si(n):Ti(),te){var b=De,N;if(N=b){t:{for(N=b,b=As;N.nodeType!==8;){if(!b){b=null;break t}if(N=ms(N.nextSibling),N===null){b=null;break t}}b=N}b!==null?(n.memoizedState={dehydrated:b,treeContext:aa!==null?{id:Fs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},N=Vn(18,null,null,0),N.stateNode=b,N.return=n,n.child=N,bn=n,De=null,N=!0):N=!1}N||la(n)}if(b=n.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return wd(b)?n.lanes=32:n.lanes=536870912,null;Ys(n)}return b=r.children,r=r.fallback,c?(Ti(),c=n.mode,b=mc({mode:"hidden",children:b},c),r=ia(r,c,i,null),b.return=n,r.return=n,b.sibling=r,n.child=b,c=n.child,c.memoizedState=Uh(i),c.childLanes=Fh(e,_,i),n.memoizedState=Lh,r):(Si(n),Ih(n,b))}if(N=e.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(h)n.flags&256?(Si(n),n.flags&=-257,n=Gh(e,n,i)):n.memoizedState!==null?(Ti(),n.child=e.child,n.flags|=128,n=null):(Ti(),c=r.fallback,b=n.mode,r=mc({mode:"visible",children:r.children},b),c=ia(c,b,i,null),c.flags|=2,r.return=n,c.return=n,r.sibling=c,n.child=r,tr(n,e.child,null,i),r=n.child,r.memoizedState=Uh(i),r.childLanes=Fh(e,_,i),n.memoizedState=Lh,n=c);else if(Si(n),wd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var U=_.dgst;_=U,r=Error(a(419)),r.stack="",r.digest=_,lo({value:r,source:null,stack:null}),n=Gh(e,n,i)}else if(Ke||co(e,n,i,!1),_=(i&e.childLanes)!==0,Ke||_){if(_=ge,_!==null&&(r=i&-i,r=(r&42)!==0?1:$i(r),r=(r&(_.suspendedLanes|i))!==0?0:r,r!==0&&r!==N.retryLane))throw N.retryLane=r,Ga(e,r),Fn(_,e,r),Gg;b.data==="$?"||od(),n=Gh(e,n,i)}else b.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=N.treeContext,De=ms(b.nextSibling),bn=n,te=!0,oa=null,As=!1,e!==null&&(ns[ss++]=Fs,ns[ss++]=Is,ns[ss++]=aa,Fs=e.id,Is=e.overflow,aa=n),n=Ih(n,r.children),n.flags|=4096);return n}return c?(Ti(),c=r.fallback,b=n.mode,N=e.child,U=N.sibling,r=Us(N,{mode:"hidden",children:r.children}),r.subtreeFlags=N.subtreeFlags&65011712,U!==null?c=Us(U,c):(c=ia(c,b,i,null),c.flags|=2),c.return=n,r.return=n,r.sibling=c,n.child=r,r=c,c=n.child,b=e.child.memoizedState,b===null?b=Uh(i):(N=b.cachePool,N!==null?(U=Ie._currentValue,N=N.parent!==U?{parent:U,pool:U}:N):N=Bm(),b={baseLanes:b.baseLanes|i,cachePool:N}),c.memoizedState=b,c.childLanes=Fh(e,_,i),n.memoizedState=Lh,r):(Si(n),i=e.child,e=i.sibling,i=Us(i,{mode:"visible",children:r.children}),i.return=n,i.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=i,n.memoizedState=null,i)}function Ih(e,n){return n=mc({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function mc(e,n){return e=Vn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gh(e,n,i){return tr(n,e.child,null,i),e=Ih(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function $g(e,n,i){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),oh(e.return,n,i)}function Hh(e,n,i,r,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:c}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=i,h.tailMode=c)}function t_(e,n,i){var r=n.pendingProps,c=r.revealOrder,h=r.tail;if(an(e,n,r.children,i),r=Ge.current,(r&2)!==0)r=r&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$g(e,i,n);else if(e.tag===19)$g(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(dt(Ge,r),c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&hc(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Hh(n,!1,c,i,h);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&hc(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Hh(n,!0,i,null,h);break;case"together":Hh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Xs(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ei|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(co(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(a(153));if(n.child!==null){for(e=n.child,i=Us(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Us(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Ph(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Zl(e)))}function Bb(e,n,i){switch(n.tag){case 3:ft(n,n.stateNode.containerInfo),_i(n,Ie,e.memoizedState.cache),oo();break;case 27:case 5:Jt(n);break;case 4:ft(n,n.stateNode.containerInfo);break;case 10:_i(n,n.type,n.memoizedProps.value);break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?(Si(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Jg(e,n,i):(Si(n),e=Xs(e,n,i),e!==null?e.sibling:null);Si(n);break;case 19:var c=(e.flags&128)!==0;if(r=(i&n.childLanes)!==0,r||(co(e,n,i,!1),r=(i&n.childLanes)!==0),c){if(r)return t_(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),dt(Ge,Ge.current),r)break;return null;case 22:case 23:return n.lanes=0,Xg(e,n,i);case 24:_i(n,Ie,e.memoizedState.cache)}return Xs(e,n,i)}function e_(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ke=!0;else{if(!Ph(e,i)&&(n.flags&128)===0)return Ke=!1,Bb(e,n,i);Ke=(e.flags&131072)!==0}else Ke=!1,te&&(n.flags&1048576)!==0&&Mm(n,Ql,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var r=n.elementType,c=r._init;if(r=c(r._payload),n.type=r,typeof r=="function")th(r)?(e=fa(r,e),n.tag=1,n=Wg(null,n,r,e,i)):(n.tag=0,n=Bh(null,n,r,e,i));else{if(r!=null){if(c=r.$$typeof,c===K){n.tag=11,n=Hg(null,n,r,e,i);break t}else if(c===L){n.tag=14,n=Pg(null,n,r,e,i);break t}}throw n=at(r)||r,Error(a(306,n,""))}}return n;case 0:return Bh(e,n,n.type,n.pendingProps,i);case 1:return r=n.type,c=fa(r,n.pendingProps),Wg(e,n,r,c,i);case 3:t:{if(ft(n,n.stateNode.containerInfo),e===null)throw Error(a(387));r=n.pendingProps;var h=n.memoizedState;c=h.element,ph(e,n),_o(n,r,null,i);var _=n.memoizedState;if(r=_.cache,_i(n,Ie,r),r!==h.cache&&lh(n,[Ie],i,!0),go(),r=_.element,h.isDehydrated)if(h={element:r,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Kg(e,n,r,i);break t}else if(r!==c){c=ts(Error(a(424)),n),lo(c),n=Kg(e,n,r,i);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(De=ms(e.firstChild),bn=n,te=!0,oa=null,As=!0,i=kg(n,null,r,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(oo(),r===c){n=Xs(e,n,i);break t}an(e,n,r,i)}n=n.child}return n;case 26:return pc(e,n),e===null?(i=a0(n.type,null,n.pendingProps,null))?n.memoizedState=i:te||(i=n.type,e=n.pendingProps,r=Dc(_t.current).createElement(i),r[j]=n,r[z]=e,on(r,i,e),We(r),n.stateNode=r):n.memoizedState=a0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Jt(n),e===null&&te&&(r=n.stateNode=n0(n.type,n.pendingProps,_t.current),bn=n,As=!0,c=De,Ri(n.type)?(Ad=c,De=ms(r.firstChild)):De=c),an(e,n,n.pendingProps.children,i),pc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&te&&((c=r=De)&&(r=dx(r,n.type,n.pendingProps,As),r!==null?(n.stateNode=r,bn=n,De=ms(r.firstChild),As=!1,c=!0):c=!1),c||la(n)),Jt(n),c=n.type,h=n.pendingProps,_=e!==null?e.memoizedProps:null,r=h.children,xd(c,h)?r=null:_!==null&&xd(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=bh(e,n,Ob,null,null,i),Lo._currentValue=c),pc(e,n),an(e,n,r,i),n.child;case 6:return e===null&&te&&((e=i=De)&&(i=fx(i,n.pendingProps,As),i!==null?(n.stateNode=i,bn=n,De=null,e=!0):e=!1),e||la(n)),null;case 13:return Jg(e,n,i);case 4:return ft(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=tr(n,null,r,i):an(e,n,r,i),n.child;case 11:return Hg(e,n,n.type,n.pendingProps,i);case 7:return an(e,n,n.pendingProps,i),n.child;case 8:return an(e,n,n.pendingProps.children,i),n.child;case 12:return an(e,n,n.pendingProps.children,i),n.child;case 10:return r=n.pendingProps,_i(n,n.type,r.value),an(e,n,r.children,i),n.child;case 9:return c=n.type._context,r=n.pendingProps.children,ua(n),c=mn(c),r=r(c),n.flags|=1,an(e,n,r,i),n.child;case 14:return Pg(e,n,n.type,n.pendingProps,i);case 15:return Yg(e,n,n.type,n.pendingProps,i);case 19:return t_(e,n,i);case 31:return r=n.pendingProps,i=n.mode,r={mode:r.mode,children:r.children},e===null?(i=mc(r,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=Us(e.child,r),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Xg(e,n,i);case 24:return ua(n),r=mn(Ie),e===null?(c=hh(),c===null&&(c=ge,h=ch(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=i),c=h),n.memoizedState={parent:r,cache:c},fh(n),_i(n,Ie,c)):((e.lanes&i)!==0&&(ph(e,n),_o(n,null,null,i),go()),c=e.memoizedState,h=n.memoizedState,c.parent!==r?(c={parent:r,cache:r},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),_i(n,Ie,r)):(r=h.cache,_i(n,Ie,r),r!==c.cache&&lh(n,[Ie],i,!0))),an(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function Qs(e){e.flags|=4}function n_(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!u0(n)){if(n=is.current,n!==null&&((Wt&4194048)===Wt?Cs!==null:(Wt&62914560)!==Wt&&(Wt&536870912)===0||n!==Cs))throw po=dh,Lm;e.flags|=8192}}function gc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?mi():536870912,e.lanes|=n,ir|=n)}function wo(e,n){if(!te)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ce(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags&65011712,r|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,r|=c.subtreeFlags,r|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=r,e.childLanes=i,n}function Lb(e,n,i){var r=n.pendingProps;switch(ih(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(n),null;case 1:return Ce(n),null;case 3:return i=n.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Hs(Ie),ee(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ro(n)?Qs(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,jm())),Ce(n),null;case 26:return i=n.memoizedState,e===null?(Qs(n),i!==null?(Ce(n),n_(n,i)):(Ce(n),n.flags&=-16777217)):i?i!==e.memoizedState?(Qs(n),Ce(n),n_(n,i)):(Ce(n),n.flags&=-16777217):(e.memoizedProps!==r&&Qs(n),Ce(n),n.flags&=-16777217),null;case 27:re(n),i=_t.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(!r){if(n.stateNode===null)throw Error(a(166));return Ce(n),null}e=xt.current,ro(n)?Rm(n):(e=n0(c,r,i),n.stateNode=e,Qs(n))}return Ce(n),null;case 5:if(re(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(!r){if(n.stateNode===null)throw Error(a(166));return Ce(n),null}if(e=xt.current,ro(n))Rm(n);else{switch(c=Dc(_t.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?c.createElement("select",{is:r.is}):c.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?c.createElement(i,{is:r.is}):c.createElement(i)}}e[j]=n,e[z]=r;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(on(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Qs(n)}}return Ce(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==r&&Qs(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(a(166));if(e=_t.current,ro(n)){if(e=n.stateNode,i=n.memoizedProps,r=null,c=bn,c!==null)switch(c.tag){case 27:case 5:r=c.memoizedProps}e[j]=n,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||Z_(e.nodeValue,i)),e||la(n)}else e=Dc(e).createTextNode(r),e[j]=n,n.stateNode=e}return Ce(n),null;case 13:if(r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ro(n),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[j]=n}else oo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ce(n),c=!1}else c=jm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Ys(n),n):(Ys(n),null)}if(Ys(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=r!==null,e=e!==null&&e.memoizedState!==null,i){r=n.child,c=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(c=r.alternate.memoizedState.cachePool.pool);var h=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),gc(n,n.updateQueue),Ce(n),null;case 4:return ee(),e===null&&gd(n.stateNode.containerInfo),Ce(n),null;case 10:return Hs(n.type),Ce(n),null;case 19:if(ot(Ge),c=n.memoizedState,c===null)return Ce(n),null;if(r=(n.flags&128)!==0,h=c.rendering,h===null)if(r)wo(c,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(h=hc(e),h!==null){for(n.flags|=128,wo(c,!1),e=h.updateQueue,n.updateQueue=e,gc(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Om(i,e),i=i.sibling;return dt(Ge,Ge.current&1|2),n.child}e=e.sibling}c.tail!==null&&vt()>vc&&(n.flags|=128,r=!0,wo(c,!1),n.lanes=4194304)}else{if(!r)if(e=hc(h),e!==null){if(n.flags|=128,r=!0,e=e.updateQueue,n.updateQueue=e,gc(n,e),wo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!te)return Ce(n),null}else 2*vt()-c.renderingStartTime>vc&&i!==536870912&&(n.flags|=128,r=!0,wo(c,!1),n.lanes=4194304);c.isBackwards?(h.sibling=n.child,n.child=h):(e=c.last,e!==null?e.sibling=h:n.child=h,c.last=h)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=vt(),n.sibling=null,e=Ge.current,dt(Ge,r?e&1|2:e&1),n):(Ce(n),null);case 22:case 23:return Ys(n),yh(),r=n.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(i&536870912)!==0&&(n.flags&128)===0&&(Ce(n),n.subtreeFlags&6&&(n.flags|=8192)):Ce(n),i=n.updateQueue,i!==null&&gc(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==i&&(n.flags|=2048),e!==null&&ot(ha),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),Hs(Ie),Ce(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function Ub(e,n){switch(ih(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hs(Ie),ee(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return re(n),null;case 13:if(Ys(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(a(340));oo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ot(Ge),null;case 4:return ee(),null;case 10:return Hs(n.type),null;case 22:case 23:return Ys(n),yh(),e!==null&&ot(ha),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hs(Ie),null;case 25:return null;default:return null}}function s_(e,n){switch(ih(n),n.tag){case 3:Hs(Ie),ee();break;case 26:case 27:case 5:re(n);break;case 4:ee();break;case 13:Ys(n);break;case 19:ot(Ge);break;case 10:Hs(n.type);break;case 22:case 23:Ys(n),yh(),e!==null&&ot(ha);break;case 24:Hs(Ie)}}function Ao(e,n){try{var i=n.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var c=r.next;i=c;do{if((i.tag&e)===e){r=void 0;var h=i.create,_=i.inst;r=h(),_.destroy=r}i=i.next}while(i!==c)}}catch(b){he(n,n.return,b)}}function wi(e,n,i){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var h=c.next;r=h;do{if((r.tag&e)===e){var _=r.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,c=n;var N=i,U=b;try{U()}catch(J){he(c,N,J)}}}r=r.next}while(r!==h)}}catch(J){he(n,n.return,J)}}function i_(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Pm(n,i)}catch(r){he(e,e.return,r)}}}function a_(e,n,i){i.props=fa(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){he(e,n,r)}}function Co(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(c){he(e,n,c)}}function Ns(e,n){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(c){he(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){he(e,n,c)}else i.current=null}function r_(e){var n=e.type,i=e.memoizedProps,r=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break t;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(c){he(e,e.return,c)}}function Yh(e,n,i){try{var r=e.stateNode;ox(r,e.type,i,n),r[z]=n}catch(c){he(e,e.return,c)}}function o_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ri(e.type)||e.tag===4}function Xh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||o_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ri(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qh(e,n,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Ec));else if(r!==4&&(r===27&&Ri(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Qh(e,n,i),e=e.sibling;e!==null;)Qh(e,n,i),e=e.sibling}function _c(e,n,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(r!==4&&(r===27&&Ri(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(_c(e,n,i),e=e.sibling;e!==null;)_c(e,n,i),e=e.sibling}function l_(e){var n=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);on(n,r,i),n[j]=e,n[z]=i}catch(h){he(e,e.return,h)}}var Zs=!1,Ve=!1,Zh=!1,c_=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Fb(e,n){if(e=e.containerInfo,vd=qc,e=bm(e),Xu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var c=r.anchorOffset,h=r.focusNode;r=r.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break t}var _=0,b=-1,N=-1,U=0,J=0,st=e,P=null;e:for(;;){for(var X;st!==i||c!==0&&st.nodeType!==3||(b=_+c),st!==h||r!==0&&st.nodeType!==3||(N=_+r),st.nodeType===3&&(_+=st.nodeValue.length),(X=st.firstChild)!==null;)P=st,st=X;for(;;){if(st===e)break e;if(P===i&&++U===c&&(b=_),P===h&&++J===r&&(N=_),(X=st.nextSibling)!==null)break;st=P,P=st.parentNode}st=X}i=b===-1||N===-1?null:{start:b,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(bd={focusedElem:e,selectionRange:i},qc=!1,Je=n;Je!==null;)if(n=Je,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Je=e;else for(;Je!==null;){switch(n=Je,h=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,i=n,c=h.memoizedProps,h=h.memoizedState,r=i.stateNode;try{var jt=fa(i.type,c,i.elementType===i.type);e=r.getSnapshotBeforeUpdate(jt,h),r.__reactInternalSnapshotBeforeUpdate=e}catch(Rt){he(i,i.return,Rt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Td(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=n.sibling,e!==null){e.return=n.return,Je=e;break}Je=n.return}}function u_(e,n,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Ai(e,i),r&4&&Ao(5,i);break;case 1:if(Ai(e,i),r&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(_){he(i,i.return,_)}else{var c=fa(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){he(i,i.return,_)}}r&64&&i_(i),r&512&&Co(i,i.return);break;case 3:if(Ai(e,i),r&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Pm(e,n)}catch(_){he(i,i.return,_)}}break;case 27:n===null&&r&4&&l_(i);case 26:case 5:Ai(e,i),n===null&&r&4&&r_(i),r&512&&Co(i,i.return);break;case 12:Ai(e,i);break;case 13:Ai(e,i),r&4&&f_(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Wb.bind(null,i),px(e,i))));break;case 22:if(r=i.memoizedState!==null||Zs,!r){n=n!==null&&n.memoizedState!==null||Ve,c=Zs;var h=Ve;Zs=r,(Ve=n)&&!h?Ci(e,i,(i.subtreeFlags&8772)!==0):Ai(e,i),Zs=c,Ve=h}break;case 30:break;default:Ai(e,i)}}function h_(e){var n=e.alternate;n!==null&&(e.alternate=null,h_(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&me(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var be=null,Mn=!1;function Ws(e,n,i){for(i=i.child;i!==null;)d_(e,n,i),i=i.sibling}function d_(e,n,i){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(fn,i)}catch{}switch(i.tag){case 26:Ve||Ns(i,n),Ws(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ve||Ns(i,n);var r=be,c=Mn;Ri(i.type)&&(be=i.stateNode,Mn=!1),Ws(e,n,i),qo(i.stateNode),be=r,Mn=c;break;case 5:Ve||Ns(i,n);case 6:if(r=be,c=Mn,be=null,Ws(e,n,i),be=r,Mn=c,be!==null)if(Mn)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(i.stateNode)}catch(h){he(i,n,h)}else try{be.removeChild(i.stateNode)}catch(h){he(i,n,h)}break;case 18:be!==null&&(Mn?(e=be,t0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Go(e)):t0(be,i.stateNode));break;case 4:r=be,c=Mn,be=i.stateNode.containerInfo,Mn=!0,Ws(e,n,i),be=r,Mn=c;break;case 0:case 11:case 14:case 15:Ve||wi(2,i,n),Ve||wi(4,i,n),Ws(e,n,i);break;case 1:Ve||(Ns(i,n),r=i.stateNode,typeof r.componentWillUnmount=="function"&&a_(i,n,r)),Ws(e,n,i);break;case 21:Ws(e,n,i);break;case 22:Ve=(r=Ve)||i.memoizedState!==null,Ws(e,n,i),Ve=r;break;default:Ws(e,n,i)}}function f_(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Go(e)}catch(i){he(n,n.return,i)}}function Ib(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new c_),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new c_),n;default:throw Error(a(435,e.tag))}}function Wh(e,n){var i=Ib(e);n.forEach(function(r){var c=Kb.bind(null,e,r);i.has(r)||(i.add(r),r.then(c,c))})}function zn(e,n){var i=n.deletions;if(i!==null)for(var r=0;r<i.length;r++){var c=i[r],h=e,_=n,b=_;t:for(;b!==null;){switch(b.tag){case 27:if(Ri(b.type)){be=b.stateNode,Mn=!1;break t}break;case 5:be=b.stateNode,Mn=!1;break t;case 3:case 4:be=b.stateNode.containerInfo,Mn=!0;break t}b=b.return}if(be===null)throw Error(a(160));d_(h,_,c),be=null,Mn=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)p_(n,e),n=n.sibling}var ps=null;function p_(e,n){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zn(n,e),Bn(e),r&4&&(wi(3,e,e.return),Ao(3,e),wi(5,e,e.return));break;case 1:zn(n,e),Bn(e),r&512&&(Ve||i===null||Ns(i,i.return)),r&64&&Zs&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var c=ps;if(zn(n,e),Bn(e),r&512&&(Ve||i===null||Ns(i,i.return)),r&4){var h=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){t:{r=e.type,i=e.memoizedProps,c=c.ownerDocument||c;e:switch(r){case"title":h=c.getElementsByTagName("title")[0],(!h||h[se]||h[j]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(r),c.head.insertBefore(h,c.querySelector("head > title"))),on(h,r,i),h[j]=e,We(h),r=h;break t;case"link":var _=l0("link","href",c).get(r+(i.href||""));if(_){for(var b=0;b<_.length;b++)if(h=_[b],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(b,1);break e}}h=c.createElement(r),on(h,r,i),c.head.appendChild(h);break;case"meta":if(_=l0("meta","content",c).get(r+(i.content||""))){for(b=0;b<_.length;b++)if(h=_[b],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(b,1);break e}}h=c.createElement(r),on(h,r,i),c.head.appendChild(h);break;default:throw Error(a(468,r))}h[j]=e,We(h),r=h}e.stateNode=r}else c0(c,e.type,e.stateNode);else e.stateNode=o0(c,r,e.memoizedProps);else h!==r?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,r===null?c0(c,e.type,e.stateNode):o0(c,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Yh(e,e.memoizedProps,i.memoizedProps)}break;case 27:zn(n,e),Bn(e),r&512&&(Ve||i===null||Ns(i,i.return)),i!==null&&r&4&&Yh(e,e.memoizedProps,i.memoizedProps);break;case 5:if(zn(n,e),Bn(e),r&512&&(Ve||i===null||Ns(i,i.return)),e.flags&32){c=e.stateNode;try{Va(c,"")}catch(X){he(e,e.return,X)}}r&4&&e.stateNode!=null&&(c=e.memoizedProps,Yh(e,c,i!==null?i.memoizedProps:c)),r&1024&&(Zh=!0);break;case 6:if(zn(n,e),Bn(e),r&4){if(e.stateNode===null)throw Error(a(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(X){he(e,e.return,X)}}break;case 3:if(Rc=null,c=ps,ps=Oc(n.containerInfo),zn(n,e),ps=c,Bn(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Go(n.containerInfo)}catch(X){he(e,e.return,X)}Zh&&(Zh=!1,m_(e));break;case 4:r=ps,ps=Oc(e.stateNode.containerInfo),zn(n,e),Bn(e),ps=r;break;case 12:zn(n,e),Bn(e);break;case 13:zn(n,e),Bn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(nd=vt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Wh(e,r)));break;case 22:c=e.memoizedState!==null;var N=i!==null&&i.memoizedState!==null,U=Zs,J=Ve;if(Zs=U||c,Ve=J||N,zn(n,e),Ve=J,Zs=U,Bn(e),r&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(i===null||N||Zs||Ve||pa(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){N=i=n;try{if(h=N.stateNode,c)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var st=N.memoizedProps.style,P=st!=null&&st.hasOwnProperty("display")?st.display:null;b.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(X){he(N,N.return,X)}}}else if(n.tag===6){if(i===null){N=n;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(X){he(N,N.return,X)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,Wh(e,i))));break;case 19:zn(n,e),Bn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Wh(e,r)));break;case 30:break;case 21:break;default:zn(n,e),Bn(e)}}function Bn(e){var n=e.flags;if(n&2){try{for(var i,r=e.return;r!==null;){if(o_(r)){i=r;break}r=r.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var c=i.stateNode,h=Xh(e);_c(e,h,c);break;case 5:var _=i.stateNode;i.flags&32&&(Va(_,""),i.flags&=-33);var b=Xh(e);_c(e,b,_);break;case 3:case 4:var N=i.stateNode.containerInfo,U=Xh(e);Qh(e,U,N);break;default:throw Error(a(161))}}catch(J){he(e,e.return,J)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function m_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;m_(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ai(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)u_(e,n.alternate,n),n=n.sibling}function pa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:wi(4,n,n.return),pa(n);break;case 1:Ns(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&a_(n,n.return,i),pa(n);break;case 27:qo(n.stateNode);case 26:case 5:Ns(n,n.return),pa(n);break;case 22:n.memoizedState===null&&pa(n);break;case 30:pa(n);break;default:pa(n)}e=e.sibling}}function Ci(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,c=e,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:Ci(c,h,i),Ao(4,h);break;case 1:if(Ci(c,h,i),r=h,c=r.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(U){he(r,r.return,U)}if(r=h,c=r.updateQueue,c!==null){var b=r.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)Hm(N[c],b)}catch(U){he(r,r.return,U)}}i&&_&64&&i_(h),Co(h,h.return);break;case 27:l_(h);case 26:case 5:Ci(c,h,i),i&&r===null&&_&4&&r_(h),Co(h,h.return);break;case 12:Ci(c,h,i);break;case 13:Ci(c,h,i),i&&_&4&&f_(c,h);break;case 22:h.memoizedState===null&&Ci(c,h,i),Co(h,h.return);break;case 30:break;default:Ci(c,h,i)}n=n.sibling}}function Kh(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&uo(i))}function Jh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&uo(e))}function Es(e,n,i,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)g_(e,n,i,r),n=n.sibling}function g_(e,n,i,r){var c=n.flags;switch(n.tag){case 0:case 11:case 15:Es(e,n,i,r),c&2048&&Ao(9,n);break;case 1:Es(e,n,i,r);break;case 3:Es(e,n,i,r),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&uo(e)));break;case 12:if(c&2048){Es(e,n,i,r),e=n.stateNode;try{var h=n.memoizedProps,_=h.id,b=h.onPostCommit;typeof b=="function"&&b(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){he(n,n.return,N)}}else Es(e,n,i,r);break;case 13:Es(e,n,i,r);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?Es(e,n,i,r):No(e,n):h._visibility&2?Es(e,n,i,r):(h._visibility|=2,er(e,n,i,r,(n.subtreeFlags&10256)!==0)),c&2048&&Kh(_,n);break;case 24:Es(e,n,i,r),c&2048&&Jh(n.alternate,n);break;default:Es(e,n,i,r)}}function er(e,n,i,r,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=e,_=n,b=i,N=r,U=_.flags;switch(_.tag){case 0:case 11:case 15:er(h,_,b,N,c),Ao(8,_);break;case 23:break;case 22:var J=_.stateNode;_.memoizedState!==null?J._visibility&2?er(h,_,b,N,c):No(h,_):(J._visibility|=2,er(h,_,b,N,c)),c&&U&2048&&Kh(_.alternate,_);break;case 24:er(h,_,b,N,c),c&&U&2048&&Jh(_.alternate,_);break;default:er(h,_,b,N,c)}n=n.sibling}}function No(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,r=n,c=r.flags;switch(r.tag){case 22:No(i,r),c&2048&&Kh(r.alternate,r);break;case 24:No(i,r),c&2048&&Jh(r.alternate,r);break;default:No(i,r)}n=n.sibling}}var Eo=8192;function nr(e){if(e.subtreeFlags&Eo)for(e=e.child;e!==null;)__(e),e=e.sibling}function __(e){switch(e.tag){case 26:nr(e),e.flags&Eo&&e.memoizedState!==null&&Nx(ps,e.memoizedState,e.memoizedProps);break;case 5:nr(e);break;case 3:case 4:var n=ps;ps=Oc(e.stateNode.containerInfo),nr(e),ps=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Eo,Eo=16777216,nr(e),Eo=n):nr(e));break;default:nr(e)}}function y_(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Do(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];Je=r,b_(r,e)}y_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)v_(e),e=e.sibling}function v_(e){switch(e.tag){case 0:case 11:case 15:Do(e),e.flags&2048&&wi(9,e,e.return);break;case 3:Do(e);break;case 12:Do(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,yc(e)):Do(e);break;default:Do(e)}}function yc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];Je=r,b_(r,e)}y_(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:wi(8,n,n.return),yc(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,yc(n));break;default:yc(n)}e=e.sibling}}function b_(e,n){for(;Je!==null;){var i=Je;switch(i.tag){case 0:case 11:case 15:wi(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:uo(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,Je=r;else t:for(i=e;Je!==null;){r=Je;var c=r.sibling,h=r.return;if(h_(r),r===i){Je=null;break t}if(c!==null){c.return=h,Je=c;break t}Je=h}}}var Gb={getCacheForType:function(e){var n=mn(Ie),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},Hb=typeof WeakMap=="function"?WeakMap:Map,ie=0,ge=null,Xt=null,Wt=0,ae=0,Ln=null,Ni=!1,sr=!1,$h=!1,Ks=0,Oe=0,Ei=0,ma=0,td=0,as=0,ir=0,Oo=null,Rn=null,ed=!1,nd=0,vc=1/0,bc=null,Di=null,rn=0,Oi=null,ar=null,rr=0,sd=0,id=null,x_=null,Mo=0,ad=null;function Un(){if((ie&2)!==0&&Wt!==0)return Wt&-Wt;if(O.T!==null){var e=Xa;return e!==0?e:dd()}return Dt()}function S_(){as===0&&(as=(Wt&536870912)===0||te?pi():536870912);var e=is.current;return e!==null&&(e.flags|=32),as}function Fn(e,n,i){(e===ge&&(ae===2||ae===9)||e.cancelPendingCommit!==null)&&(or(e,0),Mi(e,Wt,as,!1)),ws(e,i),((ie&2)===0||e!==ge)&&(e===ge&&((ie&2)===0&&(ma|=i),Oe===4&&Mi(e,Wt,as,!1)),Ds(e))}function T_(e,n,i){if((ie&6)!==0)throw Error(a(327));var r=!i&&(n&124)===0&&(n&e.expiredLanes)===0||zs(e,n),c=r?Xb(e,n):ld(e,n,!0),h=r;do{if(c===0){sr&&!r&&Mi(e,n,0,!1);break}else{if(i=e.current.alternate,h&&!Pb(i)){c=ld(e,n,!1),h=!1;continue}if(c===2){if(h=n,e.errorRecoveryDisabledLanes&h)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var b=e;c=Oo;var N=b.current.memoizedState.isDehydrated;if(N&&(or(b,_).flags|=256),_=ld(b,_,!1),_!==2){if($h&&!N){b.errorRecoveryDisabledLanes|=h,ma|=h,c=4;break t}h=Rn,Rn=c,h!==null&&(Rn===null?Rn=h:Rn.push.apply(Rn,h))}c=_}if(h=!1,c!==2)continue}}if(c===1){or(e,0),Mi(e,n,0,!0);break}t:{switch(r=e,h=c,h){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Mi(r,n,as,!Ni);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=nd+300-vt(),10<c)){if(Mi(r,n,as,!Ni),fi(r,0,!0)!==0)break t;r.timeoutHandle=J_(w_.bind(null,r,i,Rn,bc,ed,n,as,ma,ir,Ni,h,2,-0,0),c);break t}w_(r,i,Rn,bc,ed,n,as,ma,ir,Ni,h,0,-0,0)}}break}while(!0);Ds(e)}function w_(e,n,i,r,c,h,_,b,N,U,J,st,P,X){if(e.timeoutHandle=-1,st=n.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(Bo={stylesheets:null,count:0,unsuspend:Cx},__(n),st=Ex(),st!==null)){e.cancelPendingCommit=st(M_.bind(null,e,n,h,i,r,c,_,b,N,J,1,P,X)),Mi(e,h,_,!U);return}M_(e,n,h,i,r,c,_,b,N)}function Pb(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var c=i[r],h=c.getSnapshot;c=c.value;try{if(!qn(h(),c))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Mi(e,n,i,r){n&=~td,n&=~ma,e.suspendedLanes|=n,e.pingedLanes&=~n,r&&(e.warmLanes|=n),r=e.expirationTimes;for(var c=n;0<c;){var h=31-Ee(c),_=1<<h;r[h]=-1,c&=~_}i!==0&&Oa(e,i,n)}function xc(){return(ie&6)===0?(Ro(0),!1):!0}function rd(){if(Xt!==null){if(ae===0)var e=Xt.return;else e=Xt,Gs=ca=null,Th(e),$a=null,So=0,e=Xt;for(;e!==null;)s_(e.alternate,e),e=e.return;Xt=null}}function or(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,cx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),rd(),ge=e,Xt=i=Us(e.current,null),Wt=n,ae=0,Ln=null,Ni=!1,sr=zs(e,n),$h=!1,ir=as=td=ma=Ei=Oe=0,Rn=Oo=null,ed=!1,(n&8)!==0&&(n|=n&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=n;0<r;){var c=31-Ee(r),h=1<<c;n|=e[c],r&=~h}return Ks=n,Gl(),i}function A_(e,n){Gt=null,O.H=lc,n===fo||n===Jl?(n=Im(),ae=3):n===Lm?(n=Im(),ae=4):ae=n===Gg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,Xt===null&&(Oe=1,fc(e,ts(n,e.current)))}function C_(){var e=O.H;return O.H=lc,e===null?lc:e}function N_(){var e=O.A;return O.A=Gb,e}function od(){Oe=4,Ni||(Wt&4194048)!==Wt&&is.current!==null||(sr=!0),(Ei&134217727)===0&&(ma&134217727)===0||ge===null||Mi(ge,Wt,as,!1)}function ld(e,n,i){var r=ie;ie|=2;var c=C_(),h=N_();(ge!==e||Wt!==n)&&(bc=null,or(e,n)),n=!1;var _=Oe;t:do try{if(ae!==0&&Xt!==null){var b=Xt,N=Ln;switch(ae){case 8:rd(),_=6;break t;case 3:case 2:case 9:case 6:is.current===null&&(n=!0);var U=ae;if(ae=0,Ln=null,lr(e,b,N,U),i&&sr){_=0;break t}break;default:U=ae,ae=0,Ln=null,lr(e,b,N,U)}}Yb(),_=Oe;break}catch(J){A_(e,J)}while(!0);return n&&e.shellSuspendCounter++,Gs=ca=null,ie=r,O.H=c,O.A=h,Xt===null&&(ge=null,Wt=0,Gl()),_}function Yb(){for(;Xt!==null;)E_(Xt)}function Xb(e,n){var i=ie;ie|=2;var r=C_(),c=N_();ge!==e||Wt!==n?(bc=null,vc=vt()+500,or(e,n)):sr=zs(e,n);t:do try{if(ae!==0&&Xt!==null){n=Xt;var h=Ln;e:switch(ae){case 1:ae=0,Ln=null,lr(e,n,h,1);break;case 2:case 9:if(Um(h)){ae=0,Ln=null,D_(n);break}n=function(){ae!==2&&ae!==9||ge!==e||(ae=7),Ds(e)},h.then(n,n);break t;case 3:ae=7;break t;case 4:ae=5;break t;case 7:Um(h)?(ae=0,Ln=null,D_(n)):(ae=0,Ln=null,lr(e,n,h,7));break;case 5:var _=null;switch(Xt.tag){case 26:_=Xt.memoizedState;case 5:case 27:var b=Xt;if(!_||u0(_)){ae=0,Ln=null;var N=b.sibling;if(N!==null)Xt=N;else{var U=b.return;U!==null?(Xt=U,Sc(U)):Xt=null}break e}}ae=0,Ln=null,lr(e,n,h,5);break;case 6:ae=0,Ln=null,lr(e,n,h,6);break;case 8:rd(),Oe=6;break t;default:throw Error(a(462))}}Qb();break}catch(J){A_(e,J)}while(!0);return Gs=ca=null,O.H=r,O.A=c,ie=i,Xt!==null?0:(ge=null,Wt=0,Gl(),Oe)}function Qb(){for(;Xt!==null&&!yt();)E_(Xt)}function E_(e){var n=e_(e.alternate,e,Ks);e.memoizedProps=e.pendingProps,n===null?Sc(e):Xt=n}function D_(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Zg(i,n,n.pendingProps,n.type,void 0,Wt);break;case 11:n=Zg(i,n,n.pendingProps,n.type.render,n.ref,Wt);break;case 5:Th(n);default:s_(i,n),n=Xt=Om(n,Ks),n=e_(i,n,Ks)}e.memoizedProps=e.pendingProps,n===null?Sc(e):Xt=n}function lr(e,n,i,r){Gs=ca=null,Th(n),$a=null,So=0;var c=n.return;try{if(zb(e,c,n,i,Wt)){Oe=1,fc(e,ts(i,e.current)),Xt=null;return}}catch(h){if(c!==null)throw Xt=c,h;Oe=1,fc(e,ts(i,e.current)),Xt=null;return}n.flags&32768?(te||r===1?e=!0:sr||(Wt&536870912)!==0?e=!1:(Ni=e=!0,(r===2||r===9||r===3||r===6)&&(r=is.current,r!==null&&r.tag===13&&(r.flags|=16384))),O_(n,e)):Sc(n)}function Sc(e){var n=e;do{if((n.flags&32768)!==0){O_(n,Ni);return}e=n.return;var i=Lb(n.alternate,n,Ks);if(i!==null){Xt=i;return}if(n=n.sibling,n!==null){Xt=n;return}Xt=n=e}while(n!==null);Oe===0&&(Oe=5)}function O_(e,n){do{var i=Ub(e.alternate,e);if(i!==null){i.flags&=32767,Xt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Xt=e;return}Xt=e=i}while(e!==null);Oe=6,Xt=null}function M_(e,n,i,r,c,h,_,b,N){e.cancelPendingCommit=null;do Tc();while(rn!==0);if((ie&6)!==0)throw Error(a(327));if(n!==null){if(n===e.current)throw Error(a(177));if(h=n.lanes|n.childLanes,h|=Ju,Zr(e,i,h,_,b,N),e===ge&&(Xt=ge=null,Wt=0),ar=n,Oi=e,rr=i,sd=h,id=c,x_=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Jb(Ne,function(){return V_(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=O.T,O.T=null,c=Q.p,Q.p=2,_=ie,ie|=4;try{Fb(e,n,i)}finally{ie=_,Q.p=c,O.T=r}}rn=1,R_(),k_(),j_()}}function R_(){if(rn===1){rn=0;var e=Oi,n=ar,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var r=Q.p;Q.p=2;var c=ie;ie|=4;try{p_(n,e);var h=bd,_=bm(e.containerInfo),b=h.focusedElem,N=h.selectionRange;if(_!==b&&b&&b.ownerDocument&&vm(b.ownerDocument.documentElement,b)){if(N!==null&&Xu(b)){var U=N.start,J=N.end;if(J===void 0&&(J=U),"selectionStart"in b)b.selectionStart=U,b.selectionEnd=Math.min(J,b.value.length);else{var st=b.ownerDocument||document,P=st&&st.defaultView||window;if(P.getSelection){var X=P.getSelection(),jt=b.textContent.length,Rt=Math.min(N.start,jt),ce=N.end===void 0?Rt:Math.min(N.end,jt);!X.extend&&Rt>ce&&(_=ce,ce=Rt,Rt=_);var V=ym(b,Rt),k=ym(b,ce);if(V&&k&&(X.rangeCount!==1||X.anchorNode!==V.node||X.anchorOffset!==V.offset||X.focusNode!==k.node||X.focusOffset!==k.offset)){var B=st.createRange();B.setStart(V.node,V.offset),X.removeAllRanges(),Rt>ce?(X.addRange(B),X.extend(k.node,k.offset)):(B.setEnd(k.node,k.offset),X.addRange(B))}}}}for(st=[],X=b;X=X.parentNode;)X.nodeType===1&&st.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<st.length;b++){var tt=st[b];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}qc=!!vd,bd=vd=null}finally{ie=c,Q.p=r,O.T=i}}e.current=n,rn=2}}function k_(){if(rn===2){rn=0;var e=Oi,n=ar,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var r=Q.p;Q.p=2;var c=ie;ie|=4;try{u_(e,n.alternate,n)}finally{ie=c,Q.p=r,O.T=i}}rn=3}}function j_(){if(rn===4||rn===3){rn=0,Ct();var e=Oi,n=ar,i=rr,r=x_;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?rn=5:(rn=0,ar=Oi=null,q_(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Di=null),it(i),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(fn,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=O.T,c=Q.p,Q.p=2,O.T=null;try{for(var h=e.onRecoverableError,_=0;_<r.length;_++){var b=r[_];h(b.value,{componentStack:b.stack})}}finally{O.T=n,Q.p=c}}(rr&3)!==0&&Tc(),Ds(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===ad?Mo++:(Mo=0,ad=e):Mo=0,Ro(0)}}function q_(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,uo(n)))}function Tc(e){return R_(),k_(),j_(),V_()}function V_(){if(rn!==5)return!1;var e=Oi,n=sd;sd=0;var i=it(rr),r=O.T,c=Q.p;try{Q.p=32>i?32:i,O.T=null,i=id,id=null;var h=Oi,_=rr;if(rn=0,ar=Oi=null,rr=0,(ie&6)!==0)throw Error(a(331));var b=ie;if(ie|=4,v_(h.current),g_(h,h.current,_,i),ie=b,Ro(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(fn,h)}catch{}return!0}finally{Q.p=c,O.T=r,q_(e,n)}}function z_(e,n,i){n=ts(i,n),n=zh(e.stateNode,n,2),e=bi(e,n,2),e!==null&&(ws(e,2),Ds(e))}function he(e,n,i){if(e.tag===3)z_(e,e,i);else for(;n!==null;){if(n.tag===3){z_(n,e,i);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Di===null||!Di.has(r))){e=ts(i,e),i=Fg(2),r=bi(n,i,2),r!==null&&(Ig(i,r,n,e),ws(r,2),Ds(r));break}}n=n.return}}function cd(e,n,i){var r=e.pingCache;if(r===null){r=e.pingCache=new Hb;var c=new Set;r.set(n,c)}else c=r.get(n),c===void 0&&(c=new Set,r.set(n,c));c.has(i)||($h=!0,c.add(i),e=Zb.bind(null,e,n,i),n.then(e,e))}function Zb(e,n,i){var r=e.pingCache;r!==null&&r.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ge===e&&(Wt&i)===i&&(Oe===4||Oe===3&&(Wt&62914560)===Wt&&300>vt()-nd?(ie&2)===0&&or(e,0):td|=i,ir===Wt&&(ir=0)),Ds(e)}function B_(e,n){n===0&&(n=mi()),e=Ga(e,n),e!==null&&(ws(e,n),Ds(e))}function Wb(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),B_(e,i)}function Kb(e,n){var i=0;switch(e.tag){case 13:var r=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(n),B_(e,i)}function Jb(e,n){return Wn(e,n)}var wc=null,cr=null,ud=!1,Ac=!1,hd=!1,ga=0;function Ds(e){e!==cr&&e.next===null&&(cr===null?wc=cr=e:cr=cr.next=e),Ac=!0,ud||(ud=!0,tx())}function Ro(e,n){if(!hd&&Ac){hd=!0;do for(var i=!1,r=wc;r!==null;){if(e!==0){var c=r.pendingLanes;if(c===0)var h=0;else{var _=r.suspendedLanes,b=r.pingedLanes;h=(1<<31-Ee(42|e)+1)-1,h&=c&~(_&~b),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,I_(r,h))}else h=Wt,h=fi(r,r===ge?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(h&3)===0||zs(r,h)||(i=!0,I_(r,h));r=r.next}while(i);hd=!1}}function $b(){L_()}function L_(){Ac=ud=!1;var e=0;ga!==0&&(lx()&&(e=ga),ga=0);for(var n=vt(),i=null,r=wc;r!==null;){var c=r.next,h=U_(r,n);h===0?(r.next=null,i===null?wc=c:i.next=c,c===null&&(cr=i)):(i=r,(e!==0||(h&3)!==0)&&(Ac=!0)),r=c}Ro(e)}function U_(e,n){for(var i=e.suspendedLanes,r=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var _=31-Ee(h),b=1<<_,N=c[_];N===-1?((b&i)===0||(b&r)!==0)&&(c[_]=Qr(b,n)):N<=n&&(e.expiredLanes|=b),h&=~b}if(n=ge,i=Wt,i=fi(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===n&&(ae===2||ae===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&yn(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||zs(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(r!==null&&yn(r),it(i)){case 2:case 8:i=ne;break;case 32:i=Ne;break;case 268435456:i=Ze;break;default:i=Ne}return r=F_.bind(null,e),i=Wn(i,r),e.callbackPriority=n,e.callbackNode=i,n}return r!==null&&r!==null&&yn(r),e.callbackPriority=2,e.callbackNode=null,2}function F_(e,n){if(rn!==0&&rn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Tc()&&e.callbackNode!==i)return null;var r=Wt;return r=fi(e,e===ge?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(T_(e,r,n),U_(e,vt()),e.callbackNode!=null&&e.callbackNode===i?F_.bind(null,e):null)}function I_(e,n){if(Tc())return null;T_(e,n,!0)}function tx(){ux(function(){(ie&6)!==0?Wn(Ut,$b):L_()})}function dd(){return ga===0&&(ga=pi()),ga}function G_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vl(""+e)}function H_(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function ex(e,n,i,r,c){if(n==="submit"&&i&&i.stateNode===c){var h=G_((c[z]||null).action),_=r.submitter;_&&(n=(n=_[z]||null)?G_(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var b=new Ul("action","action",null,r,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ga!==0){var N=_?H_(c,_):new FormData(c);Rh(i,{pending:!0,data:N,method:c.method,action:h},null,N)}}else typeof h=="function"&&(b.preventDefault(),N=_?H_(c,_):new FormData(c),Rh(i,{pending:!0,data:N,method:c.method,action:h},h,N))},currentTarget:c}]})}}for(var fd=0;fd<Ku.length;fd++){var pd=Ku[fd],nx=pd.toLowerCase(),sx=pd[0].toUpperCase()+pd.slice(1);fs(nx,"on"+sx)}fs(Tm,"onAnimationEnd"),fs(wm,"onAnimationIteration"),fs(Am,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(bb,"onTransitionRun"),fs(xb,"onTransitionStart"),fs(Sb,"onTransitionCancel"),fs(Cm,"onTransitionEnd"),ka("onMouseEnter",["mouseout","mouseover"]),ka("onMouseLeave",["mouseout","mouseover"]),ka("onPointerEnter",["pointerout","pointerover"]),ka("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ko));function P_(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],c=r.event;r=r.listeners;t:{var h=void 0;if(n)for(var _=r.length-1;0<=_;_--){var b=r[_],N=b.instance,U=b.currentTarget;if(b=b.listener,N!==h&&c.isPropagationStopped())break t;h=b,c.currentTarget=U;try{h(c)}catch(J){dc(J)}c.currentTarget=null,h=N}else for(_=0;_<r.length;_++){if(b=r[_],N=b.instance,U=b.currentTarget,b=b.listener,N!==h&&c.isPropagationStopped())break t;h=b,c.currentTarget=U;try{h(c)}catch(J){dc(J)}c.currentTarget=null,h=N}}}}function Qt(e,n){var i=n[ct];i===void 0&&(i=n[ct]=new Set);var r=e+"__bubble";i.has(r)||(Y_(n,e,2,!1),i.add(r))}function md(e,n,i){var r=0;n&&(r|=4),Y_(i,e,r,n)}var Cc="_reactListening"+Math.random().toString(36).slice(2);function gd(e){if(!e[Cc]){e[Cc]=!0,Lp.forEach(function(i){i!=="selectionchange"&&(ix.has(i)||md(i,!1,e),md(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Cc]||(n[Cc]=!0,md("selectionchange",!1,n))}}function Y_(e,n,i,r){switch(g0(n)){case 2:var c=Mx;break;case 8:c=Rx;break;default:c=Od}i=c.bind(null,n,i,e),c=void 0,!Bu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),r?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function _d(e,n,i,r,c){var h=r;if((n&1)===0&&(n&2)===0&&r!==null)t:for(;;){if(r===null)return;var _=r.tag;if(_===3||_===4){var b=r.stateNode.containerInfo;if(b===c)break;if(_===4)for(_=r.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;b!==null;){if(_=pn(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){r=h=_;continue t}b=b.parentNode}}r=r.return}$p(function(){var U=h,J=Vu(i),st=[];t:{var P=Nm.get(e);if(P!==void 0){var X=Ul,jt=e;switch(e){case"keypress":if(Bl(i)===0)break t;case"keydown":case"keyup":X=Jv;break;case"focusin":jt="focus",X=Iu;break;case"focusout":jt="blur",X=Iu;break;case"beforeblur":case"afterblur":X=Iu;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Uv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=eb;break;case Tm:case wm:case Am:X=Gv;break;case Cm:X=sb;break;case"scroll":case"scrollend":X=Bv;break;case"wheel":X=ab;break;case"copy":case"cut":case"paste":X=Pv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=im;break;case"toggle":case"beforetoggle":X=ob}var Rt=(n&4)!==0,ce=!Rt&&(e==="scroll"||e==="scrollend"),V=Rt?P!==null?P+"Capture":null:P;Rt=[];for(var k=U,B;k!==null;){var tt=k;if(B=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||B===null||V===null||(tt=Kr(k,V),tt!=null&&Rt.push(jo(k,tt,B))),ce)break;k=k.return}0<Rt.length&&(P=new X(P,jt,null,i,J),st.push({event:P,listeners:Rt}))}}if((n&7)===0){t:{if(P=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",P&&i!==qu&&(jt=i.relatedTarget||i.fromElement)&&(pn(jt)||jt[et]))break t;if((X||P)&&(P=J.window===J?J:(P=J.ownerDocument)?P.defaultView||P.parentWindow:window,X?(jt=i.relatedTarget||i.toElement,X=U,jt=jt?pn(jt):null,jt!==null&&(ce=u(jt),Rt=jt.tag,jt!==ce||Rt!==5&&Rt!==27&&Rt!==6)&&(jt=null)):(X=null,jt=U),X!==jt)){if(Rt=nm,tt="onMouseLeave",V="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(Rt=im,tt="onPointerLeave",V="onPointerEnter",k="pointer"),ce=X==null?P:Wr(X),B=jt==null?P:Wr(jt),P=new Rt(tt,k+"leave",X,i,J),P.target=ce,P.relatedTarget=B,tt=null,pn(J)===U&&(Rt=new Rt(V,k+"enter",jt,i,J),Rt.target=B,Rt.relatedTarget=ce,tt=Rt),ce=tt,X&&jt)e:{for(Rt=X,V=jt,k=0,B=Rt;B;B=ur(B))k++;for(B=0,tt=V;tt;tt=ur(tt))B++;for(;0<k-B;)Rt=ur(Rt),k--;for(;0<B-k;)V=ur(V),B--;for(;k--;){if(Rt===V||V!==null&&Rt===V.alternate)break e;Rt=ur(Rt),V=ur(V)}Rt=null}else Rt=null;X!==null&&X_(st,P,X,Rt,!1),jt!==null&&ce!==null&&X_(st,ce,jt,Rt,!0)}}t:{if(P=U?Wr(U):window,X=P.nodeName&&P.nodeName.toLowerCase(),X==="select"||X==="input"&&P.type==="file")var St=dm;else if(um(P))if(fm)St=_b;else{St=mb;var Pt=pb}else X=P.nodeName,!X||X.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?U&&ju(U.elementType)&&(St=dm):St=gb;if(St&&(St=St(e,U))){hm(st,St,i,J);break t}Pt&&Pt(e,P,U),e==="focusout"&&U&&P.type==="number"&&U.memoizedProps.value!=null&&ku(P,"number",P.value)}switch(Pt=U?Wr(U):window,e){case"focusin":(um(Pt)||Pt.contentEditable==="true")&&(Ua=Pt,Qu=U,ao=null);break;case"focusout":ao=Qu=Ua=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,xm(st,i,J);break;case"selectionchange":if(vb)break;case"keydown":case"keyup":xm(st,i,J)}var Nt;if(Hu)t:{switch(e){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else La?lm(e,i)&&(kt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(kt="onCompositionStart");kt&&(am&&i.locale!=="ko"&&(La||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&La&&(Nt=tm()):(gi=J,Lu="value"in gi?gi.value:gi.textContent,La=!0)),Pt=Nc(U,kt),0<Pt.length&&(kt=new sm(kt,e,null,i,J),st.push({event:kt,listeners:Pt}),Nt?kt.data=Nt:(Nt=cm(i),Nt!==null&&(kt.data=Nt)))),(Nt=cb?ub(e,i):hb(e,i))&&(kt=Nc(U,"onBeforeInput"),0<kt.length&&(Pt=new sm("onBeforeInput","beforeinput",null,i,J),st.push({event:Pt,listeners:kt}),Pt.data=Nt)),ex(st,e,U,i,J)}P_(st,n)})}function jo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Nc(e,n){for(var i=n+"Capture",r=[];e!==null;){var c=e,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Kr(e,i),c!=null&&r.unshift(jo(e,c,h)),c=Kr(e,n),c!=null&&r.push(jo(e,c,h))),e.tag===3)return r;e=e.return}return[]}function ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function X_(e,n,i,r,c){for(var h=n._reactName,_=[];i!==null&&i!==r;){var b=i,N=b.alternate,U=b.stateNode;if(b=b.tag,N!==null&&N===r)break;b!==5&&b!==26&&b!==27||U===null||(N=U,c?(U=Kr(i,h),U!=null&&_.unshift(jo(i,U,N))):c||(U=Kr(i,h),U!=null&&_.push(jo(i,U,N)))),i=i.return}_.length!==0&&e.push({event:n,listeners:_})}var ax=/\r\n?/g,rx=/\u0000|\uFFFD/g;function Q_(e){return(typeof e=="string"?e:""+e).replace(ax,`
`).replace(rx,"")}function Z_(e,n){return n=Q_(n),Q_(e)===n}function Ec(){}function le(e,n,i,r,c,h){switch(i){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||Va(e,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&Va(e,""+r);break;case"className":kl(e,"class",r);break;case"tabIndex":kl(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(e,i,r);break;case"style":Kp(e,r,h);break;case"data":if(n!=="object"){kl(e,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=Vl(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(n!=="input"&&le(e,n,"name",c.name,c,null),le(e,n,"formEncType",c.formEncType,c,null),le(e,n,"formMethod",c.formMethod,c,null),le(e,n,"formTarget",c.formTarget,c,null)):(le(e,n,"encType",c.encType,c,null),le(e,n,"method",c.method,c,null),le(e,n,"target",c.target,c,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=Vl(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=Ec);break;case"onScroll":r!=null&&Qt("scroll",e);break;case"onScrollEnd":r!=null&&Qt("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=Vl(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":Qt("beforetoggle",e),Qt("toggle",e),Rl(e,"popover",r);break;case"xlinkActuate":Bs(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Bs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Bs(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Bs(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Bs(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Bs(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Bs(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Rl(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Vv.get(i)||i,Rl(e,i,r))}}function yd(e,n,i,r,c,h){switch(i){case"style":Kp(e,r,h);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(i=r.__html,i!=null){if(c.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof r=="string"?Va(e,r):(typeof r=="number"||typeof r=="bigint")&&Va(e,""+r);break;case"onScroll":r!=null&&Qt("scroll",e);break;case"onScrollEnd":r!=null&&Qt("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Ec);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Up.hasOwnProperty(i))t:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),n=i.slice(2,c?i.length-7:void 0),h=e[z]||null,h=h!=null?h[i]:null,typeof h=="function"&&e.removeEventListener(n,h,c),typeof r=="function")){typeof h!="function"&&h!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,r,c);break t}i in e?e[i]=r:r===!0?e.setAttribute(i,""):Rl(e,i,r)}}}function on(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qt("error",e),Qt("load",e);var r=!1,c=!1,h;for(h in i)if(i.hasOwnProperty(h)){var _=i[h];if(_!=null)switch(h){case"src":r=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:le(e,n,h,_,i,null)}}c&&le(e,n,"srcSet",i.srcSet,i,null),r&&le(e,n,"src",i.src,i,null);return;case"input":Qt("invalid",e);var b=h=_=c=null,N=null,U=null;for(r in i)if(i.hasOwnProperty(r)){var J=i[r];if(J!=null)switch(r){case"name":c=J;break;case"type":_=J;break;case"checked":N=J;break;case"defaultChecked":U=J;break;case"value":h=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,n));break;default:le(e,n,r,J,i,null)}}Xp(e,h,b,N,U,_,c,!1),jl(e);return;case"select":Qt("invalid",e),r=_=h=null;for(c in i)if(i.hasOwnProperty(c)&&(b=i[c],b!=null))switch(c){case"value":h=b;break;case"defaultValue":_=b;break;case"multiple":r=b;default:le(e,n,c,b,i,null)}n=h,i=_,e.multiple=!!r,n!=null?qa(e,!!r,n,!1):i!=null&&qa(e,!!r,i,!0);return;case"textarea":Qt("invalid",e),h=c=r=null;for(_ in i)if(i.hasOwnProperty(_)&&(b=i[_],b!=null))switch(_){case"value":r=b;break;case"defaultValue":c=b;break;case"children":h=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:le(e,n,_,b,i,null)}Zp(e,r,c,h),jl(e);return;case"option":for(N in i)if(i.hasOwnProperty(N)&&(r=i[N],r!=null))switch(N){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:le(e,n,N,r,i,null)}return;case"dialog":Qt("beforetoggle",e),Qt("toggle",e),Qt("cancel",e),Qt("close",e);break;case"iframe":case"object":Qt("load",e);break;case"video":case"audio":for(r=0;r<ko.length;r++)Qt(ko[r],e);break;case"image":Qt("error",e),Qt("load",e);break;case"details":Qt("toggle",e);break;case"embed":case"source":case"link":Qt("error",e),Qt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(r=i[U],r!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:le(e,n,U,r,i,null)}return;default:if(ju(n)){for(J in i)i.hasOwnProperty(J)&&(r=i[J],r!==void 0&&yd(e,n,J,r,i,void 0));return}}for(b in i)i.hasOwnProperty(b)&&(r=i[b],r!=null&&le(e,n,b,r,i,null))}function ox(e,n,i,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,_=null,b=null,N=null,U=null,J=null;for(X in i){var st=i[X];if(i.hasOwnProperty(X)&&st!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=st;default:r.hasOwnProperty(X)||le(e,n,X,null,r,st)}}for(var P in r){var X=r[P];if(st=i[P],r.hasOwnProperty(P)&&(X!=null||st!=null))switch(P){case"type":h=X;break;case"name":c=X;break;case"checked":U=X;break;case"defaultChecked":J=X;break;case"value":_=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:X!==st&&le(e,n,P,X,r,st)}}Ru(e,_,b,N,U,J,h,c);return;case"select":X=_=b=P=null;for(h in i)if(N=i[h],i.hasOwnProperty(h)&&N!=null)switch(h){case"value":break;case"multiple":X=N;default:r.hasOwnProperty(h)||le(e,n,h,null,r,N)}for(c in r)if(h=r[c],N=i[c],r.hasOwnProperty(c)&&(h!=null||N!=null))switch(c){case"value":P=h;break;case"defaultValue":b=h;break;case"multiple":_=h;default:h!==N&&le(e,n,c,h,r,N)}n=b,i=_,r=X,P!=null?qa(e,!!i,P,!1):!!r!=!!i&&(n!=null?qa(e,!!i,n,!0):qa(e,!!i,i?[]:"",!1));return;case"textarea":X=P=null;for(b in i)if(c=i[b],i.hasOwnProperty(b)&&c!=null&&!r.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:le(e,n,b,null,r,c)}for(_ in r)if(c=r[_],h=i[_],r.hasOwnProperty(_)&&(c!=null||h!=null))switch(_){case"value":P=c;break;case"defaultValue":X=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==h&&le(e,n,_,c,r,h)}Qp(e,P,X);return;case"option":for(var jt in i)if(P=i[jt],i.hasOwnProperty(jt)&&P!=null&&!r.hasOwnProperty(jt))switch(jt){case"selected":e.selected=!1;break;default:le(e,n,jt,null,r,P)}for(N in r)if(P=r[N],X=i[N],r.hasOwnProperty(N)&&P!==X&&(P!=null||X!=null))switch(N){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:le(e,n,N,P,r,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in i)P=i[Rt],i.hasOwnProperty(Rt)&&P!=null&&!r.hasOwnProperty(Rt)&&le(e,n,Rt,null,r,P);for(U in r)if(P=r[U],X=i[U],r.hasOwnProperty(U)&&P!==X&&(P!=null||X!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(137,n));break;default:le(e,n,U,P,r,X)}return;default:if(ju(n)){for(var ce in i)P=i[ce],i.hasOwnProperty(ce)&&P!==void 0&&!r.hasOwnProperty(ce)&&yd(e,n,ce,void 0,r,P);for(J in r)P=r[J],X=i[J],!r.hasOwnProperty(J)||P===X||P===void 0&&X===void 0||yd(e,n,J,P,r,X);return}}for(var V in i)P=i[V],i.hasOwnProperty(V)&&P!=null&&!r.hasOwnProperty(V)&&le(e,n,V,null,r,P);for(st in r)P=r[st],X=i[st],!r.hasOwnProperty(st)||P===X||P==null&&X==null||le(e,n,st,P,r,X)}var vd=null,bd=null;function Dc(e){return e.nodeType===9?e:e.ownerDocument}function W_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function K_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function xd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Sd=null;function lx(){var e=window.event;return e&&e.type==="popstate"?e===Sd?!1:(Sd=e,!0):(Sd=null,!1)}var J_=typeof setTimeout=="function"?setTimeout:void 0,cx=typeof clearTimeout=="function"?clearTimeout:void 0,$_=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof $_<"u"?function(e){return $_.resolve(null).then(e).catch(hx)}:J_;function hx(e){setTimeout(function(){throw e})}function Ri(e){return e==="head"}function t0(e,n){var i=n,r=0,c=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(0<r&&8>r){i=r;var _=e.ownerDocument;if(i&1&&qo(_.documentElement),i&2&&qo(_.body),i&4)for(i=_.head,qo(i),_=i.firstChild;_;){var b=_.nextSibling,N=_.nodeName;_[se]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||i.removeChild(_),_=b}}if(c===0){e.removeChild(h),Go(n);return}c--}else i==="$"||i==="$?"||i==="$!"?c++:r=i.charCodeAt(0)-48;else r=0;i=h}while(i);Go(n)}function Td(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Td(i),me(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function dx(e,n,i,r){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[se])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=ms(e.nextSibling),e===null)break}return null}function fx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ms(e.nextSibling),e===null))return null;return e}function wd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function px(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var r=function(){n(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function ms(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Ad=null;function e0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function n0(e,n,i){switch(n=Dc(i),e){case"html":if(e=n.documentElement,!e)throw Error(a(452));return e;case"head":if(e=n.head,!e)throw Error(a(453));return e;case"body":if(e=n.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function qo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);me(e)}var rs=new Map,s0=new Set;function Oc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Js=Q.d;Q.d={f:mx,r:gx,D:_x,C:yx,L:vx,m:bx,X:Sx,S:xx,M:Tx};function mx(){var e=Js.f(),n=xc();return e||n}function gx(e){var n=vn(e);n!==null&&n.tag===5&&n.type==="form"?Tg(n):Js.r(e)}var hr=typeof document>"u"?null:document;function i0(e,n,i){var r=hr;if(r&&typeof n=="string"&&n){var c=$n(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),s0.has(c)||(s0.add(c),e={rel:e,crossOrigin:i,href:n},r.querySelector(c)===null&&(n=r.createElement("link"),on(n,"link",e),We(n),r.head.appendChild(n)))}}function _x(e){Js.D(e),i0("dns-prefetch",e,null)}function yx(e,n){Js.C(e,n),i0("preconnect",e,n)}function vx(e,n,i){Js.L(e,n,i);var r=hr;if(r&&e&&n){var c='link[rel="preload"][as="'+$n(n)+'"]';n==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+$n(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+$n(i.imageSizes)+'"]')):c+='[href="'+$n(e)+'"]';var h=c;switch(n){case"style":h=dr(e);break;case"script":h=fr(e)}rs.has(h)||(e=g({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),rs.set(h,e),r.querySelector(c)!==null||n==="style"&&r.querySelector(Vo(h))||n==="script"&&r.querySelector(zo(h))||(n=r.createElement("link"),on(n,"link",e),We(n),r.head.appendChild(n)))}}function bx(e,n){Js.m(e,n);var i=hr;if(i&&e){var r=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+$n(r)+'"][href="'+$n(e)+'"]',h=c;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=fr(e)}if(!rs.has(h)&&(e=g({rel:"modulepreload",href:e},n),rs.set(h,e),i.querySelector(c)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zo(h)))return}r=i.createElement("link"),on(r,"link",e),We(r),i.head.appendChild(r)}}}function xx(e,n,i){Js.S(e,n,i);var r=hr;if(r&&e){var c=Ra(r).hoistableStyles,h=dr(e);n=n||"default";var _=c.get(h);if(!_){var b={loading:0,preload:null};if(_=r.querySelector(Vo(h)))b.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":n},i),(i=rs.get(h))&&Cd(e,i);var N=_=r.createElement("link");We(N),on(N,"link",e),N._p=new Promise(function(U,J){N.onload=U,N.onerror=J}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Mc(_,n,r)}_={type:"stylesheet",instance:_,count:1,state:b},c.set(h,_)}}}function Sx(e,n){Js.X(e,n);var i=hr;if(i&&e){var r=Ra(i).hoistableScripts,c=fr(e),h=r.get(c);h||(h=i.querySelector(zo(c)),h||(e=g({src:e,async:!0},n),(n=rs.get(c))&&Nd(e,n),h=i.createElement("script"),We(h),on(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function Tx(e,n){Js.M(e,n);var i=hr;if(i&&e){var r=Ra(i).hoistableScripts,c=fr(e),h=r.get(c);h||(h=i.querySelector(zo(c)),h||(e=g({src:e,async:!0,type:"module"},n),(n=rs.get(c))&&Nd(e,n),h=i.createElement("script"),We(h),on(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},r.set(c,h))}}function a0(e,n,i,r){var c=(c=_t.current)?Oc(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=dr(i.href),i=Ra(c).hoistableStyles,r=i.get(n),r||(r={type:"style",instance:null,count:0,state:null},i.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=dr(i.href);var h=Ra(c).hoistableStyles,_=h.get(e);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,_),(h=c.querySelector(Vo(e)))&&!h._p&&(_.instance=h,_.state.loading=5),rs.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},rs.set(e,i),h||wx(c,e,i,_.state))),n&&r===null)throw Error(a(528,""));return _}if(n&&r!==null)throw Error(a(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=fr(i),i=Ra(c).hoistableScripts,r=i.get(n),r||(r={type:"script",instance:null,count:0,state:null},i.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function dr(e){return'href="'+$n(e)+'"'}function Vo(e){return'link[rel="stylesheet"]['+e+"]"}function r0(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function wx(e,n,i,r){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=e.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),on(n,"link",i),We(n),e.head.appendChild(n))}function fr(e){return'[src="'+$n(e)+'"]'}function zo(e){return"script[async]"+e}function o0(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var r=e.querySelector('style[data-href~="'+$n(i.href)+'"]');if(r)return n.instance=r,We(r),r;var c=g({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),We(r),on(r,"style",c),Mc(r,i.precedence,e),n.instance=r;case"stylesheet":c=dr(i.href);var h=e.querySelector(Vo(c));if(h)return n.state.loading|=4,n.instance=h,We(h),h;r=r0(i),(c=rs.get(c))&&Cd(r,c),h=(e.ownerDocument||e).createElement("link"),We(h);var _=h;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),on(h,"link",r),n.state.loading|=4,Mc(h,i.precedence,e),n.instance=h;case"script":return h=fr(i.src),(c=e.querySelector(zo(h)))?(n.instance=c,We(c),c):(r=i,(c=rs.get(h))&&(r=g({},i),Nd(r,c)),e=e.ownerDocument||e,c=e.createElement("script"),We(c),on(c,"link",r),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,Mc(r,i.precedence,e));return n.instance}function Mc(e,n,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=r.length?r[r.length-1]:null,h=c,_=0;_<r.length;_++){var b=r[_];if(b.dataset.precedence===n)h=b;else if(h!==c)break}h?h.parentNode.insertBefore(e,h.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Cd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Nd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Rc=null;function l0(e,n,i){if(Rc===null){var r=new Map,c=Rc=new Map;c.set(i,r)}else c=Rc,r=c.get(i),r||(r=new Map,c.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var h=i[c];if(!(h[se]||h[j]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=e+_;var b=r.get(_);b?b.push(h):r.set(_,[h])}}return r}function c0(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Ax(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function u0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Bo=null;function Cx(){}function Nx(e,n,i){if(Bo===null)throw Error(a(475));var r=Bo;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=dr(i.href),h=e.querySelector(Vo(c));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=kc.bind(r),e.then(r,r)),n.state.loading|=4,n.instance=h,We(h);return}h=e.ownerDocument||e,i=r0(i),(c=rs.get(c))&&Cd(i,c),h=h.createElement("link"),We(h);var _=h;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),on(h,"link",i),n.instance=h}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(r.count++,n=kc.bind(r),e.addEventListener("load",n),e.addEventListener("error",n))}}function Ex(){if(Bo===null)throw Error(a(475));var e=Bo;return e.stylesheets&&e.count===0&&Ed(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&Ed(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function kc(){if(this.count--,this.count===0){if(this.stylesheets)Ed(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jc=null;function Ed(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jc=new Map,n.forEach(Dx,e),jc=null,kc.call(e))}function Dx(e,n){if(!(n.state.loading&4)){var i=jc.get(e);if(i)var r=i.get(null);else{i=new Map,jc.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var _=c[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),r=_)}r&&i.set(null,r)}c=n.instance,_=c.getAttribute("data-precedence"),h=i.get(_)||r,h===r&&i.set(null,c),i.set(_,c),this.count++,r=kc.bind(this),c.addEventListener("load",r),c.addEventListener("error",r),h?h.parentNode.insertBefore(c,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var Lo={$$typeof:M,Provider:null,Consumer:null,_currentValue:rt,_currentValue2:rt,_threadCount:0};function Ox(e,n,i,r,c,h,_,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=r,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function h0(e,n,i,r,c,h,_,b,N,U,J,st){return e=new Ox(e,n,i,_,b,N,U,st),n=1,h===!0&&(n|=24),h=Vn(3,null,null,n),e.current=h,h.stateNode=e,n=ch(),n.refCount++,e.pooledCache=n,n.refCount++,h.memoizedState={element:r,isDehydrated:i,cache:n},fh(h),e}function d0(e){return e?(e=Ha,e):Ha}function f0(e,n,i,r,c,h){c=d0(c),r.context===null?r.context=c:r.pendingContext=c,r=vi(n),r.payload={element:i},h=h===void 0?null:h,h!==null&&(r.callback=h),i=bi(e,r,n),i!==null&&(Fn(i,e,n),mo(i,e,n))}function p0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Dd(e,n){p0(e,n),(e=e.alternate)&&p0(e,n)}function m0(e){if(e.tag===13){var n=Ga(e,67108864);n!==null&&Fn(n,e,67108864),Dd(e,67108864)}}var qc=!0;function Mx(e,n,i,r){var c=O.T;O.T=null;var h=Q.p;try{Q.p=2,Od(e,n,i,r)}finally{Q.p=h,O.T=c}}function Rx(e,n,i,r){var c=O.T;O.T=null;var h=Q.p;try{Q.p=8,Od(e,n,i,r)}finally{Q.p=h,O.T=c}}function Od(e,n,i,r){if(qc){var c=Md(r);if(c===null)_d(e,n,r,Vc,i),_0(e,r);else if(jx(c,e,n,i,r))r.stopPropagation();else if(_0(e,r),n&4&&-1<kx.indexOf(e)){for(;c!==null;){var h=vn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=ds(h.pendingLanes);if(_!==0){var b=h;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-Ee(_);b.entanglements[1]|=N,_&=~N}Ds(h),(ie&6)===0&&(vc=vt()+500,Ro(0))}}break;case 13:b=Ga(h,2),b!==null&&Fn(b,h,2),xc(),Dd(h,2)}if(h=Md(r),h===null&&_d(e,n,r,Vc,i),h===c)break;c=h}c!==null&&r.stopPropagation()}else _d(e,n,r,null,i)}}function Md(e){return e=Vu(e),Rd(e)}var Vc=null;function Rd(e){if(Vc=null,e=pn(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Vc=e,null}function g0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Ut:return 2;case ne:return 8;case Ne:case Qe:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var kd=!1,ki=null,ji=null,qi=null,Uo=new Map,Fo=new Map,Vi=[],kx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(e,n){switch(e){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Uo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(n.pointerId)}}function Io(e,n,i,r,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:i,eventSystemFlags:r,nativeEvent:h,targetContainers:[c]},n!==null&&(n=vn(n),n!==null&&m0(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function jx(e,n,i,r,c){switch(n){case"focusin":return ki=Io(ki,e,n,i,r,c),!0;case"dragenter":return ji=Io(ji,e,n,i,r,c),!0;case"mouseover":return qi=Io(qi,e,n,i,r,c),!0;case"pointerover":var h=c.pointerId;return Uo.set(h,Io(Uo.get(h)||null,e,n,i,r,c)),!0;case"gotpointercapture":return h=c.pointerId,Fo.set(h,Io(Fo.get(h)||null,e,n,i,r,c)),!0}return!1}function y0(e){var n=pn(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,mt(e.priority,function(){if(i.tag===13){var r=Un();r=$i(r);var c=Ga(i,r);c!==null&&Fn(c,i,r),Dd(i,r)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=Md(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);qu=r,i.target.dispatchEvent(r),qu=null}else return n=vn(i),n!==null&&m0(n),e.blockedOn=i,!1;n.shift()}return!0}function v0(e,n,i){zc(e)&&i.delete(n)}function qx(){kd=!1,ki!==null&&zc(ki)&&(ki=null),ji!==null&&zc(ji)&&(ji=null),qi!==null&&zc(qi)&&(qi=null),Uo.forEach(v0),Fo.forEach(v0)}function Bc(e,n){e.blockedOn===n&&(e.blockedOn=null,kd||(kd=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,qx)))}var Lc=null;function b0(e){Lc!==e&&(Lc=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Lc===e&&(Lc=null);for(var n=0;n<e.length;n+=3){var i=e[n],r=e[n+1],c=e[n+2];if(typeof r!="function"){if(Rd(r||i)===null)continue;break}var h=vn(i);h!==null&&(e.splice(n,3),n-=3,Rh(h,{pending:!0,data:c,method:i.method,action:r},r,c))}}))}function Go(e){function n(N){return Bc(N,e)}ki!==null&&Bc(ki,e),ji!==null&&Bc(ji,e),qi!==null&&Bc(qi,e),Uo.forEach(n),Fo.forEach(n);for(var i=0;i<Vi.length;i++){var r=Vi[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Vi.length&&(i=Vi[0],i.blockedOn===null);)y0(i),i.blockedOn===null&&Vi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var c=i[r],h=i[r+1],_=c[z]||null;if(typeof h=="function")_||b0(i);else if(_){var b=null;if(h&&h.hasAttribute("formAction")){if(c=h,_=h[z]||null)b=_.formAction;else if(Rd(c)!==null)continue}else b=_.action;typeof b=="function"?i[r+1]=b:(i.splice(r,3),r-=3),b0(i)}}}function jd(e){this._internalRoot=e}Uc.prototype.render=jd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(a(409));var i=n.current,r=Un();f0(i,r,e,n,null,null)},Uc.prototype.unmount=jd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;f0(e.current,2,null,e,null,null),xc(),n[et]=null}};function Uc(e){this._internalRoot=e}Uc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Dt();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Vi.length&&n!==0&&n<Vi[i].priority;i++);Vi.splice(i,0,e),i===0&&y0(e)}};var x0=t.version;if(x0!=="19.1.0")throw Error(a(527,x0,"19.1.0"));Q.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=m(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Vx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{fn=Fc.inject(Vx),je=Fc}catch{}}return Yo.createRoot=function(e,n){if(!l(e))throw Error(a(299));var i=!1,r="",c=zg,h=Bg,_=Lg,b=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(b=n.unstable_transitionCallbacks)),n=h0(e,1,!1,null,null,i,r,c,h,_,b,null),e[et]=n.current,gd(e),new jd(n)},Yo.hydrateRoot=function(e,n,i){if(!l(e))throw Error(a(299));var r=!1,c="",h=zg,_=Bg,b=Lg,N=null,U=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks),i.formState!==void 0&&(U=i.formState)),n=h0(e,1,!0,n,i??null,r,c,h,_,b,N,U),n.context=d0(null),i=n.current,r=Un(),r=$i(r),c=vi(r),c.callback=null,bi(i,c,r),i=r,n.current.lanes=i,ws(n,i),Ds(n),e[et]=n.current,gd(e),new Uc(n)},Yo.version="19.1.0",Yo}var M0;function Yx(){if(M0)return zd.exports;M0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),zd.exports=Px(),zd.exports}var Xx=Yx();const Qx=fy(Xx);var Lt=(o=>(o.Major="Maj",o.Minor="min",o.Dominant7th="7",o.Minor7th="m7",o.Major7th="Maj7",o.Diminished7th="dim7",o.Minor7thFlat5="m7b5",o.Suspended2="sus2",o.Suspended4="sus4",o.Major9="Maj9",o.Minor9="m9",o.Dominant9="9",o.Major6="6",o.Minor6="m6",o.Augmented="aug",o.PowerChord="5",o.Dominant7sharp9="7#9",o.Dominant7flat9="7b9",o))(Lt||{}),en=(o=>(o.AcousticPiano="AcousticPiano",o.SynthPiano="SynthPiano",o.MellowSynth="MellowSynth",o.Synth="Synth",o.FMSynth="FM Synth",o.AMSynth="AM Synth",o.SampledGuitar="SampledGuitar",o.StringEnsemble="StringEnsemble",o))(en||{}),de=(o=>(o.ClassicGrand="ClassicGrand",o.BrightUpright="BrightUpright",o.ElectricPiano="ElectricPiano",o.SimpleSynth="SimpleSynth",o.SampledGrand="SampledGrand",o.SampledGuitar="SampledGuitar",o.StringEnsemble="StringEnsemble",o))(de||{}),os=(o=>(o.PerMeasure="PerMeasure",o.PerTwoBeats="PerTwoBeats",o.PerBeat="PerBeat",o.PerEighthNote="PerEighthNote",o.PerSixteenthNote="PerSixteenthNote",o.Custom="Custom",o))(os||{}),Yt=(o=>(o.Kick="Kick",o.Snare="Snare",o.HiHatClosed="HiHatClosed",o.Tom1="Tom1",o.CrashCymbal="CrashCymbal",o))(Yt||{}),fe=(o=>(o.Rock="Rock",o.PopFunk="PopFunk",o.JazzSwing="JazzSwing",o.Latin="Latin",o.EDM="EDM",o.Ballad="Ballad",o.SlowPop="SlowPop",o.HipHop="HipHop",o.BossaNova="BossaNova",o.Reggae="Reggae",o.Custom="Custom",o.Off="Off",o))(fe||{}),_s=(o=>(o.ElectricBass="ElectricBass",o.SynthBass="SynthBass",o.AcousticBass="AcousticBass",o.PopPulseBass="PopPulseBass",o))(_s||{}),Me=(o=>(o.Off="Off",o.RootNotes="RootNotes",o.RootAndFifth="RootAndFifth",o.SimpleArpeggio="SimpleArpeggio",o.WalkingBassSimple="WalkingBassSimple",o.WalkingBassMelodic="WalkingBassMelodic",o.FunkSlap="FunkSlap",o.AiGenerated="AiGenerated",o))(Me||{});const pf="15.1.22",R0=(o,t,s)=>({endTime:t,insertTime:s,type:"exponentialRampToValue",value:o}),k0=(o,t,s)=>({endTime:t,insertTime:s,type:"linearRampToValue",value:o}),Kd=(o,t)=>({startTime:t,type:"setValue",value:o}),py=(o,t,s)=>({duration:s,startTime:t,type:"setValueCurve",values:o}),my=(o,t,{startTime:s,target:a,timeConstant:l})=>a+(t-a)*Math.exp((s-o)/l),gr=o=>o.type==="exponentialRampToValue",Wc=o=>o.type==="linearRampToValue",Ui=o=>gr(o)||Wc(o),mf=o=>o.type==="setValue",ti=o=>o.type==="setValueCurve",Kc=(o,t,s,a)=>{const l=o[t];return l===void 0?a:Ui(l)||mf(l)?l.value:ti(l)?l.values[l.values.length-1]:my(s,Kc(o,t-1,l.startTime,a),l)},j0=(o,t,s,a,l)=>s===void 0?[a.insertTime,l]:Ui(s)?[s.endTime,s.value]:mf(s)?[s.startTime,s.value]:ti(s)?[s.startTime+s.duration,s.values[s.values.length-1]]:[s.startTime,Kc(o,t-1,s.startTime,l)],Jd=o=>o.type==="cancelAndHold",$d=o=>o.type==="cancelScheduledValues",Bi=o=>Jd(o)||$d(o)?o.cancelTime:gr(o)||Wc(o)?o.endTime:o.startTime,q0=(o,t,s,{endTime:a,value:l})=>s===l?l:0<s&&0<l||s<0&&l<0?s*(l/s)**((o-t)/(a-t)):0,V0=(o,t,s,{endTime:a,value:l})=>s+(o-t)/(a-t)*(l-s),Zx=(o,t)=>{const s=Math.floor(t),a=Math.ceil(t);return s===a?o[s]:(1-(t-s))*o[s]+(1-(a-t))*o[a]},Wx=(o,{duration:t,startTime:s,values:a})=>{const l=(o-s)/t*(a.length-1);return Zx(a,l)},Ic=o=>o.type==="setTarget";class Kx{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const s=Bi(t);if(Jd(t)||$d(t)){const a=this._automationEvents.findIndex(u=>$d(t)&&ti(u)?u.startTime+u.duration>=s:Bi(u)>=s),l=this._automationEvents[a];if(a!==-1&&(this._automationEvents=this._automationEvents.slice(0,a)),Jd(t)){const u=this._automationEvents[this._automationEvents.length-1];if(l!==void 0&&Ui(l)){if(u!==void 0&&Ic(u))throw new Error("The internal list is malformed.");const d=u===void 0?l.insertTime:ti(u)?u.startTime+u.duration:Bi(u),f=u===void 0?this._defaultValue:ti(u)?u.values[u.values.length-1]:u.value,m=gr(l)?q0(s,d,f,l):V0(s,d,f,l),p=gr(l)?R0(m,s,this._currenTime):k0(m,s,this._currenTime);this._automationEvents.push(p)}if(u!==void 0&&Ic(u)&&this._automationEvents.push(Kd(this.getValue(s),s)),u!==void 0&&ti(u)&&u.startTime+u.duration>s){const d=s-u.startTime,f=(u.values.length-1)/u.duration,m=Math.max(2,1+Math.ceil(d*f)),p=d/(m-1)*f,g=u.values.slice(0,m);if(p<1)for(let v=1;v<m;v+=1){const x=p*v%1;g[v]=u.values[v-1]*(1-x)+u.values[v]*x}this._automationEvents[this._automationEvents.length-1]=py(g,u.startTime,d)}}}else{const a=this._automationEvents.findIndex(d=>Bi(d)>s),l=a===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[a-1];if(l!==void 0&&ti(l)&&Bi(l)+l.duration>s)return!1;const u=gr(t)?R0(t.value,t.endTime,this._currenTime):Wc(t)?k0(t.value,s,this._currenTime):t;if(a===-1)this._automationEvents.push(u);else{if(ti(t)&&s+t.duration>Bi(this._automationEvents[a]))return!1;this._automationEvents.splice(a,0,u)}}return!0}flush(t){const s=this._automationEvents.findIndex(a=>Bi(a)>t);if(s>1){const a=this._automationEvents.slice(s-1),l=a[0];Ic(l)&&a.unshift(Kd(Kc(this._automationEvents,s-2,l.startTime,this._defaultValue),l.startTime)),this._automationEvents=a}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const s=this._automationEvents.findIndex(d=>Bi(d)>t),a=this._automationEvents[s],l=(s===-1?this._automationEvents.length:s)-1,u=this._automationEvents[l];if(u!==void 0&&Ic(u)&&(a===void 0||!Ui(a)||a.insertTime>t))return my(t,Kc(this._automationEvents,l-1,u.startTime,this._defaultValue),u);if(u!==void 0&&mf(u)&&(a===void 0||!Ui(a)))return u.value;if(u!==void 0&&ti(u)&&(a===void 0||!Ui(a)||u.startTime+u.duration>t))return t<u.startTime+u.duration?Wx(t,u):u.values[u.values.length-1];if(u!==void 0&&Ui(u)&&(a===void 0||!Ui(a)))return u.value;if(a!==void 0&&gr(a)){const[d,f]=j0(this._automationEvents,l,u,a,this._defaultValue);return q0(t,d,f,a)}if(a!==void 0&&Wc(a)){const[d,f]=j0(this._automationEvents,l,u,a,this._defaultValue);return V0(t,d,f,a)}return this._defaultValue}}const Jx=o=>({cancelTime:o,type:"cancelAndHold"}),$x=o=>({cancelTime:o,type:"cancelScheduledValues"}),t1=(o,t)=>({endTime:t,type:"exponentialRampToValue",value:o}),e1=(o,t)=>({endTime:t,type:"linearRampToValue",value:o}),n1=(o,t,s)=>({startTime:t,target:o,timeConstant:s,type:"setTarget"}),s1=()=>new DOMException("","AbortError"),i1=o=>(t,s,[a,l,u],d)=>{o(t[l],[s,a,u],f=>f[0]===s&&f[1]===a,d)},a1=o=>(t,s,a)=>{const l=[];for(let u=0;u<a.numberOfInputs;u+=1)l.push(new Set);o.set(t,{activeInputs:l,outputs:new Set,passiveInputs:new WeakMap,renderer:s})},r1=o=>(t,s)=>{o.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:s})},_r=new WeakSet,gy=new WeakMap,gf=new WeakMap,_y=new WeakMap,_f=new WeakMap,du=new WeakMap,yy=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,vy={construct(){return vy}},o1=o=>{try{const t=new Proxy(o,vy);new t}catch{return!1}return!0},z0=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,B0=(o,t)=>{const s=[];let a=o.replace(/^[\s]+/,""),l=a.match(z0);for(;l!==null;){const u=l[1].slice(1,-1),d=l[0].replace(/([\s]+)?;?$/,"").replace(u,new URL(u,t).toString());s.push(d),a=a.slice(l[0].length).replace(/^[\s]+/,""),l=a.match(z0)}return[s.join(";"),a]},L0=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},U0=o=>{if(!o1(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},l1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>{let T=0;return(S,A,D={credentials:"omit"})=>{const C=g.get(S);if(C!==void 0&&C.has(A))return Promise.resolve();const F=p.get(S);if(F!==void 0){const E=F.get(A);if(E!==void 0)return E}const M=u(S),K=M.audioWorklet===void 0?l(A).then(([E,q])=>{const[L,R]=B0(E,q),W=`${L};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${R}
})})(window,'_AWGS')`;return s(W)}).then(()=>{const E=x._AWGS.pop();if(E===void 0)throw new SyntaxError;a(M.currentTime,M.sampleRate,()=>E(class{},void 0,(q,L)=>{if(q.trim()==="")throw t();const R=ef.get(M);if(R!==void 0){if(R.has(q))throw t();U0(L),L0(L.parameterDescriptors),R.set(q,L)}else U0(L),L0(L.parameterDescriptors),ef.set(M,new Map([[q,L]]))},M.sampleRate,void 0,void 0))}):Promise.all([l(A),Promise.resolve(o(v,v))]).then(([[E,q],L])=>{const R=T+1;T=R;const[W,Z]=B0(E,q),at=`${W};((AudioWorkletProcessor,registerProcessor)=>{${Z}
})(${L?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${L?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${L?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${R}',class extends AudioWorkletProcessor{process(){return !1}})`,gt=new Blob([at],{type:"application/javascript; charset=utf-8"}),O=URL.createObjectURL(gt);return M.audioWorklet.addModule(O,D).then(()=>{if(f(M))return M;const Q=d(M);return Q.audioWorklet.addModule(O,D).then(()=>Q)}).then(Q=>{if(m===null)throw new SyntaxError;try{new m(Q,`__sac${R}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(O))});return F===void 0?p.set(S,new Map([[A,K]])):F.set(A,K),K.then(()=>{const E=g.get(S);E===void 0?g.set(S,new Set([A])):E.add(A)}).finally(()=>{const E=p.get(S);E!==void 0&&E.delete(A)}),K}},ys=(o,t)=>{const s=o.get(t);if(s===void 0)throw new Error("A value with the given key could not be found.");return s},fu=(o,t)=>{const s=Array.from(o).filter(t);if(s.length>1)throw Error("More than one element was found.");if(s.length===0)throw Error("No element was found.");const[a]=s;return o.delete(a),a},by=(o,t,s,a)=>{const l=ys(o,t),u=fu(l,d=>d[0]===s&&d[1]===a);return l.size===0&&o.delete(t),u},ol=o=>ys(yy,o),yr=o=>{if(_r.has(o))throw new Error("The AudioNode is already stored.");_r.add(o),ol(o).forEach(t=>t(!0))},xy=o=>"port"in o,ll=o=>{if(!_r.has(o))throw new Error("The AudioNode is not stored.");_r.delete(o),ol(o).forEach(t=>t(!1))},sf=(o,t)=>{!xy(o)&&t.every(s=>s.size===0)&&ll(o)},c1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>{const T=new WeakMap;return(S,A,D,C,F)=>{const{activeInputs:M,passiveInputs:K}=u(A),{outputs:E}=u(S),q=f(S),L=R=>{const W=m(A),Z=m(S);if(R){const I=by(K,S,D,C);o(M,S,I,!1),!F&&!v(S)&&s(Z,W,D,C),x(A)&&yr(A)}else{const I=a(M,S,D,C);t(K,C,I,!1),!F&&!v(S)&&l(Z,W,D,C);const G=d(A);if(G===0)g(A)&&sf(A,M);else{const nt=T.get(A);nt!==void 0&&clearTimeout(nt),T.set(A,setTimeout(()=>{g(A)&&sf(A,M)},G*1e3))}}};return p(E,[A,D,C],R=>R[0]===A&&R[1]===D&&R[2]===C,!0)?(q.add(L),g(S)?o(M,S,[D,C,L],!0):t(K,C,[S,D,L],!0),!0):!1}},u1=o=>(t,s,[a,l,u],d)=>{const f=t.get(a);f===void 0?t.set(a,new Set([[l,s,u]])):o(f,[l,s,u],m=>m[0]===l&&m[1]===s,d)},h1=o=>(t,s)=>{const a=o(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.connect(a).connect(t.destination);const l=()=>{s.removeEventListener("ended",l),s.disconnect(a),a.disconnect()};s.addEventListener("ended",l)},d1=o=>(t,s)=>{o(t).add(s)},f1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},p1=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...f1,...m},v=a(p,g),x=u(p)?t():null;super(f,!1,v,x),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const m=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=m,s()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const m=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=m,s()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},_n=(o,t)=>o.context===t,m1=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!_n(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},Jc=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},js=()=>new DOMException("","IndexSizeError"),yf=o=>{o.getChannelData=(t=>s=>{try{return t.call(o,s)}catch(a){throw a.code===12?js():a}})(o.getChannelData)},g1={numberOfChannels:1},_1=(o,t,s,a,l,u,d,f)=>{let m=null;return class Sy{constructor(g){if(l===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:x,sampleRate:T}={...g1,...g};m===null&&(m=new l(1,1,44100));const S=a!==null&&t(u,u)?new a({length:v,numberOfChannels:x,sampleRate:T}):m.createBuffer(x,v,T);if(S.numberOfChannels===0)throw s();return typeof S.copyFromChannel!="function"?(d(S),yf(S)):t(Jc,()=>Jc(S))||f(S),o.add(S),S}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===Sy.prototype||o.has(g)}}},In=-34028234663852886e22,xn=34028234663852886e22,ni=o=>_r.has(o),y1={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},v1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...y1,...g},T=l(v,x),S=d(v),A=S?t():null;super(p,!1,T,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=x.buffer!==null,this._nativeAudioBufferSourceNode=T,this._onended=null,this._playbackRate=s(this,S,T.playbackRate,xn,In)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(p){if(this._nativeAudioBufferSourceNode.buffer=p,p!==null){if(this._isBufferSet)throw a();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(p){this._nativeAudioBufferSourceNode.loop=p}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(p){this._nativeAudioBufferSourceNode.loopEnd=p}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(p){this._nativeAudioBufferSourceNode.loopStart=p}get onended(){return this._onended}set onended(p){const g=typeof p=="function"?f(this,p):null;this._nativeAudioBufferSourceNode.onended=g;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===g?p:v}get playbackRate(){return this._playbackRate}start(p=0,g=0,v){if(this._nativeAudioBufferSourceNode.start(p,g,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[p,g]:[p,g,v]),this.context.state!=="closed"){yr(this);const x=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",x),ni(this)&&ll(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",x)}}stop(p=0){this._nativeAudioBufferSourceNode.stop(p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=p)}},b1=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null;const m=async(p,g)=>{let v=s(p);const x=_n(v,g);if(!x){const T={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=t(g,T),d!==null&&v.start(...d),f!==null&&v.stop(f)}return u.set(g,v),x?await o(g,p.playbackRate,v.playbackRate):await a(g,p.playbackRate,v.playbackRate),await l(p,g,v),v};return{set start(p){d=p},set stop(p){f=p},render(p,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):m(p,g)}}},x1=o=>"playbackRate"in o,S1=o=>"frequency"in o&&"gain"in o,T1=o=>"offset"in o,w1=o=>!("frequency"in o)&&"gain"in o,A1=o=>"detune"in o&&"frequency"in o&&!("gain"in o),C1=o=>"pan"in o,Tn=o=>ys(gy,o),cl=o=>ys(_y,o),af=(o,t)=>{const{activeInputs:s}=Tn(o);s.forEach(l=>l.forEach(([u])=>{t.includes(o)||af(u,[...t,o])}));const a=x1(o)?[o.playbackRate]:xy(o)?Array.from(o.parameters.values()):S1(o)?[o.Q,o.detune,o.frequency,o.gain]:T1(o)?[o.offset]:w1(o)?[o.gain]:A1(o)?[o.detune,o.frequency]:C1(o)?[o.pan]:[];for(const l of a){const u=cl(l);u!==void 0&&u.activeInputs.forEach(([d])=>af(d,t))}ni(o)&&ll(o)},Ty=o=>{af(o.destination,[])},N1=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),E1=(o,t,s,a,l,u,d,f,m)=>class extends o{constructor(g={}){if(m===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new m(g)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?s():S}if(v===null)throw a();if(!N1(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&v.sampleRate!==g.sampleRate)throw s();super(v,2);const{latencyHint:x}=g,{sampleRate:T}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:x==="balanced"?512/T:x==="interactive"||x===void 0?256/T:x==="playback"?1024/T:Math.max(2,Math.min(128,Math.round(x*T/128)))*128/T,this._nativeAudioContext=v,m.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",S)};v.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ty(this)}))}createMediaElementSource(g){return new l(this,{mediaElement:g})}createMediaStreamDestination(){return new u(this)}createMediaStreamSource(g){return new d(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new f(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,v)=>{const x=()=>{this._nativeAudioContext.removeEventListener("statechange",x),this._nativeAudioContext.state==="running"?g():this.resume().then(g,v)};this._nativeAudioContext.addEventListener("statechange",x)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?t():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?t():g})}},D1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x=d(v),T=l(v,g,x),S=x?t(f):null;super(p,!1,T,S),this._isNodeOfNativeOfflineAudioContext=x,this._nativeAudioDestinationNode=T}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(p){if(this._isNodeOfNativeOfflineAudioContext)throw a();if(p>this._nativeAudioDestinationNode.maxChannelCount)throw s();this._nativeAudioDestinationNode.channelCount=p}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(p){if(this._isNodeOfNativeOfflineAudioContext)throw a();this._nativeAudioDestinationNode.channelCountMode=p}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},O1=o=>{const t=new WeakMap,s=async(a,l)=>{const u=l.destination;return t.set(l,u),await o(a,l,u),u};return{render(a,l){const u=t.get(l);return u!==void 0?Promise.resolve(u):s(a,l)}}},M1=(o,t,s,a,l,u,d,f)=>(m,p)=>{const g=p.listener,v=()=>{const E=new Float32Array(1),q=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),L=d(p);let R=!1,W=[0,0,-1,0,1,0],Z=[0,0,0];const I=()=>{if(R)return;R=!0;const gt=a(p,256,9,0);gt.onaudioprocess=({inputBuffer:O})=>{const Q=[u(O,E,0),u(O,E,1),u(O,E,2),u(O,E,3),u(O,E,4),u(O,E,5)];Q.some((pt,w)=>pt!==W[w])&&(g.setOrientation(...Q),W=Q);const rt=[u(O,E,6),u(O,E,7),u(O,E,8)];rt.some((pt,w)=>pt!==Z[w])&&(g.setPosition(...rt),Z=rt)},q.connect(gt)},G=gt=>O=>{O!==W[gt]&&(W[gt]=O,g.setOrientation(...W))},nt=gt=>O=>{O!==Z[gt]&&(Z[gt]=O,g.setPosition(...Z))},at=(gt,O,Q)=>{const rt=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:O});rt.connect(q,0,gt),rt.start(),Object.defineProperty(rt.offset,"defaultValue",{get(){return O}});const pt=o({context:m},L,rt.offset,xn,In);return f(pt,"value",w=>()=>w.call(pt),w=>H=>{try{w.call(pt,H)}catch(ot){if(ot.code!==9)throw ot}I(),L&&Q(H)}),pt.cancelAndHoldAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.cancelAndHoldAtTime),pt.cancelScheduledValues=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.cancelScheduledValues),pt.exponentialRampToValueAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.exponentialRampToValueAtTime),pt.linearRampToValueAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.linearRampToValueAtTime),pt.setTargetAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.setTargetAtTime),pt.setValueAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.setValueAtTime),pt.setValueCurveAtTime=(w=>L?()=>{throw l()}:(...H)=>{const ot=w.apply(pt,H);return I(),ot})(pt.setValueCurveAtTime),pt};return{forwardX:at(0,0,G(0)),forwardY:at(1,0,G(1)),forwardZ:at(2,-1,G(2)),positionX:at(6,0,nt(0)),positionY:at(7,0,nt(1)),positionZ:at(8,0,nt(2)),upX:at(3,0,G(3)),upY:at(4,1,G(4)),upZ:at(5,0,G(5))}},{forwardX:x,forwardY:T,forwardZ:S,positionX:A,positionY:D,positionZ:C,upX:F,upY:M,upZ:K}=g.forwardX===void 0?v():g;return{get forwardX(){return x},get forwardY(){return T},get forwardZ(){return S},get positionX(){return A},get positionY(){return D},get positionZ(){return C},get upX(){return F},get upY(){return M},get upZ(){return K}}},$c=o=>"context"in o,ul=o=>$c(o[0]),Ta=(o,t,s,a)=>{for(const l of o)if(s(l)){if(a)return!1;throw Error("The set contains at least one similar element.")}return o.add(t),!0},F0=(o,t,[s,a],l)=>{Ta(o,[t,s,a],u=>u[0]===t&&u[1]===s,l)},I0=(o,[t,s,a],l)=>{const u=o.get(t);u===void 0?o.set(t,new Set([[s,a]])):Ta(u,[s,a],d=>d[0]===s,l)},Nr=o=>"inputs"in o,tu=(o,t,s,a)=>{if(Nr(t)){const l=t.inputs[a];return o.connect(l,s,0),[l,s,0]}return o.connect(t,s,a),[t,s,a]},wy=(o,t,s)=>{for(const a of o)if(a[0]===t&&a[1]===s)return o.delete(a),a;return null},R1=(o,t,s)=>fu(o,a=>a[0]===t&&a[1]===s),Ay=(o,t)=>{if(!ol(o).delete(t))throw new Error("Missing the expected event listener.")},Cy=(o,t,s)=>{const a=ys(o,t),l=fu(a,u=>u[0]===s);return a.size===0&&o.delete(t),l},eu=(o,t,s,a)=>{Nr(t)?o.disconnect(t.inputs[a],s,0):o.disconnect(t,s,a)},ve=o=>ys(gf,o),tl=o=>ys(_f,o),xa=o=>tf.has(o),Yc=o=>!_r.has(o),G0=(o,t)=>new Promise(s=>{if(t!==null)s(!0);else{const a=o.createScriptProcessor(256,1,1),l=o.createGain(),u=o.createBuffer(1,2,44100),d=u.getChannelData(0);d[0]=1,d[1]=1;const f=o.createBufferSource();f.buffer=u,f.loop=!0,f.connect(a).connect(o.destination),f.connect(l),f.disconnect(l),a.onaudioprocess=m=>{const p=m.inputBuffer.getChannelData(0);Array.prototype.some.call(p,g=>g===1)?s(!0):s(!1),f.stop(),a.onaudioprocess=null,f.disconnect(a),a.disconnect(o.destination)},f.start()}}),Fd=(o,t)=>{const s=new Map;for(const a of o)for(const l of a){const u=s.get(l);s.set(l,u===void 0?1:u+1)}s.forEach((a,l)=>t(l,a))},nu=o=>"context"in o,k1=o=>{const t=new Map;o.connect=(s=>(a,l=0,u=0)=>{const d=nu(a)?s(a,l,u):s(a,l),f=t.get(a);return f===void 0?t.set(a,[{input:u,output:l}]):f.every(m=>m.input!==u||m.output!==l)&&f.push({input:u,output:l}),d})(o.connect.bind(o)),o.disconnect=(s=>(a,l,u)=>{if(s.apply(o),a===void 0)t.clear();else if(typeof a=="number")for(const[d,f]of t){const m=f.filter(p=>p.output!==a);m.length===0?t.delete(d):t.set(d,m)}else if(t.has(a))if(l===void 0)t.delete(a);else{const d=t.get(a);if(d!==void 0){const f=d.filter(m=>m.output!==l&&(m.input!==u||u===void 0));f.length===0?t.delete(a):t.set(a,f)}}for(const[d,f]of t)f.forEach(m=>{nu(d)?o.connect(d,m.output,m.input):o.connect(d,m.output)})})(o.disconnect)},j1=(o,t,s,a)=>{const{activeInputs:l,passiveInputs:u}=cl(t),{outputs:d}=Tn(o),f=ol(o),m=p=>{const g=ve(o),v=tl(t);if(p){const x=Cy(u,o,s);F0(l,o,x,!1),!a&&!xa(o)&&g.connect(v,s)}else{const x=R1(l,o,s);I0(u,x,!1),!a&&!xa(o)&&g.disconnect(v,s)}};return Ta(d,[t,s],p=>p[0]===t&&p[1]===s,!0)?(f.add(m),ni(o)?F0(l,o,[s,m],!0):I0(u,[o,s,m],!0),!0):!1},q1=(o,t,s,a)=>{const{activeInputs:l,passiveInputs:u}=Tn(t),d=wy(l[a],o,s);return d===null?[by(u,o,s,a)[2],!1]:[d[2],!0]},V1=(o,t,s)=>{const{activeInputs:a,passiveInputs:l}=cl(t),u=wy(a,o,s);return u===null?[Cy(l,o,s)[1],!1]:[u[2],!0]},vf=(o,t,s,a,l)=>{const[u,d]=q1(o,s,a,l);if(u!==null&&(Ay(o,u),d&&!t&&!xa(o)&&eu(ve(o),ve(s),a,l)),ni(s)){const{activeInputs:f}=Tn(s);sf(s,f)}},bf=(o,t,s,a)=>{const[l,u]=V1(o,s,a);l!==null&&(Ay(o,l),u&&!t&&!xa(o)&&ve(o).disconnect(tl(s),a))},z1=(o,t)=>{const s=Tn(o),a=[];for(const l of s.outputs)ul(l)?vf(o,t,...l):bf(o,t,...l),a.push(l[0]);return s.outputs.clear(),a},B1=(o,t,s)=>{const a=Tn(o),l=[];for(const u of a.outputs)u[1]===s&&(ul(u)?vf(o,t,...u):bf(o,t,...u),l.push(u[0]),a.outputs.delete(u));return l},L1=(o,t,s,a,l)=>{const u=Tn(o);return Array.from(u.outputs).filter(d=>d[0]===s&&(a===void 0||d[1]===a)&&(l===void 0||d[2]===l)).map(d=>(ul(d)?vf(o,t,...d):bf(o,t,...d),u.outputs.delete(d),d[0]))},U1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,A)=>class extends p{constructor(C,F,M,K){super(M),this._context=C,this._nativeAudioNode=M;const E=g(C);v(E)&&s(G0,()=>G0(E,A))!==!0&&k1(M),gf.set(this,M),yy.set(this,new Set),C.state!=="closed"&&F&&yr(this),o(this,K,M)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,F=0,M=0){if(F<0||F>=this._nativeAudioNode.numberOfOutputs)throw l();const K=g(this._context),E=S(K);if(x(C)||T(C))throw u();if($c(C)){const R=ve(C);try{const Z=tu(this._nativeAudioNode,R,F,M),I=Yc(this);(E||I)&&this._nativeAudioNode.disconnect(...Z),this.context.state!=="closed"&&!I&&Yc(C)&&yr(C)}catch(Z){throw Z.code===12?u():Z}if(t(this,C,F,M,E)){const Z=m([this],C);Fd(Z,a(E))}return C}const q=tl(C);if(q.name==="playbackRate"&&q.maxValue===1024)throw d();try{this._nativeAudioNode.connect(q,F),(E||Yc(this))&&this._nativeAudioNode.disconnect(q,F)}catch(R){throw R.code===12?u():R}if(j1(this,C,F,E)){const R=m([this],C);Fd(R,a(E))}}disconnect(C,F,M){let K;const E=g(this._context),q=S(E);if(C===void 0)K=z1(this,q);else if(typeof C=="number"){if(C<0||C>=this.numberOfOutputs)throw l();K=B1(this,q,C)}else{if(F!==void 0&&(F<0||F>=this.numberOfOutputs)||$c(C)&&M!==void 0&&(M<0||M>=C.numberOfInputs))throw l();if(K=L1(this,q,C,F,M),K.length===0)throw u()}for(const L of K){const R=m([this],L);Fd(R,f)}}},F1=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>(T,S,A,D=null,C=null)=>{const F=A.value,M=new Kx(F),K=S?a(M):null,E={get defaultValue(){return F},get maxValue(){return D===null?A.maxValue:D},get minValue(){return C===null?A.minValue:C},get value(){return A.value},set value(q){A.value=q,E.setValueAtTime(q,T.context.currentTime)},cancelAndHoldAtTime(q){if(typeof A.cancelAndHoldAtTime=="function")K===null&&M.flush(T.context.currentTime),M.add(l(q)),A.cancelAndHoldAtTime(q);else{const L=Array.from(M).pop();K===null&&M.flush(T.context.currentTime),M.add(l(q));const R=Array.from(M).pop();A.cancelScheduledValues(q),L!==R&&R!==void 0&&(R.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(R.value,R.endTime):R.type==="linearRampToValue"?A.linearRampToValueAtTime(R.value,R.endTime):R.type==="setValue"?A.setValueAtTime(R.value,R.startTime):R.type==="setValueCurve"&&A.setValueCurveAtTime(R.values,R.startTime,R.duration))}return E},cancelScheduledValues(q){return K===null&&M.flush(T.context.currentTime),M.add(u(q)),A.cancelScheduledValues(q),E},exponentialRampToValueAtTime(q,L){if(q===0)throw new RangeError;if(!Number.isFinite(L)||L<0)throw new RangeError;const R=T.context.currentTime;return K===null&&M.flush(R),Array.from(M).length===0&&(M.add(p(F,R)),A.setValueAtTime(F,R)),M.add(d(q,L)),A.exponentialRampToValueAtTime(q,L),E},linearRampToValueAtTime(q,L){const R=T.context.currentTime;return K===null&&M.flush(R),Array.from(M).length===0&&(M.add(p(F,R)),A.setValueAtTime(F,R)),M.add(f(q,L)),A.linearRampToValueAtTime(q,L),E},setTargetAtTime(q,L,R){return K===null&&M.flush(T.context.currentTime),M.add(m(q,L,R)),A.setTargetAtTime(q,L,R),E},setValueAtTime(q,L){return K===null&&M.flush(T.context.currentTime),M.add(p(q,L)),A.setValueAtTime(q,L),E},setValueCurveAtTime(q,L,R){const W=q instanceof Float32Array?q:new Float32Array(q);if(v!==null&&v.name==="webkitAudioContext"){const Z=L+R,I=T.context.sampleRate,G=Math.ceil(L*I),nt=Math.floor(Z*I),at=nt-G,gt=new Float32Array(at);for(let Q=0;Q<at;Q+=1){const rt=(W.length-1)/R*((G+Q)/I-L),pt=Math.floor(rt),w=Math.ceil(rt);gt[Q]=pt===w?W[pt]:(1-(rt-pt))*W[pt]+(1-(w-rt))*W[w]}K===null&&M.flush(T.context.currentTime),M.add(g(gt,L,R)),A.setValueCurveAtTime(gt,L,R);const O=nt/I;O<Z&&x(E,gt[gt.length-1],O),x(E,W[W.length-1],Z)}else K===null&&M.flush(T.context.currentTime),M.add(g(W,L,R)),A.setValueCurveAtTime(W,L,R);return E}};return s.set(E,A),t.set(E,T),o(E,K),E},I1=o=>({replay(t){for(const s of o)if(s.type==="exponentialRampToValue"){const{endTime:a,value:l}=s;t.exponentialRampToValueAtTime(l,a)}else if(s.type==="linearRampToValue"){const{endTime:a,value:l}=s;t.linearRampToValueAtTime(l,a)}else if(s.type==="setTarget"){const{startTime:a,target:l,timeConstant:u}=s;t.setTargetAtTime(l,a,u)}else if(s.type==="setValue"){const{startTime:a,value:l}=s;t.setValueAtTime(l,a)}else if(s.type==="setValueCurve"){const{duration:a,startTime:l,values:u}=s;t.setValueCurveAtTime(u,l,a)}else throw new Error("Can't apply an unknown automation.")}});class Ny{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,s=null){return this._map.forEach((a,l)=>t.call(s,a,l,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const G1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},H1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T)=>class extends t{constructor(A,D,C){var F;const M=f(A),K=m(M),E=g({...G1,...C});x(E);const q=ef.get(M),L=q==null?void 0:q.get(D),R=K||M.state!=="closed"?M:(F=d(M))!==null&&F!==void 0?F:M,W=l(R,K?null:A.baseLatency,p,D,L,E),Z=K?a(D,E,L):null;super(A,!0,W,Z);const I=[];W.parameters.forEach((nt,at)=>{const gt=s(this,K,nt);I.push([at,gt])}),this._nativeAudioWorkletNode=W,this._onprocessorerror=null,this._parameters=new Ny(I),K&&o(M,this);const{activeInputs:G}=u(this);v(W,G)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const D=typeof A=="function"?T(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=D;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=C!==null&&C===D?A:C}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function su(o,t,s,a,l){if(typeof o.copyFromChannel=="function")t[s].byteLength===0&&(t[s]=new Float32Array(128)),o.copyFromChannel(t[s],a,l);else{const u=o.getChannelData(a);if(t[s].byteLength===0)t[s]=u.slice(l,l+128);else{const d=new Float32Array(u.buffer,l*Float32Array.BYTES_PER_ELEMENT,128);t[s].set(d)}}}const Ey=(o,t,s,a,l)=>{typeof o.copyToChannel=="function"?t[s].byteLength!==0&&o.copyToChannel(t[s],a,l):t[s].byteLength!==0&&o.getChannelData(a).set(t[s],l)},iu=(o,t)=>{const s=[];for(let a=0;a<o;a+=1){const l=[],u=typeof t=="number"?t:t[a];for(let d=0;d<u;d+=1)l.push(new Float32Array(128));s.push(l)}return s},P1=(o,t)=>{const s=ys(nf,o),a=ve(t);return ys(s,a)},Y1=async(o,t,s,a,l,u,d)=>{const f=t===null?Math.ceil(o.context.length/128)*128:t.length,m=a.channelCount*a.numberOfInputs,p=l.reduce((D,C)=>D+C,0),g=p===0?null:s.createBuffer(p,f,s.sampleRate);if(u===void 0)throw new Error("Missing the processor constructor.");const v=Tn(o),x=await P1(s,o),T=iu(a.numberOfInputs,a.channelCount),S=iu(a.numberOfOutputs,l),A=Array.from(o.parameters.keys()).reduce((D,C)=>({...D,[C]:new Float32Array(128)}),{});for(let D=0;D<f;D+=128){if(a.numberOfInputs>0&&t!==null)for(let C=0;C<a.numberOfInputs;C+=1)for(let F=0;F<a.channelCount;F+=1)su(t,T[C],F,F,D);u.parameterDescriptors!==void 0&&t!==null&&u.parameterDescriptors.forEach(({name:C},F)=>{su(t,A,C,m+F,D)});for(let C=0;C<a.numberOfInputs;C+=1)for(let F=0;F<l[C];F+=1)S[C][F].byteLength===0&&(S[C][F]=new Float32Array(128));try{const C=T.map((M,K)=>v.activeInputs[K].size===0?[]:M),F=d(D/s.sampleRate,s.sampleRate,()=>x.process(C,S,A));if(g!==null)for(let M=0,K=0;M<a.numberOfOutputs;M+=1){for(let E=0;E<l[M];E+=1)Ey(g,S[M],E,K+E,D);K+=l[M]}if(!F)break}catch(C){o.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}));break}}return g},X1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,A)=>(D,C,F)=>{const M=new WeakMap;let K=null;const E=async(q,L)=>{let R=g(q),W=null;const Z=_n(R,L),I=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(v===null){const G=I.reduce((O,Q)=>O+Q,0),nt=l(L,{channelCount:Math.max(1,G),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,G)}),at=[];for(let O=0;O<q.numberOfOutputs;O+=1)at.push(a(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[O]}));const gt=d(L,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});gt.connect=t.bind(null,at),gt.disconnect=m.bind(null,at),W=[nt,at,gt]}else Z||(R=new v(L,D));if(M.set(L,W===null?R:W[2]),W!==null){if(K===null){if(F===void 0)throw new Error("Missing the processor constructor.");if(x===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Q=q.channelCount*q.numberOfInputs,rt=F.parameterDescriptors===void 0?0:F.parameterDescriptors.length,pt=Q+rt;K=Y1(q,pt===0?null:await(async()=>{const H=new x(pt,Math.ceil(q.context.length/128)*128,L.sampleRate),ot=[],dt=[];for(let _t=0;_t<C.numberOfInputs;_t+=1)ot.push(d(H,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),dt.push(l(H,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const xt=await Promise.all(Array.from(q.parameters.values()).map(async _t=>{const Zt=u(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_t.value});return await T(H,_t,Zt.offset),Zt})),bt=a(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Q+rt)});for(let _t=0;_t<C.numberOfInputs;_t+=1){ot[_t].connect(dt[_t]);for(let Zt=0;Zt<C.channelCount;Zt+=1)dt[_t].connect(bt,Zt,_t*C.channelCount+Zt)}for(const[_t,Zt]of xt.entries())Zt.connect(bt,0,Q+_t),Zt.start(0);return bt.connect(H.destination),await Promise.all(ot.map(_t=>S(q,H,_t))),A(H)})(),L,C,I,F,p)}const G=await K,nt=s(L,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[at,gt,O]=W;G!==null&&(nt.buffer=G,nt.start(0)),nt.connect(at);for(let Q=0,rt=0;Q<q.numberOfOutputs;Q+=1){const pt=gt[Q];for(let w=0;w<I[Q];w+=1)at.connect(pt,rt+w,w);rt+=I[Q]}return O}if(Z)for(const[G,nt]of q.parameters.entries())await o(L,nt,R.parameters.get(G));else for(const[G,nt]of q.parameters.entries())await T(L,nt,R.parameters.get(G));return await S(q,L,R),R};return{render(q,L){f(L,q);const R=M.get(L);return R!==void 0?Promise.resolve(R):E(q,L)}}},Q1=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,A,D,C,F,M)=>class extends S{constructor(E,q){super(E,q),this._nativeContext=E,this._audioWorklet=o===void 0?void 0:{addModule:(L,R)=>o(this,L,R)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new l(this)}createBuffer(E,q,L){return new s({length:q,numberOfChannels:E,sampleRate:L})}createBufferSource(){return new a(this)}createChannelMerger(E=6){return new u(this,{numberOfInputs:E})}createChannelSplitter(E=6){return new d(this,{numberOfOutputs:E})}createConstantSource(){return new f(this)}createConvolver(){return new m(this)}createDelay(E=1){return new g(this,{maxDelayTime:E})}createDynamicsCompressor(){return new v(this)}createGain(){return new x(this)}createIIRFilter(E,q){return new T(this,{feedback:q,feedforward:E})}createOscillator(){return new A(this)}createPanner(){return new D(this)}createPeriodicWave(E,q,L={disableNormalization:!1}){return new C(this,{...L,imag:q,real:E})}createStereoPanner(){return new F(this)}createWaveShaper(){return new M(this)}decodeAudioData(E,q,L){return p(this._nativeContext,E).then(R=>(typeof q=="function"&&q(R),R),R=>{throw typeof L=="function"&&L(R),R})}},Z1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},W1=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...Z1,...g},T=l(v,x),S=d(v),A=S?s():null;super(p,!1,T,A),this._Q=t(this,S,T.Q,xn,In),this._detune=t(this,S,T.detune,1200*Math.log2(xn),-1200*Math.log2(xn)),this._frequency=t(this,S,T.frequency,p.sampleRate/2,0),this._gain=t(this,S,T.gain,40*Math.log10(xn),In),this._nativeBiquadFilterNode=T,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(p){this._nativeBiquadFilterNode.type=p}getFrequencyResponse(p,g,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(p,g,v)}catch(x){throw x.code===11?a():x}if(p.length!==g.length||g.length!==v.length)throw a()}},K1=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=_n(p,m);if(!g){const v={Q:p.Q.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,gain:p.gain.value,type:p.type};p=t(m,v)}return u.set(m,p),g?(await o(m,f.Q,p.Q),await o(m,f.detune,p.detune),await o(m,f.frequency,p.frequency),await o(m,f.gain,p.gain)):(await a(m,f.Q,p.Q),await a(m,f.detune,p.detune),await a(m,f.frequency,p.frequency),await a(m,f.gain,p.gain)),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},J1=(o,t)=>(s,a)=>{const l=t.get(s);if(l!==void 0)return l;const u=o.get(s);if(u!==void 0)return u;try{const d=a();return d instanceof Promise?(o.set(s,d),d.catch(()=>!1).then(f=>(o.delete(s),t.set(s,f),f))):(t.set(s,d),d)}catch{return t.set(s,!1),!1}},$1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tS=(o,t,s,a,l)=>class extends o{constructor(d,f){const m=a(d),p={...$1,...f},g=s(m,p),v=l(m)?t():null;super(d,!1,g,v)}},eS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!_n(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},nS={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},sS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g=u({...nS,...m}),v=s(p,g),x=l(p)?t():null;super(f,!1,v,x)}},iS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!_n(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=o(d,p)}return a.set(d,f),await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},aS=o=>(t,s,a)=>o(s,t,a),rS=o=>(t,s,a=0,l=0)=>{const u=t[a];if(u===void 0)throw o();return nu(s)?u.connect(s,0,l):u.connect(s,0)},oS=o=>(t,s)=>{const a=o(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t.createBuffer(1,2,44100);return a.buffer=l,a.loop=!0,a.connect(s),a.start(),()=>{a.stop(),a.disconnect(s)}},lS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},cS=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...lS,...p},x=a(g,v),T=u(g),S=T?s():null;super(m,!1,x,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=x,this._offset=t(this,T,x.offset,xn,In),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(m){const p=typeof m=="function"?d(this,m):null;this._nativeConstantSourceNode.onended=p;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===p?m:g}start(m=0){if(this._nativeConstantSourceNode.start(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=m),this.context.state!=="closed"){yr(this);const p=()=>{this._nativeConstantSourceNode.removeEventListener("ended",p),ni(this)&&ll(this)};this._nativeConstantSourceNode.addEventListener("ended",p)}}stop(m=0){this._nativeConstantSourceNode.stop(m),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=m)}},uS=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null;const m=async(p,g)=>{let v=s(p);const x=_n(v,g);if(!x){const T={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=t(g,T),d!==null&&v.start(d),f!==null&&v.stop(f)}return u.set(g,v),x?await o(g,p.offset,v.offset):await a(g,p.offset,v.offset),await l(p,g,v),v};return{set start(p){d=p},set stop(p){f=p},render(p,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):m(p,g)}}},hS=o=>t=>(o[0]=t,o[0]),dS={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g={...dS,...m},v=s(p,g),T=l(p)?t():null;super(f,!1,v,T),this._isBufferNullified=!1,this._nativeConvolverNode=v,g.buffer!==null&&u(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const m=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=m.createBuffer(1,1,m.sampleRate),this._isBufferNullified=!0,u(this,0)}else this._isBufferNullified=!1,u(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},pS=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!_n(f,d)){const p={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=o(d,p)}return a.set(d,f),Nr(f)?await s(u,d,f.inputs[0]):await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},mS=(o,t)=>(s,a,l)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(s,a,l)}catch(u){throw u.name==="SyntaxError"?o():u}},gS=()=>new DOMException("","DataCloneError"),H0=o=>{const{port1:t,port2:s}=new MessageChannel;return new Promise(a=>{const l=()=>{s.onmessage=null,t.close(),s.close(),a()};s.onmessage=()=>l();try{t.postMessage(o,[o])}catch{}finally{l()}})},_S=(o,t,s,a,l,u,d,f,m,p,g)=>(v,x)=>{const T=d(v)?v:u(v);if(l.has(x)){const S=s();return Promise.reject(S)}try{l.add(x)}catch{}return t(m,()=>m(T))?T.decodeAudioData(x).then(S=>(H0(x).catch(()=>{}),t(f,()=>f(S))||g(S),o.add(S),S)):new Promise((S,A)=>{const D=async()=>{try{await H0(x)}catch{}},C=F=>{A(F),D()};try{T.decodeAudioData(x,F=>{typeof F.copyFromChannel!="function"&&(p(F),yf(F)),o.add(F),D().then(()=>S(F))},F=>{C(F===null?a():F)})}catch(F){C(F)}})},yS=(o,t,s,a,l,u,d,f)=>(m,p)=>{const g=t.get(m);if(g===void 0)throw new Error("Missing the expected cycle count.");const v=u(m.context),x=f(v);if(g===p){if(t.delete(m),!x&&d(m)){const T=a(m),{outputs:S}=s(m);for(const A of S)if(ul(A)){const D=a(A[0]);o(T,D,A[1],A[2])}else{const D=l(A[0]);T.connect(D,A[1])}}}else t.set(m,g-p)},vS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},bS=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...vS,...p},x=a(g,v),T=u(g),S=T?s(v.maxDelayTime):null;super(m,!1,x,S),this._delayTime=t(this,T,x.delayTime),d(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},xS=(o,t,s,a,l)=>u=>{const d=new WeakMap,f=async(m,p)=>{let g=s(m);const v=_n(g,p);if(!v){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:u};g=t(p,x)}return d.set(p,g),v?await o(p,m.delayTime,g.delayTime):await a(p,m.delayTime,g.delayTime),await l(m,p,g),g};return{render(m,p){const g=d.get(p);return g!==void 0?Promise.resolve(g):f(m,p)}}},SS=o=>(t,s,a,l)=>o(t[l],u=>u[0]===s&&u[1]===a),TS=o=>(t,s)=>{o(t).delete(s)},wS=o=>"delayTime"in o,AS=(o,t,s)=>function a(l,u){const d=$c(u)?u:s(o,u);if(wS(d))return[];if(l[0]===d)return[l];if(l.includes(d))return[];const{outputs:f}=t(d);return Array.from(f).map(m=>a([...l,d],m[0])).reduce((m,p)=>m.concat(p),[])},Gc=(o,t,s)=>{const a=t[s];if(a===void 0)throw o();return a},CS=o=>(t,s=void 0,a=void 0,l=0)=>s===void 0?t.forEach(u=>u.disconnect()):typeof s=="number"?Gc(o,t,s).disconnect():nu(s)?a===void 0?t.forEach(u=>u.disconnect(s)):l===void 0?Gc(o,t,a).disconnect(s,0):Gc(o,t,a).disconnect(s,0,l):a===void 0?t.forEach(u=>u.disconnect(s)):Gc(o,t,a).disconnect(s,0),NS={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},ES=(o,t,s,a,l,u,d,f)=>class extends o{constructor(p,g){const v=u(p),x={...NS,...g},T=a(v,x),S=d(v),A=S?s():null;super(p,!1,T,A),this._attack=t(this,S,T.attack),this._knee=t(this,S,T.knee),this._nativeDynamicsCompressorNode=T,this._ratio=t(this,S,T.ratio),this._release=t(this,S,T.release),this._threshold=t(this,S,T.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(p){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=p,p>2)throw this._nativeDynamicsCompressorNode.channelCount=g,l()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(p){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=p,p==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,l()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},DS=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=_n(p,m);if(!g){const v={attack:p.attack.value,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,knee:p.knee.value,ratio:p.ratio.value,release:p.release.value,threshold:p.threshold.value};p=t(m,v)}return u.set(m,p),g?(await o(m,f.attack,p.attack),await o(m,f.knee,p.knee),await o(m,f.ratio,p.ratio),await o(m,f.release,p.release),await o(m,f.threshold,p.threshold)):(await a(m,f.attack,p.attack),await a(m,f.knee,p.knee),await a(m,f.ratio,p.ratio),await a(m,f.release,p.release),await a(m,f.threshold,p.threshold)),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},OS=()=>new DOMException("","EncodingError"),MS=o=>t=>new Promise((s,a)=>{if(o===null){a(new SyntaxError);return}const l=o.document.head;if(l===null)a(new SyntaxError);else{const u=o.document.createElement("script"),d=new Blob([t],{type:"application/javascript"}),f=URL.createObjectURL(d),m=o.onerror,p=()=>{o.onerror=m,URL.revokeObjectURL(f)};o.onerror=(g,v,x,T,S)=>{if(v===f||v===o.location.href&&x===1&&T===1)return p(),a(S),!1;if(m!==null)return m(g,v,x,T,S)},u.onerror=()=>{p(),a(new SyntaxError)},u.onload=()=>{p(),s()},u.src=f,u.type="module",l.appendChild(u)}}),RS=o=>class{constructor(s){this._nativeEventTarget=s,this._listeners=new WeakMap}addEventListener(s,a,l){if(a!==null){let u=this._listeners.get(a);u===void 0&&(u=o(this,a),typeof a=="function"&&this._listeners.set(a,u)),this._nativeEventTarget.addEventListener(s,u,l)}}dispatchEvent(s){return this._nativeEventTarget.dispatchEvent(s)}removeEventListener(s,a,l){const u=a===null?void 0:this._listeners.get(a);this._nativeEventTarget.removeEventListener(s,u===void 0?null:u,l)}},kS=o=>(t,s,a)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(t*s)}},currentTime:{configurable:!0,get(){return t}}});try{return a()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},jS=o=>async t=>{try{const s=await fetch(t);if(s.ok)return[await s.text(),s.url]}catch{}throw o()},qS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},VS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...qS,...m},v=a(p,g),x=u(p),T=x?s():null;super(f,!1,v,T),this._gain=t(this,x,v.gain,xn,In)}get gain(){return this._gain}},zS=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=_n(p,m);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:p.gain.value};p=t(m,v)}return u.set(m,p),g?await o(m,f.gain,p.gain):await a(m,f.gain,p.gain),await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},BS=(o,t)=>s=>t(o,s),LS=o=>t=>{const s=o(t);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return s.renderer},US=o=>t=>{var s;return(s=o.get(t))!==null&&s!==void 0?s:0},FS=o=>t=>{const s=o(t);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return s.renderer},IS=o=>t=>o.get(t),nn=()=>new DOMException("","InvalidStateError"),GS=o=>t=>{const s=o.get(t);if(s===void 0)throw nn();return s},HS=(o,t)=>s=>{let a=o.get(s);if(a!==void 0)return a;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return a=new t(1,1,44100),o.set(s,a),a},PS=o=>t=>{const s=o.get(t);if(s===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return s},pu=()=>new DOMException("","InvalidAccessError"),YS=o=>{o.getFrequencyResponse=(t=>(s,a,l)=>{if(s.length!==a.length||a.length!==l.length)throw pu();return t.call(o,s,a,l)})(o.getFrequencyResponse)},XS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},QS=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=a(f),g=l(p),v={...XS,...m},x=t(p,g?null:f.baseLatency,v),T=g?s(v.feedback,v.feedforward):null;super(f,!1,x,T),YS(x),this._nativeIIRFilterNode=x,u(this,1)}getFrequencyResponse(f,m,p){return this._nativeIIRFilterNode.getFrequencyResponse(f,m,p)}},Dy=(o,t,s,a,l,u,d,f,m,p,g)=>{const v=p.length;let x=f;for(let T=0;T<v;T+=1){let S=s[0]*p[T];for(let A=1;A<l;A+=1){const D=x-A&m-1;S+=s[A]*u[D],S-=o[A]*d[D]}for(let A=l;A<a;A+=1)S+=s[A]*u[x-A&m-1];for(let A=l;A<t;A+=1)S-=o[A]*d[x-A&m-1];u[x]=p[T],d[x]=S,x=x+1&m-1,g[T]=S}return x},ZS=(o,t,s,a)=>{const l=s instanceof Float64Array?s:new Float64Array(s),u=a instanceof Float64Array?a:new Float64Array(a),d=l.length,f=u.length,m=Math.min(d,f);if(l[0]!==1){for(let S=0;S<d;S+=1)u[S]/=l[0];for(let S=1;S<f;S+=1)l[S]/=l[0]}const p=32,g=new Float32Array(p),v=new Float32Array(p),x=t.createBuffer(o.numberOfChannels,o.length,o.sampleRate),T=o.numberOfChannels;for(let S=0;S<T;S+=1){const A=o.getChannelData(S),D=x.getChannelData(S);g.fill(0),v.fill(0),Dy(l,d,u,f,m,g,v,0,p,A,D)}return x},WS=(o,t,s,a,l)=>(u,d)=>{const f=new WeakMap;let m=null;const p=async(g,v)=>{let x=null,T=t(g);const S=_n(T,v);if(v.createIIRFilter===void 0?x=o(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(T=v.createIIRFilter(d,u)),f.set(v,x===null?T:x),x!==null){if(m===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new s(g.context.destination.channelCount,g.context.length,v.sampleRate);m=(async()=>{await a(g,D,D.destination);const C=await l(D);return ZS(C,v,u,d)})()}const A=await m;return x.buffer=A,x.start(0),x}return await a(g,v,T),T};return{render(g,v){const x=f.get(v);return x!==void 0?Promise.resolve(x):p(g,v)}}},KS=(o,t,s,a,l,u)=>d=>(f,m)=>{const p=o.get(f);if(p===void 0){if(!d&&u(f)){const g=a(f),{outputs:v}=s(f);for(const x of v)if(ul(x)){const T=a(x[0]);t(g,T,x[1],x[2])}else{const T=l(x[0]);g.disconnect(T,x[1])}}o.set(f,m)}else o.set(f,p+m)},JS=(o,t)=>s=>{const a=o.get(s);return t(a)||t(s)},$S=(o,t)=>s=>o.has(s)||t(s),tT=(o,t)=>s=>o.has(s)||t(s),eT=(o,t)=>s=>{const a=o.get(s);return t(a)||t(s)},nT=o=>t=>o!==null&&t instanceof o,sT=o=>t=>o!==null&&typeof o.AudioNode=="function"&&t instanceof o.AudioNode,iT=o=>t=>o!==null&&typeof o.AudioParam=="function"&&t instanceof o.AudioParam,aT=(o,t)=>s=>o(s)||t(s),rT=o=>t=>o!==null&&t instanceof o,oT=o=>o!==null&&o.isSecureContext,lT=async(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,A)=>o(t,t)&&o(s,s)&&o(l,l)&&o(u,u)&&o(f,f)&&o(m,m)&&o(p,p)&&o(g,g)&&o(v,v)&&o(x,x)&&o(T,T)?(await Promise.all([o(a,a),o(d,d),o(S,S),o(A,A)])).every(C=>C):!1,cT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u),m=t(f,d);if(a(f))throw TypeError();super(u,!0,m,null),this._nativeMediaElementAudioSourceNode=m}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},uT={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},hT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u);if(a(f))throw new TypeError;const m={...uT,...d},p=t(f,m);super(u,!1,p,null),this._nativeMediaStreamAudioDestinationNode=p}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},dT=(o,t,s,a)=>class extends o{constructor(u,d){const f=s(u),m=t(f,d);if(a(f))throw new TypeError;super(u,!0,m,null),this._nativeMediaStreamAudioSourceNode=m}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},fT=(o,t,s)=>class extends o{constructor(l,u){const d=s(l),f=t(d,u);super(l,!0,f,null)}},pT=(o,t,s,a,l,u)=>class extends s{constructor(f,m){super(f),this._nativeContext=f,du.set(this,f),a(f)&&l.set(f,new Set),this._destination=new o(this,m),this._listener=t(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const m=typeof f=="function"?u(this,f):null;this._nativeContext.onstatechange=m;const p=this._nativeContext.onstatechange;this._onstatechange=p!==null&&p===m?f:p}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},el=o=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const s=o.decodeAudioData(t.buffer,()=>{});return s===void 0?!1:(s.catch(()=>{}),!0)}catch{}return!1},mT=(o,t)=>(s,a,l)=>{const u=new Set;return s.connect=(d=>(f,m=0,p=0)=>{const g=u.size===0;if(t(f))return d.call(s,f,m,p),o(u,[f,m,p],v=>v[0]===f&&v[1]===m&&v[2]===p,!0),g&&a(),f;d.call(s,f,m),o(u,[f,m],v=>v[0]===f&&v[1]===m,!0),g&&a()})(s.connect),s.disconnect=(d=>(f,m,p)=>{const g=u.size>0;if(f===void 0)d.apply(s),u.clear();else if(typeof f=="number"){d.call(s,f);for(const x of u)x[1]===f&&u.delete(x)}else{t(f)?d.call(s,f,m,p):d.call(s,f,m);for(const x of u)x[0]===f&&(m===void 0||x[1]===m)&&(p===void 0||x[2]===p)&&u.delete(x)}const v=u.size===0;g&&v&&l()})(s.disconnect),s},xe=(o,t,s)=>{const a=t[s];a!==void 0&&a!==o[s]&&(o[s]=a)},Ye=(o,t)=>{xe(o,t,"channelCount"),xe(o,t,"channelCountMode"),xe(o,t,"channelInterpretation")},P0=o=>typeof o.getFloatTimeDomainData=="function",gT=o=>{o.getFloatTimeDomainData=t=>{const s=new Uint8Array(t.length);o.getByteTimeDomainData(s);const a=Math.max(s.length,o.fftSize);for(let l=0;l<a;l+=1)t[l]=(s[l]-128)*.0078125;return t}},_T=(o,t)=>(s,a)=>{const l=s.createAnalyser();if(Ye(l,a),!(a.maxDecibels>a.minDecibels))throw t();return xe(l,a,"fftSize"),xe(l,a,"maxDecibels"),xe(l,a,"minDecibels"),xe(l,a,"smoothingTimeConstant"),o(P0,()=>P0(l))||gT(l),l},yT=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,Re=(o,t,s)=>{const a=t[s];a!==void 0&&a!==o[s].value&&(o[s].value=a)},vT=o=>{o.start=(t=>{let s=!1;return(a=0,l=0,u)=>{if(s)throw nn();t.call(o,a,l,u),s=!0}})(o.start)},xf=o=>{o.start=(t=>(s=0,a=0,l)=>{if(typeof l=="number"&&l<0||a<0||s<0)throw new RangeError("The parameters can't be negative.");t.call(o,s,a,l)})(o.start)},Sf=o=>{o.stop=(t=>(s=0)=>{if(s<0)throw new RangeError("The parameter can't be negative.");t.call(o,s)})(o.stop)},bT=(o,t,s,a,l,u,d,f,m,p,g)=>(v,x)=>{const T=v.createBufferSource();return Ye(T,x),Re(T,x,"playbackRate"),xe(T,x,"buffer"),xe(T,x,"loop"),xe(T,x,"loopEnd"),xe(T,x,"loopStart"),t(s,()=>s(v))||vT(T),t(a,()=>a(v))||m(T),t(l,()=>l(v))||p(T,v),t(u,()=>u(v))||xf(T),t(d,()=>d(v))||g(T,v),t(f,()=>f(v))||Sf(T),o(v,T),T},xT=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,ST=(o,t)=>(s,a,l)=>{const u=s.destination;if(u.channelCount!==a)try{u.channelCount=a}catch{}l&&u.channelCountMode!=="explicit"&&(u.channelCountMode="explicit"),u.maxChannelCount===0&&Object.defineProperty(u,"maxChannelCount",{value:a});const d=o(s,{channelCount:a,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:1});return t(d,"channelCount",f=>()=>f.call(d),f=>m=>{f.call(d,m);try{u.channelCount=m}catch(p){if(m>u.maxChannelCount)throw p}}),t(d,"channelCountMode",f=>()=>f.call(d),f=>m=>{f.call(d,m),u.channelCountMode=m}),t(d,"channelInterpretation",f=>()=>f.call(d),f=>m=>{f.call(d,m),u.channelInterpretation=m}),Object.defineProperty(d,"maxChannelCount",{get:()=>u.maxChannelCount}),d.connect(u),d},TT=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,wT=o=>{const{port1:t}=new MessageChannel;try{t.postMessage(o)}finally{t.close()}},AT=(o,t,s,a,l)=>(u,d,f,m,p,g)=>{if(f!==null)try{const v=new f(u,m,g),x=new Map;let T=null;if(Object.defineProperties(v,{channelCount:{get:()=>g.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>T,set:S=>{typeof T=="function"&&v.removeEventListener("processorerror",T),T=typeof S=="function"?S:null,typeof T=="function"&&v.addEventListener("processorerror",T)}}}),v.addEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const D=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(D!==null){const C=x.get(A[1]);C!==void 0?A[1]=C:(A[1]=F=>{F.type==="error"?(Object.defineProperties(F,{type:{value:"processorerror"}}),D(F)):D(new ErrorEvent(A[0],{...F}))},x.set(D,A[1]))}}return S.call(v,"error",A[1],A[2]),S.call(v,...A)})(v.addEventListener),v.removeEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const D=x.get(A[1]);D!==void 0&&(x.delete(A[1]),A[1]=D)}return S.call(v,"error",A[1],A[2]),S.call(v,A[0],A[1],A[2])})(v.removeEventListener),g.numberOfOutputs!==0){const S=s(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(S).connect(u.destination),l(v,()=>S.disconnect(),()=>S.connect(u.destination))}return v}catch(v){throw v.code===11?a():v}if(p===void 0)throw a();return wT(g),t(u,d,p,g)},Oy=(o,t)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*t))))),CT=o=>new Promise((t,s)=>{const{port1:a,port2:l}=new MessageChannel;a.onmessage=({data:u})=>{a.close(),l.close(),t(u)},a.onmessageerror=({data:u})=>{a.close(),l.close(),s(u)},l.postMessage(o)}),NT=async(o,t)=>{const s=await CT(t);return new o(s)},ET=(o,t,s,a)=>{let l=nf.get(o);l===void 0&&(l=new WeakMap,nf.set(o,l));const u=NT(s,a);return l.set(t,u),u},DT=(o,t,s,a,l,u,d,f,m,p,g,v,x)=>(T,S,A,D)=>{if(D.numberOfInputs===0&&D.numberOfOutputs===0)throw m();const C=Array.isArray(D.outputChannelCount)?D.outputChannelCount:Array.from(D.outputChannelCount);if(C.some(yt=>yt<1))throw m();if(C.length!==D.numberOfOutputs)throw t();if(D.channelCountMode!=="explicit")throw m();const F=D.channelCount*D.numberOfInputs,M=C.reduce((yt,Ct)=>yt+Ct,0),K=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(F+K>6||M>6)throw m();const E=new MessageChannel,q=[],L=[];for(let yt=0;yt<D.numberOfInputs;yt+=1)q.push(d(T,{channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:1})),L.push(l(T,{channelCount:D.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:D.channelCount}));const R=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:yt,maxValue:Ct,minValue:vt,name:zt}of A.parameterDescriptors){const Ut=u(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D.parameterData[zt]!==void 0?D.parameterData[zt]:yt===void 0?0:yt});Object.defineProperties(Ut.offset,{defaultValue:{get:()=>yt===void 0?0:yt},maxValue:{get:()=>Ct===void 0?xn:Ct},minValue:{get:()=>vt===void 0?In:vt}}),R.push(Ut)}const W=a(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,F+K)}),Z=Oy(S,T.sampleRate),I=f(T,Z,F+K,Math.max(1,M)),G=l(T,{channelCount:Math.max(1,M),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,M)}),nt=[];for(let yt=0;yt<D.numberOfOutputs;yt+=1)nt.push(a(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[yt]}));for(let yt=0;yt<D.numberOfInputs;yt+=1){q[yt].connect(L[yt]);for(let Ct=0;Ct<D.channelCount;Ct+=1)L[yt].connect(W,Ct,yt*D.channelCount+Ct)}const at=new Ny(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:yt},Ct)=>{const vt=R[Ct];return vt.connect(W,0,F+Ct),vt.start(0),[yt,vt.offset]}));W.connect(I);let gt=D.channelInterpretation,O=null;const Q=D.numberOfOutputs===0?[I]:nt,rt={get bufferSize(){return Z},get channelCount(){return D.channelCount},set channelCount(yt){throw s()},get channelCountMode(){return D.channelCountMode},set channelCountMode(yt){throw s()},get channelInterpretation(){return gt},set channelInterpretation(yt){for(const Ct of q)Ct.channelInterpretation=yt;gt=yt},get context(){return I.context},get inputs(){return q},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get onprocessorerror(){return O},set onprocessorerror(yt){typeof O=="function"&&rt.removeEventListener("processorerror",O),O=typeof yt=="function"?yt:null,typeof O=="function"&&rt.addEventListener("processorerror",O)},get parameters(){return at},get port(){return E.port2},addEventListener(...yt){return I.addEventListener(yt[0],yt[1],yt[2])},connect:o.bind(null,Q),disconnect:p.bind(null,Q),dispatchEvent(...yt){return I.dispatchEvent(yt[0])},removeEventListener(...yt){return I.removeEventListener(yt[0],yt[1],yt[2])}},pt=new Map;E.port1.addEventListener=(yt=>(...Ct)=>{if(Ct[0]==="message"){const vt=typeof Ct[1]=="function"?Ct[1]:typeof Ct[1]=="object"&&Ct[1]!==null&&typeof Ct[1].handleEvent=="function"?Ct[1].handleEvent:null;if(vt!==null){const zt=pt.get(Ct[1]);zt!==void 0?Ct[1]=zt:(Ct[1]=Ut=>{g(T.currentTime,T.sampleRate,()=>vt(Ut))},pt.set(vt,Ct[1]))}}return yt.call(E.port1,Ct[0],Ct[1],Ct[2])})(E.port1.addEventListener),E.port1.removeEventListener=(yt=>(...Ct)=>{if(Ct[0]==="message"){const vt=pt.get(Ct[1]);vt!==void 0&&(pt.delete(Ct[1]),Ct[1]=vt)}return yt.call(E.port1,Ct[0],Ct[1],Ct[2])})(E.port1.removeEventListener);let w=null;Object.defineProperty(E.port1,"onmessage",{get:()=>w,set:yt=>{typeof w=="function"&&E.port1.removeEventListener("message",w),w=typeof yt=="function"?yt:null,typeof w=="function"&&(E.port1.addEventListener("message",w),E.port1.start())}}),A.prototype.port=E.port1;let H=null;ET(T,rt,A,D).then(yt=>H=yt);const dt=iu(D.numberOfInputs,D.channelCount),xt=iu(D.numberOfOutputs,C),bt=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((yt,{name:Ct})=>({...yt,[Ct]:new Float32Array(128)}),{});let _t=!0;const Zt=()=>{D.numberOfOutputs>0&&I.disconnect(G);for(let yt=0,Ct=0;yt<D.numberOfOutputs;yt+=1){const vt=nt[yt];for(let zt=0;zt<C[yt];zt+=1)G.disconnect(vt,Ct+zt,zt);Ct+=C[yt]}},ft=new Map;I.onaudioprocess=({inputBuffer:yt,outputBuffer:Ct})=>{if(H!==null){const vt=v(rt);for(let zt=0;zt<Z;zt+=128){for(let Ut=0;Ut<D.numberOfInputs;Ut+=1)for(let ne=0;ne<D.channelCount;ne+=1)su(yt,dt[Ut],ne,ne,zt);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:Ut},ne)=>{su(yt,bt,Ut,F+ne,zt)});for(let Ut=0;Ut<D.numberOfInputs;Ut+=1)for(let ne=0;ne<C[Ut];ne+=1)xt[Ut][ne].byteLength===0&&(xt[Ut][ne]=new Float32Array(128));try{const Ut=dt.map((Ne,Qe)=>{if(vt[Qe].size>0)return ft.set(Qe,Z/128),Ne;const Kn=ft.get(Qe);return Kn===void 0?[]:(Ne.every(ui=>ui.every(fn=>fn===0))&&(Kn===1?ft.delete(Qe):ft.set(Qe,Kn-1)),Ne)});_t=g(T.currentTime+zt/T.sampleRate,T.sampleRate,()=>H.process(Ut,xt,bt));for(let Ne=0,Qe=0;Ne<D.numberOfOutputs;Ne+=1){for(let Ze=0;Ze<C[Ne];Ze+=1)Ey(Ct,xt[Ne],Ze,Qe+Ze,zt);Qe+=C[Ne]}}catch(Ut){_t=!1,rt.dispatchEvent(new ErrorEvent("processorerror",{colno:Ut.colno,filename:Ut.filename,lineno:Ut.lineno,message:Ut.message}))}if(!_t){for(let Ut=0;Ut<D.numberOfInputs;Ut+=1){q[Ut].disconnect(L[Ut]);for(let ne=0;ne<D.channelCount;ne+=1)L[zt].disconnect(W,ne,Ut*D.channelCount+ne)}if(A.parameterDescriptors!==void 0){const Ut=A.parameterDescriptors.length;for(let ne=0;ne<Ut;ne+=1){const Ne=R[ne];Ne.disconnect(W,0,F+ne),Ne.stop()}}W.disconnect(I),I.onaudioprocess=null,ee?Zt():Ae();break}}}};let ee=!1;const Jt=d(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),re=()=>I.connect(Jt).connect(T.destination),Ae=()=>{I.disconnect(Jt),Jt.disconnect()},Wn=()=>{if(_t){Ae(),D.numberOfOutputs>0&&I.connect(G);for(let yt=0,Ct=0;yt<D.numberOfOutputs;yt+=1){const vt=nt[yt];for(let zt=0;zt<C[yt];zt+=1)G.connect(vt,Ct+zt,zt);Ct+=C[yt]}}ee=!0},yn=()=>{_t&&(re(),Zt()),ee=!1};return re(),x(rt,Wn,yn)},My=(o,t)=>{const s=o.createBiquadFilter();return Ye(s,t),Re(s,t,"Q"),Re(s,t,"detune"),Re(s,t,"frequency"),Re(s,t,"gain"),xe(s,t,"type"),s},OT=(o,t)=>(s,a)=>{const l=s.createChannelMerger(a.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&t(s,l),Ye(l,a),l},MT=o=>{const t=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>t,set:s=>{if(s!==t)throw nn()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:s=>{if(s!=="explicit")throw nn()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:s=>{if(s!=="discrete")throw nn()}})},hl=(o,t)=>{const s=o.createChannelSplitter(t.numberOfOutputs);return Ye(s,t),MT(s),s},RT=(o,t,s,a,l)=>(u,d)=>{if(u.createConstantSource===void 0)return s(u,d);const f=u.createConstantSource();return Ye(f,d),Re(f,d,"offset"),t(a,()=>a(u))||xf(f),t(l,()=>l(u))||Sf(f),o(u,f),f},Er=(o,t)=>(o.connect=t.connect.bind(t),o.disconnect=t.disconnect.bind(t),o),kT=(o,t,s,a)=>(l,{offset:u,...d})=>{const f=l.createBuffer(1,2,44100),m=t(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),p=s(l,{...d,gain:u}),g=f.getChannelData(0);g[0]=1,g[1]=1,m.buffer=f,m.loop=!0;const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(S){p.channelCount=S},get channelCountMode(){return p.channelCountMode},set channelCountMode(S){p.channelCountMode=S},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(S){p.channelInterpretation=S},get context(){return p.context},get inputs(){return[]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get offset(){return p.gain},get onended(){return m.onended},set onended(S){m.onended=S},addEventListener(...S){return m.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return m.dispatchEvent(S[0])},removeEventListener(...S){return m.removeEventListener(S[0],S[1],S[2])},start(S=0){m.start.call(m,S)},stop(S=0){m.stop.call(m,S)}},x=()=>m.connect(p),T=()=>m.disconnect(p);return o(l,m),a(Er(v,p),x,T)},jT=(o,t)=>(s,a)=>{const l=s.createConvolver();if(Ye(l,a),a.disableNormalization===l.normalize&&(l.normalize=!a.disableNormalization),xe(l,a,"buffer"),a.channelCount>2||(t(l,"channelCount",u=>()=>u.call(l),u=>d=>{if(d>2)throw o();return u.call(l,d)}),a.channelCountMode==="max"))throw o();return t(l,"channelCountMode",u=>()=>u.call(l),u=>d=>{if(d==="max")throw o();return u.call(l,d)}),l},Ry=(o,t)=>{const s=o.createDelay(t.maxDelayTime);return Ye(s,t),Re(s,t,"delayTime"),s},qT=o=>(t,s)=>{const a=t.createDynamicsCompressor();if(Ye(a,s),s.channelCount>2||s.channelCountMode==="max")throw o();return Re(a,s,"attack"),Re(a,s,"knee"),Re(a,s,"ratio"),Re(a,s,"release"),Re(a,s,"threshold"),a},jn=(o,t)=>{const s=o.createGain();return Ye(s,t),Re(s,t,"gain"),s},VT=o=>(t,s,a)=>{if(t.createIIRFilter===void 0)return o(t,s,a);const l=t.createIIRFilter(a.feedforward,a.feedback);return Ye(l,a),l};function zT(o,t){const s=t[0]*t[0]+t[1]*t[1];return[(o[0]*t[0]+o[1]*t[1])/s,(o[1]*t[0]-o[0]*t[1])/s]}function BT(o,t){return[o[0]*t[0]-o[1]*t[1],o[0]*t[1]+o[1]*t[0]]}function Y0(o,t){let s=[0,0];for(let a=o.length-1;a>=0;a-=1)s=BT(s,t),s[0]+=o[a];return s}const LT=(o,t,s,a)=>(l,u,{channelCount:d,channelCountMode:f,channelInterpretation:m,feedback:p,feedforward:g})=>{const v=Oy(u,l.sampleRate),x=p instanceof Float64Array?p:new Float64Array(p),T=g instanceof Float64Array?g:new Float64Array(g),S=x.length,A=T.length,D=Math.min(S,A);if(S===0||S>20)throw a();if(x[0]===0)throw t();if(A===0||A>20)throw a();if(T[0]===0)throw t();if(x[0]!==1){for(let R=0;R<A;R+=1)T[R]/=x[0];for(let R=1;R<S;R+=1)x[R]/=x[0]}const C=s(l,v,d,d);C.channelCount=d,C.channelCountMode=f,C.channelInterpretation=m;const F=32,M=[],K=[],E=[];for(let R=0;R<d;R+=1){M.push(0);const W=new Float32Array(F),Z=new Float32Array(F);W.fill(0),Z.fill(0),K.push(W),E.push(Z)}C.onaudioprocess=R=>{const W=R.inputBuffer,Z=R.outputBuffer,I=W.numberOfChannels;for(let G=0;G<I;G+=1){const nt=W.getChannelData(G),at=Z.getChannelData(G);M[G]=Dy(x,S,T,A,D,K[G],E[G],M[G],F,nt,at)}};const q=l.sampleRate/2;return Er({get bufferSize(){return v},get channelCount(){return C.channelCount},set channelCount(R){C.channelCount=R},get channelCountMode(){return C.channelCountMode},set channelCountMode(R){C.channelCountMode=R},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(R){C.channelInterpretation=R},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener(...R){return C.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return C.dispatchEvent(R[0])},getFrequencyResponse(R,W,Z){if(R.length!==W.length||W.length!==Z.length)throw o();const I=R.length;for(let G=0;G<I;G+=1){const nt=-Math.PI*(R[G]/q),at=[Math.cos(nt),Math.sin(nt)],gt=Y0(T,at),O=Y0(x,at),Q=zT(gt,O);W[G]=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]),Z[G]=Math.atan2(Q[1],Q[0])}},removeEventListener(...R){return C.removeEventListener(R[0],R[1],R[2])}},C)},UT=(o,t)=>o.createMediaElementSource(t.mediaElement),FT=(o,t)=>{const s=o.createMediaStreamDestination();return Ye(s,t),s.numberOfOutputs===1&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s},IT=(o,{mediaStream:t})=>{const s=t.getAudioTracks();s.sort((u,d)=>u.id<d.id?-1:u.id>d.id?1:0);const a=s.slice(0,1),l=o.createMediaStreamSource(new MediaStream(a));return Object.defineProperty(l,"mediaStream",{value:t}),l},GT=(o,t)=>(s,{mediaStreamTrack:a})=>{if(typeof s.createMediaStreamTrackSource=="function")return s.createMediaStreamTrackSource(a);const l=new MediaStream([a]),u=s.createMediaStreamSource(l);if(a.kind!=="audio")throw o();if(t(s))throw new TypeError;return u},HT=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,PT=(o,t,s,a,l,u)=>(d,f)=>{const m=d.createOscillator();return Ye(m,f),Re(m,f,"detune"),Re(m,f,"frequency"),f.periodicWave!==void 0?m.setPeriodicWave(f.periodicWave):xe(m,f,"type"),t(s,()=>s(d))||xf(m),t(a,()=>a(d))||u(m,d),t(l,()=>l(d))||Sf(m),o(d,m),m},YT=o=>(t,s)=>{const a=t.createPanner();return a.orientationX===void 0?o(t,s):(Ye(a,s),Re(a,s,"orientationX"),Re(a,s,"orientationY"),Re(a,s,"orientationZ"),Re(a,s,"positionX"),Re(a,s,"positionY"),Re(a,s,"positionZ"),xe(a,s,"coneInnerAngle"),xe(a,s,"coneOuterAngle"),xe(a,s,"coneOuterGain"),xe(a,s,"distanceModel"),xe(a,s,"maxDistance"),xe(a,s,"panningModel"),xe(a,s,"refDistance"),xe(a,s,"rolloffFactor"),a)},XT=(o,t,s,a,l,u,d,f,m,p)=>(g,{coneInnerAngle:v,coneOuterAngle:x,coneOuterGain:T,distanceModel:S,maxDistance:A,orientationX:D,orientationY:C,orientationZ:F,panningModel:M,positionX:K,positionY:E,positionZ:q,refDistance:L,rolloffFactor:R,...W})=>{const Z=g.createPanner();if(W.channelCount>2||W.channelCountMode==="max")throw d();Ye(Z,W);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},G=s(g,{...I,channelInterpretation:"speakers",numberOfInputs:6}),nt=a(g,{...W,gain:1}),at=a(g,{...I,gain:1}),gt=a(g,{...I,gain:0}),O=a(g,{...I,gain:0}),Q=a(g,{...I,gain:0}),rt=a(g,{...I,gain:0}),pt=a(g,{...I,gain:0}),w=l(g,256,6,1),H=u(g,{...I,curve:new Float32Array([1,1]),oversample:"none"});let ot=[D,C,F],dt=[K,E,q];const xt=new Float32Array(1);w.onaudioprocess=({inputBuffer:ft})=>{const ee=[m(ft,xt,0),m(ft,xt,1),m(ft,xt,2)];ee.some((re,Ae)=>re!==ot[Ae])&&(Z.setOrientation(...ee),ot=ee);const Jt=[m(ft,xt,3),m(ft,xt,4),m(ft,xt,5)];Jt.some((re,Ae)=>re!==dt[Ae])&&(Z.setPosition(...Jt),dt=Jt)},Object.defineProperty(gt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(rt.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pt.gain,"defaultValue",{get:()=>0});const bt={get bufferSize(){},get channelCount(){return Z.channelCount},set channelCount(ft){if(ft>2)throw d();nt.channelCount=ft,Z.channelCount=ft},get channelCountMode(){return Z.channelCountMode},set channelCountMode(ft){if(ft==="max")throw d();nt.channelCountMode=ft,Z.channelCountMode=ft},get channelInterpretation(){return Z.channelInterpretation},set channelInterpretation(ft){nt.channelInterpretation=ft,Z.channelInterpretation=ft},get coneInnerAngle(){return Z.coneInnerAngle},set coneInnerAngle(ft){Z.coneInnerAngle=ft},get coneOuterAngle(){return Z.coneOuterAngle},set coneOuterAngle(ft){Z.coneOuterAngle=ft},get coneOuterGain(){return Z.coneOuterGain},set coneOuterGain(ft){if(ft<0||ft>1)throw t();Z.coneOuterGain=ft},get context(){return Z.context},get distanceModel(){return Z.distanceModel},set distanceModel(ft){Z.distanceModel=ft},get inputs(){return[nt]},get maxDistance(){return Z.maxDistance},set maxDistance(ft){if(ft<0)throw new RangeError;Z.maxDistance=ft},get numberOfInputs(){return Z.numberOfInputs},get numberOfOutputs(){return Z.numberOfOutputs},get orientationX(){return at.gain},get orientationY(){return gt.gain},get orientationZ(){return O.gain},get panningModel(){return Z.panningModel},set panningModel(ft){Z.panningModel=ft},get positionX(){return Q.gain},get positionY(){return rt.gain},get positionZ(){return pt.gain},get refDistance(){return Z.refDistance},set refDistance(ft){if(ft<0)throw new RangeError;Z.refDistance=ft},get rolloffFactor(){return Z.rolloffFactor},set rolloffFactor(ft){if(ft<0)throw new RangeError;Z.rolloffFactor=ft},addEventListener(...ft){return nt.addEventListener(ft[0],ft[1],ft[2])},dispatchEvent(...ft){return nt.dispatchEvent(ft[0])},removeEventListener(...ft){return nt.removeEventListener(ft[0],ft[1],ft[2])}};v!==bt.coneInnerAngle&&(bt.coneInnerAngle=v),x!==bt.coneOuterAngle&&(bt.coneOuterAngle=x),T!==bt.coneOuterGain&&(bt.coneOuterGain=T),S!==bt.distanceModel&&(bt.distanceModel=S),A!==bt.maxDistance&&(bt.maxDistance=A),D!==bt.orientationX.value&&(bt.orientationX.value=D),C!==bt.orientationY.value&&(bt.orientationY.value=C),F!==bt.orientationZ.value&&(bt.orientationZ.value=F),M!==bt.panningModel&&(bt.panningModel=M),K!==bt.positionX.value&&(bt.positionX.value=K),E!==bt.positionY.value&&(bt.positionY.value=E),q!==bt.positionZ.value&&(bt.positionZ.value=q),L!==bt.refDistance&&(bt.refDistance=L),R!==bt.rolloffFactor&&(bt.rolloffFactor=R),(ot[0]!==1||ot[1]!==0||ot[2]!==0)&&Z.setOrientation(...ot),(dt[0]!==0||dt[1]!==0||dt[2]!==0)&&Z.setPosition(...dt);const _t=()=>{nt.connect(Z),o(nt,H,0,0),H.connect(at).connect(G,0,0),H.connect(gt).connect(G,0,1),H.connect(O).connect(G,0,2),H.connect(Q).connect(G,0,3),H.connect(rt).connect(G,0,4),H.connect(pt).connect(G,0,5),G.connect(w).connect(g.destination)},Zt=()=>{nt.disconnect(Z),f(nt,H,0,0),H.disconnect(at),at.disconnect(G),H.disconnect(gt),gt.disconnect(G),H.disconnect(O),O.disconnect(G),H.disconnect(Q),Q.disconnect(G),H.disconnect(rt),rt.disconnect(G),H.disconnect(pt),pt.disconnect(G),G.disconnect(w),w.disconnect(g.destination)};return p(Er(bt,Z),_t,Zt)},QT=o=>(t,{disableNormalization:s,imag:a,real:l})=>{const u=a instanceof Float32Array?a:new Float32Array(a),d=l instanceof Float32Array?l:new Float32Array(l),f=t.createPeriodicWave(d,u,{disableNormalization:s});if(Array.from(a).length<2)throw o();return f},dl=(o,t,s,a)=>o.createScriptProcessor(t,s,a),ZT=(o,t)=>(s,a)=>{const l=a.channelCountMode;if(l==="clamped-max")throw t();if(s.createStereoPanner===void 0)return o(s,a);const u=s.createStereoPanner();return Ye(u,a),Re(u,a,"pan"),Object.defineProperty(u,"channelCountMode",{get:()=>l,set:d=>{if(d!==l)throw t()}}),u},WT=(o,t,s,a,l,u)=>{const f=new Float32Array([1,1]),m=Math.PI/2,p={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...p,oversample:"none"},v=(S,A,D,C)=>{const F=new Float32Array(16385),M=new Float32Array(16385);for(let W=0;W<16385;W+=1){const Z=W/16384*m;F[W]=Math.cos(Z),M[W]=Math.sin(Z)}const K=s(S,{...p,gain:0}),E=a(S,{...g,curve:F}),q=a(S,{...g,curve:f}),L=s(S,{...p,gain:0}),R=a(S,{...g,curve:M});return{connectGraph(){A.connect(K),A.connect(q.inputs===void 0?q:q.inputs[0]),A.connect(L),q.connect(D),D.connect(E.inputs===void 0?E:E.inputs[0]),D.connect(R.inputs===void 0?R:R.inputs[0]),E.connect(K.gain),R.connect(L.gain),K.connect(C,0,0),L.connect(C,0,1)},disconnectGraph(){A.disconnect(K),A.disconnect(q.inputs===void 0?q:q.inputs[0]),A.disconnect(L),q.disconnect(D),D.disconnect(E.inputs===void 0?E:E.inputs[0]),D.disconnect(R.inputs===void 0?R:R.inputs[0]),E.disconnect(K.gain),R.disconnect(L.gain),K.disconnect(C,0,0),L.disconnect(C,0,1)}}},x=(S,A,D,C)=>{const F=new Float32Array(16385),M=new Float32Array(16385),K=new Float32Array(16385),E=new Float32Array(16385),q=Math.floor(16385/2);for(let Q=0;Q<16385;Q+=1)if(Q>q){const rt=(Q-q)/(16384-q)*m;F[Q]=Math.cos(rt),M[Q]=Math.sin(rt),K[Q]=0,E[Q]=1}else{const rt=Q/(16384-q)*m;F[Q]=1,M[Q]=0,K[Q]=Math.cos(rt),E[Q]=Math.sin(rt)}const L=t(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),R=s(S,{...p,gain:0}),W=a(S,{...g,curve:F}),Z=s(S,{...p,gain:0}),I=a(S,{...g,curve:M}),G=a(S,{...g,curve:f}),nt=s(S,{...p,gain:0}),at=a(S,{...g,curve:K}),gt=s(S,{...p,gain:0}),O=a(S,{...g,curve:E});return{connectGraph(){A.connect(L),A.connect(G.inputs===void 0?G:G.inputs[0]),L.connect(R,0),L.connect(Z,0),L.connect(nt,1),L.connect(gt,1),G.connect(D),D.connect(W.inputs===void 0?W:W.inputs[0]),D.connect(I.inputs===void 0?I:I.inputs[0]),D.connect(at.inputs===void 0?at:at.inputs[0]),D.connect(O.inputs===void 0?O:O.inputs[0]),W.connect(R.gain),I.connect(Z.gain),at.connect(nt.gain),O.connect(gt.gain),R.connect(C,0,0),nt.connect(C,0,0),Z.connect(C,0,1),gt.connect(C,0,1)},disconnectGraph(){A.disconnect(L),A.disconnect(G.inputs===void 0?G:G.inputs[0]),L.disconnect(R,0),L.disconnect(Z,0),L.disconnect(nt,1),L.disconnect(gt,1),G.disconnect(D),D.disconnect(W.inputs===void 0?W:W.inputs[0]),D.disconnect(I.inputs===void 0?I:I.inputs[0]),D.disconnect(at.inputs===void 0?at:at.inputs[0]),D.disconnect(O.inputs===void 0?O:O.inputs[0]),W.disconnect(R.gain),I.disconnect(Z.gain),at.disconnect(nt.gain),O.disconnect(gt.gain),R.disconnect(C,0,0),nt.disconnect(C,0,0),Z.disconnect(C,0,1),gt.disconnect(C,0,1)}}},T=(S,A,D,C,F)=>{if(A===1)return v(S,D,C,F);if(A===2)return x(S,D,C,F);throw l()};return(S,{channelCount:A,channelCountMode:D,pan:C,...F})=>{if(D==="max")throw l();const M=o(S,{...F,channelCount:1,channelCountMode:D,numberOfInputs:2}),K=s(S,{...F,channelCount:A,channelCountMode:D,gain:1}),E=s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:q,disconnectGraph:L}=T(S,A,K,E,M);Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"maxValue",{get:()=>1}),Object.defineProperty(E.gain,"minValue",{get:()=>-1});const R={get bufferSize(){},get channelCount(){return K.channelCount},set channelCount(G){K.channelCount!==G&&(W&&L(),{connectGraph:q,disconnectGraph:L}=T(S,G,K,E,M),W&&q()),K.channelCount=G},get channelCountMode(){return K.channelCountMode},set channelCountMode(G){if(G==="clamped-max"||G==="max")throw l();K.channelCountMode=G},get channelInterpretation(){return K.channelInterpretation},set channelInterpretation(G){K.channelInterpretation=G},get context(){return K.context},get inputs(){return[K]},get numberOfInputs(){return K.numberOfInputs},get numberOfOutputs(){return K.numberOfOutputs},get pan(){return E.gain},addEventListener(...G){return K.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return K.dispatchEvent(G[0])},removeEventListener(...G){return K.removeEventListener(G[0],G[1],G[2])}};let W=!1;const Z=()=>{q(),W=!0},I=()=>{L(),W=!1};return u(Er(R,M),Z,I)}},KT=(o,t,s,a,l,u,d)=>(f,m)=>{const p=f.createWaveShaper();if(u!==null&&u.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return s(f,m);Ye(p,m);const g=m.curve===null||m.curve instanceof Float32Array?m.curve:new Float32Array(m.curve);if(g!==null&&g.length<2)throw t();xe(p,{curve:g},"curve"),xe(p,m,"oversample");let v=null,x=!1;return d(p,"curve",A=>()=>A.call(p),A=>D=>(A.call(p,D),x&&(a(D)&&v===null?v=o(f,p):!a(D)&&v!==null&&(v(),v=null)),D)),l(p,()=>{x=!0,a(p.curve)&&(v=o(f,p))},()=>{x=!1,v!==null&&(v(),v=null)})},JT=(o,t,s,a,l)=>(u,{curve:d,oversample:f,...m})=>{const p=u.createWaveShaper(),g=u.createWaveShaper();Ye(p,m),Ye(g,m);const v=s(u,{...m,gain:1}),x=s(u,{...m,gain:-1}),T=s(u,{...m,gain:1}),S=s(u,{...m,gain:-1});let A=null,D=!1,C=null;const F={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(E){v.channelCount=E,x.channelCount=E,p.channelCount=E,T.channelCount=E,g.channelCount=E,S.channelCount=E},get channelCountMode(){return p.channelCountMode},set channelCountMode(E){v.channelCountMode=E,x.channelCountMode=E,p.channelCountMode=E,T.channelCountMode=E,g.channelCountMode=E,S.channelCountMode=E},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(E){v.channelInterpretation=E,x.channelInterpretation=E,p.channelInterpretation=E,T.channelInterpretation=E,g.channelInterpretation=E,S.channelInterpretation=E},get context(){return p.context},get curve(){return C},set curve(E){if(E!==null&&E.length<2)throw t();if(E===null)p.curve=E,g.curve=E;else{const q=E.length,L=new Float32Array(q+2-q%2),R=new Float32Array(q+2-q%2);L[0]=E[0],R[0]=-E[q-1];const W=Math.ceil((q+1)/2),Z=(q+1)/2-1;for(let I=1;I<W;I+=1){const G=I/W*Z,nt=Math.floor(G),at=Math.ceil(G);L[I]=nt===at?E[nt]:(1-(G-nt))*E[nt]+(1-(at-G))*E[at],R[I]=nt===at?-E[q-1-nt]:-((1-(G-nt))*E[q-1-nt])-(1-(at-G))*E[q-1-at]}L[W]=q%2===1?E[W-1]:(E[W-2]+E[W-1])/2,p.curve=L,g.curve=R}C=E,D&&(a(C)&&A===null?A=o(u,v):A!==null&&(A(),A=null))},get inputs(){return[v]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(E){p.oversample=E,g.oversample=E},addEventListener(...E){return v.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return v.dispatchEvent(E[0])},removeEventListener(...E){return v.removeEventListener(E[0],E[1],E[2])}};d!==null&&(F.curve=d instanceof Float32Array?d:new Float32Array(d)),f!==F.oversample&&(F.oversample=f);const M=()=>{v.connect(p).connect(T),v.connect(x).connect(g).connect(S).connect(T),D=!0,a(C)&&(A=o(u,v))},K=()=>{v.disconnect(p),p.disconnect(T),v.disconnect(x),x.disconnect(g),g.disconnect(S),S.disconnect(T),D=!1,A!==null&&(A(),A=null)};return l(Er(F,T),M,K)},Nn=()=>new DOMException("","NotSupportedError"),$T={numberOfChannels:1},tw=(o,t,s,a,l)=>class extends o{constructor(d,f,m){let p;if(typeof d=="number"&&f!==void 0&&m!==void 0)p={length:f,numberOfChannels:d,sampleRate:m};else if(typeof d=="object")p=d;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:v,sampleRate:x}={...$T,...p},T=a(v,g,x);t(el,()=>el(T))||T.addEventListener("statechange",(()=>{let S=0;const A=D=>{this._state==="running"&&(S>0?(T.removeEventListener("statechange",A),D.stopImmediatePropagation(),this._waitForThePromiseToSettle(D)):S+=1)};return A})()),super(T,v),this._length=g,this._nativeOfflineAudioContext=T,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(s()):(this._state="running",l(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ty(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=>this._waitForThePromiseToSettle(d))}},ew={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},nw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...ew,...p},x=s(g,v),T=u(g),S=T?a():null,A=m.sampleRate/2;super(m,!1,x,S),this._detune=t(this,T,x.detune,153600,-153600),this._frequency=t(this,T,x.frequency,A,-A),this._nativeOscillatorNode=x,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(m){const p=typeof m=="function"?d(this,m):null;this._nativeOscillatorNode.onended=p;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===p?m:g}get type(){return this._nativeOscillatorNode.type}set type(m){this._nativeOscillatorNode.type=m,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(m){this._nativeOscillatorNode.setPeriodicWave(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=m)}start(m=0){if(this._nativeOscillatorNode.start(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=m),this.context.state!=="closed"){yr(this);const p=()=>{this._nativeOscillatorNode.removeEventListener("ended",p),ni(this)&&ll(this)};this._nativeOscillatorNode.addEventListener("ended",p)}}stop(m=0){this._nativeOscillatorNode.stop(m),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=m)}},sw=(o,t,s,a,l)=>()=>{const u=new WeakMap;let d=null,f=null,m=null;const p=async(g,v)=>{let x=s(g);const T=_n(x,v);if(!T){const S={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,detune:x.detune.value,frequency:x.frequency.value,periodicWave:d===null?void 0:d,type:x.type};x=t(v,S),f!==null&&x.start(f),m!==null&&x.stop(m)}return u.set(v,x),T?(await o(v,g.detune,x.detune),await o(v,g.frequency,x.frequency)):(await a(v,g.detune,x.detune),await a(v,g.frequency,x.frequency)),await l(g,v,x),x};return{set periodicWave(g){d=g},set start(g){f=g},set stop(g){m=g},render(g,v){const x=u.get(v);return x!==void 0?Promise.resolve(x):p(g,v)}}},iw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},aw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...iw,...p},x=s(g,v),T=u(g),S=T?a():null;super(m,!1,x,S),this._nativePannerNode=x,this._orientationX=t(this,T,x.orientationX,xn,In),this._orientationY=t(this,T,x.orientationY,xn,In),this._orientationZ=t(this,T,x.orientationZ,xn,In),this._positionX=t(this,T,x.positionX,xn,In),this._positionY=t(this,T,x.positionY,xn,In),this._positionZ=t(this,T,x.positionZ,xn,In),d(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(m){this._nativePannerNode.coneInnerAngle=m}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(m){this._nativePannerNode.coneOuterAngle=m}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(m){this._nativePannerNode.coneOuterGain=m}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(m){this._nativePannerNode.distanceModel=m}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(m){this._nativePannerNode.maxDistance=m}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(m){this._nativePannerNode.panningModel=m}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(m){this._nativePannerNode.refDistance=m}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(m){this._nativePannerNode.rolloffFactor=m}},rw=(o,t,s,a,l,u,d,f,m,p)=>()=>{const g=new WeakMap;let v=null;const x=async(T,S)=>{let A=null,D=u(T);const C={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation},F={...C,coneInnerAngle:D.coneInnerAngle,coneOuterAngle:D.coneOuterAngle,coneOuterGain:D.coneOuterGain,distanceModel:D.distanceModel,maxDistance:D.maxDistance,panningModel:D.panningModel,refDistance:D.refDistance,rolloffFactor:D.rolloffFactor},M=_n(D,S);if("bufferSize"in D)A=a(S,{...C,gain:1});else if(!M){const K={...F,orientationX:D.orientationX.value,orientationY:D.orientationY.value,orientationZ:D.orientationZ.value,positionX:D.positionX.value,positionY:D.positionY.value,positionZ:D.positionZ.value};D=l(S,K)}if(g.set(S,A===null?D:A),A!==null){if(v===null){if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const I=new d(6,T.context.length,S.sampleRate),G=t(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});G.connect(I.destination),v=(async()=>{const nt=await Promise.all([T.orientationX,T.orientationY,T.orientationZ,T.positionX,T.positionY,T.positionZ].map(async(at,gt)=>{const O=s(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:gt===0?1:0});return await f(I,at,O.offset),O}));for(let at=0;at<6;at+=1)nt[at].connect(G,0,at),nt[at].start(0);return p(I)})()}const K=await v,E=a(S,{...C,gain:1});await m(T,S,E);const q=[];for(let I=0;I<K.numberOfChannels;I+=1)q.push(K.getChannelData(I));let L=[q[0][0],q[1][0],q[2][0]],R=[q[3][0],q[4][0],q[5][0]],W=a(S,{...C,gain:1}),Z=l(S,{...F,orientationX:L[0],orientationY:L[1],orientationZ:L[2],positionX:R[0],positionY:R[1],positionZ:R[2]});E.connect(W).connect(Z.inputs[0]),Z.connect(A);for(let I=128;I<K.length;I+=128){const G=[q[0][I],q[1][I],q[2][I]],nt=[q[3][I],q[4][I],q[5][I]];if(G.some((at,gt)=>at!==L[gt])||nt.some((at,gt)=>at!==R[gt])){L=G,R=nt;const at=I/S.sampleRate;W.gain.setValueAtTime(0,at),W=a(S,{...C,gain:0}),Z=l(S,{...F,orientationX:L[0],orientationY:L[1],orientationZ:L[2],positionX:R[0],positionY:R[1],positionZ:R[2]}),W.gain.setValueAtTime(1,at),E.connect(W).connect(Z.inputs[0]),Z.connect(A)}}return A}return M?(await o(S,T.orientationX,D.orientationX),await o(S,T.orientationY,D.orientationY),await o(S,T.orientationZ,D.orientationZ),await o(S,T.positionX,D.positionX),await o(S,T.positionY,D.positionY),await o(S,T.positionZ,D.positionZ)):(await f(S,T.orientationX,D.orientationX),await f(S,T.orientationY,D.orientationY),await f(S,T.orientationZ,D.orientationZ),await f(S,T.positionX,D.positionX),await f(S,T.positionY,D.positionY),await f(S,T.positionZ,D.positionZ)),Nr(D)?await m(T,S,D.inputs[0]):await m(T,S,D),D};return{render(T,S){const A=g.get(S);return A!==void 0?Promise.resolve(A):x(T,S)}}},ow={disableNormalization:!1},lw=(o,t,s,a)=>class ky{constructor(u,d){const f=t(u),m=a({...ow,...d}),p=o(f,m);return s.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ky.prototype||s.has(u)}},cw=(o,t)=>(s,a,l)=>(o(a).replay(l),t(a,s,l)),uw=(o,t,s)=>async(a,l,u)=>{const d=o(a);await Promise.all(d.activeInputs.map((f,m)=>Array.from(f).map(async([p,g])=>{const x=await t(p).render(p,l),T=a.context.destination;!s(p)&&(a!==T||!s(a))&&x.connect(u,g,m)})).reduce((f,m)=>[...f,...m],[]))},hw=(o,t,s)=>async(a,l,u)=>{const d=t(a);await Promise.all(Array.from(d.activeInputs).map(async([f,m])=>{const g=await o(f).render(f,l);s(f)||g.connect(u,m)}))},dw=(o,t,s,a)=>l=>o(el,()=>el(l))?Promise.resolve(o(a,a)).then(u=>{if(!u){const d=s(l,512,0,1);l.oncomplete=()=>{d.onaudioprocess=null,d.disconnect()},d.onaudioprocess=()=>l.currentTime,d.connect(l.destination)}return l.startRendering()}):new Promise(u=>{const d=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});l.oncomplete=f=>{d.disconnect(),u(f.renderedBuffer)},d.connect(l.destination),l.startRendering()}),fw=o=>(t,s)=>{o.set(t,s)},pw=o=>(t,s)=>o.set(t,s),mw=(o,t,s,a,l,u,d,f)=>(m,p)=>s(m).render(m,p).then(()=>Promise.all(Array.from(a(p)).map(g=>s(g).render(g,p)))).then(()=>l(p)).then(g=>(typeof g.copyFromChannel!="function"?(d(g),yf(g)):t(u,()=>u(g))||f(g),o.add(g),g)),gw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},_w=(o,t,s,a,l,u)=>class extends o{constructor(f,m){const p=l(f),g={...gw,...m},v=s(p,g),x=u(p),T=x?a():null;super(f,!1,v,T),this._pan=t(this,x,v.pan)}get pan(){return this._pan}},yw=(o,t,s,a,l)=>()=>{const u=new WeakMap,d=async(f,m)=>{let p=s(f);const g=_n(p,m);if(!g){const v={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=t(m,v)}return u.set(m,p),g?await o(m,f.pan,p.pan):await a(m,f.pan,p.pan),Nr(p)?await l(f,m,p.inputs[0]):await l(f,m,p),p};return{render(f,m){const p=u.get(m);return p!==void 0?Promise.resolve(p):d(f,m)}}},vw=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},bw=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createBuffer(1,1,44100);if(s.copyToChannel===void 0)return!0;const a=new Float32Array(2);try{s.copyFromChannel(a,0,0)}catch{return!1}return!0},xw=o=>()=>{if(o===null)return!1;if(o.prototype!==void 0&&o.prototype.close!==void 0)return!0;const t=new o,s=t.close!==void 0;try{t.close()}catch{}return s},Sw=o=>()=>{if(o===null)return Promise.resolve(!1);const t=new o(1,1,44100);return new Promise(s=>{let a=!0;const l=d=>{a&&(a=!1,t.startRendering(),s(d instanceof TypeError))};let u;try{u=t.decodeAudioData(null,()=>{},l)}catch(d){l(d)}u!==void 0&&u.catch(l)})},Tw=o=>()=>{if(o===null)return!1;let t;try{t=new o({latencyHint:"balanced"})}catch{return!1}return t.close(),!0},ww=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createGain(),a=s.connect(s)===s;return s.disconnect(s),a},Aw=(o,t)=>async()=>{if(o===null)return!0;if(t===null)return!1;const s=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new MessageChannel,l=new t(1,128,44100),u=URL.createObjectURL(s);let d=!1;try{await l.audioWorklet.addModule(u);const f=new o(l,"a",{numberOfOutputs:0}),m=l.createOscillator();await new Promise(p=>{f.port.onmessage=()=>p(),f.port.postMessage(a.port2,[a.port2])}),f.port.onmessage=()=>d=!0,m.connect(f),m.start(0),await l.startRendering(),d=await new Promise(p=>{a.port1.onmessage=({data:g})=>p(g===1),a.port1.postMessage(0)})}catch{}finally{a.port1.close(),URL.revokeObjectURL(u)}return d},Cw=(o,t)=>async()=>{if(o===null)return!0;if(t===null)return!1;const s=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),a=new t(1,128,44100),l=URL.createObjectURL(s);let u=!1,d=!1;try{await a.audioWorklet.addModule(l);const f=new o(a,"a",{numberOfOutputs:0}),m=a.createOscillator();f.port.onmessage=()=>u=!0,f.onprocessorerror=()=>d=!0,m.connect(f),m.start(0),await a.startRendering(),await new Promise(p=>setTimeout(p))}catch{}finally{URL.revokeObjectURL(l)}return u&&!d},Nw=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createChannelMerger();if(s.channelCountMode==="max")return!0;try{s.channelCount=2}catch{return!0}return!1},Ew=o=>()=>{if(o===null)return!1;const t=new o(1,1,44100);return t.createConstantSource===void 0?!0:t.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},Dw=o=>()=>{if(o===null)return!1;const t=new o(1,1,44100),s=t.createConvolver();s.buffer=t.createBuffer(1,1,t.sampleRate);try{s.buffer=t.createBuffer(1,1,t.sampleRate)}catch{return!1}return!0},Ow=o=>()=>{if(o===null)return!1;const s=new o(1,1,44100).createConvolver();try{s.channelCount=1}catch{return!1}return!0},Mw=o=>()=>o!==null&&o.hasOwnProperty("isSecureContext"),Rw=o=>()=>{if(o===null)return!1;const t=new o;try{return t.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{t.close()}},kw=(o,t)=>()=>{if(t===null)return Promise.resolve(!1);const s=new t(1,1,44100),a=o(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(l=>{s.oncomplete=()=>{a.disconnect(),l(s.currentTime!==0)},s.startRendering()})},jw=o=>()=>{if(o===null)return Promise.resolve(!1);const t=new o(1,1,44100);if(t.createStereoPanner===void 0||t.createConstantSource===void 0)return Promise.resolve(!0);const s=t.createConstantSource(),a=t.createStereoPanner();return s.channelCount=1,s.offset.value=1,a.channelCount=1,s.start(),s.connect(a).connect(t.destination),t.startRendering().then(l=>l.getChannelData(0)[0]!==1)},qw=()=>new DOMException("","UnknownError"),Vw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},zw=(o,t,s,a,l,u,d)=>class extends o{constructor(m,p){const g=l(m),v={...Vw,...p},x=s(g,v),S=u(g)?a():null;super(m,!0,x,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=x,d(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(m){if(m===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(m.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=m}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(m){this._nativeWaveShaperNode.oversample=m}},Bw=(o,t,s)=>()=>{const a=new WeakMap,l=async(u,d)=>{let f=t(u);if(!_n(f,d)){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=o(d,p)}return a.set(d,f),Nr(f)?await s(u,d,f.inputs[0]):await s(u,d,f),f};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},Lw=()=>typeof window>"u"?null:window,Uw=(o,t)=>s=>{s.copyFromChannel=(a,l,u=0)=>{const d=o(u),f=o(l);if(f>=s.numberOfChannels)throw t();const m=s.length,p=s.getChannelData(f),g=a.length;for(let v=d<0?-d:0;v+d<m&&v<g;v+=1)a[v]=p[v+d]},s.copyToChannel=(a,l,u=0)=>{const d=o(u),f=o(l);if(f>=s.numberOfChannels)throw t();const m=s.length,p=s.getChannelData(f),g=a.length;for(let v=d<0?-d:0;v+d<m&&v<g;v+=1)p[v+d]=a[v]}},Fw=o=>t=>{t.copyFromChannel=(s=>(a,l,u=0)=>{const d=o(u),f=o(l);if(d<t.length)return s.call(t,a,f,d)})(t.copyFromChannel),t.copyToChannel=(s=>(a,l,u=0)=>{const d=o(u),f=o(l);if(d<t.length)return s.call(t,a,f,d)})(t.copyToChannel)},Iw=o=>(t,s)=>{const a=s.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=a),o(t,"buffer",l=>()=>{const u=l.call(t);return u===a?null:u},l=>u=>l.call(t,u===null?a:u))},Gw=(o,t)=>(s,a)=>{a.channelCount=1,a.channelCountMode="explicit",Object.defineProperty(a,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(a,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const l=s.createBufferSource();t(a,()=>{const f=a.numberOfInputs;for(let m=0;m<f;m+=1)l.connect(a,0,m)},()=>l.disconnect(a))},jy=(o,t,s)=>o.copyFromChannel===void 0?o.getChannelData(s)[0]:(o.copyFromChannel(t,s),t[0]),qy=o=>{if(o===null)return!1;const t=o.length;return t%2!==0?o[Math.floor(t/2)]!==0:o[t/2-1]+o[t/2]!==0},fl=(o,t,s,a)=>{let l=o;for(;!l.hasOwnProperty(t);)l=Object.getPrototypeOf(l);const{get:u,set:d}=Object.getOwnPropertyDescriptor(l,t);Object.defineProperty(o,t,{get:s(u),set:a(d)})},Hw=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),Pw=o=>({...o,channelCount:o.numberOfOutputs}),Yw=o=>{const{imag:t,real:s}=o;return t===void 0?s===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(s,()=>0),real:s}:s===void 0?{...o,imag:t,real:Array.from(t,()=>0)}:{...o,imag:t,real:s}},Vy=(o,t,s)=>{try{o.setValueAtTime(t,s)}catch(a){if(a.code!==9)throw a;Vy(o,t,s+1e-7)}},Xw=o=>{const t=o.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Qw=o=>{const t=o.createBufferSource(),s=o.createBuffer(1,1,44100);t.buffer=s;try{t.start(0,1)}catch{return!1}return!0},Zw=o=>{const t=o.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Tf=o=>{const t=o.createOscillator();try{t.start(-1)}catch(s){return s instanceof RangeError}return!1},zy=o=>{const t=o.createBuffer(1,1,44100),s=o.createBufferSource();s.buffer=t,s.start(),s.stop();try{return s.stop(),!0}catch{return!1}},wf=o=>{const t=o.createOscillator();try{t.stop(-1)}catch(s){return s instanceof RangeError}return!1},Ww=o=>{const{port1:t,port2:s}=new MessageChannel;try{t.postMessage(o)}finally{t.close(),s.close()}},Kw=()=>{try{new DOMException}catch{return!1}return!0},Jw=()=>new Promise(o=>{const t=new ArrayBuffer(0),{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:l})=>o(l!==null),a.postMessage(t,[t])}),$w=o=>{o.start=(t=>(s=0,a=0,l)=>{const u=o.buffer,d=u===null?a:Math.min(u.duration,a);u!==null&&d>u.duration-.5/o.context.sampleRate?t.call(o,s,0,0):t.call(o,s,d,l)})(o.start)},By=(o,t)=>{const s=t.createGain();o.connect(s);const a=(l=>()=>{l.call(o,s),o.removeEventListener("ended",a)})(o.disconnect);o.addEventListener("ended",a),Er(o,s),o.stop=(l=>{let u=!1;return(d=0)=>{if(u)try{l.call(o,d)}catch{s.gain.setValueAtTime(0,d)}else l.call(o,d),u=!0}})(o.stop)},Dr=(o,t)=>s=>{const a={value:o};return Object.defineProperties(s,{currentTarget:a,target:a}),typeof t=="function"?t.call(o,s):t.handleEvent.call(o,s)},tA=i1(Ta),eA=u1(Ta),nA=SS(fu),Ly=new WeakMap,sA=US(Ly),hs=J1(new Map,new WeakMap),vs=Lw(),Uy=_T(hs,js),Af=LS(Tn),dn=uw(Tn,Af,xa),iA=m1(Uy,ve,dn),_e=GS(du),tn=HT(vs),ue=rT(tn),Fy=new WeakMap,Iy=RS(Dr),Ii=xT(vs),Cf=nT(Ii),Nf=sT(vs),Gy=iT(vs),vr=TT(vs),Be=U1(a1(gy),c1(tA,eA,tu,nA,eu,Tn,sA,ol,ve,Ta,ni,xa,Yc),hs,KS(tf,eu,Tn,ve,tl,ni),js,pu,Nn,yS(tu,tf,Tn,ve,tl,_e,ni,ue),AS(Fy,Tn,ys),Iy,_e,Cf,Nf,Gy,ue,vr),aA=p1(Be,iA,js,Uy,_e,ue),Ef=new WeakSet,X0=yT(vs),Hy=hS(new Uint32Array(1)),Df=Uw(Hy,js),Of=Fw(Hy),Py=_1(Ef,hs,Nn,X0,tn,vw(X0),Df,Of),mu=h1(jn),Yy=hw(Af,cl,xa),qs=aS(Yy),Or=bT(mu,hs,Xw,Qw,Zw,Tf,zy,wf,$w,Iw(fl),By),Vs=cw(FS(cl),Yy),rA=b1(qs,Or,ve,Vs,dn),xs=F1(r1(_y),Fy,_f,I1,Jx,$x,t1,e1,n1,Kd,py,Ii,Vy),oA=v1(Be,rA,xs,nn,Or,_e,ue,Dr),lA=D1(Be,O1,js,nn,ST(jn,fl),_e,ue,dn),cA=K1(qs,My,ve,Vs,dn),wa=pw(Ly),uA=W1(Be,xs,cA,pu,My,_e,ue,wa),Qi=mT(Ta,Nf),hA=Gw(nn,Qi),Zi=OT(Ii,hA),dA=eS(Zi,ve,dn),fA=tS(Be,dA,Zi,_e,ue),pA=iS(hl,ve,dn),mA=sS(Be,pA,hl,_e,ue,Pw),gA=kT(mu,Or,jn,Qi),Mr=RT(mu,hs,gA,Tf,wf),_A=uS(qs,Mr,ve,Vs,dn),yA=cS(Be,xs,_A,Mr,_e,ue,Dr),Xy=jT(Nn,fl),vA=pS(Xy,ve,dn),bA=fS(Be,vA,Xy,_e,ue,wa),xA=xS(qs,Ry,ve,Vs,dn),SA=bS(Be,xs,xA,Ry,_e,ue,wa),Qy=qT(Nn),TA=DS(qs,Qy,ve,Vs,dn),wA=ES(Be,xs,TA,Qy,Nn,_e,ue,wa),AA=zS(qs,jn,ve,Vs,dn),CA=VS(Be,xs,AA,jn,_e,ue),NA=LT(pu,nn,dl,Nn),gu=dw(hs,jn,dl,kw(jn,tn)),EA=WS(Or,ve,tn,dn,gu),DA=VT(NA),OA=QS(Be,DA,EA,_e,ue,wa),MA=M1(xs,Zi,Mr,dl,Nn,jy,ue,fl),Zy=new WeakMap,RA=pT(lA,MA,Iy,ue,Zy,Dr),Wy=PT(mu,hs,Tf,zy,wf,By),kA=sw(qs,Wy,ve,Vs,dn),jA=nw(Be,xs,Wy,kA,_e,ue,Dr),Ky=oS(Or),qA=JT(Ky,nn,jn,qy,Qi),_u=KT(Ky,nn,qA,qy,Qi,Ii,fl),VA=XT(tu,nn,Zi,jn,dl,_u,Nn,eu,jy,Qi),Jy=YT(VA),zA=rw(qs,Zi,Mr,jn,Jy,ve,tn,Vs,dn,gu),BA=aw(Be,xs,Jy,zA,_e,ue,wa),LA=QT(js),UA=lw(LA,_e,new WeakSet,Yw),FA=WT(Zi,hl,jn,_u,Nn,Qi),$y=ZT(FA,Nn),IA=yw(qs,$y,ve,Vs,dn),GA=_w(Be,xs,$y,IA,_e,ue),HA=Bw(_u,ve,dn),PA=zw(Be,nn,_u,HA,_e,ue,wa),tv=oT(vs),Mf=kS(vs),ev=new WeakMap,YA=HS(ev,tn),XA=tv?l1(hs,Nn,MS(vs),Mf,jS(s1),_e,YA,ue,vr,new WeakMap,new WeakMap,Cw(vr,tn),vs):void 0,QA=aT(Cf,ue),ZA=_S(Ef,hs,gS,OS,new WeakSet,_e,QA,Jc,el,Df,Of),nv=Q1(XA,aA,Py,oA,uA,fA,mA,yA,bA,ZA,SA,wA,CA,OA,RA,jA,BA,UA,GA,PA),WA=cT(Be,UT,_e,ue),KA=hT(Be,FT,_e,ue),JA=dT(Be,IT,_e,ue),$A=GT(nn,ue),tC=fT(Be,$A,_e),eC=E1(nv,nn,Nn,qw,WA,KA,JA,tC,Ii),Rf=PS(Zy),nC=d1(Rf),sv=rS(js),sC=TS(Rf),iv=CS(js),av=new WeakMap,iC=BS(av,ys),aC=DT(sv,js,nn,Zi,hl,Mr,jn,dl,Nn,iv,Mf,iC,Qi),rC=AT(nn,aC,jn,Nn,Qi),oC=X1(qs,sv,Or,Zi,hl,Mr,jn,sC,iv,Mf,ve,vr,tn,Vs,dn,gu),lC=IS(ev),cC=fw(av),Q0=tv?H1(nC,Be,xs,oC,rC,Tn,lC,_e,ue,vr,Hw,cC,Ww,Dr):void 0,uC=mS(Nn,tn),hC=mw(Ef,hs,Af,Rf,gu,Jc,Df,Of),dC=tw(nv,hs,nn,uC,hC),fC=JS(du,Cf),pC=$S(gf,Nf),mC=tT(_f,Gy),gC=eT(du,ue),_C=()=>lT(hs,bw(tn),xw(Ii),Sw(tn),Tw(Ii),ww(tn),Aw(vr,tn),Nw(tn),Ew(tn),Dw(tn),Ow(tn),Kw,Mw(vs),Rw(Ii),jw(tn),Jw);function kn(o){return o===void 0}function Vt(o){return o!==void 0}function rv(o){return typeof o=="function"}function Xn(o){return typeof o=="number"}function si(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function kf(o){return typeof o=="boolean"}function un(o){return Array.isArray(o)}function bs(o){return typeof o=="string"}function Wo(o){return bs(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function wt(o,t){if(!o)throw new Error(t)}function Pe(o,t,s=1/0){if(!(t<=o&&o<=s))throw new RangeError(`Value must be within [${t}, ${s}], got: ${o}`)}function jf(o){!o.isOffline&&o.state!=="running"&&Rr('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ov=!1,Z0=!1;function rf(o){ov=o}function lv(o){kn(o)&&ov&&!Z0&&(Z0=!0,Rr("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let qf=console;function yC(o){qf=o}function cv(...o){qf.log(...o)}function Rr(...o){qf.warn(...o)}const vC=Object.freeze(Object.defineProperty({__proto__:null,assert:wt,assertContextRunning:jf,assertRange:Pe,assertUsedScheduleTime:lv,enterScheduledCallback:rf,log:cv,setLogger:yC,warn:Rr},Symbol.toStringTag,{value:"Module"}));function bC(o){return new eC(o)}function xC(o,t,s){return new dC(o,t,s)}const Sn=typeof self=="object"?self:null,SC=Sn&&(Sn.hasOwnProperty("AudioContext")||Sn.hasOwnProperty("webkitAudioContext"));function TC(o,t,s){return wt(Vt(Q0),"AudioWorkletNode only works in a secure context (https or localhost)"),new(o instanceof(Sn==null?void 0:Sn.BaseAudioContext)?Sn==null?void 0:Sn.AudioWorkletNode:Q0)(o,t,s)}function Ss(o,t,s,a){var l=arguments.length,u=l<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,t,s,a);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(u=(l<3?d(u):l>3?d(t,s,u):d(t,s))||u);return l>3&&u&&Object.defineProperty(t,s,u),u}function pe(o,t,s,a){function l(u){return u instanceof s?u:new s(function(d){d(u)})}return new(s||(s=Promise))(function(u,d){function f(g){try{p(a.next(g))}catch(v){d(v)}}function m(g){try{p(a.throw(g))}catch(v){d(v)}}function p(g){g.done?u(g.value):l(g.value).then(f,m)}p((a=a.apply(o,t||[])).next())})}class wC{constructor(t,s,a,l){this._callback=t,this._type=s,this._minimumUpdateInterval=Math.max(128/(l||44100),.001),this.updateInterval=a,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),s=URL.createObjectURL(t),a=new Worker(s);a.onmessage=this._callback.bind(this),this._worker=a}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var s;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((s=this._worker)===null||s===void 0||s.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Sa(o){return mC(o)}function Gi(o){return pC(o)}function Xc(o){return gC(o)}function mr(o){return fC(o)}function AC(o){return o instanceof Py}function CC(o,t){return o==="value"||Sa(t)||Gi(t)||AC(t)}function ls(o,...t){if(!t.length)return o;const s=t.shift();if(si(o)&&si(s))for(const a in s)CC(a,s[a])?o[a]=s[a]:si(s[a])?(o[a]||Object.assign(o,{[a]:{}}),ls(o[a],s[a])):Object.assign(o,{[a]:s[a]});return ls(o,...t)}function NC(o,t){return o.length===t.length&&o.every((s,a)=>t[a]===s)}function $(o,t,s=[],a){const l={},u=Array.from(t);if(si(u[0])&&a&&!Reflect.has(u[0],a)&&(Object.keys(u[0]).some(f=>Reflect.has(o,f))||(ls(l,{[a]:u[0]}),s.splice(s.indexOf(a),1),u.shift())),u.length===1&&si(u[0]))ls(l,u[0]);else for(let d=0;d<s.length;d++)Vt(u[d])&&(l[s[d]]=u[d]);return ls(o,l)}function EC(o){return o.constructor.getDefaults()}function cs(o,t){return kn(o)?t:o}function ln(o,t){return t.forEach(s=>{Reflect.has(o,s)&&delete o[s]}),o}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */let oi=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Sn&&this.toString()===Sn.TONE_DEBUG_CLASS)&&cv(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};oi.version=pf;const Vf=1e-6;function br(o,t){return o>t+Vf}function of(o,t){return br(o,t)||gs(o,t)}function au(o,t){return o+Vf<t}function gs(o,t){return Math.abs(o-t)<Vf}function Aa(o,t,s){return Math.max(Math.min(o,s),t)}class Pn extends oi{constructor(){super(),this.name="Timeline",this._timeline=[];const t=$(Pn.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(wt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const s=this._timeline[this.length-1];wt(of(t.time,s.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const s=this._search(t.time);this._timeline.splice(s+1,0,t)}if(this.length>this.memory){const s=this.length-this.memory;this._timeline.splice(0,s)}return this}remove(t){const s=this._timeline.indexOf(t);return s!==-1&&this._timeline.splice(s,1),this}get(t,s="time"){const a=this._search(t,s);return a!==-1?this._timeline[a]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,s="time"){const a=this._search(t,s);return a+1<this._timeline.length?this._timeline[a+1]:null}getBefore(t){const s=this._timeline.length;if(s>0&&this._timeline[s-1].time<t)return this._timeline[s-1];const a=this._search(t);return a-1>=0?this._timeline[a-1]:null}cancel(t){if(this._timeline.length>1){let s=this._search(t);if(s>=0)if(gs(this._timeline[s].time,t)){for(let a=s;a>=0&&gs(this._timeline[a].time,t);a--)s=a;this._timeline=this._timeline.slice(0,s)}else this._timeline=this._timeline.slice(0,s+1);else this._timeline=[]}else this._timeline.length===1&&of(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const s=this._search(t);return s>=0&&(this._timeline=this._timeline.slice(s+1)),this}previousEvent(t){const s=this._timeline.indexOf(t);return s>0?this._timeline[s-1]:null}_search(t,s="time"){if(this._timeline.length===0)return-1;let a=0;const l=this._timeline.length;let u=l;if(l>0&&this._timeline[l-1][s]<=t)return l-1;for(;a<u;){let d=Math.floor(a+(u-a)/2);const f=this._timeline[d],m=this._timeline[d+1];if(gs(f[s],t)){for(let p=d;p<this._timeline.length;p++){const g=this._timeline[p];if(gs(g[s],t))d=p;else break}return d}else{if(au(f[s],t)&&br(m[s],t))return d;br(f[s],t)?u=d:a=d+1}}return-1}_iterate(t,s=0,a=this._timeline.length-1){this._timeline.slice(s,a+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,s){const a=this._search(t);return a!==-1&&this._iterate(s,0,a),this}forEachAfter(t,s){const a=this._search(t);return this._iterate(s,a+1),this}forEachBetween(t,s,a){let l=this._search(t),u=this._search(s);return l!==-1&&u!==-1?(this._timeline[l].time!==t&&(l+=1),this._timeline[u].time===s&&(u-=1),this._iterate(a,l,u)):l===-1&&this._iterate(a,0,u),this}forEachFrom(t,s){let a=this._search(t);for(;a>=0&&this._timeline[a].time>=t;)a--;return this._iterate(s,a+1),this}forEachAtTime(t,s){const a=this._search(t);if(a!==-1&&gs(this._timeline[a].time,t)){let l=a;for(let u=a;u>=0&&gs(this._timeline[u].time,t);u--)l=u;this._iterate(u=>{s(u)},l,a)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const uv=[];function yu(o){uv.push(o)}function DC(o){uv.forEach(t=>t(o))}const hv=[];function vu(o){hv.push(o)}function OC(o){hv.forEach(t=>t(o))}class kr extends oi{constructor(){super(...arguments),this.name="Emitter"}on(t,s){return t.split(/\W+/).forEach(l=>{kn(this._events)&&(this._events={}),this._events.hasOwnProperty(l)||(this._events[l]=[]),this._events[l].push(s)}),this}once(t,s){const a=(...l)=>{s(...l),this.off(t,a)};return this.on(t,a),this}off(t,s){return t.split(/\W+/).forEach(l=>{if(kn(this._events)&&(this._events={}),this._events.hasOwnProperty(l))if(kn(s))this._events[l]=[];else{const u=this._events[l];for(let d=u.length-1;d>=0;d--)u[d]===s&&u.splice(d,1)}}),this}emit(t,...s){if(this._events&&this._events.hasOwnProperty(t)){const a=this._events[t].slice(0);for(let l=0,u=a.length;l<u;l++)a[l].apply(this,s)}return this}static mixin(t){["on","once","off","emit"].forEach(s=>{const a=Object.getOwnPropertyDescriptor(kr.prototype,s);Object.defineProperty(t.prototype,s,a)})}dispose(){return super.dispose(),this._events=void 0,this}}class zf extends kr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class jr extends zf{constructor(){var t,s;super(),this.name="Context",this._constants=new Map,this._timeouts=new Pn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const a=$(jr.getDefaults(),arguments,["context"]);a.context?(this._context=a.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=bC({latencyHint:a.latencyHint}),this._latencyHint=a.latencyHint),this._ticker=new wC(this.emit.bind(this,"tick"),a.clockSource,a.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((s=arguments[0])===null||s===void 0)&&s.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=a.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(DC(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,s,a){return this._context.createBuffer(t,s,a)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,s){return this._context.createIIRFilter(t,s)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,s,a){return this._context.createPeriodicWave(t,s,a)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return wt(mr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return wt(mr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return wt(mr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){wt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){wt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){wt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){wt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,s){return TC(this.rawContext,t,s)}addAudioWorkletModule(t){return pe(this,void 0,void 0,function*(){wt(Vt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return pe(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return mr(this._context)?this._context.resume():Promise.resolve()}close(){return pe(this,void 0,void 0,function*(){mr(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&OC(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const s=this._context.createBuffer(1,128,this._context.sampleRate),a=s.getChannelData(0);for(let u=0;u<a.length;u++)a[u]=t;const l=this._context.createBufferSource();return l.channelCount=1,l.channelCountMode="explicit",l.buffer=s,l.loop=!0,l.start(0),this._constants.set(t,l),l}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,s=>{s.callback(),this._timeouts.remove(s)})}setTimeout(t,s){this._timeoutIds++;const a=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:a+s}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(s=>{s.id===t&&this._timeouts.remove(s)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,s){const a=++this._timeoutIds,l=()=>{const u=this.now();this._timeouts.add({callback:()=>{t(),l()},id:a,time:u+s})};return l(),a}}class MC extends zf{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,s,a){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,s){return{}}createPanner(){return{}}createPeriodicWave(t,s,a){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,s){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return pe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,s){return 0}clearTimeout(t){return this}setInterval(t,s){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Et(o,t){un(t)?t.forEach(s=>Et(o,s)):Object.defineProperty(o,t,{enumerable:!0,writable:!1})}function pl(o,t){un(t)?t.forEach(s=>pl(o,s)):Object.defineProperty(o,t,{writable:!0})}const Ht=()=>{};class Kt extends oi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ht;const t=$(Kt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,bs(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Ht,onload:Ht,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ye().sampleRate}set(t){return t instanceof Kt?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return pe(this,void 0,void 0,function*(){const s=Kt.load(t).then(a=>{this.set(a),this.onload(this)});Kt.downloads.push(s);try{yield s}finally{const a=Kt.downloads.indexOf(s);Kt.downloads.splice(a,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const s=un(t)&&t[0].length>0,a=s?t.length:1,l=s?t[0].length:t.length,u=ye(),d=u.createBuffer(a,l,u.sampleRate),f=!s&&a===1?[t]:t;for(let m=0;m<a;m++)d.copyToChannel(f[m],m);return this._buffer=d,this}toMono(t){if(Xn(t))this.fromArray(this.toArray(t));else{let s=new Float32Array(this.length);const a=this.numberOfChannels;for(let l=0;l<a;l++){const u=this.toArray(l);for(let d=0;d<u.length;d++)s[d]+=u[d]}s=s.map(l=>l/a),this.fromArray(s)}return this}toArray(t){if(Xn(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const s=[];for(let a=0;a<this.numberOfChannels;a++)s[a]=this.getChannelData(a);return s}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,s=this.duration){wt(this.loaded,"Buffer is not loaded");const a=Math.floor(t*this.sampleRate),l=Math.floor(s*this.sampleRate);wt(a<l,"The start time must be less than the end time");const u=l-a,d=ye().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)d.copyToChannel(this.getChannelData(f).subarray(a,l),f);return new Kt(d)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Kt().fromArray(t)}static fromUrl(t){return pe(this,void 0,void 0,function*(){return yield new Kt().load(t)})}static load(t){return pe(this,void 0,void 0,function*(){const s=Kt.baseUrl===""||Kt.baseUrl.endsWith("/")?Kt.baseUrl:Kt.baseUrl+"/",a=yield fetch(s+t);if(!a.ok)throw new Error(`could not load url: ${t}`);const l=yield a.arrayBuffer();return yield ye().decodeAudioData(l)})}static supportsType(t){const s=t.split("."),a=s[s.length-1];return document.createElement("audio").canPlayType("audio/"+a)!==""}static loaded(){return pe(this,void 0,void 0,function*(){for(yield Promise.resolve();Kt.downloads.length;)yield Kt.downloads[0]})}}Kt.baseUrl="";Kt.downloads=[];class qr extends jr{constructor(){super({clockSource:"offline",context:Xc(arguments[0])?arguments[0]:xC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Xc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Xc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return pe(this,void 0,void 0,function*(){let s=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,s++;const a=Math.floor(this.sampleRate/128);t&&s%a===0&&(yield new Promise(l=>setTimeout(l,1)))}})}render(){return pe(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const s=yield this._context.startRendering();return new Kt(s)})}close(){return Promise.resolve()}}const dv=new MC;let ya=dv;function ye(){return ya===dv&&SC&&ru(new jr),ya}function ru(o,t=!1){t&&ya.dispose(),mr(o)?ya=new jr(o):Xc(o)?ya=new qr(o):ya=o}function RC(){return ya.resume()}if(Sn&&!Sn.TONE_SILENCE_LOGGING){const t=` * Tone.js v${pf} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function xr(o){return Math.pow(10,o/20)}function ml(o){return 20*(Math.log(o)/Math.LN10)}function Sr(o){return Math.pow(2,o/12)}let bu=440;function kC(){return bu}function jC(o){bu=o}function Fi(o){return Math.round(fv(o))}function fv(o){return 69+12*Math.log2(o/bu)}function Bf(o){return bu*Math.pow(2,(o-69)/12)}class Lf extends oi{constructor(t,s,a){super(),this.defaultUnits="s",this._val=s,this._units=a,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,s)=>{const a=parseInt(t,10),l=s==="."?1.5:1;return a===1?this._beatsToUnits(this._getTimeSignature())*l:this._beatsToUnits(4/a)*l},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const s=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(s)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,s,a)=>{let l=0;return t&&t!=="0"&&(l+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),s&&s!=="0"&&(l+=this._beatsToUnits(parseFloat(s))),a&&a!=="0"&&(l+=this._beatsToUnits(parseFloat(a)/4)),l},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Lf&&this.fromType(this._val),kn(this._val))return this._noArg();if(bs(this._val)&&kn(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(si(this._val)){let t=0;for(const s in this._val)if(Vt(this._val[s])){const a=this._val[s],l=new this.constructor(this.context,s).valueOf()*a;t+=l}return t}if(Vt(this._units)){const t=this._expressions[this._units],s=this._val.toString().trim().match(t.regexp);return s?t.method.apply(this,s.slice(1)):t.method.call(this,this._val)}else return bs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Gn extends Lf{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const s=new Gn(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(s))},regexp:/^@(.+)/}})}quantize(t,s=1){const a=new this.constructor(this.context,t).valueOf(),l=this.valueOf(),f=Math.round(l/a)*a-l;return l+f*s}toNotation(){const t=this.toSeconds(),s=["1m"];for(let u=1;u<9;u++){const d=Math.pow(2,u);s.push(d+"n."),s.push(d+"n"),s.push(d+"t")}s.push("0");let a=s[0],l=new Gn(this.context,s[0]).toSeconds();return s.forEach(u=>{const d=new Gn(this.context,u).toSeconds();Math.abs(d-t)<Math.abs(l-t)&&(a=u,l=d)}),a}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let s=this.valueOf()/t;s=parseFloat(s.toFixed(4));const a=Math.floor(s/this._getTimeSignature());let l=s%1*4;s=Math.floor(s)%this._getTimeSignature();const u=l.toString();return u.length>3&&(l=parseFloat(parseFloat(u).toFixed(3))),[a,s,l].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Fi(this.toFrequency())}_now(){return this.context.now()}}function qC(o,t){return new Gn(ye(),o,t)}class wn extends Gn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return kC()}static set A4(t){jC(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:wn.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,s){const l=VC[t.toLowerCase()]+(parseInt(s,10)+1)*12;return this.defaultUnits==="midi"?l:wn.mtof(l)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,s,a){let l=1;return t&&t!=="0"&&(l*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),s&&s!=="0"&&(l*=this._beatsToUnits(parseFloat(s))),a&&a!=="0"&&(l*=this._beatsToUnits(parseFloat(a)/4)),l}}})}transpose(t){return new wn(this.context,this.valueOf()*Sr(t))}harmonize(t){return t.map(s=>this.transpose(s))}toMidi(){return Fi(this.valueOf())}toNote(){const t=this.toFrequency(),s=Math.log2(t/wn.A4);let a=Math.round(12*s)+57;const l=Math.floor(a/12);return l<0&&(a+=-12*l),zC[a%12]+l.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),s=this.valueOf()/t;return Math.floor(s*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Bf(t)}static ftom(t){return Fi(t)}}const VC={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},zC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function BC(o,t){return new wn(ye(),o,t)}class Fe extends Gn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function LC(o,t){return new Fe(ye(),o,t)}class sn extends oi{constructor(){super();const t=$(sn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ye()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return lv(t),new Gn(this.context,t).toSeconds()}toFrequency(t){return new wn(this.context,t).toFrequency()}toTicks(t){return new Fe(this.context,t).toTicks()}_getPartialProperties(t){const s=this.get();return Object.keys(s).forEach(a=>{kn(t[a])&&delete s[a]}),s}get(){const t=EC(this);return Object.keys(t).forEach(s=>{if(Reflect.has(this,s)){const a=this[s];Vt(a)&&Vt(a.value)&&Vt(a.setValueAtTime)?t[s]=a.value:a instanceof sn?t[s]=a._getPartialProperties(t[s]):un(a)||Xn(a)||bs(a)||kf(a)?t[s]=a:delete t[s]}}),t}set(t){return Object.keys(t).forEach(s=>{Reflect.has(this,s)&&Vt(this[s])&&(this[s]&&Vt(this[s].value)&&Vt(this[s].setValueAtTime)?this[s].value!==t[s]&&(this[s].value=t[s]):this[s]instanceof sn?this[s].set(t[s]):this[s]=t[s])}),this}}class Vr extends Pn{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const s=this.get(t);return s!==null?s.state:this._initial}setStateAtTime(t,s,a){return Pe(s,0),this.add(Object.assign({},a,{state:t,time:s})),this}getLastState(t,s){const a=this._search(s);for(let l=a;l>=0;l--){const u=this._timeline[l];if(u.state===t)return u}}getNextState(t,s){const a=this._search(s);if(a!==-1)for(let l=a;l<this._timeline.length;l++){const u=this._timeline[l];if(u.state===t)return u}}}class qt extends sn{constructor(){const t=$(qt.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,wt(Vt(t.param)&&(Sa(t.param)||t.param instanceof qt),"param must be an AudioParam");!Sa(t.param);)t.param=t.param._param;this._swappable=Vt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Pn(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Vt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(sn.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Vt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Vt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,s){return this.units===s}_assertRange(t){return Vt(this.maxValue)&&Vt(this.minValue)&&Pe(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?xr(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?ml(t):t}setValueAtTime(t,s){const a=this.toSeconds(s),l=this._fromType(t);return wt(isFinite(l)&&isFinite(a),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._assertRange(l),this.log(this.units,"setValueAtTime",t,a),this._events.add({time:a,type:"setValueAtTime",value:l}),this._param.setValueAtTime(l,a),this}getValueAtTime(t){const s=Math.max(this.toSeconds(t),0),a=this._events.getAfter(s),l=this._events.get(s);let u=this._initialValue;if(l===null)u=this._initialValue;else if(l.type==="setTargetAtTime"&&(a===null||a.type==="setValueAtTime")){const d=this._events.getBefore(l.time);let f;d===null?f=this._initialValue:f=d.value,l.type==="setTargetAtTime"&&(u=this._exponentialApproach(l.time,f,l.value,l.constant,s))}else if(a===null)u=l.value;else if(a.type==="linearRampToValueAtTime"||a.type==="exponentialRampToValueAtTime"){let d=l.value;if(l.type==="setTargetAtTime"){const f=this._events.getBefore(l.time);f===null?d=this._initialValue:d=f.value}a.type==="linearRampToValueAtTime"?u=this._linearInterpolate(l.time,d,a.time,a.value,s):u=this._exponentialInterpolate(l.time,d,a.time,a.value,s)}else u=l.value;return this._toType(u)}setRampPoint(t){t=this.toSeconds(t);let s=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(s)===0&&(s=this._toType(this._minOutput)),this.setValueAtTime(s,t),this}linearRampToValueAtTime(t,s){const a=this._fromType(t),l=this.toSeconds(s);return wt(isFinite(a)&&isFinite(l),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._assertRange(a),this._events.add({time:l,type:"linearRampToValueAtTime",value:a}),this.log(this.units,"linearRampToValueAtTime",t,l),this._param.linearRampToValueAtTime(a,l),this}exponentialRampToValueAtTime(t,s){let a=this._fromType(t);a=gs(a,0)?this._minOutput:a,this._assertRange(a);const l=this.toSeconds(s);return wt(isFinite(a)&&isFinite(l),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._events.add({time:l,type:"exponentialRampToValueAtTime",value:a}),this.log(this.units,"exponentialRampToValueAtTime",t,l),this._param.exponentialRampToValueAtTime(a,l),this}exponentialRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialRampToValueAtTime(t,a+this.toSeconds(s)),this}linearRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.linearRampToValueAtTime(t,a+this.toSeconds(s)),this}targetRampTo(t,s,a){return a=this.toSeconds(a),this.setRampPoint(a),this.exponentialApproachValueAtTime(t,a,s),this}exponentialApproachValueAtTime(t,s,a){s=this.toSeconds(s),a=this.toSeconds(a);const l=Math.log(a+1)/Math.log(200);return this.setTargetAtTime(t,s,l),this.cancelAndHoldAtTime(s+a*.9),this.linearRampToValueAtTime(t,s+a),this}setTargetAtTime(t,s,a){const l=this._fromType(t);wt(isFinite(a)&&a>0,"timeConstant must be a number greater than 0");const u=this.toSeconds(s);return this._assertRange(l),wt(isFinite(l)&&isFinite(u),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(s)}`),this._events.add({constant:a,time:u,type:"setTargetAtTime",value:l}),this.log(this.units,"setTargetAtTime",t,u,a),this._param.setTargetAtTime(l,u,a),this}setValueCurveAtTime(t,s,a,l=1){a=this.toSeconds(a),s=this.toSeconds(s);const u=this._fromType(t[0])*l;this.setValueAtTime(this._toType(u),s);const d=a/(t.length-1);for(let f=1;f<t.length;f++){const m=this._fromType(t[f])*l;this.linearRampToValueAtTime(this._toType(m),s+f*d)}return this}cancelScheduledValues(t){const s=this.toSeconds(t);return wt(isFinite(s),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(s),this._param.cancelScheduledValues(s),this.log(this.units,"cancelScheduledValues",s),this}cancelAndHoldAtTime(t){const s=this.toSeconds(t),a=this._fromType(this.getValueAtTime(s));wt(isFinite(s),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",s,"value="+a);const l=this._events.get(s),u=this._events.getAfter(s);return l&&gs(l.time,s)?u?(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time)):(this._param.cancelAndHoldAtTime(s),this._events.cancel(s+this.sampleTime)):u&&(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time),u.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(a),s):u.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(a),s)),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}rampTo(t,s=.1,a){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,s,a):this.linearRampTo(t,s,a),this}apply(t){const s=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(s),s);const a=this._events.get(s);if(a&&a.type==="setTargetAtTime"){const l=this._events.getAfter(a.time),u=l?l.time:s+2,d=(u-s)/10;for(let f=s;f<u;f+=d)t.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,l=>{l.type==="cancelScheduledValues"?t.cancelScheduledValues(l.time):l.type==="setTargetAtTime"?t.setTargetAtTime(l.value,l.time,l.constant):t[l.type](l.value,l.time)}),this}setParam(t){wt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const s=this.input;return s.disconnect(this._param),this.apply(t),this._param=t,s.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,s,a,l,u){return a+(s-a)*Math.exp(-(u-t)/l)}_linearInterpolate(t,s,a,l,u){return s+(l-s)*((u-t)/(a-t))}_exponentialInterpolate(t,s,a,l,u){return s*Math.pow(l/s,(u-t)/(a-t))}}class lt extends sn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Vt(this.input)?Sa(this.input)||this.input instanceof qt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Vt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Vt(t)&&(t instanceof lt||Gi(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(a=>{a.channelCount=t.channelCount,a.channelCountMode=t.channelCountMode,a.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();wt(t.length>0,"ToneAudioNode does not have any internal nodes");const s=t[0];return{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelInterpretation:t}))}connect(t,s=0,a=0){return Cn(this,t,s,a),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Rr("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,s=0,a=0){return Uf(this,t,s,a),this}chain(...t){return Qn(this,...t),this}fan(...t){return t.forEach(s=>this.connect(s)),this}dispose(){return super.dispose(),Vt(this.input)&&(this.input instanceof lt?this.input.dispose():Gi(this.input)&&this.input.disconnect()),Vt(this.output)&&(this.output instanceof lt?this.output.dispose():Gi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Qn(...o){const t=o.shift();o.reduce((s,a)=>(s instanceof lt?s.connect(a):Gi(s)&&Cn(s,a),a),t)}function Cn(o,t,s=0,a=0){for(wt(Vt(o),"Cannot connect from undefined node"),wt(Vt(t),"Cannot connect to undefined node"),(t instanceof lt||Gi(t))&&wt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),wt(o.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof lt||t instanceof qt;)Vt(t.input)&&(t=t.input);for(;o instanceof lt;)Vt(o.output)&&(o=o.output);Sa(t)?o.connect(t,s):o.connect(t,s,a)}function Uf(o,t,s=0,a=0){if(Vt(t))for(;t instanceof lt;)t=t.input;for(;!Gi(o);)Vt(o.output)&&(o=o.output);Sa(t)?o.disconnect(t,s):Gi(t)?o.disconnect(t,s,a):o.disconnect()}function UC(...o){const t=o.pop();Vt(t)&&o.forEach(s=>Cn(s,t))}class Tt extends lt{constructor(){const t=$(Tt.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new qt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Et(this,"gain")}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Tr extends lt{constructor(t){super(t),this.onended=Ht,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Tt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(s){const a=this.toSeconds(s);return this._startTime!==-1&&a>=this._startTime&&(this._stopTime===-1||a<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(lt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ht})}_startGain(t,s=1){wt(this._startTime===-1,"Source cannot be started more than once");const a=this.toSeconds(this._fadeIn);return this._startTime=t+a,this._startTime=Math.max(this._startTime,this.context.currentTime),a>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(s,t+a):this._gainNode.gain.exponentialApproachValueAtTime(s,t,a)):this._gainNode.gain.setValueAtTime(s,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){wt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const s=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+s,this._stopTime=Math.max(this._stopTime,this.now()),s>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,s,t):this._gainNode.gain.targetRampTo(0,s,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const a=this._curve==="exponential"?s*2:0;this._stopSource(this.now()+a),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ht&&(this.onended(this),this.onended=Ht,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),wt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ht,this}}class xu extends Tr{constructor(){const t=$(xu.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Cn(this._source,this._gainNode),this.offset=new qt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(Tr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const s=this.toSeconds(t);return this.log("start",s),this._startGain(s),this._source.start(s),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Mt extends lt{constructor(){const t=$(Mt.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new xu({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(lt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,s=0,a=0){return gl(this,t,s,a),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,s){return this._param.setValueAtTime(t,s),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,s){return this._param.linearRampToValueAtTime(t,s),this}exponentialRampToValueAtTime(t,s){return this._param.exponentialRampToValueAtTime(t,s),this}exponentialRampTo(t,s,a){return this._param.exponentialRampTo(t,s,a),this}linearRampTo(t,s,a){return this._param.linearRampTo(t,s,a),this}targetRampTo(t,s,a){return this._param.targetRampTo(t,s,a),this}exponentialApproachValueAtTime(t,s,a){return this._param.exponentialApproachValueAtTime(t,s,a),this}setTargetAtTime(t,s,a){return this._param.setTargetAtTime(t,s,a),this}setValueCurveAtTime(t,s,a,l){return this._param.setValueCurveAtTime(t,s,a,l),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,s,a){return this._param.rampTo(t,s,a),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function gl(o,t,s,a){(t instanceof qt||Sa(t)||t instanceof Mt&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Mt&&(t.overridden=!0)),Cn(o,t,s,a)}class Ff extends qt{constructor(){const t=$(Ff.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Pn(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(qt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,s,a){s=this.toSeconds(s),this.setRampPoint(s);const l=this._fromType(t),u=this._events.get(s),d=Math.round(Math.max(1/a,1));for(let f=0;f<=d;f++){const m=a*f+s,p=this._exponentialApproach(u.time,u.value,l,a,m);this.linearRampToValueAtTime(this._toType(p),m)}return this}setValueAtTime(t,s){const a=this.toSeconds(s);super.setValueAtTime(t,s);const l=this._events.get(a),u=this._events.previousEvent(l),d=this._getTicksUntilEvent(u,a);return l.ticks=Math.max(d,0),this}linearRampToValueAtTime(t,s){const a=this.toSeconds(s);super.linearRampToValueAtTime(t,s);const l=this._events.get(a),u=this._events.previousEvent(l),d=this._getTicksUntilEvent(u,a);return l.ticks=Math.max(d,0),this}exponentialRampToValueAtTime(t,s){s=this.toSeconds(s);const a=this._fromType(t),l=this._events.get(s),u=Math.round(Math.max((s-l.time)*10,1)),d=(s-l.time)/u;for(let f=0;f<=u;f++){const m=d*f+l.time,p=this._exponentialInterpolate(l.time,l.value,s,a,m);this.linearRampToValueAtTime(this._toType(p),m)}return this}_getTicksUntilEvent(t,s){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(kn(t.ticks)){const d=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(d,t.time)}const a=this._fromType(this.getValueAtTime(t.time));let l=this._fromType(this.getValueAtTime(s));const u=this._events.get(s);return u&&u.time===s&&u.type==="setValueAtTime"&&(l=this._fromType(this.getValueAtTime(s-this.sampleTime))),.5*(s-t.time)*(a+l)+t.ticks}getTicksAtTime(t){const s=this.toSeconds(t),a=this._events.get(s);return Math.max(this._getTicksUntilEvent(a,s),0)}getDurationOfTicks(t,s){const a=this.toSeconds(s),l=this.getTicksAtTime(s);return this.getTimeOfTick(l+t)-a}getTimeOfTick(t){const s=this._events.get(t,"ticks"),a=this._events.getAfter(t,"ticks");if(s&&s.ticks===t)return s.time;if(s&&a&&a.type==="linearRampToValueAtTime"&&s.value!==a.value){const l=this._fromType(this.getValueAtTime(s.time)),d=(this._fromType(this.getValueAtTime(a.time))-l)/(a.time-s.time),f=Math.sqrt(Math.pow(l,2)-2*d*(s.ticks-t)),m=(-l+f)/d,p=(-l-f)/d;return(m>0?m:p)+s.time}else return s?s.value===0?1/0:s.time+(t-s.ticks)/s.value:t/this._initialValue}ticksToTime(t,s){return this.getDurationOfTicks(t,s)}timeToTicks(t,s){const a=this.toSeconds(s),l=this.toSeconds(t),u=this.getTicksAtTime(a);return this.getTicksAtTime(a+l)-u}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const s=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(s,0)}}class If extends Mt{constructor(){const t=$(If.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new Ff({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Mt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,s){return this._param.ticksToTime(t,s)}timeToTicks(t,s){return this._param.timeToTicks(t,s)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,s){return this._param.getDurationOfTicks(t,s)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Gf extends sn{constructor(){const t=$(Gf.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new Vr,this._tickOffset=new Pn,this._ticksAtTime=new Pn,this._secondsAtTime=new Pn,this.frequency=new If({context:this.context,units:t.units,value:t.frequency}),Et(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},sn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,s){const a=this.toSeconds(t);return this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),Vt(s)&&this.setTicksAtTime(s,a),this._ticksAtTime.cancel(a),this._secondsAtTime.cancel(a)),this}stop(t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="stopped"){const a=this._state.get(s);a&&a.time>0&&(this._tickOffset.cancel(a.time),this._state.cancel(a.time))}return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this.setTicksAtTime(0,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}pause(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const s=this.toSeconds(t),a=this._state.getLastState("stopped",s),l=this._ticksAtTime.get(s),u={state:"paused",time:s};this._state.add(u);let d=l||a,f=l?l.ticks:0,m=null;return this._state.forEachBetween(d.time,s+this.sampleTime,p=>{let g=d.time;const v=this._tickOffset.get(p.time);v&&v.time>=d.time&&(f=v.ticks,g=v.time),d.state==="started"&&p.state!=="started"&&(f+=this.frequency.getTicksAtTime(p.time)-this.frequency.getTicksAtTime(g),p.time!==u.time&&(m={state:p.state,time:p.time,ticks:f})),d=p}),this._state.remove(u),m&&this._ticksAtTime.add(m),f}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const s=this.now(),a=this.frequency.timeToTicks(t,s);this.setTicksAtTime(a,s)}getSecondsAtTime(t){t=this.toSeconds(t);const s=this._state.getLastState("stopped",t),a={state:"paused",time:t};this._state.add(a);const l=this._secondsAtTime.get(t);let u=l||s,d=l?l.seconds:0,f=null;return this._state.forEachBetween(u.time,t+this.sampleTime,m=>{let p=u.time;const g=this._tickOffset.get(m.time);g&&g.time>=u.time&&(d=g.seconds,p=g.time),u.state==="started"&&m.state!=="started"&&(d+=m.time-p,m.time!==a.time&&(f={state:m.state,time:m.time,seconds:d})),u=m}),this._state.remove(a),f&&this._secondsAtTime.add(f),d}setTicksAtTime(t,s){return s=this.toSeconds(s),this._tickOffset.cancel(s),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,s),ticks:t,time:s}),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,s=this.now()){const a=this._tickOffset.get(s),l=this._state.get(s),u=Math.max(a.time,l.time),d=this.frequency.getTicksAtTime(u)+t-a.ticks;return this.frequency.getTimeOfTick(d)}forEachTickBetween(t,s,a){let l=this._state.get(t);this._state.forEachBetween(t,s,d=>{l&&l.state==="started"&&d.state!=="started"&&this.forEachTickBetween(Math.max(l.time,t),d.time-this.sampleTime,a),l=d});let u=null;if(l&&l.state==="started"){const d=Math.max(l.time,t),f=this.frequency.getTicksAtTime(d),m=this.frequency.getTicksAtTime(l.time),p=f-m;let g=Math.ceil(p)-p;g=gs(g,1)?0:g;let v=this.frequency.getTimeOfTick(f+g);for(;v<s;){try{a(v,Math.round(this.getTicksAtTime(v)))}catch(x){u=x;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(u)throw u;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class zr extends sn{constructor(){const t=$(zr.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Ht,this._lastUpdate=0,this._state=new Vr("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new Gf({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Et(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(sn.getDefaults(),{callback:Ht,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,s){jf(this.context);const a=this.toSeconds(t);return this.log("start",a),this._state.getValueAtTime(a)!=="started"&&(this._state.setStateAtTime("started",a),this._tickSource.start(a,s),a<this._lastUpdate&&this.emit("start",a,s)),this}stop(t){const s=this.toSeconds(t);return this.log("stop",s),this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._tickSource.stop(s),s<this._lastUpdate&&this.emit("stop",s),this}pause(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._tickSource.pause(s),s<this._lastUpdate&&this.emit("pause",s)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,s){return this._tickSource.setTicksAtTime(t,s),this}getTimeOfTick(t,s=this.now()){return this._tickSource.getTimeOfTick(t,s)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,s){const a=this.toSeconds(s),l=this.getTicksAtTime(a);return this._tickSource.getTimeOfTick(l+t,a)}_loop(){const t=this._lastUpdate,s=this.now();this._lastUpdate=s,this.log("loop",t,s),t!==s&&(this._state.forEachBetween(t,s,a=>{switch(a.state){case"started":const l=this._tickSource.getTicksAtTime(a.time);this.emit("start",a.time,l);break;case"stopped":a.time!==0&&this.emit("stop",a.time);break;case"paused":this.emit("pause",a.time);break}}),this._tickSource.forEachTickBetween(t,s,(a,l)=>{this.callback(a,l)}))}getStateAtTime(t){const s=this.toSeconds(t);return this._state.getValueAtTime(s)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}kr.mixin(zr);class Yn extends lt{constructor(){const t=$(Yn.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const s=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(s,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(s),this.delayTime=new qt({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Et(this,"delayTime")}static getDefaults(){return Object.assign(lt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class li extends lt{constructor(){const t=$(li.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new Tt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Et(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Hf extends lt{constructor(){const t=$(Hf.getDefaults(),arguments);super(t),this.name="Destination",this.input=new li({context:this.context}),this.output=new Tt({context:this.context}),this.volume=this.input.volume,Qn(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Qn(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}yu(o=>{o.destination=new Hf({context:o})});vu(o=>{o.destination.dispose()});class FC extends lt{constructor(){super(...arguments),this.name="Listener",this.positionX=new qt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new qt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new qt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new qt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new qt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new qt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new qt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new qt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new qt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(lt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}yu(o=>{o.listener=new FC({context:o})});vu(o=>{o.listener.dispose()});function IC(o,t){return pe(this,arguments,void 0,function*(s,a,l=2,u=ye().sampleRate){const d=ye(),f=new qr(l,a,u);ru(f),yield s(f);const m=f.render();ru(d);const p=yield m;return new Kt(p)})}class Br extends oi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=$(Br.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(s=>{this._loadingCount++;const a=t.urls[s];this.add(s,a,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ht,onload:Ht,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return wt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,s])=>s.loaded)}add(t,s,a=Ht,l=Ht){return bs(s)?(this.baseUrl&&s.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Kt(this.baseUrl+s,a,l))):this._buffers.set(t.toString(),new Kt(s,a,l)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class wr extends wn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Fi(super._frequencyToUnits(t))}_ticksToUnits(t){return Fi(super._ticksToUnits(t))}_beatsToUnits(t){return Fi(super._beatsToUnits(t))}_secondsToUnits(t){return Fi(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Bf(this.toMidi())}transpose(t){return new wr(this.context,this.toMidi()+t)}}function GC(o,t){return new wr(ye(),o,t)}class Se extends Fe{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function HC(o,t){return new Se(ye(),o,t)}class PC extends sn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Pn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,s){return this._events.add({callback:t,time:this.toSeconds(s)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,s=>{t-s.time<=this.expiration&&s.callback(),this._events.remove(s)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}yu(o=>{o.draw=new PC({context:o})});vu(o=>{o.draw.dispose()});class pv extends oi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){wt(Vt(t.time),"Events must have a time property"),wt(Vt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let s=new YC(t.time,t.time+t.duration,t);for(this._root===null?this._root=s:this._root.insert(s),this._length++;s!==null;)s.updateHeight(),s.updateMax(),this._rebalance(s),s=s.parent;return this}remove(t){if(this._root!==null){const s=[];this._root.search(t.time,s);for(const a of s)if(a.event===t){this._removeNode(a),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,s=>this.remove(s)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,s){t.parent!==null?(t.isLeftChild()?t.parent.left=s:t.parent.right=s,this._rebalance(t.parent)):this._setRoot(s)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const s=t.getBalance();let a,l=null;if(s>0)if(t.left.right===null)a=t.left,a.right=t.right,l=a;else{for(a=t.left.right;a.right!==null;)a=a.right;a.parent&&(a.parent.right=a.left,l=a.parent,a.left=t.left,a.right=t.right)}else if(t.right.left===null)a=t.right,a.left=t.left,l=a;else{for(a=t.right.left;a.left!==null;)a=a.left;a.parent&&(a.parent.left=a.right,l=a.parent,a.left=t.left,a.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=a:t.parent.right=a:this._setRoot(a),l&&this._rebalance(l)}t.dispose()}_rotateLeft(t){const s=t.parent,a=t.isLeftChild(),l=t.right;l&&(t.right=l.left,l.left=t),s!==null?a?s.left=l:s.right=l:this._setRoot(l)}_rotateRight(t){const s=t.parent,a=t.isLeftChild(),l=t.left;l&&(t.left=l.right,l.right=t),s!==null?a?s.left=l:s.right=l:this._setRoot(l)}_rebalance(t){const s=t.getBalance();s>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):s<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const s=[];if(this._root.search(t,s),s.length>0){let a=s[0];for(let l=1;l<s.length;l++)s[l].low>a.low&&(a=s[l]);return a.event}}return null}forEach(t){if(this._root!==null){const s=[];this._root.traverse(a=>s.push(a)),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachAtTime(t,s){if(this._root!==null){const a=[];this._root.search(t,a),a.forEach(l=>{l.event&&s(l.event)})}return this}forEachFrom(t,s){if(this._root!==null){const a=[];this._root.searchAfter(t,a),a.forEach(l=>{l.event&&s(l.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class YC{constructor(t,s,a){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=a,this.low=t,this.high=s,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,s){t>this.max||(this.left!==null&&this.left.search(t,s),this.low<=t&&this.high>t&&s.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,s))}searchAfter(t,s){this.low>=t&&(s.push(this),this.left!==null&&this.left.searchAfter(t,s)),this.right!==null&&this.right.searchAfter(t,s)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const XC=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class QC extends oi{constructor(t){super(),this.name="TimelineValue",this._timeline=new Pn({memory:10}),this._initialValue=t}set(t,s){return this._timeline.add({value:t,time:s}),this}get(t){const s=this._timeline.get(t);return s?s.value:this._initialValue}}class Zn extends lt{constructor(){super($(Zn.getDefaults(),arguments,["context"]))}connect(t,s=0,a=0){return gl(this,t,s,a),this}}class Ts extends Zn{constructor(){const t=$(Ts.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,un(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):rv(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Mt.getDefaults(),{length:1024})}setMap(t,s=1024){const a=new Float32Array(s);for(let l=0,u=s;l<u;l++){const d=l/(u-1)*2-1;a[l]=t(d,l)}return this.curve=a,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const s=["none","2x","4x"].some(a=>a.includes(t));wt(s,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Lr extends Zn{constructor(){const t=$(Lr.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new Ts({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Zn.getDefaults(),{value:1})}_expFunc(t){return s=>Math.pow(Math.abs(s),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Hi{constructor(t,s){this.id=Hi._eventId++,this._remainderTime=0;const a=Object.assign(Hi.getDefaults(),s);this.transport=t,this.callback=a.callback,this._once=a.once,this.time=Math.floor(a.time),this._remainderTime=a.time-this.time}static getDefaults(){return{callback:Ht,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const s=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*s),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Hi._eventId=0;class Pf extends Hi{constructor(t,s){super(t,s),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const a=Object.assign(Pf.getDefaults(),s);this.duration=a.duration,this._interval=a.interval,this._nextTick=a.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Hi.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return au(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Se(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){au(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Se(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const s=this.transport.getTicksAtTime(t);br(s,this.time)&&(this._nextTick=this.floatTime+Math.ceil((s-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Su extends sn{constructor(){const t=$(Su.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new QC(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Pn,this._repeatedEvents=new pv,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new zr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Et(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(sn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,s){if(this._loop.get(t)&&s>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),s=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&s%this._ppq!==0&&s%(this._swingTicks*2)!==0){const a=s%(this._swingTicks*2)/(this._swingTicks*2),l=Math.sin(a*Math.PI)*this._swingAmount;t+=new Se(this.context,this._swingTicks*2/3).toSeconds()*l}rf(!0),this._timeline.forEachAtTime(s,a=>a.invoke(t)),rf(!1)}schedule(t,s){const a=new Hi(this,{callback:t,time:new Fe(this.context,s).toTicks()});return this._addEvent(a,this._timeline)}scheduleRepeat(t,s,a,l=1/0){const u=new Pf(this,{callback:t,duration:new Gn(this.context,l).toTicks(),interval:new Gn(this.context,s).toTicks(),time:new Fe(this.context,a).toTicks()});return this._addEvent(u,this._repeatedEvents)}scheduleOnce(t,s){const a=new Hi(this,{callback:t,once:!0,time:new Fe(this.context,s).toTicks()});return this._addEvent(a,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const s=this._scheduledEvents[t.toString()];s.timeline.remove(s.event),s.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,s){return this._scheduledEvents[t.id.toString()]={event:t,timeline:s},s.add(t),t.id}cancel(t=0){const s=this.toTicks(t);return this._timeline.forEachFrom(s,a=>this.clear(a.id)),this._repeatedEvents.forEachFrom(s,a=>this.clear(a.id)),this}_bindClockEvents(){this._clock.on("start",(t,s)=>{s=new Se(this.context,s).toSeconds(),this.emit("start",t,s)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,s){this.context.resume();let a;return Vt(s)&&(a=this.toTicks(s)),this._clock.start(t,a),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){un(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Gn(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Gn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,s){return this.loopStart=t,this.loopEnd=s,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Se(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),s=this._clock.getTicksAtTime(t);return new Se(this.context,s).toBarsBeatsSixteenths()}set position(t){const s=this.toTicks(t);this.ticks=s}get seconds(){return this._clock.seconds}set seconds(t){const s=this.now(),a=this._clock.frequency.timeToTicks(t,s);this.ticks=a}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const s=this.now();if(this.state==="started"){const a=this._clock.getTicksAtTime(s),l=this._clock.frequency.getDurationOfTicks(Math.ceil(a)-a,s),u=s+l;this.emit("stop",u),this._clock.setTicksAtTime(t,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this.emit("ticks",s),this._clock.setTicksAtTime(t,s)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const s=this.now(),a=this.getTicksAtTime(s),l=t-a%t;return this._clock.nextTickTime(l,s)}}syncSignal(t,s){const a=this.now();let l=this.bpm,u=1/(60/l.getValueAtTime(a)/this.PPQ),d=[];if(t.units==="time"){const m=.015625/u,p=new Tt(m),g=new Lr(-1),v=new Tt(m);l.chain(p,g,v),l=v,u=1/u,d=[p,g,v]}s||(t.getValueAtTime(a)!==0?s=t.getValueAtTime(a)/u:s=0);const f=new Tt(s);return l.connect(f),f.connect(t._param),d.push(f),this._syncedSignals.push({initial:t.value,nodes:d,signal:t}),t.value=0,this}unsyncSignal(t){for(let s=this._syncedSignals.length-1;s>=0;s--){const a=this._syncedSignals[s];a.signal===t&&(a.nodes.forEach(l=>l.dispose()),a.signal.value=a.initial,this._syncedSignals.splice(s,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),pl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}kr.mixin(Su);yu(o=>{o.transport=new Su({context:o})});vu(o=>{o.transport.dispose()});class ke extends lt{constructor(t){super(t),this.input=void 0,this._state=new Vr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ht,this._syncedStop=Ht,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new li({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Et(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,onstop:Ht,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,s,a){let l=kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(l=this._clampToCurrentTime(l),!this._synced&&this._state.getValueAtTime(l)==="started")wt(br(l,this._state.get(l).time),"Start time must be strictly greater than previous start time"),this._state.cancel(l),this._state.setStateAtTime("started",l),this.log("restart",l),this.restart(l,s,a);else if(this.log("start",l),this._state.setStateAtTime("started",l),this._synced){const u=this._state.get(l);u&&(u.offset=this.toSeconds(cs(s,0)),u.duration=a?this.toSeconds(a):void 0);const d=this.context.transport.schedule(f=>{this._start(f,s,a)},l);this._scheduled.push(d),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>l&&this._syncedStart(this.now(),this.context.transport.seconds)}else jf(this.context),this._start(l,s,a);return this}stop(t){let s=kn(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._state.getValueAtTime(s)==="started"||Vt(this._state.getNextState("started",s))){if(this.log("stop",s),!this._synced)this._stop(s);else{const a=this.context.transport.schedule(this._stop.bind(this),s);this._scheduled.push(a)}this._state.cancel(s),this._state.setStateAtTime("stopped",s)}return this}restart(t,s,a){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,s,a)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,s)=>{if(br(s,0)){const a=this._state.get(s);if(a&&a.state==="started"&&a.time!==s){const l=s-this.toSeconds(a.time);let u;a.duration&&(u=this.toSeconds(a.duration)-l),this._start(t,this.toSeconds(a.offset)+l,u)}}},this._syncedStop=t=>{const s=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(s)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ht,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Wi extends Tr{constructor(){const t=$(Wi.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Cn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new qt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Kt(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Tr.getDefaults(),{url:new Kt,loop:!1,loopEnd:0,loopStart:0,onload:Ht,onerror:Ht,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,s,a,l=1){wt(this.buffer.loaded,"buffer is either not set or not loaded");const u=this.toSeconds(t);this._startGain(u,l),this.loop?s=cs(s,this.loopStart):s=cs(s,0);let d=Math.max(this.toSeconds(s),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,m=this.toSeconds(this.loopStart),p=f-m;of(d,f)&&(d=(d-m)%p+m),gs(d,this.buffer.duration)&&(d=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,au(d,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,d)),Vt(a)){let f=this.toSeconds(a);f=Math.max(f,0),this.stop(u+f)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Pi extends ke{constructor(){const t=$(Pi.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ke.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(wt(t in W0,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const s=this.now();this._stop(s),this._start(s)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const s=W0[this._type];this._source=new Wi({url:s,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(s.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const pr=44100*5,Id=2,$s={brown:null,pink:null,white:null},W0={get brown(){if(!$s.brown){const o=[];for(let t=0;t<Id;t++){const s=new Float32Array(pr);o[t]=s;let a=0;for(let l=0;l<pr;l++){const u=Math.random()*2-1;s[l]=(a+.02*u)/1.02,a=s[l],s[l]*=3.5}}$s.brown=new Kt().fromArray(o)}return $s.brown},get pink(){if(!$s.pink){const o=[];for(let t=0;t<Id;t++){const s=new Float32Array(pr);o[t]=s;let a,l,u,d,f,m,p;a=l=u=d=f=m=p=0;for(let g=0;g<pr;g++){const v=Math.random()*2-1;a=.99886*a+v*.0555179,l=.99332*l+v*.0750759,u=.969*u+v*.153852,d=.8665*d+v*.3104856,f=.55*f+v*.5329522,m=-.7616*m-v*.016898,s[g]=a+l+u+d+f+m+p+v*.5362,s[g]*=.11,p=v*.115926}}$s.pink=new Kt().fromArray(o)}return $s.pink},get white(){if(!$s.white){const o=[];for(let t=0;t<Id;t++){const s=new Float32Array(pr);o[t]=s;for(let a=0;a<pr;a++)s[a]=Math.random()*2-1}$s.white=new Kt().fromArray(o)}return $s.white}};class $o extends lt{constructor(){const t=$($o.getDefaults(),arguments,["volume"]);super(t),this.name="UserMedia",this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Et(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,volume:0})}open(t){return pe(this,void 0,void 0,function*(){wt($o.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const s=yield $o.enumerateDevices();Xn(t)?this._device=s[t]:(this._device=s.find(u=>u.label===t||u.deviceId===t),!this._device&&s.length>0&&(this._device=s[0]),wt(Vt(this._device),`No matching device ${t}`));const a={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(a.audio.deviceId=this._device.deviceId);const l=yield navigator.mediaDevices.getUserMedia(a);if(!this._stream){this._stream=l;const u=this.context.createMediaStreamSource(l);Cn(u,this.output),this._mediaStream=u}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(t=>{t.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return pe(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Vt(navigator.mediaDevices)&&Vt(navigator.mediaDevices.getUserMedia)}}function Ca(o,t){return pe(this,void 0,void 0,function*(){const s=t/o.context.sampleRate,a=new qr(1,s,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/s,detune:0,context:a})).toDestination().start(0),(yield a.render()).getChannelData(0)})}class _l extends Tr{constructor(){const t=$(_l.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Cn(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new qt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new qt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Et(this,["frequency","detune"])}static getDefaults(){return Object.assign(Tr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const s=this.toSeconds(t);return this.log("start",s),this._startGain(s),this._oscillator.start(s),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Te extends ke{constructor(){const t=$(Te.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency}),Et(this,"frequency"),this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),Et(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ke.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const s=this.toSeconds(t),a=new _l({context:this.context,onended:()=>this.onstop(this)});this._oscillator=a,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(t){const s=this.toSeconds(t);this._oscillator&&this._oscillator.stop(s)}_restart(t){const s=this.toSeconds(t);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Te._periodicWaveCache.find(s=>s.phase===this._phase&&NC(s.partials,this._partials));{const t=Te._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const s=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&s)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const a=this._getCachedPeriodicWave();if(Vt(a)){const{partials:l,wave:u}=a;this._wave=u,this._partials=l,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[l,u]=this._getRealImaginary(t,this._phase),d=this.context.createPeriodicWave(l,u);this._wave=d,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Te._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:l,type:this._type,wave:this._wave}),Te._periodicWaveCache.length>100&&Te._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Pe(t,0);let s=this._type;const a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(a&&(s=a[1]),this._type!=="custom")t===0?this.type=s:this.type=s+t.toString();else{const l=new Float32Array(t);this._partials.forEach((u,d)=>l[d]=u),this._partials=Array.from(l),this.type=this._type}}_getRealImaginary(t,s){let l=2048;const u=new Float32Array(l),d=new Float32Array(l);let f=1;if(t==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,l=f,this._partials.length===0)return[u,d]}else{const m=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);m?(f=parseInt(m[2],10)+1,this._partialCount=parseInt(m[2],10),t=m[1],f=Math.max(f,2),l=f):this._partialCount=0,this._partials=[]}for(let m=1;m<l;++m){const p=2/(m*Math.PI);let g;switch(t){case"sine":g=m<=f?1:0,this._partials[m-1]=g;break;case"square":g=m&1?2*p:0,this._partials[m-1]=g;break;case"sawtooth":g=p*(m&1?1:-1),this._partials[m-1]=g;break;case"triangle":m&1?g=2*(p*p)*(m-1>>1&1?-1:1):g=0,this._partials[m-1]=g;break;case"custom":g=this._partials[m-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}g!==0?(u[m]=-g*Math.sin(s*m),d[m]=g*Math.cos(s*m)):(u[m]=0,d[m]=0)}return[u,d]}_inverseFFT(t,s,a){let l=0;const u=t.length;for(let d=0;d<u;d++)l+=t[d]*Math.cos(d*a)+s[d]*Math.sin(d*a);return l}getInitialValue(){const[t,s]=this._getRealImaginary(this._type,0);let a=0;const l=Math.PI*2,u=32;for(let d=0;d<u;d++)a=Math.max(this._inverseFFT(t,s,d/u*l),a);return Aa(-this._inverseFFT(t,s,this._phase)/a,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Te._periodicWaveCache=[];class Tu extends Zn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ts({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class we extends Mt{constructor(){const t=$(we.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Tt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class yl extends ke{constructor(){const t=$(yl.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new Tu({context:this.context}),this._modulationNode=new Tt({context:this.context}),this._carrier=new Te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Te({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new we({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Et(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Te.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ur extends ke{constructor(){const t=$(Ur.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new Tt({context:this.context,gain:0}),this._carrier=new Te({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Te({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new we({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new we({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Et(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Te.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Fr extends ke{constructor(){const t=$(Fr.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new Tt({context:this.context,gain:0}),this._thresh=new Ts({context:this.context,mapping:s=>s<=0?-1:1}),this.width=new Mt({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Et(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ke.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class vl extends ke{constructor(){const t=$(vl.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Et(this,["frequency","detune"])}static getDefaults(){return Object.assign(Te.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(s=>s.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(s=>s.stop(t))}_restart(t){this._forEach(s=>s.restart(t))}_forEach(t){for(let s=0;s<this._oscillators.length;s++)t(this._oscillators[s],s)}get type(){return this._type}set type(t){this._type=t,this._forEach(s=>s.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const s=-t/2,a=t/(this._oscillators.length-1);this._forEach((l,u)=>l.detune.value=s+a*u)}}get count(){return this._oscillators.length}set count(t){if(Pe(t,1),this._oscillators.length!==t){this._forEach(s=>s.dispose()),this._oscillators=[];for(let s=0;s<t;s++){const a=new Te({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+s/t*360,partialCount:this._partialCount,onstop:s===0?()=>this.onstop(this):Ht});this.type==="custom"&&(a.partials=this._partials),this.frequency.connect(a.frequency),this.detune.connect(a.detune),a.detune.overridden=!1,a.connect(this.output),this._oscillators[s]=a}this.spread=this._spread,this.state==="started"&&this._forEach(s=>s.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((s,a)=>s.phase=this._phase+a/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(s=>s.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(s=>s.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(s=>s.partialCount=t),this._type=this._oscillators[0].type}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class bl extends ke{constructor(){const t=$(bl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new we({context:this.context,value:2}),this._pulse=new Fr({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Te({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Et(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ke.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const K0={am:yl,fat:vl,fm:Ur,oscillator:Te,pulse:Fr,pwm:bl};class ai extends ke{constructor(){const t=$(ai.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),Et(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Te.getDefaults(),Ur.getDefaults(),yl.getDefaults(),vl.getDefaults(),Fr.getDefaults(),bl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(s=>this._sourceType===s)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const s=K0[t],a=this.now();if(this._oscillator){const l=this._oscillator;l.stop(a),this.context.setTimeout(()=>l.dispose(),this.blockTime)}this._oscillator=new s({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(a)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let s="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(s=this._oscillator.type),t==="fm"?this.type="fm"+s:t==="am"?this.type="am"+s:t==="fat"?this.type="fat"+s:t==="oscillator"?this.type=s:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,s){return t instanceof K0[s]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Xn(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Xn(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&bs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return pe(this,arguments,void 0,function*(t=1024){return Ca(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Na extends Mt{constructor(){super($(Na.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Tt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Qn(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ri extends Zn{constructor(){const t=$(ri.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new we({context:this.context,value:t.max-t.min}),this._add=this.output=new Na({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Zn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class wu extends Zn{constructor(){super($(wu.getDefaults(),arguments)),this.name="Zero",this._gain=new Tt({context:this.context}),this.output=this._gain,this.input=void 0,Cn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Uf(this.context.getConstant(0),this._gain),this}}class An extends lt{constructor(){const t=$(An.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=qt.prototype._fromType,this._toType=qt.prototype._toType,this._is=qt.prototype._is,this._clampValue=qt.prototype._clampValue,this._oscillator=new Te(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Tt({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Mt({context:this.context,units:"audioRange",value:0}),this._zeros=new wu({context:this.context}),this._a2g=new Tu({context:this.context}),this._scaler=this.output=new ri({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Et(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Te.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const s=this.min,a=this.max;this._units=t,this.min=s,this.max=a}get state(){return this._oscillator.state}connect(t,s,a){return(t instanceof qt||t instanceof Mt)&&(this.convert=t.convert,this.units=t.units),gl(this,t,s,a),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function mv(o,t=1/0){const s=new WeakMap;return function(a,l){Reflect.defineProperty(a,l,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){Pe(u,o,t),s.set(this,u)}})}}function ci(o,t=1/0){const s=new WeakMap;return function(a,l){Reflect.defineProperty(a,l,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){Pe(this.toSeconds(u),o,t),s.set(this,u)}})}}class Ir extends ke{constructor(){const t=$(Ir.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Kt({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ke.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ht,onerror:Ht,playbackRate:1,reverse:!1})}load(t){return pe(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Ht){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,s,a){return super.start(t,s,a),this}_start(t,s,a){this._loop?s=cs(s,this._loopStart):s=cs(s,0);const l=this.toSeconds(s),u=a;a=cs(a,Math.max(this._buffer.duration-l,0));let d=this.toSeconds(a);d=d/this._playbackRate,t=this.toSeconds(t);const f=new Wi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+d),this._state.setStateAtTime("stopped",t+d,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&kn(u)?f.start(t,l):f.start(t,l,d-this.toSeconds(this.fadeOut))}_stop(t){const s=this.toSeconds(t);this._activeSources.forEach(a=>a.stop(s))}restart(t,s,a){return super.restart(t,s,a),this}_restart(t,s,a){var l;(l=[...this._activeSources].pop())===null||l===void 0||l.stop(t),this._start(t,s,a)}seek(t,s){const a=this.toSeconds(s);if(this._state.getValueAtTime(a)==="started"){const l=this.toSeconds(t);this._stop(a),this._start(a,l)}return this}setLoopPoints(t,s){return this.loopStart=t,this.loopEnd=s,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Pe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Pe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(s=>{s.loop=t}),t)){const s=this._state.getNextState("stopped",this.now());s&&this._state.cancel(s.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const s=this.now(),a=this._state.getNextState("stopped",s);a&&a.implicitEnd&&(this._state.cancel(a.time),this._activeSources.forEach(l=>l.cancelStop())),this._activeSources.forEach(l=>{l.playbackRate.setValueAtTime(t,s)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Ss([ci(0)],Ir.prototype,"fadeIn",void 0);Ss([ci(0)],Ir.prototype,"fadeOut",void 0);class Yf extends lt{constructor(){const t=$(Yf.getDefaults(),arguments,["urls","onload"],"urls");super(t),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Et(this,"volume"),this._buffers=new Br({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ke.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Ht,onerror:Ht,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(s=>{s.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(s=>{s.fadeOut=t})}get state(){return Array.from(this._players).some(([s,a])=>a.state==="started")?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(wt(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const s=new Ir({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,s)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,s,a){return wt(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,s,a),this}stopAll(t){return this._players.forEach(s=>s.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=>t.dispose()),this._buffers.dispose(),this}}class Xf extends ke{constructor(){const t=$(Xf.getDefaults(),arguments,["url","onload"]);super(t),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new Kt({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new zr({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(ke.getDefaults(),{onload:Ht,onerror:Ht,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,s,a){s=cs(s,0),s=this.toSeconds(s),t=this.toSeconds(t);const l=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,s/l),a&&this.stop(t+this.toSeconds(a))}restart(t,s,a){return super.restart(t,s,a),this}_restart(t,s,a){this._stop(t),this._start(t,s,a)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach(s=>{s.fadeOut=0,s.stop(t)}),this.onstop(this)}_tick(t){const s=this._clock.getTicksAtTime(t),a=s*this._grainSize;if(this.log("offset",a),!this.loop&&a>this.buffer.duration){this.stop(t);return}const l=a<this._overlap?0:this._overlap,u=new Wi({context:this.context,url:this.buffer,fadeIn:l,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Sr(this.detune/100)}).connect(this.output);u.start(t,this._grainSize*s),u.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(u),u.onended=()=>{const d=this._activeSources.indexOf(u);d!==-1&&this._activeSources.splice(d,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Pe(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Pe(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Pe(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const s=this.toSeconds(t);Pe(s,0),this._overlap=s}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(t=>t.dispose()),this}}class gv extends Zn{constructor(){super(...arguments),this.name="Abs",this._abs=new Ts({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class _v extends Zn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ts({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Qf extends Zn{constructor(){super(...arguments),this.name="Negate",this._multiply=new we({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Ea extends Mt{constructor(){super($(Ea.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new Tt({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Qf({context:this.context}),this.subtrahend=this._param,Qn(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class Au extends Zn{constructor(){super($(Au.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new Ts({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new we({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class Cu extends Mt{constructor(){const t=$(Cu.getDefaults(),arguments,["value"]);super(t),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new Ea({context:this.context,value:t.value}),this._gtz=this.output=new Au({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Et(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Mt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Nu extends ri{constructor(){const t=$(Nu.getDefaults(),arguments,["min","max","exponent"]);super(t),this.name="ScaleExp",this.input=this._exp=new Lr({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(ri.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class ZC extends Mt{constructor(){const t=$(Mt.getDefaults(),arguments,["value","units"]);super(t),this.name="SyncedSignal",this.override=!1,this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new xu({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const s=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==s&&(this._lastVal=s,this._constantSource.offset.setValueAtTime(s,t))}_anchorValue(t){const s=super.getValueAtTime(this.context.transport.seconds);this._lastVal=s,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(s,t)}getValueAtTime(t){const s=new Fe(this.context,t).toSeconds();return super.getValueAtTime(s)}setValueAtTime(t,s){const a=new Fe(this.context,s).toSeconds();return super.setValueAtTime(t,a),this}linearRampToValueAtTime(t,s){const a=new Fe(this.context,s).toSeconds();return super.linearRampToValueAtTime(t,a),this}exponentialRampToValueAtTime(t,s){const a=new Fe(this.context,s).toSeconds();return super.exponentialRampToValueAtTime(t,a),this}setTargetAtTime(t,s,a){const l=new Fe(this.context,s).toSeconds();return super.setTargetAtTime(t,l,a),this}cancelScheduledValues(t){const s=new Fe(this.context,t).toSeconds();return super.cancelScheduledValues(s),this}setValueCurveAtTime(t,s,a,l){const u=new Fe(this.context,s).toSeconds();return a=this.toSeconds(a),super.setValueCurveAtTime(t,u,a,l),this}cancelAndHoldAtTime(t){const s=new Fe(this.context,t).toSeconds();return super.cancelAndHoldAtTime(s),this}setRampPoint(t){const s=new Fe(this.context,t).toSeconds();return super.setRampPoint(s),this}exponentialRampTo(t,s,a){const l=new Fe(this.context,a).toSeconds();return super.exponentialRampTo(t,s,l),this}linearRampTo(t,s,a){const l=new Fe(this.context,a).toSeconds();return super.linearRampTo(t,s,l),this}targetRampTo(t,s,a){const l=new Fe(this.context,a).toSeconds();return super.targetRampTo(t,s,l),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class hn extends lt{constructor(){const t=$(hn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Mt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(lt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,s){if(bs(t))return t;{let a;for(a in Hc)if(Hc[a][s]===t)return a;return t}}_setCurve(t,s,a){if(bs(a)&&Reflect.has(Hc,a)){const l=Hc[a];si(l)?t!=="_decayCurve"&&(this[t]=l[s]):this[t]=l}else if(un(a)&&t!=="_decayCurve")this[t]=a;else throw new Error("Envelope: invalid curve: "+a)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,s=1){this.log("triggerAttack",t,s),t=this.toSeconds(t);let l=this.toSeconds(this.attack);const u=this.toSeconds(this.decay),d=this.getValueAtTime(t);if(d>0){const f=1/l;l=(1-d)/f}if(l<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(s,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(s,l,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(s,l,t);else{this._sig.cancelAndHoldAtTime(t);let f=this._attackCurve;for(let m=1;m<f.length;m++)if(f[m-1]<=d&&d<=f[m]){f=this._attackCurve.slice(m),f[0]=d;break}this._sig.setValueCurveAtTime(f,t,l,s)}if(u&&this.sustain<1){const f=s*this.sustain,m=t+l;this.log("decay",m),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,u+m):this._sig.exponentialApproachValueAtTime(f,m,u)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const s=this.getValueAtTime(t);if(s>0){const a=this.toSeconds(this.release);a<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,a,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,a,t):(wt(un(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,a,s))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,s,a=1){return s=this.toSeconds(s),this.triggerAttack(s,a),this.triggerRelease(s+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,s=0,a=0){return gl(this,t,s,a),this}asArray(){return pe(this,arguments,void 0,function*(t=1024){const s=t/this.context.sampleRate,a=new qr(1,s,this.context.sampleRate),l=this.toSeconds(this.attack)+this.toSeconds(this.decay),u=l+this.toSeconds(this.release),d=u*.1,f=u+d,m=new this.constructor(Object.assign(this.get(),{attack:s*this.toSeconds(this.attack)/f,decay:s*this.toSeconds(this.decay)/f,release:s*this.toSeconds(this.release)/f,context:a}));return m._sig.toDestination(),m.triggerAttackRelease(s*(l+d)/f,0),(yield a.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Ss([ci(0)],hn.prototype,"attack",void 0);Ss([ci(0)],hn.prototype,"decay",void 0);Ss([mv(0,1)],hn.prototype,"sustain",void 0);Ss([ci(0)],hn.prototype,"release",void 0);const Hc=(()=>{let t,s;const a=[];for(t=0;t<128;t++)a[t]=Math.sin(t/127*(Math.PI/2));const l=[],u=6.4;for(t=0;t<127;t++){s=t/127;const x=Math.sin(s*(Math.PI*2)*u-Math.PI/2)+1;l[t]=x/10+s*.83}l[127]=1;const d=[],f=5;for(t=0;t<128;t++)d[t]=Math.ceil(t/127*f)/f;const m=[];for(t=0;t<128;t++)s=t/127,m[t]=.5*(1-Math.cos(Math.PI*s));const p=[];for(t=0;t<128;t++){s=t/127;const x=Math.pow(s,3)*4+.2,T=Math.cos(x*Math.PI*2*s);p[t]=Math.abs(T*(1-s))}function g(x){const T=new Array(x.length);for(let S=0;S<x.length;S++)T[S]=1-x[S];return T}function v(x){return x.slice(0).reverse()}return{bounce:{In:g(p),Out:p},cosine:{In:a,Out:v(a)},exponential:"exponential",linear:"linear",ripple:{In:l,Out:g(l)},sine:{In:m,Out:g(m)},step:{In:d,Out:g(d)}}})();class us extends lt{constructor(){const t=$(us.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=s=>this._original_triggerRelease(s),this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Et(this,"volume")}static getDefaults(){return Object.assign(lt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,s){const a=this["_original_"+t]=this[t];this[t]=(...l)=>{const u=l[s],d=this.context.transport.schedule(f=>{l[s]=f,a.apply(this,l)},u);this._scheduledEvents.push(d)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,s,a,l){const u=this.toSeconds(a),d=this.toSeconds(s);return this.triggerAttack(t,u,l),this.triggerRelease(u+d),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class cn extends us{constructor(){const t=$(cn.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(us.getDefaults(),{detune:0,onsilence:Ht,portamento:0})}triggerAttack(t,s,a=1){this.log("triggerAttack",t,s,a);const l=this.toSeconds(s);return this._triggerEnvelopeAttack(l,a),this.setNote(t,l),this}triggerRelease(t){this.log("triggerRelease",t);const s=this.toSeconds(t);return this._triggerEnvelopeRelease(s),this}setNote(t,s){const a=this.toSeconds(s),l=t instanceof wn?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(a)>.05){const u=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(l,u,a)}else this.frequency.setValueAtTime(l,a);return this}}Ss([ci(0)],cn.prototype,"portamento",void 0);class Gr extends hn{constructor(){super($(Gr.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Tt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Yi extends cn{constructor(){const t=$(Yi.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new ai(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Gr(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Et(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(cn.getDefaults(),{envelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ln(ai.getDefaults(),[...Object.keys(ke.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,s){if(this.envelope.triggerAttack(t,s),this.oscillator.start(t),this.envelope.sustain===0){const a=this.toSeconds(this.envelope.attack),l=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+a+l)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class nl extends cn{constructor(){const t=$(nl.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new Yi({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Yi({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Mt({context:this.context,units:"frequency"}),this.detune=new Mt({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new we({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new Tt({context:this.context,gain:0}),Et(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(cn.getDefaults(),{harmonicity:3,oscillator:Object.assign(ln(ai.getDefaults(),[...Object.keys(ke.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ln(ai.getDefaults(),[...Object.keys(ke.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,s){this._carrier._triggerEnvelopeAttack(t,s),this._modulator._triggerEnvelopeAttack(t,s)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Zf extends nl{constructor(){super($(Zf.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Tu({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class sl extends lt{constructor(){const t=$(sl.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new qt({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new qt({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new qt({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new qt({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){wt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const s=new Float32Array(t);for(let d=0;d<t;d++){const m=Math.pow(d/t,2)*19980+20;s[d]=m}const a=new Float32Array(t),l=new Float32Array(t),u=this.context.createBiquadFilter();return u.type=this.type,u.Q.value=this.Q.value,u.frequency.value=this.frequency.value,u.gain.value=this.gain.value,u.getFrequencyResponse(s,a,l),a}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Hn extends lt{constructor(){const t=$(Hn.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._filters=[],this._filters=[],this.Q=new Mt({context:this.context,units:"positive",value:t.Q}),this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),this.gain=new Mt({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Et(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){wt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(a=>a.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const s=Xn(t)?t:parseInt(t,10),a=[-12,-24,-48,-96];let l=a.indexOf(s);wt(l!==-1,`rolloff can only be ${a.join(", ")}`),l+=1,this._rolloff=s,this.input.disconnect(),this._filters.forEach(u=>u.disconnect()),this._filters=new Array(l);for(let u=0;u<l;u++){const d=new sl({context:this.context});d.type=this._type,this.frequency.connect(d.frequency),this.detune.connect(d.detune),this.Q.connect(d.Q),this.gain.connect(d.gain),this._filters[u]=d}this._internalChannels=this._filters,Qn(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const s=new sl({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),a=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{s.getFrequencyResponse(t).forEach((u,d)=>a[d]*=u)}),s.dispose(),a}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),pl(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class il extends hn{constructor(){const t=$(il.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new Lr({context:this.context,value:t.exponent}),this._scale=this.output=new ri({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(hn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const s=this.toFrequency(t);Pe(s,0),this._baseFrequency=s,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class va extends cn{constructor(){const t=$(va.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new ai(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Hn(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new il(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Gr(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Et(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(cn.getDefaults(),{envelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ln(Hn.getDefaults(),Object.keys(lt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ln(il.getDefaults(),Object.keys(lt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ln(ai.getDefaults(),Object.keys(ke.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,s=1){if(this.envelope.triggerAttack(t,s),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const a=this.toSeconds(this.envelope.attack),l=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+a+l)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Wf extends cn{constructor(){const t=$(Wf.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new va(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new va(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new we({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new An({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Tt({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Mt({context:this.context,units:"frequency",value:440}),this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Et(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return ls(cn.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:ls(ln(va.getDefaults(),Object.keys(cn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:ls(ln(va.getDefaults(),Object.keys(cn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,s){this.voice0._triggerEnvelopeAttack(t,s),this.voice1._triggerEnvelopeAttack(t,s)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Kf extends nl{constructor(){const t=$(Kf.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new we({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(nl.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const J0=[1,1.483,1.932,2.546,2.63,3.897];class Jf extends cn{constructor(){const t=$(Jf.getDefaults(),arguments);super(t),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Mt({context:this.context,units:"cents",value:t.detune}),this.frequency=new Mt({context:this.context,units:"frequency"}),this._amplitude=new Tt({context:this.context,gain:0}).connect(this.output),this._highpass=new Hn({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let s=0;s<J0.length;s++){const a=new Ur({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:s===0?()=>this.onsilence(this):Ht,type:"square"});a.connect(this._highpass),this._oscillators[s]=a;const l=new we({context:this.context,value:J0[s]});this._freqMultipliers[s]=l,this.frequency.chain(l,a.frequency),this.detune.connect(a.detune)}this._filterFreqScaler=new ri({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new hn({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return ls(cn.getDefaults(),{envelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,s=1){return this.envelope.triggerAttack(t,s),this._oscillators.forEach(a=>a.start(t)),this.envelope.sustain===0&&this._oscillators.forEach(a=>{a.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach(s=>s.stop(t+this.toSeconds(this.envelope.release))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach(s=>s.modulationIndex.value=t)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach(s=>s.harmonicity.value=t)}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach(t=>t.dispose()),this._freqMultipliers.forEach(t=>t.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class xl extends Yi{constructor(){const t=$(xl.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Et(this,["oscillator","envelope"])}static getDefaults(){return ls(cn.getDefaults(),Yi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,s){const a=this.toSeconds(s),l=this.toFrequency(t instanceof wn?t.toFrequency():t),u=l*this.octaves;return this.oscillator.frequency.setValueAtTime(u,a),this.oscillator.frequency.exponentialRampToValueAtTime(l,a+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ss([mv(0)],xl.prototype,"octaves",void 0);Ss([ci(0)],xl.prototype,"pitchDecay",void 0);class $f extends us{constructor(){const t=$($f.getDefaults(),arguments);super(t),this.name="NoiseSynth",this.noise=new Pi(Object.assign({context:this.context},t.noise)),this.envelope=new Gr(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(us.getDefaults(),{envelope:Object.assign(ln(hn.getDefaults(),Object.keys(lt.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(ln(Pi.getDefaults(),Object.keys(ke.getDefaults())),{type:"white"})})}triggerAttack(t,s=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,s),this.noise.start(t),this.envelope.sustain===0&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,s,a=1){return s=this.toSeconds(s),t=this.toSeconds(t),this.triggerAttack(s,a),this.triggerRelease(s+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const tp=new Set;function ep(o){tp.add(o)}function yv(o,t){const s=`registerProcessor("${o}", ${t})`;tp.add(s)}function WC(){return Array.from(tp).join(`
`)}class lf extends lt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ht;const s=URL.createObjectURL(new Blob([WC()],{type:"text/javascript"})),a=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(s).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(a,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const KC=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ep(KC);const JC=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ep(JC);const $C=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ep($C);const vv="feedback-comb-filter",t2=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;yv(vv,t2);class Sl extends lf{constructor(){const t=$(Sl.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.delayTime=new qt({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new qt({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Et(this,["resonance","delayTime"])}_audioWorkletName(){return vv}static getDefaults(){return Object.assign(lt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Qn(this.input,t,this.output);const s=t.parameters.get("delayTime");this.delayTime.setParam(s);const a=t.parameters.get("feedback");this.resonance.setParam(a)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Tl extends lt{constructor(){const t=$(Tl.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(lt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,s=this.toFrequency(this._frequency),a=1/(2*Math.PI*s);if(this._type==="lowpass"){const l=1/(a*this.context.sampleRate),u=l-1;this._filter=this.context.createIIRFilter([l,0],[1,u])}else{const l=1/(a*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,l])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const s=new Float32Array(t);for(let u=0;u<t;u++){const f=Math.pow(u/t,2)*19980+20;s[u]=f}const a=new Float32Array(t),l=new Float32Array(t);return this._filter.getFrequencyResponse(s,a,l),a}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class wl extends lt{constructor(){const t=$(wl.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new Sl({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Tl({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(lt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class np extends us{constructor(){const t=$(np.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new Pi({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new wl({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return ls(us.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,s){const a=this.toFrequency(t);s=this.toSeconds(s);const l=1/a;return this._lfcf.delayTime.setValueAtTime(l,s),this._noise.start(s),this._noise.stop(s+l*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(s),this._lfcf.resonance.setValueAtTime(this.resonance,s),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class sp extends us{constructor(){const t=$(sp.getDefaults(),arguments,["voice","options"]);super(t),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=l=>this.releaseAll(l),wt(!Xn(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const s=t.voice.getDefaults();this.options=Object.assign(s,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const a=this._voices.indexOf(this._dummyVoice);this._voices.splice(a,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(us.getDefaults(),{maxPolyphony:32,options:{},voice:Yi})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const s=this._activeVoices.findIndex(a=>a.voice===t);this._activeVoices.splice(s,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return wt(t instanceof cn,"Voice must extend Monophonic class"),t.connect(this.output),this._voices.push(t),t}else Rr("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),s=this._voices.indexOf(t);this._voices.splice(s,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,s,a){t.forEach(l=>{const u=new wr(this.context,l).toMidi(),d=this._getNextAvailableVoice();d&&(d.triggerAttack(l,s,a),this._activeVoices.push({midi:u,voice:d,released:!1}),this.log("triggerAttack",l,s))})}_triggerRelease(t,s){t.forEach(a=>{const l=new wr(this.context,a).toMidi(),u=this._activeVoices.find(({midi:d,released:f})=>d===l&&!f);u&&(u.voice.triggerRelease(s),u.released=!0,this.log("triggerRelease",a,s))})}_scheduleEvent(t,s,a,l){wt(!this.disposed,"Synth was already disposed"),a<=this.now()?t==="attack"?this._triggerAttack(s,a,l):this._triggerRelease(s,a):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(t,s,a,l)},a-this.now())}triggerAttack(t,s,a){Array.isArray(t)||(t=[t]);const l=this.toSeconds(s);return this._scheduleEvent("attack",t,l,a),this}triggerRelease(t,s){Array.isArray(t)||(t=[t]);const a=this.toSeconds(s);return this._scheduleEvent("release",t,a),this}triggerAttackRelease(t,s,a,l){const u=this.toSeconds(a);if(this.triggerAttack(t,u,l),un(s)){wt(un(t),"If the duration is an array, the notes must also be an array"),t=t;for(let d=0;d<t.length;d++){const f=s[Math.min(d,s.length-1)],m=this.toSeconds(f);wt(m>0,"The duration must be greater than 0"),this.triggerRelease(t[d],u+m)}}else{const d=this.toSeconds(s);wt(d>0,"The duration must be greater than 0"),this.triggerRelease(t,u+d)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(t){const s=ln(t,["onsilence","context"]);return this.options=ls(this.options,s),this._voices.forEach(a=>a.set(s)),this._dummyVoice.set(s),this}get(){return this._dummyVoice.get()}releaseAll(t){const s=this.toSeconds(t);return this._activeVoices.forEach(({voice:a})=>{a.triggerRelease(s)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(t=>t.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Al extends us{constructor(){const t=$(Al.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const s={};Object.keys(t.urls).forEach(a=>{const l=parseInt(a,10);if(wt(Wo(a)||Xn(l)&&isFinite(l),`url key is neither a note or midi pitch: ${a}`),Wo(a)){const u=new wn(this.context,a).toMidi();s[u]=t.urls[a]}else Xn(l)&&isFinite(l)&&(s[l]=t.urls[l])}),this._buffers=new Br({urls:s,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(us.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ht,onerror:Ht,release:.1,urls:{}})}_findClosest(t){let a=0;for(;a<96;){if(this._buffers.has(t+a))return-a;if(this._buffers.has(t-a))return a;a++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,s,a=1){return this.log("triggerAttack",t,s,a),Array.isArray(t)||(t=[t]),t.forEach(l=>{const u=fv(new wn(this.context,l).toFrequency()),d=Math.round(u),f=u-d,m=this._findClosest(d),p=d-m,g=this._buffers.get(p),v=Sr(m+f),x=new Wi({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);x.start(s,0,g.duration/v,a),un(this._activeSources.get(d))||this._activeSources.set(d,[]),this._activeSources.get(d).push(x),x.onended=()=>{if(this._activeSources&&this._activeSources.has(d)){const T=this._activeSources.get(d),S=T.indexOf(x);S!==-1&&T.splice(S,1)}}}),this}triggerRelease(t,s){return this.log("triggerRelease",t,s),Array.isArray(t)||(t=[t]),t.forEach(a=>{const l=new wn(this.context,a).toMidi();if(this._activeSources.has(l)&&this._activeSources.get(l).length){const u=this._activeSources.get(l);s=this.toSeconds(s),u.forEach(d=>{d.stop(s)}),this._activeSources.set(l,[])}}),this}releaseAll(t){const s=this.toSeconds(t);return this._activeSources.forEach(a=>{for(;a.length;)a.shift().stop(s)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,s,a,l=1){const u=this.toSeconds(a);return this.triggerAttack(t,u,l),un(s)?(wt(un(t),"notes must be an array when duration is array"),t.forEach((d,f)=>{const m=s[Math.min(f,s.length-1)];this.triggerRelease(d,u+this.toSeconds(m))})):this.triggerRelease(t,u+this.toSeconds(s)),this}add(t,s,a){if(wt(Wo(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Wo(t)){const l=new wn(this.context,t).toMidi();this._buffers.add(l,s,a)}else this._buffers.add(t,s,a);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(s=>s.dispose())}),this._activeSources.clear(),this}}Ss([ci(0)],Al.prototype,"attack",void 0);Ss([ci(0)],Al.prototype,"release",void 0);class Rs extends sn{constructor(){const t=$(Rs.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new Vr("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(sn.getDefaults(),{callback:Ht,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,s=>{let a;if(s.state==="started"){s.id!==-1&&this.context.transport.clear(s.id);const l=s.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Xn(this._loop)&&this._loop>1){a=1/0,Xn(this._loop)&&(a=this._loop*this._getLoopDuration());const u=this._state.getAfter(l);u!==null&&(a=Math.min(a,u.time-l)),a!==1/0&&(a=new Se(this.context,a));const d=new Se(this.context,this._getLoopDuration());s.id=this.context.transport.scheduleRepeat(this._tick.bind(this),d,new Se(this.context,l),a)}else s.id=this.context.transport.schedule(this._tick.bind(this),new Se(this.context,l))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const s=this.toTicks(t);return this._state.getValueAtTime(s)==="stopped"&&(this._state.add({id:-1,state:"started",time:s}),this._rescheduleEvents(s)),this}stop(t){this.cancel(t);const s=this.toTicks(t);if(this._state.getValueAtTime(s)==="started"){this._state.setStateAtTime("stopped",s,{id:-1});const a=this._state.getBefore(s);let l=s;a!==null&&(l=a.time),this._rescheduleEvents(l)}return this}cancel(t){t=cs(t,-1/0);const s=this.toTicks(t);return this._state.forEachFrom(s,a=>{this.context.transport.clear(a.id)}),this._state.cancel(s),this}_tick(t){const s=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(s)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let a=.02;kf(this.humanize)||(a=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*a}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Se(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Se(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,s=this._state.get(t);if(s!==null&&s.state==="started"){const a=this._getLoopDuration();return(t-s.time)%a/a}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class al extends sn{constructor(){const t=$(al.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new Rs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(sn.getDefaults(),{interval:"4n",callback:Ht,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}class rl extends Rs{constructor(){const t=$(rl.getDefaults(),arguments,["callback","events"]);super(t),this.name="Part",this._state=new Vr("stopped"),this._events=new Set,this._state.increasing=!0,t.events.forEach(s=>{un(s)?this.add(s[0],s[1]):this.add(s)})}static getDefaults(){return Object.assign(Rs.getDefaults(),{events:[]})}start(t,s){const a=this.toTicks(t);if(this._state.getValueAtTime(a)!=="started"){s=cs(s,this._loop?this._loopStart:0),this._loop?s=cs(s,this._loopStart):s=cs(s,0);const l=this.toTicks(s);this._state.add({id:-1,offset:l,state:"started",time:a}),this._forEach(u=>{this._startNote(u,a,l)})}return this}_startNote(t,s,a){s-=a,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<a&&(s+=this._getLoopDuration()),t.start(new Se(this.context,s))):t.startOffset<this._loopStart&&t.startOffset>=a&&(t.loop=!1,t.start(new Se(this.context,s))):t.startOffset>=a&&t.start(new Se(this.context,s))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach(s=>{s.startOffset+=this._startOffset})}stop(t){const s=this.toTicks(t);return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._forEach(a=>{a.stop(t)}),this}at(t,s){const a=new Fe(this.context,t).toTicks(),l=new Se(this.context,1).toSeconds(),u=this._events.values();let d=u.next();for(;!d.done;){const f=d.value;if(Math.abs(a-f.startOffset)<l)return Vt(s)&&(f.value=s),f;d=u.next()}return Vt(s)?(this.add(t,s),this.at(t)):null}add(t,s){t instanceof Object&&Reflect.has(t,"time")&&(s=t,t=s.time);const a=this.toTicks(t);let l;return s instanceof Rs?(l=s,l.callback=this._tick.bind(this)):l=new Rs({callback:this._tick.bind(this),context:this.context,value:s}),l.startOffset=a,l.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(l),this._restartEvent(l),this}_restartEvent(t){this._state.forEach(s=>{s.state==="started"?this._startNote(t,s.time,s.offset):t.stop(new Se(this.context,s.time))})}remove(t,s){return si(t)&&t.hasOwnProperty("time")&&(s=t,t=s.time),t=this.toTicks(t),this._events.forEach(a=>{a.startOffset===t&&(kn(s)||Vt(s)&&a.value===s)&&(this._events.delete(a),a.dispose())}),this}clear(){return this._forEach(t=>t.dispose()),this._events.clear(),this}cancel(t){return this._forEach(s=>s.cancel(t)),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach(s=>{s instanceof rl?s._forEach(t):t(s)}),this}_setAll(t,s){this._forEach(a=>{a[t]=s})}_tick(t,s){this.mute||this.callback(t,s)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):t.state==="stopped"&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach(s=>{s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.loop=t,this._testLoopBoundries(s)})}get loopEnd(){return new Se(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(s=>{s.loopEnd=t,this._testLoopBoundries(s)})}get loopStart(){return new Se(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(s=>{s.loopStart=this.loopStart,this._testLoopBoundries(s)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*e2(o){let t=0;for(;t<o;)t=Aa(t,0,o-1),yield t,t++}function*n2(o){let t=o-1;for(;t>=0;)t=Aa(t,0,o-1),yield t,t--}function*Xo(o,t){for(;;)yield*t(o)}function*$0(o,t){let s=t?0:o-1;for(;;)s=Aa(s,0,o-1),yield s,t?(s++,s>=o-1&&(t=!1)):(s--,s<=0&&(t=!0))}function*s2(o){let t=0,s=0;for(;t<o;)t=Aa(t,0,o-1),yield t,s++,t+=s%2?2:-1}function*i2(o){let t=o-1,s=0;for(;t>=0;)t=Aa(t,0,o-1),yield t,s++,t+=s%2?-2:1}function*a2(o){for(;;)yield Math.floor(Math.random()*o)}function*r2(o){const t=[];for(let s=0;s<o;s++)t.push(s);for(;t.length>0;){const s=t.splice(Math.floor(t.length*Math.random()),1);yield Aa(s[0],0,o-1)}}function*o2(o){let t=Math.floor(Math.random()*o);for(;;)t===0?t++:t===o-1||Math.random()<.5?t--:t++,yield t}function*ty(o,t="up",s=0){switch(wt(o>=1,"The number of values must be at least one"),t){case"up":yield*Xo(o,e2);case"down":yield*Xo(o,n2);case"upDown":yield*$0(o,!0);case"downUp":yield*$0(o,!1);case"alternateUp":yield*Xo(o,s2);case"alternateDown":yield*Xo(o,i2);case"random":yield*a2(o);case"randomOnce":yield*Xo(o,r2);case"randomWalk":yield*o2(o)}}class ip extends al{constructor(){const t=$(ip.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=ty(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(al.getDefaults(),{pattern:"up",values:[],callback:Ht})}_tick(t){const s=this._pattern.next();this._index=s.value,this._value=this._values[s.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=ty(this._values.length,this._type)}}class ap extends Rs{constructor(){const t=$(ap.getDefaults(),arguments,["callback","events","subdivision"]);super(t),this.name="Sequence",this._part=new rl({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(ln(Rs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,s){s!==null&&!this.mute&&this.callback(t,s)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,s){return this._part.start(t,s&&this._indexTime(s)),this}stop(t){return this._part.stop(t),this}get subdivision(){return new Se(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(s,a)=>s[a],set:(s,a,l)=>(bs(a)&&isFinite(parseInt(a,10))&&un(l)?s[a]=this._createSequence(l):s[a]=l,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,s,a){t.forEach((l,u)=>{const d=u*s+a;if(un(l))this._rescheduleSequence(l,s/l.length,d);else{const f=new Se(this.context,d,"i").toSeconds();this._part.add(f,l)}})}_indexTime(t){return new Se(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,t===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class Hr extends lt{constructor(){const t=$(Hr.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new _v({context:this.context}),this.a=new Tt({context:this.context,gain:0}),this.b=new Tt({context:this.context,gain:0}),this.output=new Tt({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Mt({context:this.context,units:"normalRange",value:t.fade}),Et(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Cn(this._split,this.a.gain,0),Cn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(lt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Xe extends lt{constructor(t){super(t),this.name="Effect",this._dryWet=new Hr({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Tt({context:this.context}),this.effectReturn=new Tt({context:this.context}),this.input=new Tt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Et(this,"wet")}static getDefaults(){return Object.assign(lt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class ou extends Xe{constructor(t){super(t),this.name="LFOEffect",this._lfo=new An({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Et(this,["frequency","depth"])}static getDefaults(){return Object.assign(Xe.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class rp extends ou{constructor(){const t=$(rp.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(t),this.name="AutoFilter",this.filter=new Hn(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(ou.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Cl extends lt{constructor(){const t=$(Cl.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new qt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Et(this,"pan")}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class op extends ou{constructor(){const t=$(op.getDefaults(),arguments,["frequency"]);super(t),this.name="AutoPanner",this._panner=new Cl({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(ou.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Nl extends lt{constructor(){const t=$(Nl.getDefaults(),arguments,["smoothing"]);super(t),this.name="Follower",this._abs=this.input=new gv({context:this.context}),this._lowpass=this.output=new Tl({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(lt.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class lp extends Xe{constructor(){const t=$(lp.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(t),this.name="AutoWah",this._follower=new Nl({context:this.context,smoothing:t.follower}),this._sweepRange=new Nu({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new Tt({context:this.context}),this._bandpass=new Hn({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Hn({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Et(this,["gain","Q"])}static getDefaults(){return Object.assign(Xe.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return ml(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/xr(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const bv="bit-crusher",l2=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;yv(bv,l2);class cp extends Xe{constructor(){const t=$(cp.getDefaults(),arguments,["bits"]);super(t),this.name="BitCrusher",this._bitCrusherWorklet=new up({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Xe.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class up extends lf{constructor(){const t=$(up.getDefaults(),arguments);super(t),this.name="BitCrusherWorklet",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.bits=new qt({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(lf.getDefaults(),{bits:12})}_audioWorkletName(){return bv}onReady(t){Qn(this.input,t,this.output);const s=t.parameters.get("bits");this.bits.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class hp extends Xe{constructor(){const t=$(hp.getDefaults(),arguments,["order"]);super(t),this.name="Chebyshev",this._shaper=new Ts({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(Xe.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,s,a){return a.has(s)||(s===0?a.set(s,0):s===1?a.set(s,t):a.set(s,2*t*this._getCoefficient(t,s-1,a)-this._getCoefficient(t,s-2,a))),a.get(s)}get order(){return this._order}set order(t){wt(Number.isInteger(t),"'order' must be an integer"),this._order=t,this._shaper.setMap(s=>this._getCoefficient(s,t,new Map))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Da extends lt{constructor(){const t=$(Da.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(lt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ki extends lt{constructor(){const t=$(Ki.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(lt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class ks extends lt{constructor(t){super(t),this.name="StereoEffect",this.input=new Tt({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Hr({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Da({context:this.context,channels:2}),this._merge=new Ki({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Et(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),Qn(...t),Cn(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),Qn(...t),Cn(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(lt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class cf extends ks{constructor(t){super(t),this.feedback=new Mt({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new Tt({context:this.context}),this._feedbackR=new Tt({context:this.context}),this._feedbackSplit=new Da({context:this.context,channels:2}),this._feedbackMerge=new Ki({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Et(this,["feedback"])}static getDefaults(){return Object.assign(ks.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class dp extends cf{constructor(){const t=$(dp.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new An({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new An({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Yn({context:this.context}),this._delayNodeR=new Yn({context:this.context}),this.frequency=this._lfoL.frequency,Et(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(cf.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const s=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-s,0),this._lfoL.max=this._delayTime+s,this._lfoR.min=Math.max(this._delayTime-s,0),this._lfoR.max=this._delayTime+s}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class fp extends Xe{constructor(){const t=$(fp.getDefaults(),arguments,["distortion"]);super(t),this.name="Distortion",this._shaper=new Ts({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(Xe.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const s=t*100,a=Math.PI/180;this._shaper.setMap(l=>Math.abs(l)<.001?0:(3+s)*l*20*a/(Math.PI+s*Math.abs(l)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class lu extends Xe{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new Tt({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Et(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Xe.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class pp extends lu{constructor(){const t=$(pp.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new Yn({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Et(this,"delayTime")}static getDefaults(){return Object.assign(lu.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class c2 extends lt{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this.offset90=new Tt({context:this.context});const s=[.6923878,.9360654322959,.988229522686,.9987488452737],a=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(s),this._bank1=this._createAllPassFilterBank(a),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),Qn(this.input,...this._bank0,this._oneSampleDelay,this.output),Qn(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map(a=>{const l=[[a*a,0,-1],[1,0,-(a*a)]];return this.context.createIIRFilter(l[0],l[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(t=>t.disconnect()),this._bank1.forEach(t=>t.disconnect()),this._oneSampleDelay.disconnect(),this}}class mp extends Xe{constructor(){const t=$(mp.getDefaults(),arguments,["frequency"]);super(t),this.name="FrequencyShifter",this.frequency=new Mt({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new _l({context:this.context,type:"sine"}),this._cosine=new Te({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new we({context:this.context}),this._cosineMultiply=new we({context:this.context}),this._negate=new Qf({context:this.context}),this._add=new Na({context:this.context}),this._phaseShifter=new c2({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const s=this.immediate();this._sine.start(s),this._cosine.start(s)}static getDefaults(){return Object.assign(Xe.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const ey=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],ny=[225,556,441,341];class gp extends ks{constructor(){const t=$(gp.getDefaults(),arguments,["roomSize","dampening"]);super(t),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new Mt({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=ny.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._allpassFiltersR=ny.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._combFilters=ey.map((s,a)=>{const l=new wl({context:this.context,dampening:t.dampening,delayTime:s});return a<ey.length/2?this.connectEffectLeft(l,...this._allpassFiltersL):this.connectEffectRight(l,...this._allpassFiltersR),this.roomSize.connect(l.resonance),l}),Et(this,["roomSize"])}static getDefaults(){return Object.assign(ks.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach(s=>s.dampening=t)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(t=>t.disconnect()),this._allpassFiltersR.forEach(t=>t.disconnect()),this._combFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this}}const sy=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],u2=[.773,.802,.753,.733],h2=[347,113,37];class _p extends ks{constructor(){const t=$(_p.getDefaults(),arguments,["roomSize"]);super(t),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new Mt({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new ri({context:this.context,min:-.733,max:.197}),this._allpassFilters=h2.map(s=>{const a=this.context.createBiquadFilter();return a.type="allpass",a.frequency.value=s,a}),this._feedbackCombFilters=sy.map((s,a)=>{const l=new Sl({context:this.context,delayTime:s});return this._scaleRoomSize.connect(l.resonance),l.resonance.value=u2[a],a<sy.length/2?this.connectEffectLeft(...this._allpassFilters,l):this.connectEffectRight(...this._allpassFilters,l),l}),this.roomSize.connect(this._scaleRoomSize),Et(this,["roomSize"])}static getDefaults(){return Object.assign(ks.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(t=>t.disconnect()),this._feedbackCombFilters.forEach(t=>t.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class iy extends cf{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Et(this,["feedback"])}}class yp extends iy{constructor(){const t=$(yp.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="PingPongDelay",this._leftDelay=new Yn({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new Yn({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new Yn({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new Mt({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Et(this,["delayTime"])}static getDefaults(){return Object.assign(iy.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class vp extends lu{constructor(){const t=$(vp.getDefaults(),arguments,["pitch"]);super(t),this.name="PitchShift",this._frequency=new Mt({context:this.context}),this._delayA=new Yn({maxDelay:1,context:this.context}),this._lfoA=new An({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Yn({maxDelay:1,context:this.context}),this._lfoB=new An({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Hr({context:this.context}),this._crossFadeLFO=new An({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Yn({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Et(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const s=this.now();this._lfoA.start(s),this._lfoB.start(s),this._crossFadeLFO.start(s),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(lu.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let s=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,s=Sr(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,s=Sr(t)-1),this._frequency.value=s*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class bp extends ks{constructor(){const t=$(bp.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(t),this.name="Phaser",this._lfoL=new An({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new An({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new Mt({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Et(this,["frequency","Q"])}static getDefaults(){return Object.assign(ks.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,s){const a=[];for(let l=0;l<t;l++){const u=this.context.createBiquadFilter();u.type="allpass",this.Q.connect(u.Q),s.connect(u.frequency),a.push(u)}return a}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const s=this._baseFrequency*Math.pow(2,t);this._lfoL.max=s,this._lfoR.max=s}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(t=>t.disconnect()),this._filtersR.forEach(t=>t.disconnect()),this.frequency.dispose(),this}}class xp extends Xe{constructor(){const t=$(xp.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const s=this.toSeconds(t.decay);Pe(s,.001),this._decay=s;const a=this.toSeconds(t.preDelay);Pe(a,0),this._preDelay=a,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Xe.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),Pe(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),Pe(t,0),this._preDelay=t,this.generate()}generate(){return pe(this,void 0,void 0,function*(){const t=this.ready,s=new qr(2,this._decay+this._preDelay,this.context.sampleRate),a=new Pi({context:s}),l=new Pi({context:s}),u=new Ki({context:s});a.connect(u,0,0),l.connect(u,0,1);const d=new Tt({context:s}).toDestination();u.connect(d),a.start(0),l.start(0),d.gain.setValueAtTime(0,0),d.gain.setValueAtTime(1,this._preDelay),d.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const f=s.render();return this.ready=f.then(Ht),yield t,this._convolver.buffer=(yield f).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class El extends lt{constructor(){super($(El.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Da({channels:2,context:this.context}),this._midAdd=new Na({context:this.context}),this.mid=new we({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Ea({context:this.context}),this.side=new we({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Dl extends lt{constructor(){super($(Dl.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Tt({context:this.context}),this.side=new Tt({context:this.context}),this._left=new Na({context:this.context}),this._leftMult=new we({context:this.context,value:Math.SQRT1_2}),this._right=new Ea({context:this.context}),this._rightMult=new we({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Ki({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class ay extends Xe{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Dl({context:this.context}),this._midSideSplit=new El({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Sp extends ay{constructor(){const t=$(Sp.getDefaults(),arguments,["width"]);super(t),this.name="StereoWidener",this.width=new Mt({context:this.context,value:t.width,units:"normalRange"}),Et(this,["width"]),this._twoTimesWidthMid=new we({context:this.context,value:2}),this._twoTimesWidthSide=new we({context:this.context,value:2}),this._midMult=new we({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Ea({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),Cn(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new we({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(ay.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tp extends ks{constructor(){const t=$(Tp.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Tremolo",this._lfoL=new An({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new An({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new Tt({context:this.context}),this._amplitudeR=new Tt({context:this.context}),this.frequency=new Mt({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new Mt({context:this.context,value:t.depth,units:"normalRange"}),Et(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(ks.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class wp extends Xe{constructor(){const t=$(wp.getDefaults(),arguments,["frequency","depth"]);super(t),this.name="Vibrato",this._delayNode=new Yn({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new An({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Et(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Xe.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ol extends lt{constructor(){const t=$(Ol.getDefaults(),arguments,["type","size"]);super(t),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Tt({context:this.context}),this._split=new Da({context:this.context,channels:t.channels}),this.input.connect(this._split),Pe(t.channels,1);for(let s=0;s<t.channels;s++)this._analysers[s]=this.context.createAnalyser(),this._split.connect(this._analysers[s],s,0);this.size=t.size,this.type=t.type,this.smoothing=t.smoothing}static getDefaults(){return Object.assign(lt.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,s)=>{const a=this._buffers[s];this._type==="fft"?t.getFloatFrequencyData(a):this._type==="waveform"&&t.getFloatTimeDomainData(a)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((s,a)=>{s.fftSize=t*2,this._buffers[a]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){wt(t==="waveform"||t==="fft",`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(s=>s.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Xi extends lt{constructor(){super($(Xi.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Ol({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ap extends Xi{constructor(){const t=$(Ap.getDefaults(),arguments,["smoothing"]);super(t),this.name="Meter",this.input=this.output=this._analyser=new Ol({context:this.context,size:256,type:"waveform",channels:t.channelCount}),this.smoothing=t.smoothing,this.normalRange=t.normalRange,this._rms=new Array(t.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(Xi.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Rr("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),a=(this.channels===1?[t]:t).map((l,u)=>{const d=l.reduce((m,p)=>m+p*p,0),f=Math.sqrt(d/l.length);return this._rms[u]=Math.max(f,this._rms[u]*this.smoothing),this.normalRange?this._rms[u]:ml(this._rms[u])});return this.channels===1?a[0]:a}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Cp extends Xi{constructor(){const t=$(Cp.getDefaults(),arguments,["size"]);super(t),this.name="FFT",this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(lt.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(s=>this.normalRange?xr(s):s)}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return wt(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(this.size*2)}}class Np extends Xi{constructor(){super($(Np.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Ep extends Xi{constructor(){const t=$(Ep.getDefaults(),arguments,["size"]);super(t),this.name="Waveform",this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Xi.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class ze extends lt{constructor(){const t=$(ze.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new Tt({context:this.context}),ze._allSolos.has(this.context)||ze._allSolos.set(this.context,new Set),ze._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(lt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),ze._allSolos.get(this.context).forEach(s=>s._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ze._soloed.has(this.context)||ze._soloed.set(this.context,new Set),ze._soloed.get(this.context).add(this)}_removeSolo(){ze._soloed.has(this.context)&&ze._soloed.get(this.context).delete(this)}_isSoloed(){return ze._soloed.has(this.context)&&ze._soloed.get(this.context).has(this)}_noSolos(){return!ze._soloed.has(this.context)||ze._soloed.has(this.context)&&ze._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ze._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ze._allSolos=new Map;ze._soloed=new Map;class Eu extends lt{constructor(){const t=$(Eu.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new Cl({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new li({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Et(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ba extends lt{constructor(){const t=$(ba.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new ze({solo:t.solo,context:this.context}),this._panVol=this.output=new Eu({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Et(this,["pan","volume"])}static getDefaults(){return Object.assign(lt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return ba.buses.has(t)||ba.buses.set(t,new Tt({context:this.context})),ba.buses.get(t)}send(t,s=0){const a=this._getBus(t),l=new Tt({context:this.context,units:"decibels",gain:s});return this.connect(l),l.connect(a),l}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ba.buses=new Map;class Dp extends lt{constructor(){super($(Dp.getDefaults(),arguments)),this.name="Mono",this.input=new Tt({context:this.context}),this._merge=this.output=new Ki({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class Ml extends lt{constructor(){const t=$(Ml.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(t),this.name="MultibandSplit",this.input=new Tt({context:this.context}),this.output=void 0,this.low=new Hn({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Hn({context:this.context,frequency:0,type:"highpass"}),this.mid=new Hn({context:this.context,frequency:0,type:"lowpass"}),this.high=new Hn({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Mt({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new Mt({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new Mt({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Et(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lt.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),pl(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class Op extends lt{constructor(){const t=$(Op.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(t),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new qt({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new qt({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new qt({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new qt({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new qt({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new qt({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(lt.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,s,a){return this.positionX.value=t,this.positionY.value=s,this.positionZ.value=a,this}setOrientation(t,s,a){return this.orientationX.value=t,this.orientationY.value=s,this.orientationZ.value=a,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class cu extends lt{constructor(){const t=$(cu.getDefaults(),arguments);super(t),this.name="Recorder",this.input=new Tt({context:this.context}),wt(cu.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return lt.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return Sn!==null&&Reflect.has(Sn,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return pe(this,void 0,void 0,function*(){wt(this.state!=="started","Recorder is already started");const t=new Promise(s=>{const a=()=>{this._recorder.removeEventListener("start",a,!1),s()};this._recorder.addEventListener("start",a,!1)});return this.state==="stopped"?this._recorder.start():this._recorder.resume(),yield t})}stop(){return pe(this,void 0,void 0,function*(){wt(this.state!=="stopped","Recorder is not started");const t=new Promise(s=>{const a=l=>{this._recorder.removeEventListener("dataavailable",a,!1),s(l.data)};this._recorder.addEventListener("dataavailable",a,!1)});return this._recorder.stop(),yield t})}pause(){return wt(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class ii extends lt{constructor(){const t=$(ii.getDefaults(),arguments,["threshold","ratio"]);super(t),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new qt({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new qt({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new qt({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new qt({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new qt({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Et(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(lt.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Mp extends lt{constructor(){const t=$(Mp.getDefaults(),arguments,["threshold","smoothing"]);super(t),this.name="Gate",this._follower=new Nl({context:this.context,smoothing:t.smoothing}),this._gt=new Cu({context:this.context,value:xr(t.threshold)}),this.input=new Tt({context:this.context}),this._gate=this.output=new Tt({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(lt.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return ml(this._gt.value)}set threshold(t){this._gt.value=xr(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Rp extends lt{constructor(){const t=$(Rp.getDefaults(),arguments,["threshold"]);super(t),this.name="Limiter",this._compressor=this.input=this.output=new ii({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Et(this,"threshold")}static getDefaults(){return Object.assign(lt.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class kp extends lt{constructor(){const t=$(kp.getDefaults(),arguments);super(t),this.name="MidSideCompressor",this._midSideSplit=this.input=new El({context:this.context}),this._midSideMerge=this.output=new Dl({context:this.context}),this.mid=new ii(Object.assign(t.mid,{context:this.context})),this.side=new ii(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Et(this,["mid","side"])}static getDefaults(){return Object.assign(lt.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class jp extends lt{constructor(){const t=$(jp.getDefaults(),arguments);super(t),this.name="MultibandCompressor",this._splitter=this.input=new Ml({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Tt({context:this.context}),this.low=new ii(Object.assign(t.low,{context:this.context})),this.mid=new ii(Object.assign(t.mid,{context:this.context})),this.high=new ii(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Et(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(lt.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class qp extends lt{constructor(){const t=$(qp.getDefaults(),arguments,["low","mid","high"]);super(t),this.name="EQ3",this.output=new Tt({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new Ml({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new Tt({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new Tt({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new Tt({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Et(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(lt.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),pl(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Vp extends lt{constructor(){const t=$(Vp.getDefaults(),arguments,["url","onload"]);super(t),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new Kt(t.url,s=>{this.buffer=s,t.onload()}),this.input=new Tt({context:this.context}),this.output=new Tt({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(lt.getDefaults(),{normalize:!0,onload:Ht})}load(t){return pe(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(t)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const s=this._buffer.get();this._convolver.buffer=s||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function d2(){return ye().now()}function f2(){return ye().immediate()}const p2=ye().transport;function m2(){return ye().transport}const g2=ye().destination,_2=ye().destination;function y2(){return ye().destination}const v2=ye().listener;function b2(){return ye().listener}const x2=ye().draw;function S2(){return ye().draw}const T2=ye();function w2(){return Kt.loaded()}const A2=Kt,C2=Br,N2=Wi,xv=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator:yl,AMSynth:Zf,Abs:gv,Add:Na,AmplitudeEnvelope:Gr,Analyser:Ol,AudioToGain:Tu,AutoFilter:rp,AutoPanner:op,AutoWah:lp,BaseContext:zf,BiquadFilter:sl,BitCrusher:cp,Buffer:A2,BufferSource:N2,Buffers:C2,Channel:ba,Chebyshev:hp,Chorus:dp,Clock:zr,Compressor:ii,Context:jr,Convolver:Vp,CrossFade:Hr,DCMeter:Np,Delay:Yn,Destination:g2,Distortion:fp,Draw:x2,DuoSynth:Wf,EQ3:qp,Emitter:kr,Envelope:hn,FFT:Cp,FMOscillator:Ur,FMSynth:Kf,FatOscillator:vl,FeedbackCombFilter:Sl,FeedbackDelay:pp,Filter:Hn,Follower:Nl,Freeverb:gp,Frequency:BC,FrequencyClass:wn,FrequencyEnvelope:il,FrequencyShifter:mp,Gain:Tt,GainToAudio:_v,Gate:Mp,GrainPlayer:Xf,GreaterThan:Cu,GreaterThanZero:Au,IntervalTimeline:pv,JCReverb:_p,LFO:An,Limiter:Rp,Listener:v2,Loop:al,LowpassCombFilter:wl,Master:_2,MembraneSynth:xl,Merge:Ki,MetalSynth:Jf,Meter:Ap,MidSideCompressor:kp,MidSideMerge:Dl,MidSideSplit:El,Midi:GC,MidiClass:wr,Mono:Dp,MonoSynth:va,MultibandCompressor:jp,MultibandSplit:Ml,Multiply:we,Negate:Qf,Noise:Pi,NoiseSynth:$f,Offline:IC,OfflineContext:qr,OmniOscillator:ai,OnePoleFilter:Tl,Oscillator:Te,PWMOscillator:bl,PanVol:Eu,Panner:Cl,Panner3D:Op,Param:qt,Part:rl,Pattern:ip,Phaser:bp,PingPongDelay:yp,PitchShift:vp,Player:Ir,Players:Yf,PluckSynth:np,PolySynth:sp,Pow:Lr,PulseOscillator:Fr,Recorder:cu,Reverb:xp,Sampler:Al,Scale:ri,ScaleExp:Nu,Sequence:ap,Signal:Mt,Solo:ze,Split:Da,StateTimeline:Vr,StereoWidener:Sp,Subtract:Ea,SyncedSignal:ZC,Synth:Yi,Ticks:HC,TicksClass:Se,Time:qC,TimeClass:Gn,Timeline:Pn,ToneAudioBuffer:Kt,ToneAudioBuffers:Br,ToneAudioNode:lt,ToneBufferSource:Wi,ToneEvent:Rs,ToneOscillatorNode:_l,Transport:p2,TransportTime:LC,TransportTimeClass:Fe,Tremolo:Tp,Unit:XC,UserMedia:$o,Vibrato:wp,Volume:li,WaveShaper:Ts,Waveform:Ep,Zero:wu,connect:Cn,connectSeries:Qn,connectSignal:gl,context:T2,dbToGain:xr,debug:vC,defaultArg:cs,disconnect:Uf,fanIn:UC,ftom:Fi,gainToDb:ml,getContext:ye,getDestination:y2,getDraw:S2,getListener:b2,getTransport:m2,immediate:f2,intervalToFrequencyRatio:Sr,isArray:un,isBoolean:kf,isDefined:Vt,isFunction:rv,isNote:Wo,isNumber:Xn,isObject:si,isString:bs,isUndef:kn,loaded:w2,mtof:Bf,now:d2,optionsFromArguments:$,setContext:ru,start:RC,supported:_C,version:pf},Symbol.toStringTag,{value:"Module"})),Qc=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],E2=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Ar=Qc,Sv=2,D2=4,O2=(o,t)=>{const s=[];for(let a=0;a<t;a++){const l=o+a;Ar.forEach(u=>{const d=u.includes("#")||u.includes("b");s.push({note:u,octave:l,isBlack:d,displayName:u,fullName:`${u}${l}`})})}return s},ry=O2(Sv,D2),zp={[Lt.Major]:[0,4,7],[Lt.Minor]:[0,3,7],[Lt.Dominant7th]:[0,4,7,10],[Lt.Minor7th]:[0,3,7,10],[Lt.Major7th]:[0,4,7,11],[Lt.Diminished7th]:[0,3,6,9],[Lt.Minor7thFlat5]:[0,3,6,10],[Lt.Suspended2]:[0,2,7],[Lt.Suspended4]:[0,5,7],[Lt.Major9]:[0,4,7,11,14],[Lt.Minor9]:[0,3,7,10,14],[Lt.Dominant9]:[0,4,7,10,14],[Lt.Major6]:[0,4,7,9],[Lt.Minor6]:[0,3,7,9],[Lt.Augmented]:[0,4,8],[Lt.PowerChord]:[0,7],[Lt.Dominant7sharp9]:[0,4,7,10,15],[Lt.Dominant7flat9]:[0,4,7,10,13]},M2=120,R2=40,k2=240,j2=-10,q2=0,Bp=-40,Tv=10,V2=25,z2=-20,B2=30,Li={instrument:en.SynthPiano,volume:j2,rhythmPattern:os.PerMeasure},Qo=de.ClassicGrand,Gd=!1,Hd=-12,Pd=fe.Off,uu=4,Cr=4,Ms=()=>Array(uu).fill(null).map(()=>Array(Cr).fill(!1)),_a=()=>({[Yt.Kick]:Ms(),[Yt.Snare]:Ms(),[Yt.HiHatClosed]:Ms(),[Yt.Tom1]:Ms(),[Yt.CrashCymbal]:Ms()}),Yd=!1,Xd=-5,Pc=Me.Off,Qd=_s.ElectricBass,L2=2,wv=[{value:os.PerMeasure,label:"每小節一次 (1 hit/bar)",hits:[{offset:"0:0:0",duration:"1n"}]},{value:os.PerTwoBeats,label:"每兩拍一次 (2 hits/bar)",hits:[{offset:"0:0:0",duration:"2n"},{offset:"0:2:0",duration:"2n"}]},{value:os.PerBeat,label:"每拍一次 (4 hits/bar)",hits:[{offset:"0:0:0",duration:"4n"},{offset:"0:1:0",duration:"4n"},{offset:"0:2:0",duration:"4n"},{offset:"0:3:0",duration:"4n"}]},{value:os.PerEighthNote,label:"每八分音符一次 (8 hits/bar)",hits:Array.from({length:8},(o,t)=>({offset:`0:${Math.floor(t/2)}:${t%2*2}`,duration:"8n"}))},{value:os.PerSixteenthNote,label:"每十六分音符一次 (16 hits/bar)",hits:Array.from({length:16},(o,t)=>({offset:`0:${Math.floor(t/4)}:${t%4}`,duration:"16n"}))},{value:os.Custom,label:"自訂 (Custom)"}],U2=[{value:en.AcousticPiano,label:"鋼琴 (Piano)"},{value:en.SynthPiano,label:"合成鋼琴 (Synth Piano)"},{value:en.MellowSynth,label:"圓潤合成音 (Mellow Synth)"},{value:en.SampledGuitar,label:"吉他 (Guitar)"},{value:en.StringEnsemble,label:"弦樂合奏 (String Ensemble)"},{value:en.Synth,label:"合成器 (Synth)"},{value:en.FMSynth,label:"FM 合成器 (FM Synth)"},{value:en.AMSynth,label:"AM 合成器 (AM Synth)"}],F2=[{value:de.ClassicGrand,label:"古典平台鋼琴 (Classic Grand)"},{value:de.SampledGrand,label:"真實平台鋼琴 (Sampled Grand)"},{value:de.SampledGuitar,label:"吉他 (Guitar)"},{value:de.StringEnsemble,label:"弦樂合奏 (String Ensemble)"},{value:de.BrightUpright,label:"明亮直立鋼琴 (Bright Upright)"},{value:de.ElectricPiano,label:"電鋼琴 (Electric Piano)"},{value:de.SimpleSynth,label:"基本合成器 (Simple Synth)"}],Zc=[{value:Yt.Kick,label:"大鼓 (Kick)"},{value:Yt.Snare,label:"小鼓 (Snare)"},{value:Yt.HiHatClosed,label:"閉合銅鈸 (Hi-Hat Closed)"},{value:Yt.Tom1,label:"筒鼓 (Tom 1)"},{value:Yt.CrashCymbal,label:"碎音鈸 (Crash)"}],I2=[{value:fe.Off,label:"關閉 (Off)"},{value:fe.Ballad,label:"抒情歌 (Ballad)"},{value:fe.SlowPop,label:"慢速流行 (Slow Pop)"},{value:fe.PopFunk,label:"流行/放克 (Pop/Funk)"},{value:fe.Rock,label:"搖滾 (Rock)"},{value:fe.HipHop,label:"嘻哈 (Hip-Hop)"},{value:fe.EDM,label:"電子舞曲 (EDM)"},{value:fe.JazzSwing,label:"爵士搖擺 (Jazz Swing)"},{value:fe.Latin,label:"拉丁 (Latin)"},{value:fe.BossaNova,label:"巴薩諾瓦 (Bossa Nova)"},{value:fe.Reggae,label:"雷鬼 (Reggae)"},{value:fe.Custom,label:"自訂 (Custom)"}],G2={[Yt.Kick]:{pitchDecay:.05,octaves:10,oscillator:{type:"sine",phase:0},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential",releaseCurve:"exponential",decayCurve:"exponential"},volume:0},[Yt.Snare]:{noise:{type:"white",playbackRate:3,fadeIn:0,fadeOut:0},envelope:{attack:.001,decay:.15,sustain:0,release:.2,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"linear"},volume:-5},[Yt.HiHatClosed]:{noise:{type:"pink",playbackRate:5,fadeIn:0,fadeOut:0},envelope:{attack:.001,decay:.05,sustain:0,release:.08,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"linear"},volume:-15},[Yt.Tom1]:{pitchDecay:.08,octaves:4,oscillator:{type:"sine",phase:0},envelope:{attack:.001,decay:.2,sustain:.01,release:.1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},volume:-3},[Yt.CrashCymbal]:{harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5,envelope:{attack:.001,decay:1,sustain:0,release:1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},volume:-10}},H2=[{value:_s.ElectricBass,label:"電貝斯 (Electric Bass)"},{value:_s.SynthBass,label:"合成貝斯 (Synth Bass)"},{value:_s.AcousticBass,label:"木貝斯 (Acoustic Bass)"},{value:_s.PopPulseBass,label:"流行脈動貝斯 (Pop Pulse Bass)"}],P2=[{value:Me.Off,label:"關閉 (Off)"},{value:Me.RootNotes,label:"根音 (Root Notes)"},{value:Me.RootAndFifth,label:"根音與五音 (Root & Fifth)"},{value:Me.SimpleArpeggio,label:"簡單琶音 (Simple Arpeggio)"},{value:Me.WalkingBassSimple,label:"簡易行走貝斯 (Simple Walking Bass)"},{value:Me.WalkingBassMelodic,label:"旋律行走貝斯 (Melodic Walking Bass)"},{value:Me.FunkSlap,label:"放克貝斯線 (Funk Slap)"},{value:Me.AiGenerated,label:"🤖 AI 生成貝斯線 (AI Generated)"}],oy={[_s.ElectricBass]:{oscillator:{type:"fatsawtooth",count:2,spread:10,phase:0},envelope:{attack:.01,decay:.3,sustain:.2,release:.5,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.01,decay:.1,sustain:.1,baseFrequency:200,octaves:2.6,release:.8,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:2,frequency:1200,rolloff:-12,detune:0,gain:0},volume:-6},[_s.SynthBass]:{oscillator:{type:"square",phase:0},envelope:{attack:.02,decay:.1,sustain:.8,release:.4,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.02,decay:.05,sustain:.2,baseFrequency:100,octaves:3,release:1,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:3,frequency:800,rolloff:-12,detune:0,gain:0},volume:-8},[_s.AcousticBass]:{oscillator:{type:"sine",phase:0},envelope:{attack:.01,decay:.6,sustain:.1,release:.4,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential"},filterEnvelope:{attack:.005,decay:.2,sustain:.05,baseFrequency:300,octaves:2,release:.5,attackCurve:"linear",releaseCurve:"exponential",decayCurve:"exponential",exponent:2},filter:{type:"lowpass",Q:1.5,frequency:1e3,rolloff:-12,detune:0,gain:0},volume:-4}},Os=(o=[],t=[],s=[],a=[],l=[])=>{const u={[Yt.Kick]:Ms(),[Yt.Snare]:Ms(),[Yt.HiHatClosed]:Ms(),[Yt.Tom1]:Ms(),[Yt.CrashCymbal]:Ms()},d=(f,m)=>{u[f]&&m.forEach(p=>{const g=Math.floor(p/Cr),v=p%Cr;u[f][g]&&(u[f][g][v]=!0)})};return d(Yt.Kick,o),d(Yt.Snare,t),d(Yt.HiHatClosed,s),d(Yt.Tom1,a),d(Yt.CrashCymbal,l),u},Y2={[fe.Rock]:Os([0,8],[4,12],[0,2,4,6,8,10,12,14]),[fe.PopFunk]:Os([0,3,6,8,11,14],[4,12],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[],[0]),[fe.JazzSwing]:Os([0,9],[4,13],[2,5,8,11,14]),[fe.Latin]:Os([0,7,8,15],[4,12],[0,2,4,5,6,8,10,12,13,14]),[fe.EDM]:Os([0,4,8,12],[4,12],[2,6,10,14]),[fe.Ballad]:Os([0],[8],[0,2,4,6,8,10,12,14]),[fe.SlowPop]:Os([0,6],[8],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),[fe.HipHop]:Os([0,7],[4,12],[0,2,4,6,8,10,12,14]),[fe.BossaNova]:Os([0,3,8,11],[4,12],[0,2,4,6,8,10,12,14]),[fe.Reggae]:Os([8],[8],[2,6,10,14])},Zd={[de.ClassicGrand]:{oscillator:{type:"fatsine",phase:0,spread:30,count:3},envelope:{attack:.005,decay:.7,sustain:.1,release:.8,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-6},[de.BrightUpright]:{oscillator:{type:"fatsquare",spread:15,count:2,phase:0},envelope:{attack:.008,decay:.5,sustain:.05,release:.6,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-7},[de.ElectricPiano]:{oscillator:{type:"fmsine",harmonicity:2,modulationIndex:1.5,phase:0,modulationType:"square"},envelope:{attack:.01,decay:.8,sustain:.3,release:1.2,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-5},[de.SimpleSynth]:{oscillator:{type:"triangle",phase:0},envelope:{attack:.01,decay:.15,sustain:.25,release:.4,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8}},ly={A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},cy="https://tonejs.github.io/audio/salamander/",X2={oscillator:{type:"fatsawtooth",count:3,spread:20,phase:0},envelope:{attack:.01,decay:1.2,sustain:.3,release:.8,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8},Q2={oscillator:{type:"fatsine",phase:0,spread:20,count:3},envelope:{attack:.005,decay:.8,sustain:.1,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-7},Z2={oscillator:{type:"sawtooth",phase:0},envelope:{attack:.02,decay:.5,sustain:.2,release:.5,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-9},W2={oscillator:{type:"triangle",phase:0},envelope:{attack:.005,decay:.2,sustain:.01,release:.4,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},volume:-8},Ko=(o,t,s=0)=>{const a=Ar.indexOf(o);if(a===-1)return`${o}${t}`;const l=a+s,u=t+Math.floor(l/12);return`${Ar[(l%12+12)%12]}${u}`},It=Sv+1,uy={z:{note:"C",octave:It},s:{note:"C#",octave:It},x:{note:"D",octave:It},d:{note:"D#",octave:It},c:{note:"E",octave:It},v:{note:"F",octave:It},g:{note:"F#",octave:It},b:{note:"G",octave:It},h:{note:"G#",octave:It},n:{note:"A",octave:It},j:{note:"A#",octave:It},m:{note:"B",octave:It},",":{note:"C",octave:It+1},l:{note:"C#",octave:It+1},".":{note:"D",octave:It+1},";":{note:"D#",octave:It+1},"/":{note:"E",octave:It+1},q:{note:"C",octave:It+1},2:{note:"C#",octave:It+1},w:{note:"D",octave:It+1},3:{note:"D#",octave:It+1},e:{note:"E",octave:It+1},r:{note:"F",octave:It+1},5:{note:"F#",octave:It+1},t:{note:"G",octave:It+1},6:{note:"G#",octave:It+1},y:{note:"A",octave:It+1},7:{note:"A#",octave:It+1},u:{note:"B",octave:It+1},i:{note:"C",octave:It+2},9:{note:"C#",octave:It+2},o:{note:"D",octave:It+2},0:{note:"D#",octave:It+2},p:{note:"E",octave:It+2},"[":{note:"F",octave:It+2},"=":{note:"F#",octave:It+2},"]":{note:"G",octave:It+2},backspace:{note:"G#",octave:It+2},"\\":{note:"A",octave:It+2},shift:{note:"B",octave:It-1},tab:{note:"B",octave:It}},uf="off",K2=[{value:"off",label:"關閉 (Off)",shortLabel:"X"},{value:"1n",label:"全音符 (Whole)",shortLabel:"1"},{value:"2n",label:"二分音符 (Half)",shortLabel:"2"},{value:"4n",label:"四分音符 (Quarter)",shortLabel:"4"},{value:"8n",label:"八分音符 (Eighth)",shortLabel:"8"},{value:"16n",label:"十六分音符 (Sixteenth)",shortLabel:"16"}],hy="interactivePianoStudio_savedProgressions_v4",J2=({keyData:o,onNoteAttack:t,onNoteRelease:s,isComputerKeyPressed:a,isAccompanimentActive:l})=>{const{note:u,octave:d,isBlack:f,displayName:m}=o,[p,g]=hu.useState(!1),v=a||p,x="border border-gray-700 flex flex-col items-center justify-end select-none cursor-pointer transition-all duration-75 ease-out relative group",T="bg-white text-black h-48 w-10 hover:bg-gray-200 shadow-sm",S="bg-gray-300 shadow-inner transform translate-y-px",A="bg-blue-200",D="bg-gray-800 text-white h-32 w-6 hover:bg-gray-700 absolute z-10 shadow-md border-l-2 border-r-2 border-b-4 border-gray-900",C="bg-black border-b-2 border-black transform translate-y-px",F="bg-blue-800";let M;f?(M=D,v?M+=` ${C}`:l&&(M+=` ${F}`)):(M=T,v?M+=` ${S}`:l&&(M+=` ${A}`));const E=`${x} ${M} ${f?"ml-[-0.75rem]":""}`,q=()=>{t(u,d),g(!0)},L=()=>{p&&(s(u,d),g(!1))},R=Z=>{Z.preventDefault(),t(u,d),g(!0)},W=Z=>{Z.preventDefault(),p&&(s(u,d),g(!1))};return y.jsx("button",{type:"button",className:E,onMouseDown:q,onMouseUp:L,onMouseLeave:L,onTouchStart:R,onTouchEnd:W,onTouchCancel:W,"aria-label":`${m}${d}`,"aria-pressed":v,children:y.jsxs("span",{className:`text-xs font-semibold pointer-events-none ${f?"text-gray-300 group-hover:text-white mb-1":"text-gray-600 group-hover:text-black mb-1"}`,children:[m,y.jsx("span",{className:"text-gray-500 text-[0.6rem] block",children:d})]})})},$2=({onNoteAttack:o,onNoteRelease:t,pressedKeys:s,accompanimentActiveNotes:a})=>{const d=ry.filter(f=>!f.isBlack).length*40;return y.jsxs("div",{className:"w-full bg-gradient-to-b from-gray-700 to-gray-800 rounded-lg shadow-xl my-4 p-2 sm:p-4 select-none",children:[y.jsx("div",{className:"flex items-start relative overflow-x-auto overflow-y-hidden pb-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800",style:{minWidth:"100%",WebkitOverflowScrolling:"touch"},children:y.jsx("div",{className:"flex items-start relative",style:{minWidth:`${d}px`},children:ry.map(f=>y.jsx(J2,{keyData:f,onNoteAttack:o,onNoteRelease:t,isComputerKeyPressed:s.has(f.fullName),isAccompanimentActive:a.has(f.fullName)},f.fullName))})}),y.jsx("p",{className:"text-xs text-gray-400 mt-2 text-center",children:"提示：您可以使用電腦鍵盤彈奏 (Z,S,X,D,C... 或 Q,2,W,3,E...)"})]})},tN=({currentTransposition:o,onTransposeChange:t})=>{const s=Ar.indexOf("C"),a=((s!==-1?s:0)+o%12+12)%12,l=Ar[a],u=d=>{t(o+d)};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md",children:[y.jsx("h3",{className:"text-lg font-semibold mb-3 text-center text-gray-100",children:"移調控制"}),y.jsxs("div",{className:"flex items-center justify-center space-x-1 sm:space-x-2",children:[y.jsx("button",{onClick:()=>u(-12),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400 text-sm","aria-label":"向下移八度",children:"-Oct"}),y.jsx("button",{onClick:()=>u(-1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"向下移半音",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})})}),y.jsxs("div",{className:"text-xl sm:text-2xl font-bold w-24 sm:w-28 text-center tabular-nums bg-gray-600 px-2 sm:px-3 py-1 rounded-md",children:[l,y.jsxs("span",{className:"text-xs sm:text-sm ml-1",children:["(",o>=0?"+":"",o,")"]})]}),y.jsx("button",{onClick:()=>u(1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"向上移半音",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})})}),y.jsx("button",{onClick:()=>u(12),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-400 text-sm","aria-label":"向上移八度",children:"+Oct"})]}),y.jsx("p",{className:"text-xs text-gray-400 mt-3 text-center",children:"當彈奏琴鍵 'C' 時，實際發出的音高。"})]})},eN={[Lt.Major]:"Major",[Lt.Minor]:"Minor",[Lt.Dominant7th]:"Dominant 7th",[Lt.Minor7th]:"Minor 7th",[Lt.Major7th]:"Major 7th",[Lt.Diminished7th]:"Diminished 7th",[Lt.Minor7thFlat5]:"Minor 7th b5 (ø)",[Lt.Suspended2]:"Suspended 2nd",[Lt.Suspended4]:"Suspended 4th",[Lt.Major9]:"Major 9th",[Lt.Minor9]:"Minor 9th",[Lt.Dominant9]:"Dominant 9th",[Lt.Major6]:"Major 6th",[Lt.Minor6]:"Minor 6th",[Lt.Augmented]:"Augmented",[Lt.PowerChord]:"Power Chord (5)",[Lt.Dominant7sharp9]:"Dominant 7th #9",[Lt.Dominant7flat9]:"Dominant 7th b9"},nN=({onAddChord:o})=>{const[t,s]=Y.useState("C"),[a,l]=Y.useState(Lt.Major),u=()=>{o({id:`${Date.now()}-${Math.random().toString(36).substring(2,7)}`,root:t,type:a,inversion:0})};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"新增和弦至進行"}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"rootNote",className:"block text-sm font-medium text-gray-300 mb-1",children:"根音"}),y.jsx("select",{id:"rootNote",value:t,onChange:d=>s(d.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Ar.map(d=>y.jsx("option",{value:d,children:d},d))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"chordType",className:"block text-sm font-medium text-gray-300 mb-1",children:"和弦類型"}),y.jsx("select",{id:"chordType",value:a,onChange:d=>l(d.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:Object.values(Lt).map(d=>y.jsxs("option",{value:d,children:[eN[d]," (",d,")"]},d))})]}),y.jsx("button",{onClick:u,className:"w-full px-4 py-2.5 bg-green-600 hover:bg-green-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-green-400",children:"新增和弦"})]})},Av=hu.memo(({chord:o,onUpdate:t})=>{var l;const s=((l=zp[o.type])==null?void 0:l.length)||3,a=Math.min(s-1,4);return y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-xs text-gray-400 mr-1",children:"轉位:"}),Array.from({length:a+1},(u,d)=>d).map(u=>y.jsx("button",{onClick:d=>{d.stopPropagation(),t(o.id,u)},className:`
              w-5 h-5 text-xs font-mono rounded-sm transition-colors
              flex items-center justify-center
              ${o.inversion===u?"bg-blue-500 text-white":"bg-gray-500 hover:bg-gray-400 text-gray-200"}
            `,"aria-label":`設定為第 ${u} 轉位`,children:u},u))]})});Av.displayName="InversionControl";const sN=({progression:o,onRemoveChord:t,onClearProgression:s,onSaveProgression:a,onReorderProgression:l,onUpdateChordInversion:u,currentlyPlayingChordIndex:d,onStyleTransfer:f,isGeneratingStyle:m,isApiKeySet:p,onSmartVoicing:g,isGeneratingVoicing:v})=>{const x=Y.useRef(null),T=Y.useRef(null),[S,A]=Y.useState(null),[D,C]=Y.useState(!1),[F,M]=Y.useState(""),K=(I,G)=>{x.current=G,I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("text/plain",G.toString()),I.currentTarget.classList.add("opacity-50","bg-blue-500")},E=I=>{I.currentTarget.classList.remove("opacity-50","bg-blue-500"),A(null),x.current=null,T.current=null},q=(I,G)=>{if(I.preventDefault(),x.current===null||x.current===G){A(null);return}T.current=G;const nt=I.currentTarget.getBoundingClientRect(),at=I.clientY<nt.top+nt.height/2;A(at?G:G+1)},L=I=>{if(I.preventDefault(),x.current===null)return;const G=x.current;let nt=T.current;S!==null&&(nt=S>G?S-1:S),nt!==null&&G!==nt&&l(G,nt),x.current=null,T.current=null,A(null),I.currentTarget.classList.remove("opacity-50","bg-blue-500")},R=I=>S===I?y.jsx("div",{className:"h-1 bg-blue-400 my-0.5 rounded-full"}):null,W=()=>{F.trim()&&(f(F.trim()),C(!1))},Z=p&&o.length>0;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md h-full flex flex-col",children:[D&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>C(!1),children:y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md",onClick:I=>I.stopPropagation(),children:[y.jsx("h4",{className:"text-xl font-bold text-purple-300 mb-3",children:"AI 風格轉換"}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"輸入您想要的音樂風格，AI 將會重新詮釋您目前的和弦進行。"}),y.jsx("textarea",{rows:3,value:F,onChange:I=>M(I.target.value),className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors placeholder-gray-500",placeholder:"例如：smooth jazz trio, epic cinematic score, 8-bit video game music...","aria-label":"Style prompt"}),y.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[y.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-md transition-colors",children:"取消"}),y.jsx("button",{onClick:W,disabled:!F.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-md transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:"轉換"})]})]})}),y.jsxs("div",{className:"flex justify-between items-center mb-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"和弦進行"}),y.jsxs("div",{className:"space-x-2",children:[o.length>1&&y.jsx("button",{onClick:g,disabled:!Z||v||m,className:"px-3 py-1 text-xs bg-teal-600 hover:bg-teal-700 rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",title:p?"使用 AI 最佳化和弦轉位":"請先設定 API 金鑰",children:"🧠 AI 智慧轉位"}),o.length>0&&y.jsx("button",{onClick:()=>C(!0),disabled:!Z||m||v,className:"px-3 py-1 text-xs bg-purple-600 hover:bg-purple-700 rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",title:p?"使用 AI 轉換風格":"請先設定 API 金鑰",children:"AI 風格轉換"}),o.length>0&&y.jsx("button",{onClick:a,className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors",title:"儲存目前和弦進行",children:"儲存"}),o.length>0&&y.jsx("button",{onClick:s,className:"px-3 py-1 text-xs bg-red-700 hover:bg-red-800 rounded text-white transition-colors",title:"清除所有和弦",children:"全部清除"})]})]}),(m||v)&&y.jsx("div",{className:"text-center p-4 text-purple-300",children:v?"AI 轉位中...":"風格轉換中..."}),o.length===0?y.jsx("div",{className:"flex-grow flex items-center justify-center",children:y.jsxs("p",{className:"text-gray-400 text-center",children:["尚未加入任何和弦。",y.jsx("br",{}),"請使用選擇器或 AI 新增和弦以建立伴奏。"]})}):y.jsxs("ul",{className:"space-y-0.5 max-h-60 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600",onDragLeave:()=>A(null),children:[o.map((I,G)=>y.jsxs(hu.Fragment,{children:[R(G),y.jsxs("li",{draggable:"true",onDragStart:nt=>K(nt,G),onDragEnd:E,onDragOver:nt=>q(nt,G),onDrop:nt=>L(nt),className:`flex justify-between items-center p-2 rounded-md shadow transition-colors duration-300 cursor-grab active:cursor-grabbing
                  ${G===d?"bg-blue-600":"bg-gray-600 hover:bg-gray-500"}`,children:[y.jsx("div",{className:"flex flex-col items-start",children:y.jsxs("span",{className:"font-mono text-sm text-gray-200",children:[y.jsxs("span",{className:"text-gray-400",children:[G+1,"."]})," ",I.root,I.type]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Av,{chord:I,onUpdate:u}),y.jsx("button",{onClick:()=>t(I.id),className:"p-1.5 text-xs bg-red-500 hover:bg-red-600 rounded text-white transition-colors focus:outline-none focus:ring-1 focus:ring-red-400","aria-label":`移除和弦 ${I.root}${I.type}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]},I.id)),R(o.length)]})]})},iN=({option:o,isSelected:t,onClick:s})=>y.jsx("button",{type:"button",onClick:s,className:`
        flex-1 px-1 py-1 text-[11px] font-mono font-semibold transition-colors duration-150
        border-t border-b border-gray-600
        first:border-l first:rounded-l-md
        last:border-r last:rounded-r-md
        focus:outline-none focus:ring-1 focus:ring-blue-400 focus:z-10
        ${t?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}
      `,title:o.label,children:o.shortLabel}),aN=({chordProgression:o,customRhythmDataForLayer:t,onUpdateBeat:s})=>!o||o.length===0?y.jsx("div",{className:"p-3 my-2 text-sm text-center text-gray-400 bg-gray-500 rounded-md",children:"請先在「和弦進行」中加入和弦以編輯自訂節奏。"}):y.jsxs("div",{className:"p-3 my-2 bg-gray-600 rounded-md space-y-2 max-h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-2",children:"自訂節奏編輯器 (每拍音符時值)"}),o.map((a,l)=>{const u=t[a.originalIndex]||Array(4).fill(uf);return y.jsxs("div",{className:"p-2 bg-gray-500 rounded hover:bg-gray-450 transition-colors",children:[y.jsx("div",{className:"flex items-center justify-between mb-1.5",children:y.jsxs("span",{className:"text-xs font-mono text-gray-200 truncate",title:`${a.root}${a.type}`,children:[l+1,". ",a.root,a.type]})}),y.jsx("div",{className:"grid grid-cols-4 gap-2",children:u.map((d,f)=>y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("label",{htmlFor:`beat-${a.id}-${f}`,className:"text-xs text-gray-300 mb-1",children:["第 ",f+1," 拍"]}),y.jsx("div",{id:`beat-${a.id}-${f}`,className:"inline-flex w-full",role:"group",children:K2.map(m=>y.jsx(iN,{option:m,isSelected:d===m.value,onClick:()=>s(a.originalIndex,f,m.value)},m.value))})]},f))})]},a.id)})]}),rN=({chordProgression:o,customDrumData:t,onUpdateCell:s,onGenerateDrumPattern:a,drumPatternClipboard:l,onCopy:u,onPaste:d,generationState:f,isApiKeySet:m})=>{var D,C;const[p,g]=Y.useState(null),[v,x]=Y.useState("");if(!o||o.length===0)return y.jsx("div",{className:"p-3 my-2 text-sm text-center text-gray-400 bg-gray-500 rounded-md",children:"請先在「和弦進行」中加入和弦以編輯自訂鼓組。"});const T=()=>{v.trim()&&p!==null&&(a(v,p),g(null))},S=f.isLoading&&f.type==="drums",A=m;return y.jsxs(y.Fragment,{children:[p!==null&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-5 w-full max-w-md",onClick:F=>F.stopPropagation(),children:[y.jsx("h4",{className:"text-lg font-bold text-red-400 mb-2",children:"AI 鼓組生成"}),y.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["為 ",y.jsxs("span",{className:"font-bold text-white",children:[(D=o.find(F=>F.originalIndex===p))==null?void 0:D.root,(C=o.find(F=>F.originalIndex===p))==null?void 0:C.type]})," 和弦描述您想要的鼓點。"]}),y.jsx("textarea",{rows:3,value:v,onChange:F=>x(F.target.value),className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-red-500 focus:border-red-500 transition-colors placeholder-gray-500",placeholder:"例如：a simple rock beat, a fast complex breakbeat, a sparse hip-hop groove...","aria-label":"Drum pattern prompt"}),y.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[y.jsx("button",{onClick:()=>{g(null),x("")},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-md transition-colors",children:"取消"}),y.jsx("button",{onClick:T,disabled:!v.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",children:"生成"})]})]})}),y.jsxs("div",{className:"p-3 my-2 bg-gray-550 rounded-md space-y-3 max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-700",children:[y.jsx("h4",{className:"text-sm font-semibold text-gray-200 mb-1",children:"自訂鼓組編輯器 (Custom Drum Editor)"}),o.map((F,M)=>{const K=t[F.originalIndex]||_a(),E=S&&f.drumChordIndex===F.originalIndex,q=(l==null?void 0:l.sourceIndex)===F.originalIndex,L=l!==null&&!q;return y.jsxs("div",{className:"p-2.5 bg-gray-500 rounded shadow-sm space-y-1.5 relative",children:[E&&y.jsx("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center rounded z-20",children:y.jsx("span",{className:"text-red-400 animate-pulse",children:"AI 生成中..."})}),y.jsxs("div",{className:"flex justify-between items-center mb-1",children:[y.jsx("h5",{className:"text-xs font-mono text-gray-200",children:y.jsxs("span",{className:"font-semibold",children:[M+1,". ",F.root,F.type]})}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("button",{onClick:()=>u(F.originalIndex),className:`px-2 py-0.5 text-xs rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed
                      ${q?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 hover:bg-gray-500"}`,title:q?"取消複製":"複製此鼓點",children:q?"已複製":"複製"}),L&&y.jsx("button",{onClick:()=>d(F.originalIndex),className:"px-2 py-0.5 text-xs bg-green-600 hover:bg-green-700 rounded text-white transition-colors",title:"貼上已複製的鼓點",children:"貼上"}),y.jsx("button",{onClick:()=>{x(""),g(F.originalIndex)},disabled:!A||S,className:"px-2 py-0.5 text-xs bg-red-600 hover:bg-red-700 rounded text-white transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed",title:m?"使用 AI 生成此鼓點":"請先設定 API 金鑰",children:"AI"})]})]}),Zc.map(R=>{const W=K[R.value]||Array(uu).fill(null).map(()=>Array(Cr).fill(!1));return y.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[y.jsx("span",{className:"w-[60px] sm:w-[70px] text-xs text-gray-300 truncate text-right pr-1",title:R.label,children:R.label.split(" (")[0]}),y.jsx("div",{className:"flex-grow grid grid-cols-4 gap-x-0",children:[0,1,2,3].map(Z=>y.jsxs("div",{className:`
                            flex flex-col items-center py-1 
                            px-1 sm:px-2
                            ${Z<uu-1?"border-r border-gray-400":""}
                          `,children:[y.jsx("span",{className:"text-[0.625rem] text-gray-400 leading-tight mb-0.5",children:Z+1}),y.jsx("div",{className:"flex space-x-px bg-gray-600 p-px rounded-sm shadow-inner",children:[0,1,2,3].map(I=>{var at;const G=Z*Cr+I,nt=((at=W[Z])==null?void 0:at[I])||!1;return y.jsx("button",{type:"button",title:`${R.label} - 第 ${Z+1} 拍, 第 ${I+1} 分拍`,"aria-label":`${R.label} 第 ${Z+1} 拍 第 ${I+1} 分拍 ${nt?"啟用":"停用"}`,"aria-pressed":nt,onClick:()=>s(F.originalIndex,R.value,Z,I,!nt),className:`
                                    w-4 h-4 sm:w-5 sm:h-5 rounded-[2px] transition-colors duration-100
                                    focus:outline-none focus:ring-1 focus:ring-purple-400 focus:z-10
                                    ${nt?"bg-red-500 hover:bg-red-400 shadow-sm":"bg-slate-500 hover:bg-slate-400"}
                                  `},G)})})]},Z))})]},R.value)})]},F.id)})]})]})},Jo=Y.memo(({tabName:o,currentTab:t,onClick:s,children:a})=>{const l=o===t;return y.jsx("button",{onClick:()=>s(o),className:`px-4 py-2 text-sm font-semibold rounded-t-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:z-10
        ${l?"bg-gray-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,role:"tab","aria-selected":l,children:a})});Jo.displayName="TabButton";const Cv=Y.memo(({accompanimentLayers:o,onRemoveAccompanimentLayer:t,onUpdateAccompanimentLayer:s,onAddAccompanimentLayer:a,chordProgressionForCustomEditor:l,customRhythms:u,onUpdateCustomBeat:d})=>y.jsxs("div",{className:"space-y-4",children:[o.map((f,m)=>y.jsxs("div",{className:"bg-gray-500 p-3 rounded-lg space-y-3 relative border-l-2 border-blue-500",children:[y.jsx("span",{className:"absolute -top-2 -left-2.5 w-5 h-5 bg-blue-500 text-white text-xs flex items-center justify-center rounded-full font-bold",children:m+1}),o.length>1&&y.jsx("button",{onClick:()=>t(f.id),className:"absolute top-1 right-1 p-1 bg-red-600 hover:bg-red-700 rounded-full text-white transition-colors focus:outline-none focus:ring-1 focus:ring-red-400","aria-label":`移除伴奏層 ${m+1}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:`chordVolume-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",f.volume.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:`chordVolume-${f.id}`,min:Bp,max:Tv,step:"1",value:f.volume,onChange:p=>s(f.id,"volume",parseFloat(p.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-blue-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:`chordInstrument-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:"樂器"}),y.jsx("select",{id:`chordInstrument-${f.id}`,value:f.instrument,onChange:p=>s(f.id,"instrument",p.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500",children:U2.map(p=>y.jsx("option",{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:`chordRhythmPattern-${f.id}`,className:"block text-sm font-medium text-gray-300 mb-1",children:"節奏型態"}),y.jsx("select",{id:`chordRhythmPattern-${f.id}`,value:f.rhythmPattern,onChange:p=>s(f.id,"rhythmPattern",p.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-blue-500 focus:border-blue-500",children:wv.map(p=>y.jsx("option",{value:p.value,children:p.label},p.value))})]}),f.rhythmPattern===os.Custom&&y.jsx(aN,{chordProgression:l,customRhythmDataForLayer:u[f.id]||[],onUpdateBeat:(p,g,v)=>d(f.id,p,g,v)})]},f.id)),y.jsx("button",{onClick:a,className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400",children:"+ 新增伴奏層"})]}));Cv.displayName="ChordInstrumentPanel";const Nv=Y.memo(({drumsEnabled:o,onDrumsEnabledChange:t,drumVolume:s,onDrumVolumeChange:a,drumPattern:l,onDrumPatternChange:u,chordProgressionForCustomEditor:d,customDrumData:f,onUpdateCustomDrumCell:m,onGenerateDrumPattern:p,drumPatternClipboard:g,onCopyDrumPattern:v,onPasteDrumPattern:x,generationState:T,isApiKeySet:S})=>y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{htmlFor:"drumsEnabled",className:"text-sm font-medium text-gray-300",children:"啟用鼓組 (Enable Drums)"}),y.jsx("button",{id:"drumsEnabled",onClick:()=>t(!o),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${o?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":o,children:o?"已啟用 (ON)":"已停用 (OFF)"})]}),o&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"drumVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",s.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"drumVolume",min:Bp,max:Tv,step:"1",value:s,onChange:A=>a(parseFloat(A.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-red-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"drumPattern",className:"block text-sm font-medium text-gray-300 mb-1",children:"鼓組風格 (Pattern)"}),y.jsx("select",{id:"drumPattern",value:l,onChange:A=>u(A.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-red-500 focus:border-red-500",children:I2.map(A=>y.jsx("option",{value:A.value,children:A.label},A.value))})]}),l===fe.Custom&&y.jsx(rN,{chordProgression:d,customDrumData:f,onUpdateCell:m,onGenerateDrumPattern:p,drumPatternClipboard:g,onCopy:v,onPaste:x,generationState:T,isApiKeySet:S})]})]}));Nv.displayName="DrumKitPanel";const Ev=Y.memo(({bassEnabled:o,onBassEnabledChange:t,bassVolume:s,onBassVolumeChange:a,bassInstrument:l,onBassInstrumentChange:u,bassPattern:d,onBassPatternChange:f,onGenerateAIBassline:m,chordProgressionEmpty:p,isApiKeySet:g,generationState:v})=>{const[x,T]=Y.useState(!1),[S,A]=Y.useState(""),D=()=>{S.trim()&&(m(S),T(!1))},C=v.isLoading&&v.type==="bass",F=g&&!p;return y.jsxs(y.Fragment,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>T(!1),children:y.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md",onClick:M=>M.stopPropagation(),children:[y.jsx("h4",{className:"text-xl font-bold text-yellow-300 mb-3",children:"AI 貝斯線生成"}),y.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"輸入您想要的貝斯線風格，AI 將會為您目前的和弦進行創作一段貝斯線。"}),y.jsx("textarea",{rows:3,value:S,onChange:M=>A(M.target.value),className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-100 focus:ring-yellow-500 focus:border-yellow-500 transition-colors placeholder-gray-500",placeholder:"例如：a funky slap bassline, a simple melodic walking bass, a driving rock bass...","aria-label":"Bassline style prompt"}),y.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[y.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-md transition-colors",children:"取消"}),y.jsx("button",{onClick:D,disabled:!S.trim(),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold rounded-md transition-colors disabled:bg-yellow-800 disabled:cursor-not-allowed",children:"生成"})]})]})}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{htmlFor:"bassEnabled",className:"text-sm font-medium text-gray-300",children:"啟用貝斯 (Enable Bass)"}),y.jsx("button",{id:"bassEnabled",onClick:()=>t(!o),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${o?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":o,children:o?"已啟用 (ON)":"已停用 (OFF)"})]}),o&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"bassVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量: ",s.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"bassVolume",min:Bp,max:V2,step:"1",value:s,onChange:M=>a(parseFloat(M.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-yellow-500"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"bassInstrument",className:"block text-sm font-medium text-gray-300 mb-1",children:"貝斯音色 (Instrument)"}),y.jsx("select",{id:"bassInstrument",value:l,onChange:M=>u(M.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-yellow-500 focus:border-yellow-500",children:H2.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"bassPattern",className:"block text-sm font-medium text-gray-300 mb-1",children:"貝斯線風格 (Pattern)"}),y.jsx("select",{id:"bassPattern",value:d,onChange:M=>f(M.target.value),className:"w-full p-2 bg-gray-400 border border-gray-500 rounded-md text-gray-900 focus:ring-yellow-500 focus:border-yellow-500",children:P2.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})]}),d===Me.AiGenerated&&y.jsxs("div",{className:"p-3 bg-gray-500 rounded-md mt-2",children:[y.jsx("button",{onClick:()=>{A(""),T(!0)},disabled:!F||C,className:"w-full py-2 bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold rounded-md transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",title:g?p?"請先新增和弦":"":"請先設定 API 金鑰",children:C?"生成中...":"✨ 生成 AI 貝斯線"}),v.type==="bass"&&v.error&&y.jsx("p",{className:"text-xs text-red-300 text-center mt-2",children:v.error})]})]})]})]})});Ev.displayName="BassGuitarPanel";const Dv=Y.memo(({reverbLevel:o,onReverbLevelChange:t,delayLevel:s,onDelayLevelChange:a,swing:l,onSwingChange:u})=>y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-gray-200",children:"全域效果與律動"}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"reverb",className:"block text-sm font-medium text-gray-300 mb-1",children:["殘響 (Reverb): ",(o*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"reverb",min:"0",max:"1",step:"0.01",value:o,onChange:d=>t(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-teal-500"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"delay",className:"block text-sm font-medium text-gray-300 mb-1",children:["延遲 (Delay): ",(s*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"delay",min:"0",max:"1",step:"0.01",value:s,onChange:d=>a(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"swing",className:"block text-sm font-medium text-gray-300 mb-1",children:["搖擺律動 (Swing): ",(l*100).toFixed(0),"%"]}),y.jsx("input",{type:"range",id:"swing",min:"0",max:"1",step:"0.01",value:l,onChange:d=>u(parseFloat(d.target.value)),className:"w-full h-2.5 bg-gray-400 rounded-lg appearance-none cursor-pointer accent-pink-500"})]})]}));Dv.displayName="EffectsPanel";const oN=o=>{const{bpm:t,onBpmChange:s,isBeat:a,isPlaying:l,onPlay:u,onStop:d,isAudioReady:f,chordProgressionEmpty:m,accompanimentLayers:p,onAddAccompanimentLayer:g,onRemoveAccompanimentLayer:v,onUpdateAccompanimentLayer:x,chordProgressionForCustomEditor:T,customRhythms:S,onUpdateCustomBeat:A,reverbLevel:D,onReverbLevelChange:C,delayLevel:F,onDelayLevelChange:M,swing:K,onSwingChange:E,drumsEnabled:q,onDrumsEnabledChange:L,drumVolume:R,onDrumVolumeChange:W,drumPattern:Z,onDrumPatternChange:I,customDrumData:G,onUpdateCustomDrumCell:nt,onGenerateDrumPattern:at,drumPatternClipboard:gt,onCopyDrumPattern:O,onPasteDrumPattern:Q,generationState:rt,isApiKeySet:pt,bassEnabled:w,onBassEnabledChange:H,bassVolume:ot,onBassVolumeChange:dt,bassPattern:xt,onBassPatternChange:bt,bassInstrument:_t,onBassInstrumentChange:Zt,onGenerateAIBassline:ft}=o,[ee,Jt]=Y.useState("chords"),re=!f||m;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"伴奏 (Accompaniment)"}),y.jsx("div",{className:"flex space-x-3",children:l?y.jsx("button",{onClick:d,className:"px-5 py-2.5 bg-red-600 hover:bg-red-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 focus:ring-offset-gray-700",children:"停止"}):y.jsx("button",{onClick:u,disabled:re,className:`px-5 py-2.5 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-700 ${re?"bg-gray-500 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:ring-green-400"}`,children:"播放"})})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"bpm",className:"flex items-center text-sm font-medium text-gray-300 mb-1",children:[y.jsx("span",{className:`w-2.5 h-2.5 mr-2 rounded-full bg-purple-500 transition-all duration-75 ${a?"scale-150 opacity-100":"scale-100 opacity-50"}`,"aria-hidden":"true"}),"速度 (Tempo): ",t," BPM"]}),y.jsx("input",{type:"range",id:"bpm",min:R2,max:k2,value:t,onChange:Ae=>s(parseInt(Ae.target.value)),className:"w-full h-2.5 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-400"})]})]}),y.jsxs("div",{className:"border-b border-gray-600 flex space-x-1",role:"tablist",children:[y.jsx(Jo,{tabName:"chords",currentTab:ee,onClick:Jt,children:"和弦"}),y.jsx(Jo,{tabName:"drums",currentTab:ee,onClick:Jt,children:"鼓組"}),y.jsx(Jo,{tabName:"bass",currentTab:ee,onClick:Jt,children:"貝斯"}),y.jsx(Jo,{tabName:"effects",currentTab:ee,onClick:Jt,children:"效果"})]}),y.jsxs("div",{className:"bg-gray-600 p-3 rounded-b-md rounded-r-md min-h-[200px]",children:[ee==="chords"&&y.jsx(Cv,{accompanimentLayers:p,onAddAccompanimentLayer:g,onRemoveAccompanimentLayer:v,onUpdateAccompanimentLayer:x,chordProgressionForCustomEditor:T,customRhythms:S,onUpdateCustomBeat:A}),ee==="drums"&&y.jsx(Nv,{drumsEnabled:q,onDrumsEnabledChange:L,drumVolume:R,onDrumVolumeChange:W,drumPattern:Z,onDrumPatternChange:I,chordProgressionForCustomEditor:T,customDrumData:G,onUpdateCustomDrumCell:nt,onGenerateDrumPattern:at,drumPatternClipboard:gt,onCopyDrumPattern:O,onPasteDrumPattern:Q,generationState:rt,isApiKeySet:pt}),ee==="bass"&&y.jsx(Ev,{bassEnabled:w,onBassEnabledChange:H,bassVolume:ot,onBassVolumeChange:dt,bassPattern:xt,onBassPatternChange:bt,bassInstrument:_t,onBassInstrumentChange:Zt,onGenerateAIBassline:ft,chordProgressionEmpty:m,isApiKeySet:pt,generationState:rt}),ee==="effects"&&y.jsx(Dv,{reverbLevel:D,onReverbLevelChange:C,delayLevel:F,onDelayLevelChange:M,swing:K,onSwingChange:E})]}),!f&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-1",children:"點擊琴鍵或「播放」以初始化音訊引擎。"}),f&&m&&!l&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-1",children:"請先新增和弦至和弦進行中才能播放伴奏。"})]})},lN=({savedProgressions:o,onLoadProgression:t,onDeleteProgression:s})=>{const a=Object.keys(o);return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-3",children:"已儲存的和弦進行"}),a.length===0?y.jsx("p",{className:"text-gray-400 text-sm",children:"沒有已儲存的和弦進行。"}):y.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600 pr-1",children:a.map(l=>y.jsxs("li",{className:"flex justify-between items-center p-2.5 bg-gray-600 rounded-md hover:bg-gray-500 transition-colors",children:[y.jsx("span",{className:"text-sm text-gray-200 truncate mr-2",title:l,children:l}),y.jsxs("div",{className:"space-x-2 flex-shrink-0",children:[y.jsx("button",{onClick:()=>t(l),className:"px-2.5 py-1 text-xs bg-blue-600 hover:bg-blue-700 rounded text-white transition-colors","aria-label":`載入和弦進行 ${l}`,children:"載入"}),y.jsx("button",{onClick:()=>s(l),className:"p-1.5 text-xs bg-red-600 hover:bg-red-700 rounded text-white transition-colors","aria-label":`刪除和弦進行 ${l}`,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},l))})]})},cN=({isOpen:o,onClose:t})=>{if(!o)return null;const s=u=>{u.target===u.currentTarget&&t()},a=({children:u})=>y.jsx("h3",{className:"text-xl font-bold text-blue-300 mt-5 mb-2 border-b border-gray-600 pb-1",children:u}),l=({children:u})=>y.jsx("li",{className:"text-gray-300",children:u});return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex justify-center items-center p-4 transition-opacity duration-300",onClick:s,"aria-modal":"true",role:"dialog",children:y.jsxs("div",{className:"bg-gray-700 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[y.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-600",children:[y.jsxs("h2",{className:"text-2xl font-bold text-white",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 inline-block mr-2 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"使用教學"]}),y.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-600 rounded-full transition-colors","aria-label":"關閉教學",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsxs("main",{className:"p-6 overflow-y-auto space-y-4 scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-600",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-semibold text-purple-300",children:"歡迎來到互動鋼琴工作室！"}),y.jsx("p",{className:"text-gray-300 mt-1",children:"這是一個功能強大的網頁工具，讓您不只能彈奏鋼琴，還能創造出豐富的背景伴奏。"})]}),y.jsx(a,{children:"1. 彈奏虛擬鋼琴"}),y.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"滑鼠/觸控:"})," 直接點擊或觸碰螢幕上的琴鍵即可發聲。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"電腦鍵盤:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["中下排 (",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"Z, S, X, D..."}),") 對應一個八度。"]}),y.jsxs(l,{children:["中上排 (",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"Q, 2, W, 3..."}),") 對應高一個八度。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"空白鍵捷徑:"})," 您也可以隨時按下",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"空白鍵"}),"來播放或暫停伴奏。"]})]})]})]}),y.jsx(a,{children:"2. 核心設定"}),y.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"移調控制:"})," 使用 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"+"})," 和 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"-"})," 按鈕來升高或降低所有琴鍵的音高。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"主鍵盤設定:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"音色:"})," 從下拉選單中選擇您喜歡的鋼琴或合成器音色。部分音色（如真實平台鋼琴）在首次選擇時需要短暫的載入時間。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"音量:"})," 調整您手動彈奏的琴鍵音量。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"顯示伴奏音符:"})," 開啟後，伴奏所彈奏的音符會在琴鍵上以藍色顯示。"]})]})]})]}),y.jsx(a,{children:"3. 建立您的和弦進行"}),y.jsx("p",{className:"text-gray-300",children:"您可以用兩種方式建立伴奏的和弦基礎："}),y.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"手動新增:"})," 在「新增和弦至進行」面板中選擇根音與和弦類型，然後點擊「新增和弦」。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"編輯和弦進行:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"刪除:"})," 點擊和弦右側的紅色 ",y.jsx("code",{className:"bg-red-500 text-white px-1 rounded",children:"X"})," 按鈕。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"轉位:"})," 點擊和弦旁的 ",y.jsx("code",{className:"bg-gray-800 px-1 rounded",children:"0, 1, 2..."})," 按鈕來切換和弦轉位。按鈕的數量會根據和弦的複雜度（三和弦、七和弦等）自動變化。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"重新排序:"})," 按住和弦並拖曳到新的位置即可改變順序。"]})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"儲存與載入:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"儲存:"})," 點擊「儲存」按鈕，為您當前的和弦進行命名並保存。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"載入:"})," 在「已儲存的和弦進行」面板中，點擊「載入」以還原之前儲存的設定（包含所有樂器、節奏和效果）。"]})]})]})]}),y.jsx(a,{children:"4. AI 智慧創作 (Gemini API)"}),y.jsx("p",{className:"text-gray-300",children:"利用 AI 的強大功能，加速您的音樂創作流程！"}),y.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-2",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"第一步：設定 API 金鑰 (僅需一次)"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"前往「API 金鑰設定」面板。"}),y.jsx(l,{children:"將您的 Google Gemini API 金鑰貼入輸入框中並點擊「儲存」。"}),y.jsxs(l,{children:[y.jsx("strong",{children:"安全提示："}),"您的金鑰只會被安全地儲存在您自己的瀏覽器中，絕不會上傳或公開。"]})]})]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 和弦生成:"})," 在「AI 智慧創作」面板中，用文字描述您想要的音樂風格或情緒（例如：「一首輕快的流行歌」、「悲傷的電影配樂」），然後點擊生成。AI 將會**取代**您目前編輯的內容。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 風格轉換:"})," 在「和弦進行」面板中，點擊「AI 風格轉換」按鈕。輸入您想要的新風格（例如：「爵士」、「8-bit 遊戲音樂」），AI 將會重新詮釋您現有的和弦進行。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 智慧轉位:"})," 在「和弦進行」面板中，點擊「🧠 AI 智慧轉位」按鈕。AI 會自動調整所有和弦的轉位，讓和弦之間的銜接聽起來更流暢、更悅耳。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 鼓組生成:"})," 在「鼓組」分頁中將風格設為「自訂」，然後在自訂鼓組編輯器中點擊任一和弦右上角的「AI」按鈕，描述您想要的鼓點即可。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"AI 貝斯線生成:"})," 在「貝斯」分頁中將風格設為「🤖 AI 生成貝斯線」，然後點擊「✨ 生成 AI 貝斯線」按鈕。描述您想要的風格，AI 就會為您的整個和弦進行創作一段完整的貝斯線。"]})]}),y.jsx(a,{children:"5. 設計您的伴奏"}),y.jsx("p",{className:"text-gray-300",children:"伴奏控制面板分為四個分頁，讓您精雕細琢您的音樂："}),y.jsxs("ul",{className:"space-y-3",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"主控制 (面板頂部):"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:[y.jsx("strong",{children:"播放/停止:"})," 控制伴奏的啟動與停止。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"速度 (BPM):"})," 拖動滑桿調整伴奏的快慢。左側的紫色圓點會跟隨節拍閃爍。"]})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"和弦 (Chords) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["您可以建立",y.jsx("strong",{children:"多個伴奏層"}),"，例如一層鋼琴、一層弦樂。"]}),y.jsx(l,{children:"點擊「+ 新增伴奏層」來增加樂器。"}),y.jsxs(l,{children:["每一層都可以獨立設定",y.jsx("strong",{children:"音量"}),"、",y.jsx("strong",{children:"樂器"}),"和",y.jsx("strong",{children:"節奏型態"}),"。"]}),y.jsx(l,{children:"選擇「自訂」節奏型態後，會出現編輯器，讓您精確設定每個和弦在四拍中每一拍的音符時長。"})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"鼓組 (Drums) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsx(l,{children:"點擊「啟用鼓組」來開啟/關閉鼓。"}),y.jsxs(l,{children:["可以調整鼓的",y.jsx("strong",{children:"音量"}),"和選擇預設的",y.jsx("strong",{children:"鼓組風格"})," (如搖滾、拉丁)。"]}),y.jsx(l,{children:"選擇「自訂」風格後，會出現詳細的編輯器，讓您為每個和弦的每一拍的 4 個分拍點擊設定鼓點。"}),y.jsx(l,{children:"在自訂模式中，您可以使用「複製」按鈕複製一個小節的鼓點，再到另一個小節點擊「貼上」，快速應用相同節奏。"})]})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"貝斯 (Bass) 分頁:"}),y.jsx("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:y.jsxs(l,{children:["啟用後，可以調整貝斯的",y.jsx("strong",{children:"音量"}),"、",y.jsx("strong",{children:"音色"}),"和",y.jsx("strong",{children:"貝斯線風格"})," (如根音、簡單琶音等)。"]})})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"效果 (Effects) 分頁:"}),y.jsxs("ul",{className:"list-square list-inside pl-5 mt-1 text-sm space-y-1",children:[y.jsxs(l,{children:["這裡的設定會影響",y.jsx("strong",{children:"所有"}),"聲音（包含您的手動彈奏和所有伴奏樂器）。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"殘響 (Reverb):"})," 增加空間感。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"延遲 (Delay):"})," 產生回音效果。"]}),y.jsxs(l,{children:[y.jsx("strong",{children:"搖擺律動 (Swing):"})," 讓節奏帶有搖擺感，常用於爵士樂。"]})]})]})]}),y.jsxs("div",{className:"text-center pt-4 mt-4 border-t border-gray-600",children:[y.jsx("p",{className:"text-lg font-semibold text-purple-300",children:"開始探索吧！"}),y.jsx("p",{className:"text-gray-300",children:"結合不同的樂器、節奏和效果，創造出屬於您獨一無二的音樂！"})]})]}),y.jsx("footer",{className:"p-4 text-center",children:y.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-700",children:"關閉"})})]})})},uN=({onGenerate:o,isGenerating:t,generationError:s,isApiKeySet:a})=>{const[l,u]=Y.useState(""),[d,f]=Y.useState("auto"),m=g=>{g.preventDefault(),l.trim()&&!t&&a&&o(l.trim(),d)},p=t||!l.trim()||!a;return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-4",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-100 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-purple-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"AI 智慧創作"]}),y.jsxs("form",{onSubmit:m,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"ai-prompt",className:"block text-sm font-medium text-gray-300 mb-1",children:"描述您想要的音樂感覺"}),y.jsx("textarea",{id:"ai-prompt",rows:3,value:l,onChange:g=>u(g.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors placeholder-gray-400 disabled:opacity-50",placeholder:"例如：一首輕快的流行歌、悲傷的電影配樂、4個和弦的爵士樂...",disabled:t||!a,"aria-describedby":"ai-prompt-description"}),y.jsx("p",{id:"ai-prompt-description",className:"text-xs text-gray-400 mt-1",children:"AI 將會取代目前的和弦進行。"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"num-chords",className:"block text-sm font-medium text-gray-300 mb-1",children:"和弦數量 (選填)"}),y.jsxs("select",{id:"num-chords",value:d,onChange:g=>f(g.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition-colors disabled:opacity-50",disabled:t||!a,"aria-label":"選擇要生成的和弦數量",children:[y.jsx("option",{value:"auto",children:"自動 (4-8個)"}),Array.from({length:19},(g,v)=>v+2).map(g=>y.jsxs("option",{value:g,children:[g," 個和弦"]},g))]})]}),y.jsxs("button",{type:"submit",disabled:p,className:"w-full px-4 py-2.5 bg-purple-600 hover:bg-purple-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-purple-400 disabled:bg-gray-500 disabled:cursor-not-allowed flex items-center justify-center",title:a?"":"請先在上方設定 API 金鑰",children:[t&&y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t?"創作中...":"生成和弦進行"]}),s&&y.jsx("div",{className:"p-2 bg-red-800/50 border border-red-700 rounded-md text-xs text-red-300 text-center",role:"alert",children:s})]})]})},hN=({apiKey:o,onApiKeyChange:t})=>{const[s,a]=Y.useState(""),[l,u]=Y.useState(!!o);Y.useEffect(()=>{u(!!o)},[o]);const d=()=>{if(s.trim()){const m=s.trim();localStorage.setItem("gemini_api_key",m),t(m),a(""),alert("API 金鑰已儲存至您的瀏覽器。")}},f=()=>{window.confirm("確定要清除已儲存的 API 金鑰嗎？")&&(localStorage.removeItem("gemini_api_key"),t(null),alert("API 金鑰已清除。"))};return y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-3",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-100 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),"API 金鑰設定"]}),y.jsx("p",{className:"text-xs text-gray-400",children:"此金鑰將僅儲存在您本機的瀏覽器中，不會上傳。這是為了讓部署到公開網站後，您能安全地使用 AI 功能。"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("input",{type:"password",value:s,onChange:m=>a(m.target.value),className:"flex-grow p-2 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-yellow-500 focus:border-yellow-500 transition-colors placeholder-gray-400",placeholder:"貼上您的 Gemini API 金鑰","aria-label":"Gemini API Key Input"}),y.jsx("button",{onClick:d,disabled:!s.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-white font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 disabled:bg-gray-500 disabled:cursor-not-allowed",children:"儲存"})]}),l?y.jsxs("div",{className:"flex items-center justify-between text-sm text-green-400",children:[y.jsx("span",{children:"狀態：API 金鑰已設定。"}),y.jsx("button",{onClick:f,className:"text-xs text-red-400 hover:text-red-300 underline",children:"清除金鑰"})]}):y.jsx("p",{className:"text-sm text-yellow-400",children:"狀態：尚未設定 API 金鑰。AI 功能將無法使用。"})]})},ei=xv,hf=(o,t,s)=>{if(!ei||!ei.Frequency)return console.error("Tone.js or Tone.Frequency is not available in getChordNotes."),[];const{root:a,type:l,inversion:u}=o,d=zp[l];if(!d)return console.error(`No intervals found for chord type: ${l}`),[];const f=Ko(a,t,s);try{const m=ei.Frequency(f).toMidi();let p=d.map(g=>m+g);if(u>0&&p.length>1){const g=u%p.length;for(let v=0;v<g;v++)if(p.length>1){const x=p.shift();x!==void 0&&p.push(x+12)}}return p.map(g=>ei.Frequency(g,"midi").toNote())}catch(m){return console.error(`Error calculating chord notes for ${a}${l} (root: ${f}):`,m),[]}},dN=(o,t,s,a)=>{if(!ei||!ei.Frequency)return[];const l=hf(o,s,a);if(l.length===0)return[];const u=l[0],d=l[1]||u,f=l[2]||u;let m,p;try{const g=ei.Frequency(u).toMidi();m=ei.Frequency(g+12,"midi").toNote(),p=ei.Frequency(g+2,"midi").toNote()}catch{m=u,p=d}switch(t){case Me.Off:return[];case Me.RootNotes:return[{note:u,timeOffset:"0:0:0",duration:"1m"}];case Me.RootAndFifth:return[{note:u,timeOffset:"0:0:0",duration:"2n"},{note:f,timeOffset:"0:2:0",duration:"2n"}];case Me.SimpleArpeggio:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:d,timeOffset:"0:1:0",duration:"4n"},{note:f,timeOffset:"0:2:0",duration:"4n"},{note:m,timeOffset:"0:3:0",duration:"4n"}];case Me.WalkingBassSimple:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:u,timeOffset:"0:1:0",duration:"4n"},{note:f,timeOffset:"0:2:0",duration:"4n"},{note:d,timeOffset:"0:3:0",duration:"4n"}];case Me.WalkingBassMelodic:return[{note:u,timeOffset:"0:0:0",duration:"4n"},{note:p,timeOffset:"0:1:0",duration:"4n"},{note:d,timeOffset:"0:2:0",duration:"4n"},{note:f,timeOffset:"0:3:0",duration:"4n"}];case Me.FunkSlap:return[{note:u,timeOffset:"0:0:0",duration:"16n"},{note:u,timeOffset:"0:1:0",duration:"16n"},{note:m,timeOffset:"0:1:3",duration:"16n"},{note:u,timeOffset:"0:2:0",duration:"16n"},{note:f,timeOffset:"0:3:0",duration:"16n"},{note:m,timeOffset:"0:3:3",duration:"16n"}];default:return[{note:u,timeOffset:"0:0:0",duration:"1m"}]}},fN=o=>Object.values(Lt).includes(o),pN=o=>{const t=o.trim(),s=t.charAt(0).toUpperCase()+t.slice(1),a=Qc.indexOf(s);if(a>-1)return Qc[a];const l=E2.indexOf(s);return l>-1?Qc[l]:(console.warn(`[normalizeNoteName] Invalid note name received: "${o}"`),null)},ht=xv,Zo="samples/",dy=3,mN=.2,Wd="16n",gN=(o,t,s,a,l,u,d,f,m,p,g,v,x,T,S,A,D)=>{const[C,F]=Y.useState(!1),M=Y.useRef(null),K=Y.useRef(null),E=Y.useRef(new Map),q=Y.useRef(null),L=Y.useRef({}),R=Y.useRef(null),W=Y.useRef(null),Z=Y.useRef(null),I=Y.useRef(null),G=Y.useRef(null),nt=Y.useRef(null),at=Y.useRef(null),gt=Y.useRef(new Map),[O,Q]=Y.useState(0),[rt,pt]=Y.useState(!1),[w,H]=Y.useState(o),ot=Y.useRef(t),dt=Y.useRef(d),[xt,bt]=Y.useState(M2),[_t,Zt]=Y.useState(x),[ft,ee]=Y.useState(Qo),[Jt,re]=Y.useState(!1),Ae=Y.useRef(O),Wn=Y.useRef(ft),yn=Y.useRef(s),yt=Y.useRef(a),Ct=Y.useRef(u),vt=Y.useRef(f),zt=Y.useRef(p),Ut=Y.useRef(g),ne=Y.useRef(D),Ne=Y.useRef(v);Y.useEffect(()=>{Ae.current=O},[O]),Y.useEffect(()=>{Wn.current=ft},[ft]),Y.useEffect(()=>{yn.current=s},[s]),Y.useEffect(()=>{yt.current=a},[a]),Y.useEffect(()=>{Ct.current=u},[u]),Y.useEffect(()=>{vt.current=f},[f]),Y.useEffect(()=>{zt.current=p},[p]),Y.useEffect(()=>{Ut.current=g},[g]),Y.useEffect(()=>{ne.current=D},[D]),Y.useEffect(()=>{Ne.current=v},[v]),Y.useEffect(()=>{H(o)},[o]),Y.useEffect(()=>{ot.current=t},[t]),Y.useEffect(()=>{dt.current=d},[d]);const Qe=Y.useCallback(it=>{let Dt;switch(it){case en.AcousticPiano:Dt=new ht.Sampler({urls:ly,baseUrl:cy,release:1,volume:-3,onerror:mt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.AcousticPiano:",mt)});break;case en.SynthPiano:Dt=new ht.PolySynth({voice:ht.Synth,options:X2});break;case en.MellowSynth:Dt=new ht.PolySynth({voice:ht.Synth,options:Q2});break;case en.SampledGuitar:Dt=new ht.Sampler({urls:{A3:"guitar.wav"},baseUrl:Zo,release:1,onerror:mt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.SampledGuitar:",mt)});break;case en.StringEnsemble:Dt=new ht.Sampler({urls:{A4:"strings.wav"},baseUrl:Zo,release:1.5,onerror:mt=>console.error("[useAudio] CRITICAL: Failed to load samples for AccompanimentInstrument.StringEnsemble:",mt)});break;case en.FMSynth:Dt=new ht.PolySynth({voice:ht.FMSynth,options:{volume:-10,harmonicity:3,modulationIndex:10,oscillator:{type:"sine"},envelope:{attack:.01,decay:.2,sustain:.5,release:.8}}});break;case en.AMSynth:Dt=new ht.PolySynth({voice:ht.AMSynth,options:{volume:-10,harmonicity:2.5,oscillator:{type:"sawtooth"},envelope:{attack:.02,decay:.3,sustain:.4,release:.7}}});break;case en.Synth:Dt=new ht.PolySynth({voice:ht.Synth,options:W2});break;default:Dt=new ht.PolySynth({voice:ht.Synth,options:Z2})}return Dt},[]),Ze=Y.useCallback(it=>{G.current&&it.connect(G.current),nt.current&&it.connect(nt.current)},[]);Y.useEffect(()=>{if(!C)return;const it=E.current,Dt=new Set(s.map(mt=>mt.id));for(const mt of it.keys())if(!Dt.has(mt)){const Ot=it.get(mt);Ot&&(Ot.synth.dispose(),Ot.volumeNode.dispose()),it.delete(mt)}s.forEach(mt=>{const Ot=it.get(mt.id);if(Ot){if(Ot.volumeNode.volume.linearRampTo(mt.volume,.1),Ot.instrument!==mt.instrument){Ot.synth.dispose();const j=Qe(mt.instrument).connect(Ot.volumeNode);it.set(mt.id,{...Ot,synth:j,instrument:mt.instrument})}}else{const j=new ht.Volume(mt.volume);Ze(j),j.toDestination();const z=Qe(mt.instrument).connect(j);it.set(mt.id,{synth:z,volumeNode:j,instrument:mt.instrument})}})},[s,C,Qe,Ze]);const Kn=Y.useCallback((it,Dt)=>{M.current&&!M.current.disposed&&(M.current instanceof ht.PolySynth&&M.current.releaseAll(ht.now()),M.current.dispose(),M.current=null),gt.current.clear();let mt=null;const Ot=()=>{const z=[de.SampledGrand,de.SampledGuitar,de.StringEnsemble].includes(Qo)?de.ClassicGrand:Qo;M.current=new ht.PolySynth({voice:ht.Synth,options:Zd[z]}).connect(Dt),ee(z)};if(it===de.SampledGrand){re(!0);const j=new ht.Sampler({urls:ly,baseUrl:cy,release:1,volume:-6,onload:()=>{M.current===mt&&re(!1)},onerror:z=>{console.error("Error loading sampled grand piano:",z),(M.current===mt||!M.current)&&(re(!1),mt&&!mt.disposed&&mt.dispose(),Ot())}}).connect(Dt);return mt=j,M.current=j,j}else if(it===de.SampledGuitar){re(!0);const j=new ht.Sampler({urls:{A3:"guitar.wav"},baseUrl:Zo,release:1,onload:()=>{M.current===mt&&re(!1),console.log("[useAudio] User Piano Sampler (SampledGuitar) loaded successfully.")},onerror:z=>{console.error("Error loading sampled guitar:",z),(M.current===mt||!M.current)&&(re(!1),mt&&!mt.disposed&&mt.dispose(),Ot())}}).connect(Dt);return mt=j,M.current=j,j}else if(it===de.StringEnsemble){re(!0);const j=new ht.Sampler({urls:{A4:"strings.wav"},baseUrl:Zo,release:1.5,onload:()=>{M.current===mt&&re(!1),console.log("[useAudio] User Piano Sampler (StringEnsemble) loaded successfully.")},onerror:z=>{console.error("Error loading string ensemble:",z),(M.current===mt||!M.current)&&(re(!1),mt&&!mt.disposed&&mt.dispose(),Ot())}}).connect(Dt);return mt=j,M.current=j,j}else{re(!1);const j=it,et=[de.SampledGrand,de.SampledGuitar,de.StringEnsemble].includes(Qo)?de.ClassicGrand:Qo,ct=Zd[j]||Zd[et],ut=new ht.PolySynth({voice:ht.Synth,options:ct}).connect(Dt);return M.current=ut,ut}},[]),ui=Y.useCallback(it=>{Object.keys(Yt).forEach(Dt=>{const mt=Yt[Dt];L.current[mt]&&!L.current[mt].disposed&&L.current[mt].dispose();const Ot=G2[mt];mt===Yt.Kick||mt===Yt.Tom1?L.current[mt]=new ht.MembraneSynth(Ot).connect(it):mt===Yt.Snare||mt===Yt.HiHatClosed?L.current[mt]=new ht.NoiseSynth(Ot).connect(it):mt===Yt.CrashCymbal&&(L.current[mt]=new ht.MetalSynth(Ot).connect(it))})},[]),fn=Y.useCallback((it,Dt)=>{if(W.current&&!W.current.disposed&&(W.current.dispose(),W.current=null),it===_s.PopPulseBass)W.current=new ht.Sampler({urls:{A4:"pop-pulse-bass.wav"},baseUrl:Zo,release:.5,onload:()=>console.log("[useAudio] Bass Sampler (PopPulseBass) loaded successfully."),onerror:mt=>console.error("[useAudio] CRITICAL: Failed to load PopPulseBass sample:",mt)}).connect(Dt);else{const Ot=oy[it]||oy[_s.ElectricBass];W.current=new ht.MonoSynth(Ot).connect(Dt)}return W.current},[]);Y.useEffect(()=>{C&&Z.current&&!Z.current.disposed&&fn(g,Z.current)},[g,C,fn]);const je=Y.useCallback(async()=>{if(!ht)return!1;if(C)return!0;try{return await ht.start(),(!G.current||G.current.disposed)&&(G.current=new ht.Reverb({decay:7,wet:0}).toDestination()),(!nt.current||nt.current.disposed)&&(nt.current=new ht.FeedbackDelay({delayTime:"8n.",feedback:.7}).toDestination(),nt.current.wet.value=0),(!K.current||K.current.disposed)&&(K.current=new ht.Volume(_t),Ze(K.current),K.current.toDestination()),(!M.current||M.current.disposed)&&Kn(Wn.current,K.current),yn.current.forEach(it=>{if(!E.current.has(it.id)){const Dt=new ht.Volume(it.volume);Ze(Dt),Dt.toDestination();const mt=Qe(it.instrument).connect(Dt);E.current.set(it.id,{synth:mt,volumeNode:Dt,instrument:it.instrument})}}),(!R.current||R.current.disposed)&&(R.current=new ht.Volume(l),Ze(R.current),R.current.toDestination()),ui(R.current),(!Z.current||Z.current.disposed)&&(Z.current=new ht.Volume(m),Ze(Z.current),Z.current.toDestination()),(!W.current||W.current.disposed)&&fn(Ut.current,Z.current),at.current||(at.current=new ht.Loop(it=>{ht.Draw.schedule(()=>{S(!0),setTimeout(()=>S(!1),50)},it)},"4n").start(0)),ht.Transport.bpm.value=xt,ht.Transport.timeSignature=4,F(!0),!0}catch(it){return console.error("Error starting Tone.js or initializing synths:",it),F(!1),!1}},[C,xt,_t,Qe,Kn,ui,l,fn,m,Ze,S]),En=Y.useCallback(()=>{ht&&(pt(!1),T(null),ht.Transport.state==="started"&&ht.Transport.stop(ht.now()),A(new Set),E.current.forEach(it=>{it.synth.releaseAll(ht.now())}),W.current&&!W.current.disposed&&(W.current instanceof ht.Sampler?W.current.releaseAll(ht.now()):W.current.triggerRelease(ht.now())),I.current&&I.current.stop(0))},[T,A]),Ee=Y.useCallback((it,Dt,mt)=>{if(!ne.current)return;const Ot=ht.Time(mt).toSeconds();ht.Draw.schedule(()=>{A(j=>new Set([...j,...it]))},Dt),ht.Draw.schedule(()=>{A(j=>{const z=new Set(j);return it.forEach(et=>z.delete(et)),z})},Dt+Ot)},[A]);Y.useEffect(()=>{if(!C||!ht){q.current&&(q.current.stop(0),q.current.dispose(),q.current=null);return}if(q.current&&(q.current.stop(0),q.current.dispose(),q.current=null),w.length>0){const it=new ht.Sequence((Dt,mt)=>{if(ht.Draw.schedule(()=>{T(mt.originalIndex)},Dt),yn.current.forEach(Ot=>{const j=E.current.get(Ot.id);if(!j||j.synth.disposed)return;const{synth:z}=j,et=Ot.rhythmPattern;if(et!==os.Custom){const ct=hf(mt,dy,Ae.current),ut=wv.find(At=>At.value===et);ct.length>0&&ut&&ut.hits&&ut.hits.forEach(At=>{const Bt=ht.Time(At.offset).toSeconds(),se=Dt+Bt;z.triggerAttackRelease(ct,At.duration,se),Ee(ct,se,At.duration)})}else{const ct=hf(mt,dy,Ae.current),ut=ot.current[Ot.id],At=ut?ut[mt.originalIndex]:null;if(ct.length>0&&At)for(let Bt=0;Bt<4;Bt++){const se=At[Bt];if(se==="off")continue;const me=se,pn=ht.Time(`0:${Bt}:0`).toSeconds(),vn=Dt+pn;z.triggerAttackRelease(ct,me,vn),Ee(ct,vn,me)}}}),yt.current&&Ct.current!==fe.Off){let Ot;if(Ct.current===fe.Custom?Ot=dt.current[mt.originalIndex]:Ot=Y2[Ct.current],Ot)for(let j=0;j<uu;j++)for(let z=0;z<Cr;z++){const et=ht.Time(`0:${j}:${z}`).toSeconds(),ct=Dt+et;Object.keys(Yt).forEach(ut=>{var Bt,se;const At=Yt[ut];if(Ot&&((se=(Bt=Ot[At])==null?void 0:Bt[j])!=null&&se[z])){const me=L.current[At];me&&!me.disposed&&(At===Yt.Kick?me.triggerAttackRelease("C2",Wd,ct):At===Yt.Tom1?me.triggerAttackRelease("G2",Wd,ct):At===Yt.CrashCymbal?ht.Draw.schedule(()=>{me&&!me.disposed&&me.triggerAttack(ct)},ct):me.triggerAttackRelease(Wd,ct))}})}}vt.current&&W.current&&!W.current.disposed&&zt.current!==Me.Off&&zt.current!==Me.AiGenerated&&dN(mt,zt.current,L2,Ae.current).forEach(j=>{const z=ht.Time(j.timeOffset).toSeconds(),et=Dt+z;W.current.triggerAttackRelease(j.note,j.duration,et),Ee([j.note],et,j.duration)})},w,"1m");it.loop=!0,q.current=it,rt&&ht.Transport.state!=="started"?(ht.Transport.start(ht.now()+.1),it.start(ht.Transport.seconds+.15)):rt&&it.state!=="started"&&it.start(ht.Transport.seconds+.05)}else rt&&En()},[w,C,rt,En,T,Ee]),Y.useEffect(()=>{if(!C||!W.current)return;I.current&&(I.current.stop(0).dispose(),I.current=null);const it=zt.current,Dt=Ne.current,mt=w.length;if(it===Me.AiGenerated&&Dt&&Dt.length>0&&mt>0){const Ot=Dt.map(z=>({time:z.time,note:z.note,duration:z.duration})),j=new ht.Part((z,et)=>{W.current&&!W.current.disposed&&vt.current&&(W.current.triggerAttackRelease(et.note,et.duration,z),Ee([et.note],z,et.duration))},Ot);j.loop=!0,j.loopEnd=`${mt}m`,I.current=j,rt&&ht.Transport.state==="started"&&j.start(0)}},[C,g,v,p,w.length,rt,Ee]);const Pr=Y.useCallback((it,Dt,mt=!1)=>{const Ot=()=>{if(M.current&&!M.current.disposed&&ht&&!Jt){const j=Ko(it,Dt,Ae.current);M.current.triggerAttack(j,ht.now()),mt&&gt.current.set(`${it}${Dt}`,j)}else Jt||je().then(j=>{if(j&&M.current&&!M.current.disposed&&!Jt){const z=Ko(it,Dt,Ae.current);M.current.triggerAttack(z,ht.now()),mt&&gt.current.set(`${it}${Dt}`,z)}})};C?Jt||Ot():je().then(j=>{j&&!Jt&&Ot()})},[C,je,Jt]),Yr=Y.useCallback((it,Dt,mt=!1)=>{let Ot=null;const j=`${it}${Dt}`;mt?(Ot=Ko(it,Dt,Ae.current),gt.current.has(j)&&gt.current.delete(j)):Ot=Ko(it,Dt,Ae.current),Ot&&M.current&&!M.current.disposed&&ht&&!Jt&&M.current.triggerRelease([Ot],ht.now()+mN)},[Jt]),Xr=Y.useCallback(async()=>{!ht||!(C||await je())||w.length!==0&&(rt||(pt(!0),ht.Transport.state!=="started"&&(ht.Transport.start(ht.now()+.05),q.current&&q.current.start(ht.Transport.seconds+.1),I.current&&I.current.start(ht.Transport.seconds+.1))))},[C,je,w.length,rt]),hi=Y.useCallback(it=>{bt(it),C&&ht&&(ht.Transport.bpm.value=it)},[C]),di=Y.useCallback(it=>{Zt(it),C&&K.current&&!K.current.disposed&&(K.current.volume.value=it)},[C]),ds=Y.useCallback(it=>{Wn.current===it&&!Jt||(ee(it),C&&ht&&K.current&&!K.current.disposed?Kn(it,K.current):!C&&[de.SampledGrand,de.SampledGuitar,de.StringEnsemble].includes(it)&&re(!0))},[C,Kn,Jt]),fi=Y.useCallback(it=>{M.current&&!M.current.disposed&&ht&&!Jt&&M.current instanceof ht.PolySynth&&M.current.releaseAll(ht.now()),gt.current.clear(),Q(it)},[Jt]),zs=Y.useCallback(it=>{C&&G.current&&G.current.wet.linearRampTo(Math.pow(it,.6),.1)},[C]),Qr=Y.useCallback(it=>{C&&nt.current&&nt.current.wet.linearRampTo(Math.pow(it,.8),.1)},[C]),pi=Y.useCallback(it=>{C&&ht&&(ht.Transport.swing=it*.9)},[C]),mi=Y.useCallback(it=>{yt.current=it},[]),Ji=Y.useCallback(it=>{C&&R.current&&!R.current.disposed&&(R.current.volume.value=it)},[C]),ws=Y.useCallback(it=>{Ct.current=it},[]),Zr=Y.useCallback(it=>{vt.current=it},[]),Oa=Y.useCallback(it=>{C&&Z.current&&!Z.current.disposed&&(Z.current.volume.value=it)},[C]),Ma=Y.useCallback(it=>{zt.current=it,it!==Me.AiGenerated&&I.current&&I.current.stop(0)},[]),$i=Y.useCallback(it=>{Ut.current=it,C&&Z.current&&ht&&!Z.current.disposed&&fn(it,Z.current)},[C,fn]);return Y.useEffect(()=>()=>{ht&&(ht.Transport.state!=="stopped"&&ht.Transport.stop(),ht.Transport.cancel()),M.current&&!M.current.disposed&&(M.current instanceof ht.PolySynth&&M.current.releaseAll(ht.now()),M.current.dispose()),K.current&&!K.current.disposed&&K.current.dispose(),E.current.forEach(it=>{it.synth&&!it.synth.disposed&&it.synth.dispose(),it.volumeNode&&!it.volumeNode.disposed&&it.volumeNode.dispose()}),E.current.clear(),G.current&&!G.current.disposed&&G.current.dispose(),nt.current&&!nt.current.disposed&&nt.current.dispose(),at.current&&!at.current.disposed&&at.current.dispose(),R.current&&!R.current.disposed&&R.current.dispose(),Object.values(L.current).filter(it=>it&&!it.disposed).forEach(it=>it.dispose()),W.current&&!W.current.disposed&&W.current.dispose(),Z.current&&!Z.current.disposed&&Z.current.dispose(),q.current&&(q.current.stop(0),q.current.clear(),q.current.dispose()),I.current&&(I.current.stop(0),I.current.clear(),I.current.dispose()),gt.current.clear()},[]),{attackPianoNote:Pr,releasePianoNote:Yr,startAccompaniment:Xr,stopAccompaniment:En,setAccompanimentBPM:hi,setUserPianoInstrument:ds,setUserPianoVolume:di,setTransposition:fi,currentTransposition:O,isAccompanimentPlaying:rt,currentBPM:xt,currentUserPianoVolume:_t,currentUserPianoInstrument:ft,isAudioReady:C,isPianoLoading:Jt,setReverbLevel:zs,setDelayLevel:Qr,setSwing:pi,setDrumsEnabled:mi,setDrumVolume:Ji,setDrumPattern:ws,setBassEnabled:Zr,setBassVolume:Oa,setBassPattern:Ma,setBassInstrument:$i}},_N=()=>{const[o,t]=Y.useState([]),[s,a]=Y.useState(new Set),[l,u]=Y.useState({}),[d,f]=Y.useState([{id:`layer-${Date.now()}`,...Li}]),[m,p]=Y.useState(q2),[g,v]=Y.useState(Gd),[x,T]=Y.useState(Hd),[S,A]=Y.useState(Pd),[D,C]=Y.useState([]),[F,M]=Y.useState(null),[K,E]=Y.useState(Yd),[q,L]=Y.useState(Xd),[R,W]=Y.useState(Pc),[Z,I]=Y.useState(Qd),[G,nt]=Y.useState(null),[at,gt]=Y.useState(()=>localStorage.getItem("gemini_api_key")),[O,Q]=Y.useState({type:null,isLoading:!1,error:null}),[rt,pt]=Y.useState(null),[w,H]=Y.useState(.1),[ot,dt]=Y.useState(.1),[xt,bt]=Y.useState(0),[_t,Zt]=Y.useState(!1),[ft,ee]=Y.useState(!0),[Jt,re]=Y.useState(new Set),[Ae,Wn]=Y.useState(!1),[yn,yt]=Y.useState(()=>{let j={};try{const z=window.localStorage.getItem(hy);if(z){const et=JSON.parse(z);Object.keys(et).forEach(ct=>{const ut=et[ct];if(ut&&ut.progression){const At=ut.progression.map(Bt=>({...Bt,inversion:Bt.inversion===void 0?0:Bt.inversion}));ut.accompanimentLayers||(ut.accompanimentLayers=[{id:`layer-${Date.now()}`,instrument:ut.instrument||Li.instrument,volume:ut.volume||Li.volume,rhythmPattern:ut.rhythmPattern||Li.rhythmPattern}]),j[ct]={progression:At,accompanimentLayers:ut.accompanimentLayers,customRhythms:ut.customRhythms,customRhythm:ut.customRhythm,drumsEnabled:ut.drumsEnabled===void 0?Gd:ut.drumsEnabled,drumVolume:ut.drumVolume===void 0?Hd:ut.drumVolume,drumPattern:ut.drumPattern===void 0?Pd:ut.drumPattern,customDrumData:ut.customDrumData||Array(ut.progression.length).fill(null).map(()=>_a()),bassEnabled:ut.bassEnabled===void 0?Yd:ut.bassEnabled,bassVolume:ut.bassVolume===void 0?Xd:ut.bassVolume,bassPattern:ut.bassPattern===void 0?Pc:ut.bassPattern,bassInstrument:ut.bassInstrument===void 0?Qd:ut.bassInstrument,aiBassEvents:ut.aiBassEvents||null}}})}}catch(z){console.error("[App.tsx] CRITICAL ERROR reading/parsing saved progressions from localStorage during init:",z),j={}}return j});Y.useEffect(()=>{try{const j={...yn};Object.keys(j).forEach(z=>{j[z].customRhythm&&delete j[z].customRhythm}),window.localStorage.setItem(hy,JSON.stringify(j))}catch(j){console.error("[App.tsx] Error saving progressions to localStorage (in useEffect):",j)}},[yn]);const Ct=Y.useMemo(()=>o.map((j,z)=>({...j,originalIndex:z})),[o]),vt=gN(Ct,l,d,g,x,S,D,K,q,R,Z,G,m,pt,Zt,re,ft),zt=Y.useCallback(()=>{vt.stopAccompaniment(),pt(null)},[vt]),Ut=Y.useCallback(()=>{vt.isAccompanimentPlaying?zt():vt.startAccompaniment()},[vt,zt]),ne=j=>{p(j),vt.setUserPianoVolume(j)},Ne=j=>{T(j),vt.setDrumVolume(j)},Qe=j=>{L(j),vt.setBassVolume(j)},Ze=Y.useCallback(j=>{H(j),vt.setReverbLevel(j)},[vt]),Kn=Y.useCallback(j=>{dt(j),vt.setDelayLevel(j)},[vt]),ui=Y.useCallback(j=>{bt(j),vt.setSwing(j)},[vt]),fn=Y.useCallback(j=>{t(z=>[...z,j]),u(z=>{const et={...z};for(const ct in et)et[ct]=[...et[ct],Array(4).fill(uf)];return et}),C(z=>[...z,_a()])},[]),je=Y.useCallback(j=>{const z=o.findIndex(et=>et.id===j);z!==-1&&(t(et=>et.filter(ct=>ct.id!==j)),u(et=>{const ct={...et};for(const ut in ct){const At=[...ct[ut]];At.splice(z,1),ct[ut]=At}return ct}),C(et=>{const ct=[...et];return ct.splice(z,1),ct}))},[o]),En=Y.useCallback(()=>{vt.isAccompanimentPlaying&&zt(),t([]),u({}),C([]),M(null),nt(null)},[vt,zt]),Ee=Y.useCallback((j,z)=>{t(et=>et.map(ct=>ct.id===j?{...ct,inversion:z}:ct))},[]),Pr=Y.useCallback((j,z,et,ct)=>{u(ut=>{const At={...ut},Bt=At[j];if(Bt){const se=Bt.map((me,pn)=>{if(pn===z){const vn=[...me];return vn[et]=ct,vn}return me});At[j]=se}return At})},[]),Yr=Y.useCallback((j,z,et,ct,ut)=>{C(At=>{const Bt=[...At];Bt[j]||(Bt[j]=_a());const se={...Bt[j]};se[z]||(se[z]=Array(4).fill(null).map(()=>Array(4).fill(!1)));const me=se[z].map(pn=>[...pn]);return me[et][ct]=ut,se[z]=me,Bt[j]=se,Bt})},[]),Xr=Y.useCallback(()=>{f(j=>[...j,{id:`layer-${Date.now()}-${Math.random()}`,...Li}])},[]),hi=Y.useCallback(j=>{f(z=>z.filter(et=>et.id!==j)),u(z=>{if(z[j]){const et={...z};return delete et[j],et}return z})},[]),di=Y.useCallback((j,z,et)=>{f(ct=>ct.map(ut=>ut.id===j?{...ut,[z]:et}:ut)),z==="rhythmPattern"&&(et===os.Custom?u(ct=>{if(!ct[j]){const ut=Array(o.length).fill(null).map(()=>Array(4).fill(uf));return{...ct,[j]:ut}}return ct}):u(ct=>{if(ct[j]){const ut={...ct};return delete ut[j],ut}return ct}))},[o.length]),ds=Y.useCallback(()=>{if(o.length===0){alert("和弦進行是空的，無法儲存。");return}let j=window.prompt("請輸入此和弦進行的名稱：");if(j===null)return;const z=j.trim();if(z===""){alert("名稱不能為空。");return}yt(et=>({...et,[z]:{progression:o,customRhythms:l,accompanimentLayers:d,drumsEnabled:g,drumVolume:x,drumPattern:S,customDrumData:D,bassEnabled:K,bassVolume:q,bassPattern:R,bassInstrument:Z,aiBassEvents:G}})),alert(`和弦進行 "${z}" 已儲存！`)},[o,l,d,g,x,S,D,K,q,R,Z,G]),fi=Y.useCallback(j=>{const z=yn[j];if(z){vt.isAccompanimentPlaying&&zt();const et=z.progression.map(ut=>({...ut,inversion:ut.inversion===void 0?0:ut.inversion}));if(t(et),z.accompanimentLayers&&z.accompanimentLayers.length>0)f(z.accompanimentLayers);else{const ut={id:`layer-${Date.now()}`,instrument:z.instrument||Li.instrument,volume:z.volume||Li.volume,rhythmPattern:z.rhythmPattern||Li.rhythmPattern};f([ut])}const ct={};z.customRhythms?u(z.customRhythms):(z.customRhythm&&(z.accompanimentLayers||[]).forEach(At=>{At.rhythmPattern===os.Custom&&(ct[At.id]=z.customRhythm)}),u(ct)),v(z.drumsEnabled===void 0?Gd:z.drumsEnabled),T(z.drumVolume===void 0?Hd:z.drumVolume),A(z.drumPattern===void 0?Pd:z.drumPattern),C(z.customDrumData||Array(z.progression.length).fill(null).map(()=>_a())),E(z.bassEnabled===void 0?Yd:z.bassEnabled),L(z.bassVolume===void 0?Xd:z.bassVolume),W(z.bassPattern===void 0?Pc:z.bassPattern),I(z.bassInstrument===void 0?Qd:z.bassInstrument),nt(z.aiBassEvents||null),M(null),alert(`和弦進行 "${j}" 已載入！`)}else alert(`無法載入和弦進行 "${j}"。`)},[yn,vt,zt]),zs=Y.useCallback(j=>{window.confirm(`確定要刪除和弦進行 "${j}" 嗎？`)&&(yt(z=>{const et={...z};return delete et[j],et}),alert(`和弦進行 "${j}" 已刪除！`))},[]),Qr=Y.useCallback((j,z)=>{t(et=>{const ct=Array.from(et),[ut]=ct.splice(j,1);return ct.splice(z,0,ut),ct}),u(et=>{const ct={...et};for(const ut in ct){const At=Array.from(ct[ut]),[Bt]=At.splice(j,1);At.splice(z,0,Bt),ct[ut]=At}return ct}),C(et=>{const ct=Array.from(et),[ut]=ct.splice(j,1);return ct.splice(z,0,ut),ct})},[]),pi=Y.useCallback((j,z,et=!1)=>{vt.isPianoLoading||vt.attackPianoNote(j,z,et)},[vt]),mi=Y.useCallback((j,z,et=!1)=>{vt.isPianoLoading||vt.releasePianoNote(j,z,et)},[vt]),Ji=j=>{gt(j)},ws=Y.useCallback(j=>{if(!Array.isArray(j))throw new Error("AI response is not a valid array.");const z=[];for(const et of j){const ct=pN(et.root);if(!ct)throw new Error(`AI returned an invalid chord root: ${et.root}`);if(!fN(et.type))throw new Error(`AI returned an invalid chord type: ${et.type}`);z.push({id:`${Date.now()}-${Math.random().toString(36).substring(2,7)}`,root:ct,type:et.type,inversion:0})}vt.isAccompanimentPlaying&&zt(),t(z),u({}),C(Array(z.length).fill(null).map(()=>_a())),nt(null),W(Pc)},[vt,zt]),Zr=async(j,z)=>{if(!O.isLoading){if(!at){Q({type:"chords",isLoading:!1,error:"請先在 API 設定中輸入您的 Gemini API 金鑰。"});return}if(!(o.length>0&&!window.confirm("AI 將會取代您目前的和弦進行。確定要繼續嗎？"))){Q({type:"chords",isLoading:!0,error:null});try{const et=new Ho({apiKey:at}),ct="You are an expert music theorist and composer. Your task is to generate a common chord progression based on the user's description. Your response MUST be in JSON format.",ut=z!=="auto"?`The progression must contain exactly ${parseInt(z,10)} chords.`:"The progression should contain between 4 and 8 chords.",At=await et.models.generateContent({model:"gemini-2.5-flash",contents:`User request: '${j}'`,config:{systemInstruction:`${ct} ${ut}`,responseMimeType:"application/json",responseSchema:{type:He.ARRAY,items:{type:He.OBJECT,properties:{root:{type:He.STRING,description:"The chord's root note, e.g., 'C', 'G#', 'Bb'"},type:{type:He.STRING,description:`The chord type, must be one of: '${Object.values(Lt).join("', '")}'`}},required:["root","type"]}}}});ws(JSON.parse(At.text))}catch(et){const ct=et instanceof Error?et.message:"An unknown error occurred.";console.error("Error generating chord progression:",et),Q({type:"chords",isLoading:!1,error:`Generation failed: ${ct}`})}finally{Q({type:null,isLoading:!1,error:null})}}}},Oa=async j=>{if(!(O.isLoading||o.length===0)){if(!at){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}Q({type:"style",isLoading:!0,error:null});try{const z=new Ho({apiKey:at}),et=o.map(At=>`${At.root}${At.type}`).join(", "),ct=await z.models.generateContent({model:"gemini-2.5-flash",contents:`Re-harmonize the following chord progression: [${et}] into a "${j}" style.`,config:{systemInstruction:"You are a master music arranger. Your task is to re-harmonize a given chord progression into a new style specified by the user. You can use more advanced chords (e.g., sevenths, ninths, altered chords) and substitutions, but you must maintain the general harmonic flow and the same number of chords as the original. Your response MUST be a JSON array with the exact same structure and number of elements as the original progression.",responseMimeType:"application/json",responseSchema:{type:He.ARRAY,items:{type:He.OBJECT,properties:{root:{type:He.STRING,description:"The chord's root note, e.g., 'C', 'G#', 'Bb'"},type:{type:He.STRING,description:`The chord type, must be one of: '${Object.values(Lt).join("', '")}'`}},required:["root","type"]}}}}),ut=JSON.parse(ct.text);if(ut.length!==o.length)throw new Error(`AI returned ${ut.length} chords, but expected ${o.length}.`);ws(ut)}catch(z){const et=z instanceof Error?z.message:"An unknown error occurred.";console.error("Error transforming chord progression:",z),alert(`風格轉換失敗: ${et}`)}finally{Q({type:null,isLoading:!1,error:null})}}},Ma=async()=>{if(!(O.isLoading||o.length<2)){if(!at){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}if(window.confirm("這將會由 AI 自動調整您所有和弦的轉位以獲得更流暢的聲音。確定要繼續嗎？")){Q({type:"voicing",isLoading:!0,error:null});try{const j=new Ho({apiKey:at}),z=o.map(ut=>{var At;return{chord_name:`${ut.root}${ut.type}`,max_inversion:(((At=zp[ut.type])==null?void 0:At.length)||1)-1}}),et=await j.models.generateContent({model:"gemini-2.5-flash",contents:`Analyze this chord progression and determine the optimal inversion for each chord to ensure smooth voice leading. Progression data: ${JSON.stringify(z)}`,config:{systemInstruction:"You are a music arrangement expert specializing in voice leading. Your task is to analyze a chord progression and assign the optimal inversion for each chord to minimize melodic movement in the top voice. The input provides each chord's name and its maximum possible inversion number. Your response MUST be a JSON array of numbers. The length of your array must be identical to the input progression's length. Each number in your array represents the chosen inversion for the corresponding chord and MUST NOT exceed that chord's 'max_inversion' value.",responseMimeType:"application/json",responseSchema:{type:He.ARRAY,items:{type:He.INTEGER}}}}),ct=JSON.parse(et.text);if(ct.length!==o.length)throw new Error(`AI returned ${ct.length} inversions, but expected ${o.length}.`);t(ut=>ut.map((At,Bt)=>({...At,inversion:ct[Bt]})))}catch(j){const z=j instanceof Error?j.message:"An unknown error occurred.";console.error("Error with Smart Voicing:",j),alert(`AI 智慧轉位失敗: ${z}`)}finally{Q({type:null,isLoading:!1,error:null})}}}},$i=async j=>{if(!(O.isLoading||o.length===0)){if(!at){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}Q({type:"bass",isLoading:!0,error:null});try{const z=new Ho({apiKey:at}),et=o.map(At=>`${At.root}${At.type}`).join(", "),ct=await z.models.generateContent({model:"gemini-2.5-flash",contents:`Create a bassline for the chord progression [${et}]. The user wants a style described as: "${j}".`,config:{systemInstruction:`You are a professional bass player. Your task is to create a monophonic bassline for a given chord progression. The bassline should be musically interesting, fit the user's description, and stay within a typical bass range (E1 to G3). The response MUST be a JSON array of note events. Each event is an object with "note" (e.g., "C2"), "time" (in "measure:beat:subdivision" format, e.g., "0:0:0"), and "duration" (e.g., "4n", "8n."). The total duration should match the progression length (${o.length} measures).`,responseMimeType:"application/json",responseSchema:{type:He.ARRAY,items:{type:He.OBJECT,properties:{note:{type:He.STRING,description:"The note to play, e.g., 'A2'"},time:{type:He.STRING,description:'The absolute time "M:B:S", e.g. "1:2:0"'},duration:{type:He.STRING,description:'The note duration, e.g., "8n"'}},required:["note","time","duration"]}}}}),ut=JSON.parse(ct.text);nt(ut)}catch(z){const et=z instanceof Error?z.message:"An unknown error occurred.";console.error("Error generating AI bassline:",z),alert(`AI 貝斯線生成失敗: ${et}`)}finally{Q({type:null,isLoading:!1,error:null})}}},it=Y.useCallback((j,z)=>{C(et=>{const ct=[...et],ut=_a();for(const At of Zc.map(Bt=>Bt.value))z[At]&&(ut[At]=z[At]);return ct[j]=ut,ct})},[]),Dt=Y.useCallback(j=>{M(z=>{if(z&&z.sourceIndex===j)return null;const et=D[j];return et?{pattern:et,sourceIndex:j}:null})},[D]),mt=Y.useCallback(j=>{F&&it(j,F.pattern)},[F,it]),Ot=async(j,z)=>{if(!O.isLoading){if(!at){alert("請先在 API 設定中輸入您的 Gemini API 金鑰。");return}Q({type:"drums",isLoading:!0,error:null,drumChordIndex:z});try{const et=new Ho({apiKey:at}),ct=Zc.map(Bt=>Bt.value).join(", "),ut=await et.models.generateContent({model:"gemini-2.5-flash",contents:`User's request for a one-measure drum pattern: "${j}"`,config:{systemInstruction:`You are an expert drum machine programmer. Your task is to generate a one-measure (16-step) drum pattern based on a user's text description. The response MUST be a JSON object. The keys of the object must be instrument names from the following list: [${ct}]. The value for each key must be a 4x4 array of booleans, representing 4 beats, each with 4 subdivisions (16th notes). 'true' means a hit, 'false' means a rest.`,responseMimeType:"application/json",responseSchema:{type:He.OBJECT,properties:Zc.reduce((Bt,se)=>(Bt[se.value]={type:He.ARRAY,items:{type:He.ARRAY,items:{type:He.BOOLEAN}}},Bt),{})}}}),At=JSON.parse(ut.text);it(z,At)}catch(et){const ct=et instanceof Error?et.message:"An unknown error occurred.";console.error("Error generating drum pattern:",et),alert(`鼓組生成失敗: ${ct}`)}finally{Q({type:null,isLoading:!1,error:null})}}};return Y.useEffect(()=>{const j=et=>{const ct=et.target;if(ct&&(ct.tagName==="INPUT"||ct.tagName==="SELECT"||ct.tagName==="TEXTAREA"||ct.isContentEditable))return;if(et.code==="Space"){et.preventDefault(),Ut();return}const ut=et.key.toLowerCase(),At=uy[ut];if(At&&!vt.isPianoLoading){et.preventDefault();const{note:Bt,octave:se}=At,me=`${Bt}${se}`;s.has(me)||(pi(Bt,se,!0),a(pn=>new Set(pn).add(me)))}},z=et=>{const ct=et.key.toLowerCase(),ut=et.target;if(ut&&(ut.tagName==="INPUT"||ut.tagName==="SELECT"||ut.tagName==="TEXTAREA"||ut.isContentEditable))return;const At=uy[ct];if(At&&!vt.isPianoLoading){et.preventDefault();const{note:Bt,octave:se}=At,me=`${Bt}${se}`;mi(Bt,se,!0),a(pn=>{const vn=new Set(pn);return vn.delete(me),vn})}};return document.addEventListener("keydown",j),document.addEventListener("keyup",z),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",z)}},[vt,pi,mi,s,Ut]),y.jsxs(y.Fragment,{children:[y.jsx(cN,{isOpen:Ae,onClose:()=>Wn(!1)}),y.jsx("div",{className:"min-h-screen bg-gray-800 text-gray-100 selection:bg-purple-500 selection:text-white",children:y.jsxs("div",{className:"container mx-auto p-2 sm:p-4 flex flex-col items-center space-y-4 sm:space-y-6",children:[y.jsxs("header",{className:"text-center my-3 sm:my-5",children:[y.jsx("h1",{className:"text-3xl sm:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500",children:"互動鋼琴工作室"}),y.jsx("p",{className:"text-gray-300 mt-2 text-xs sm:text-base",children:"自由彈奏、編曲，並透過多樣樂器與效果，打造您的專屬伴奏。"}),y.jsxs("button",{onClick:()=>Wn(!0),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-800",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline-block mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"使用教學"]})]}),y.jsx($2,{onNoteAttack:pi,onNoteRelease:mi,pressedKeys:s,accompanimentActiveNotes:ft?Jt:new Set}),y.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[y.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[y.jsx(tN,{currentTransposition:vt.currentTransposition,onTransposeChange:vt.setTransposition}),y.jsxs("div",{className:"p-4 bg-gray-700 rounded-lg shadow-md space-y-3",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"主鍵盤設定 (Main Keyboard)"}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"userPianoInstrument",className:"block text-sm font-medium text-gray-300 mb-1",children:"音色 (Instrument)"}),y.jsx("select",{id:"userPianoInstrument",value:vt.currentUserPianoInstrument,onChange:j=>vt.setUserPianoInstrument(j.target.value),className:"w-full p-2.5 bg-gray-600 border border-gray-500 rounded-md text-gray-100 focus:ring-blue-500 focus:border-blue-500 transition-colors","aria-label":"選擇您的鋼琴音色",disabled:vt.isPianoLoading,children:F2.map(j=>y.jsx("option",{value:j.value,children:j.label},j.value))}),vt.isPianoLoading&&y.jsx("p",{className:"text-xs text-yellow-400 text-center mt-2",children:"鋼琴音色載入中..."})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"userPianoVolume",className:"block text-sm font-medium text-gray-300 mb-1",children:["音量 (Volume): ",m.toFixed(0)," dB"]}),y.jsx("input",{type:"range",id:"userPianoVolume",min:z2,max:B2,step:"1",value:m,onChange:j=>ne(parseFloat(j.target.value)),className:"w-full h-2.5 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-400","aria-label":"調整主鍵盤音量"})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsx("label",{htmlFor:"showAccompanimentNotes",className:"text-sm font-medium text-gray-300",children:"顯示伴奏音符"}),y.jsx("button",{id:"showAccompanimentNotes",onClick:()=>ee(!ft),className:`px-3 py-1.5 rounded-md text-xs font-semibold transition-colors ${ft?"bg-blue-600 hover:bg-blue-700":"bg-gray-500 hover:bg-gray-400"}`,"aria-pressed":ft,children:ft?"已啟用":"已停用"})]})]}),y.jsx(nN,{onAddChord:fn}),y.jsx(hN,{apiKey:at,onApiKeyChange:Ji}),y.jsx(uN,{onGenerate:Zr,isGenerating:O.isLoading&&O.type==="chords",generationError:O.type==="chords"?O.error:null,isApiKeySet:!!at}),y.jsx(lN,{savedProgressions:yn,onLoadProgression:fi,onDeleteProgression:zs})]}),y.jsxs("div",{className:"space-y-4 sm:space-y-6 flex flex-col",children:[y.jsx(sN,{progression:o,onRemoveChord:je,onClearProgression:En,onSaveProgression:ds,onReorderProgression:Qr,onUpdateChordInversion:Ee,currentlyPlayingChordIndex:rt,onStyleTransfer:Oa,isGeneratingStyle:O.isLoading&&O.type==="style",isApiKeySet:!!at,onSmartVoicing:Ma,isGeneratingVoicing:O.isLoading&&O.type==="voicing"}),y.jsx(oN,{bpm:vt.currentBPM,onBpmChange:vt.setAccompanimentBPM,isBeat:_t,accompanimentLayers:d,onAddAccompanimentLayer:Xr,onRemoveAccompanimentLayer:hi,onUpdateAccompanimentLayer:di,isPlaying:vt.isAccompanimentPlaying,onPlay:vt.startAccompaniment,onStop:zt,isAudioReady:vt.isAudioReady,chordProgressionEmpty:o.length===0,chordProgressionForCustomEditor:Ct,customRhythms:l,onUpdateCustomBeat:Pr,reverbLevel:w,onReverbLevelChange:Ze,delayLevel:ot,onDelayLevelChange:Kn,swing:xt,onSwingChange:ui,drumsEnabled:g,onDrumsEnabledChange:v,drumVolume:x,onDrumVolumeChange:Ne,drumPattern:S,onDrumPatternChange:A,customDrumData:D,onUpdateCustomDrumCell:Yr,onGenerateDrumPattern:Ot,drumPatternClipboard:F,onCopyDrumPattern:Dt,onPasteDrumPattern:mt,generationState:O,isApiKeySet:!!at,bassEnabled:K,onBassEnabledChange:E,bassVolume:q,onBassVolumeChange:Qe,bassPattern:R,onBassPatternChange:W,bassInstrument:Z,onBassInstrumentChange:I,onGenerateAIBassline:$i})]})]}),y.jsxs("footer",{className:"text-center text-gray-500 text-xs sm:text-sm mt-6 sm:mt-8 pb-4",children:[y.jsx("p",{children:"技術支持：React, Tailwind CSS, Tone.js, Gemini API"}),y.jsxs("p",{children:["© ",new Date().getFullYear()," by hsuchen"]})]})]})})]})},df=document.getElementById("root");if(!df)throw console.error("CRITICAL: Could not find root element to mount to. HTML structure issue?"),document.body.innerHTML=`
    <div style="color: #f3f4f6; background-color: #1f2937; padding: 20px; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;">
      <h1>應用程式啟動錯誤 (Application Startup Error)</h1>
      <p>無法找到用於掛載應用程式的根元素 (Could not find root element to mount to).</p>
      <p>請檢查 HTML 結構 (Please check the HTML structure).</p>
    </div>`,new Error("Could not find root element to mount to");try{Qx.createRoot(df).render(y.jsx(hu.StrictMode,{children:y.jsx(_N,{})}))}catch(o){console.error("CRITICAL: Error during React rendering in main.tsx:",o),df.innerHTML=`
    <div style="color: #f3f4f6; background-color: #1f2937; padding: 20px; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
      <h1 style="color: #ef4444; font-size: 1.5rem; margin-bottom: 1rem;">應用程式啟動時發生嚴重錯誤</h1>
      <h2 style="color: #f87171; font-size: 1.2rem; margin-bottom: 0.5rem;">(A critical error occurred and the application could not start)</h2>
      <p style="margin-bottom: 1rem;">請開啟瀏覽器的開發者控制台 (通常按 F12)，查看 "Console" 分頁獲取詳細錯誤資訊。</p>
      <p style="margin-bottom: 1rem;">(Please check the browser console (usually F12) for more details in the "Console" tab.)</p>
      ${o instanceof Error?`<pre style="background-color: #374151; padding: 10px; border-radius: 5px; max-width: 80%; overflow-wrap: break-word; white-space: pre-wrap; text-align: left;">${o.name}: ${o.message}
${o.stack}</pre>`:""}
    </div>
  `}
